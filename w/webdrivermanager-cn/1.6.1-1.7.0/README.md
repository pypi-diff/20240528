# Comparing `tmp/webdrivermanager_cn-1.6.1-py3-none-any.whl.zip` & `tmp/webdrivermanager_cn-1.7.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,26 +1,28 @@
-Zip file size: 22775 bytes, number of entries: 24
--rw-r--r--  2.0 unx      281 b- defN 24-May-22 09:49 webdrivermanager_cn/__init__.py
--rw-r--r--  2.0 unx      743 b- defN 24-May-22 09:49 webdrivermanager_cn/chrome.py
--rw-r--r--  2.0 unx      512 b- defN 24-May-22 09:49 webdrivermanager_cn/geckodriver.py
--rw-r--r--  2.0 unx      301 b- defN 24-May-22 09:49 webdrivermanager_cn/microsoft.py
--rw-r--r--  2.0 unx       18 b- defN 24-May-22 09:49 webdrivermanager_cn/version.py
--rw-r--r--  2.0 unx        0 b- defN 24-May-22 09:49 webdrivermanager_cn/core/__init__.py
--rw-r--r--  2.0 unx     5310 b- defN 24-May-22 09:49 webdrivermanager_cn/core/cache_manager.py
--rw-r--r--  2.0 unx     2538 b- defN 24-May-22 09:49 webdrivermanager_cn/core/config.py
--rw-r--r--  2.0 unx     1468 b- defN 24-May-22 09:49 webdrivermanager_cn/core/download_manager.py
--rw-r--r--  2.0 unx     4571 b- defN 24-May-22 09:49 webdrivermanager_cn/core/driver.py
--rw-r--r--  2.0 unx     3819 b- defN 24-May-22 09:49 webdrivermanager_cn/core/file_manager.py
--rw-r--r--  2.0 unx     1042 b- defN 24-May-22 09:49 webdrivermanager_cn/core/log_manager.py
--rw-r--r--  2.0 unx     2036 b- defN 24-May-22 09:49 webdrivermanager_cn/core/os_manager.py
--rw-r--r--  2.0 unx       86 b- defN 24-May-22 09:49 webdrivermanager_cn/core/time_.py
--rw-r--r--  2.0 unx     6674 b- defN 24-May-22 09:49 webdrivermanager_cn/core/version_manager.py
--rw-r--r--  2.0 unx        0 b- defN 24-May-22 09:49 webdrivermanager_cn/drivers/__init__.py
--rw-r--r--  2.0 unx     2425 b- defN 24-May-22 09:49 webdrivermanager_cn/drivers/chrome.py
--rw-r--r--  2.0 unx     1379 b- defN 24-May-22 09:49 webdrivermanager_cn/drivers/geckodriver.py
--rw-r--r--  2.0 unx     1880 b- defN 24-May-22 09:49 webdrivermanager_cn/drivers/microsoft.py
--rw-r--r--  2.0 unx    11558 b- defN 24-May-22 09:50 webdrivermanager_cn-1.6.1.dist-info/LICENSE
--rw-r--r--  2.0 unx     3807 b- defN 24-May-22 09:50 webdrivermanager_cn-1.6.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-22 09:50 webdrivermanager_cn-1.6.1.dist-info/WHEEL
--rw-r--r--  2.0 unx       20 b- defN 24-May-22 09:50 webdrivermanager_cn-1.6.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2212 b- defN 24-May-22 09:50 webdrivermanager_cn-1.6.1.dist-info/RECORD
-24 files, 52772 bytes uncompressed, 19099 bytes compressed:  63.8%
+Zip file size: 24079 bytes, number of entries: 26
+-rw-r--r--  2.0 unx      281 b- defN 24-May-28 05:24 webdrivermanager_cn/__init__.py
+-rw-r--r--  2.0 unx      743 b- defN 24-May-28 05:24 webdrivermanager_cn/chrome.py
+-rw-r--r--  2.0 unx      512 b- defN 24-May-28 05:24 webdrivermanager_cn/geckodriver.py
+-rw-r--r--  2.0 unx      305 b- defN 24-May-28 05:24 webdrivermanager_cn/microsoft.py
+-rw-r--r--  2.0 unx       18 b- defN 24-May-28 05:24 webdrivermanager_cn/version.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-28 05:24 webdrivermanager_cn/core/__init__.py
+-rw-r--r--  2.0 unx     5298 b- defN 24-May-28 05:24 webdrivermanager_cn/core/cache_manager.py
+-rw-r--r--  2.0 unx     2602 b- defN 24-May-28 05:24 webdrivermanager_cn/core/config.py
+-rw-r--r--  2.0 unx      991 b- defN 24-May-28 05:24 webdrivermanager_cn/core/download_manager.py
+-rw-r--r--  2.0 unx     5014 b- defN 24-May-28 05:24 webdrivermanager_cn/core/driver.py
+-rw-r--r--  2.0 unx     3823 b- defN 24-May-28 05:24 webdrivermanager_cn/core/file_manager.py
+-rw-r--r--  2.0 unx     1227 b- defN 24-May-28 05:24 webdrivermanager_cn/core/log_manager.py
+-rw-r--r--  2.0 unx      785 b- defN 24-May-28 05:24 webdrivermanager_cn/core/mixin.py
+-rw-r--r--  2.0 unx     2036 b- defN 24-May-28 05:24 webdrivermanager_cn/core/os_manager.py
+-rw-r--r--  2.0 unx     1365 b- defN 24-May-28 05:24 webdrivermanager_cn/core/request.py
+-rw-r--r--  2.0 unx       86 b- defN 24-May-28 05:24 webdrivermanager_cn/core/time_.py
+-rw-r--r--  2.0 unx     6210 b- defN 24-May-28 05:24 webdrivermanager_cn/core/version_manager.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-28 05:24 webdrivermanager_cn/drivers/__init__.py
+-rw-r--r--  2.0 unx     2361 b- defN 24-May-28 05:24 webdrivermanager_cn/drivers/chrome.py
+-rw-r--r--  2.0 unx     1379 b- defN 24-May-28 05:24 webdrivermanager_cn/drivers/geckodriver.py
+-rw-r--r--  2.0 unx     1828 b- defN 24-May-28 05:24 webdrivermanager_cn/drivers/microsoft.py
+-rw-r--r--  2.0 unx    11558 b- defN 24-May-28 05:24 webdrivermanager_cn-1.7.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx     3807 b- defN 24-May-28 05:24 webdrivermanager_cn-1.7.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-28 05:24 webdrivermanager_cn-1.7.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       20 b- defN 24-May-28 05:24 webdrivermanager_cn-1.7.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2392 b- defN 24-May-28 05:24 webdrivermanager_cn-1.7.0.dist-info/RECORD
+26 files, 54733 bytes uncompressed, 20115 bytes compressed:  63.2%
```

## zipnote {}

```diff
@@ -30,17 +30,23 @@
 
 Filename: webdrivermanager_cn/core/file_manager.py
 Comment: 
 
 Filename: webdrivermanager_cn/core/log_manager.py
 Comment: 
 
+Filename: webdrivermanager_cn/core/mixin.py
+Comment: 
+
 Filename: webdrivermanager_cn/core/os_manager.py
 Comment: 
 
+Filename: webdrivermanager_cn/core/request.py
+Comment: 
+
 Filename: webdrivermanager_cn/core/time_.py
 Comment: 
 
 Filename: webdrivermanager_cn/core/version_manager.py
 Comment: 
 
 Filename: webdrivermanager_cn/drivers/__init__.py
@@ -51,23 +57,23 @@
 
 Filename: webdrivermanager_cn/drivers/geckodriver.py
 Comment: 
 
 Filename: webdrivermanager_cn/drivers/microsoft.py
 Comment: 
 
-Filename: webdrivermanager_cn-1.6.1.dist-info/LICENSE
+Filename: webdrivermanager_cn-1.7.0.dist-info/LICENSE
 Comment: 
 
-Filename: webdrivermanager_cn-1.6.1.dist-info/METADATA
+Filename: webdrivermanager_cn-1.7.0.dist-info/METADATA
 Comment: 
 
-Filename: webdrivermanager_cn-1.6.1.dist-info/WHEEL
+Filename: webdrivermanager_cn-1.7.0.dist-info/WHEEL
 Comment: 
 
-Filename: webdrivermanager_cn-1.6.1.dist-info/top_level.txt
+Filename: webdrivermanager_cn-1.7.0.dist-info/top_level.txt
 Comment: 
 
-Filename: webdrivermanager_cn-1.6.1.dist-info/RECORD
+Filename: webdrivermanager_cn-1.7.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## webdrivermanager_cn/microsoft.py

```diff
@@ -1,12 +1,12 @@
 from webdrivermanager_cn.drivers.microsoft import EdgeDriver
 
 
 class EdgeWebDriverManager:
-    def __init__(self, version=None, path=None):
+    def __init__(self, version='latest', path=None):
         self.__driver = EdgeDriver(
             version=version,
             path=path,
         )
 
     def install(self):
         return self.__driver.install()
```

## webdrivermanager_cn/version.py

```diff
@@ -1 +1 @@
-VERSION = '1.6.1'
+VERSION = '1.7.0'
```

## webdrivermanager_cn/core/cache_manager.py

```diff
@@ -2,20 +2,20 @@
 Driver 缓存记录
 """
 import json
 import os
 import shutil
 
 from webdrivermanager_cn.core.config import clear_wdm_cache_time
-from webdrivermanager_cn.core.log_manager import wdm_logger
+from webdrivermanager_cn.core.log_manager import LogMixin
 from webdrivermanager_cn.core.os_manager import OSManager
 from webdrivermanager_cn.core.time_ import get_time
 
 
-class DriverCacheManager:
+class DriverCacheManager(LogMixin):
     """
     Driver 缓存管理
     """
 
     def __init__(self, root_dir=None):
         """
         缓存管理
@@ -112,17 +112,17 @@
             _version = info['version']
             try:
                 read_time = int(info['last_read_time'])
             except:
                 read_time = 0
             if not read_time or int(get_time('%Y%m%d')) - read_time >= time_interval:
                 _clear_version.append(_version)
-                wdm_logger().debug(f'{driver_name} - {_version} 已过期 {read_time}, 即将清理!')
+                self.log.debug(f'{driver_name} - {_version} 已过期 {read_time}, 即将清理!')
                 continue
-            wdm_logger().debug(f'{driver_name} - {_version} 尚未过期 {read_time}')
+            self.log.debug(f'{driver_name} - {_version} 尚未过期 {read_time}')
         return _clear_version
 
     def set_cache(self, driver_name, version, **kwargs):
         """
         写入缓存信息
         :param driver_name:
         :param version:
@@ -140,29 +140,29 @@
         :param driver_name:
         :param version:
         :return:
         """
         times = get_time('%Y%m%d')
         if self.get_cache(driver_name=driver_name, version=version, key='last_read_time') != times:
             self.set_cache(driver_name=driver_name, version=version, last_read_time=f"{times}")
-            wdm_logger().debug(f'更新 {driver_name} - {version} 读取时间: {times}')
+            self.log.debug(f'更新 {driver_name} - {version} 读取时间: {times}')
 
     def clear_cache_path(self, driver_name):
         """
         以当前时间为准，清除超过清理时间的 WebDriver 目录
         :param driver_name:
         :return:
         """
         _clear_version = self.get_clear_version_by_read_time(driver_name)
 
         for version in _clear_version:
             clear_path = os.path.join(self.root_dir, driver_name, version)
             if os.path.exists(clear_path):
                 shutil.rmtree(clear_path)
             else:
-                wdm_logger().warning(f'缓存目录无该路径: {clear_path}')
+                self.log.warning(f'缓存目录无该路径: {clear_path}')
 
             cache_data = self.__read_cache
             cache_data[driver_name].pop(self.format_key(driver_name=driver_name, version=version))
             self.__dump_cache(cache_data)
 
-            wdm_logger().info(f'清理过期WebDriver: {clear_path}')
+            self.log.info(f'清理过期WebDriver: {clear_path}')
```

## webdrivermanager_cn/core/config.py

```diff
@@ -1,15 +1,16 @@
 # ------------------
 # Driver 源相关
 # ------------------
 import logging
-import os
 
 from urllib3 import disable_warnings
 
+from webdrivermanager_cn.core.mixin import EnvMixin
+
 # ChromeDriver 源地址
 ChromeDriverUrl = 'https://registry.npmmirror.com/-/binary/chromedriver'
 ChromeDriverUrlNew = 'https://registry.npmmirror.com/-/binary/chrome-for-testing'
 ChromeDriver = 'https://googlechromelabs.github.io/chrome-for-testing'
 ChromeDriverApiNew = 'https://gitee.com/Joker_JH/DriverRelease/raw/master/ChromeDriverLastVersion.json'
 
 # Firefox 驱动源地址
@@ -27,69 +28,72 @@
 
 def str2bool(value):
     if isinstance(value, bool):
         return value
     return value.lower() in ['true', '1']
 
 
+__env = EnvMixin()
+
+
 def init_log():
     """
     是否初始化WDM默认logger
     默认为 False
     执行以下代码为开启
     os.environ['WDM_LOG'] = 'true'
     :return:
     """
     try:
-        return str2bool(os.getenv('WDM_LOG', False))
+        return str2bool(__env.get('WDM_LOG', False))
     except:
         return False
 
 
 def init_log_level():
     """
     初始化默认WDM日志等级
     当 init_log 函数返回值为 True 时生效
     执行以下代码修改
     os.environ['WDM_LOG_LEVEL'] = f'{logging.INFO}'
     :return:
     """
     default = logging.INFO
     try:
-        return int(os.getenv('WDM_LOG_LEVEL', default))
+        return int(__env.get('WDM_LOG_LEVEL', default))
     except:
         return default
 
 
 def clear_wdm_cache_time():
     """
     清理超过时间的 WebDriver
     默认为 5 天
     执行以下代码修改
     os.environ['WDM_CACHE_TIME'] = 5
     :return:
     """
     default = 5
     try:
-        return int(os.getenv('WDM_CACHE_TIME', default))
+        return int(__env.get('WDM_CACHE_TIME', default))
     except:
         return default
 
 
 def verify_not():
     """
     禁用SSL认证（代理）
     默认为 False
     执行以下代码修改
     os.environ['WDM_VERIFY'] = 'true'
     :return:
     """
     default = False
     try:
-        return str2bool(os.getenv('WDM_VERIFY', default))
+        return str2bool(__env.get('WDM_VERIFY', default))
     except:
         return default
 
 
 if not verify_not():
     disable_warnings()
 
@@ -100,10 +104,10 @@
     默认为 10 秒
     执行以下代码修改
     os.environ['WDM_TIMEOUT'] = '10'
     :return:
     """
     default = 10
     try:
-        return int(os.getenv('WDM_TIMEOUT', default))
+        return int(__env.get('WDM_TIMEOUT', default))
     except:
         return default
```

## webdrivermanager_cn/core/download_manager.py

```diff
@@ -1,45 +1,31 @@
 """
 下载
 """
 import os
 
-import requests as requests
+from webdrivermanager_cn.core.log_manager import LogMixin
+from webdrivermanager_cn.core.request import request_get
 
-from webdrivermanager_cn.core.config import verify_not, request_timeout
-from webdrivermanager_cn.version import VERSION
-from webdrivermanager_cn.core.log_manager import wdm_logger
 
-
-def headers(**kwargs):
-    _headers = {
-        'User-Agent': f'python-requests/{requests.__version__} webdrivermanagercn/{VERSION}'
-    }
-    _headers.update(kwargs)
-    return _headers
-
-
-class DownloadManager:
+class DownloadManager(LogMixin):
     """
     文件下载
     """
 
     def download_file(self, url, down_path):
         """
         从指定的url中下载文件到指定目录中
         :param url:
         :param down_path:
         :return:
         """
-        wdm_logger().debug(f'开始执行下载: {url}')
-        response = requests.get(url, timeout=request_timeout(), headers=headers(), verify=verify_not())
-        wdm_logger().debug(f'url: {url} - {response.status_code}')
-        response.raise_for_status()
-        response.close()
-        wdm_logger().debug(f'本地下载路径: {down_path}')
+        self.log.debug(f'开始执行下载: {url}')
+        response = request_get(url)
+        self.log.debug(f'本地下载路径: {down_path}')
         os.makedirs(down_path, exist_ok=True)
         file_path = os.path.join(down_path, self.get_filename_by_url(url))
         with open(file_path, "wb") as f:
             f.write(response.content)
         return file_path
 
     @staticmethod
```

## webdrivermanager_cn/core/driver.py

```diff
@@ -6,76 +6,95 @@
 
 from packaging import version as vs
 from requests import RequestException
 
 from webdrivermanager_cn.core.cache_manager import DriverCacheManager
 from webdrivermanager_cn.core.download_manager import DownloadManager
 from webdrivermanager_cn.core.file_manager import FileManager
-from webdrivermanager_cn.core.log_manager import wdm_logger, set_logger_init
+from webdrivermanager_cn.core.mixin import EnvMixin
 from webdrivermanager_cn.core.os_manager import OSManager
 from webdrivermanager_cn.core.time_ import get_time
 
 
-class DriverManager(metaclass=abc.ABCMeta):
+class DriverManager(EnvMixin, metaclass=abc.ABCMeta):
     """
     Driver抽象类
     不能实例化，只能继承并重写抽象方法
     """
 
     def __init__(self, driver_name, version, root_dir):
         """
         Driver基类
         :param driver_name: Driver名称
         :param version: Driver版本
         :param root_dir: 缓存文件地址
         """
-        set_logger_init()
-        wdm_logger().info(f'{"*" * 10} WebDriverManagerCn {"*" * 10}')
+        self.set_logger_init()
+        self.log.info(f'{"*" * 10} WebDriverManagerCn {"*" * 10}')
 
         self.driver_name = driver_name
         self.driver_version = version
         self.os_info = OSManager()
         self.__cache_manager = DriverCacheManager(root_dir=root_dir)
         self.__driver_path = os.path.join(
             self.__cache_manager.root_dir,
             self.driver_name,
             self.driver_version
         )
-        wdm_logger().info(f'获取WebDriver: {self.driver_name} - {self.driver_version}')
+        self.log.info(f'获取WebDriver: {self.driver_name} - {self.driver_version}')
 
     @staticmethod
     def version_parse(version):
         """
         版本号解析器
         :return:
         """
         return vs.parse(version)
 
     def get_driver_path_by_cache(self):
         """
         获取 cache 中对应 WebDriver 的路径
         :return: path or None
         """
-        return self.__cache_manager.get_cache(
-            driver_name=self.driver_name,
-            version=self.driver_version,
-            key='path',
-        )
+
+        path = self.get_env
+
+        if not path:
+            path = self.__cache_manager.get_cache(
+                driver_name=self.driver_name,
+                version=self.driver_version,
+                key='path',
+            )
+            if path:
+                self.set_env(path)
+
+        return path
 
     @property
-    def get_last_read_by_cache(self):
-        """
-        获取 cache 中对应 WebDriver 的路径
-        :return: path or None
-        """
-        return self.__cache_manager.get_cache(
-            driver_name=self.driver_name,
-            version=self.driver_version,
-            key='last_read_time',
-        )
+    def __env_key(self):
+        return f'{self.driver_name}_{self.driver_version}'
+
+    @property
+    def get_env(self):
+        return self.get(self.__env_key)
+
+    def set_env(self, path):
+        self.set(self.__env_key, path)
+
+    # @property
+    # def get_last_read_by_cache(self):
+    #     """
+    #     获取 cache 中对应 WebDriver 的路径
+    #     :return: path or None
+    #     """
+    #     return self.__cache_manager.get_cache(
+    #         driver_name=self.driver_name,
+    #         version=self.driver_version,
+    #         key='last_read_time',
+    #     )
 
     def __set_cache(self, path):
         """
         写入cache信息
         :param path: 解压后的driver全路径
         :return: None
         """
@@ -123,21 +142,23 @@
         如果webdriver对应缓存存在，则返回文件路径
         如果不存在，则下载、解压、写入缓存，返回路径
         :raise: Exception，如果下载版本不存在，则会报错
         :return: abs path
         """
         driver_path = self.get_driver_path_by_cache()
         if not driver_path:
-            wdm_logger().info('缓存不存在，开始下载...')
+            self.log.info('缓存不存在，开始下载...')
             try:
                 driver_path = self.download()
             except RequestException as e:
                 raise Exception(f"下载WebDriver: {self.driver_name}-{self.driver_version} 失败！-- {e}")
             self.__set_cache(driver_path)
-        wdm_logger().info(f'WebDriver路径: {driver_path} - 上次读取时间 {self.get_last_read_by_cache}')
-        os.chmod(driver_path, 0o755)
+            self.set_env(driver_path)
 
-        # 写入读取时间，并清理超期 WebDriver
-        self.__cache_manager.set_read_cache_date(self.driver_name, self.driver_version)
-        self.__cache_manager.clear_cache_path(self.driver_name)
+            # 写入读取时间，并清理超期 WebDriver
+            self.__cache_manager.set_read_cache_date(self.driver_name, self.driver_version)
+            self.__cache_manager.clear_cache_path(self.driver_name)
+
+        # self.log.info(f'WebDriver路径: {driver_path} - 上次读取时间 {self.get_last_read_by_cache}')
+        os.chmod(driver_path, 0o755)
 
         return driver_path
```

## webdrivermanager_cn/core/file_manager.py

```diff
@@ -1,19 +1,19 @@
 """
 文件管理
 """
 import os.path
 import tarfile
 import zipfile
 
-from webdrivermanager_cn.core.log_manager import wdm_logger
+from webdrivermanager_cn.core.log_manager import LogMixin
 from webdrivermanager_cn.core.os_manager import OSManager, OSType
 
 
-class FileManager:
+class FileManager(LogMixin):
     """
     文件管理、解压、获取driver路径
     """
 
     def __init__(self, file_path, driver_name):
         """
         文件管理
@@ -43,15 +43,15 @@
 
     def unpack(self):
         """
         文件解压缩
         :return:
         """
         self.__unpack_path = self.__unpack_obj.unpack()
-        wdm_logger().debug(f'文件解压路径: {self.__unpack_path}')
+        self.log.debug(f'文件解压路径: {self.__unpack_path}')
 
     def unpack_list(self):
         """
         获取解压缩后的文件列表（全路径）
         :return:
         """
         file_list = []
```

## webdrivermanager_cn/core/log_manager.py

```diff
@@ -1,42 +1,50 @@
 import logging
 
-from webdrivermanager_cn.core.config import init_log, init_log_level
-
-__logger = logging.getLogger('WDM')
-__logger_init_flag = False
-
-
-def wdm_logger():
-    return __logger
+LOGGER = logging.getLogger('WDM')
+LOGGER_INIT_FLAG = False
 
 
 def set_logger(logger: logging.Logger):
     if not isinstance(logger, logging.Logger):
         raise Exception(f'logger 类型不正确！{logger}')
 
-    global __logger
-    __logger = logger
-
-
-def set_logger_init():
-    global __logger_init_flag
-
-    # 如果当前logger不是wdm，或者不需要输出log的话，直接返回
-    if __logger.name != 'WDM' or not init_log():
-        return
-
-    # 如果已经初始化过默认logger的属性，直接返回
-    if __logger_init_flag:
-        return
-
-    __logger_init_flag = True
+    global LOGGER
+    LOGGER = logger
 
-    # log 等级
-    __logger.setLevel(init_log_level())
 
-    # log 格式
-    log_format = "%(asctime)s-[%(filename)s:%(lineno)d]-[%(levelname)s]: %(message)s"
-    formatter = logging.Formatter(fmt=log_format)
-    stream = logging.StreamHandler()
-    stream.setFormatter(formatter)
-    __logger.addHandler(stream)
+class LogMixin:
+    """
+    log 混入类
+    """
+
+    @property
+    def log(self):
+        global LOGGER
+        return LOGGER
+
+    @staticmethod
+    def set_logger_init():
+        from webdrivermanager_cn.core.config import init_log, init_log_level
+
+        global LOGGER_INIT_FLAG
+        global LOGGER
+
+        # 如果当前logger不是wdm，或者不需要输出log的话，直接返回
+        if LOGGER.name != 'WDM' or not init_log():
+            return
+
+        # 如果已经初始化过默认logger的属性，直接返回
+        if LOGGER_INIT_FLAG:
+            return
+
+        LOGGER_INIT_FLAG = True
+
+        # log 等级
+        LOGGER.setLevel(init_log_level())
+
+        # log 格式
+        log_format = "%(asctime)s-[%(filename)s:%(lineno)d]-[%(levelname)s]: %(message)s"
+        formatter = logging.Formatter(fmt=log_format)
+        stream = logging.StreamHandler()
+        stream.setFormatter(formatter)
+        LOGGER.addHandler(stream)
```

## webdrivermanager_cn/core/version_manager.py

```diff
@@ -1,22 +1,20 @@
 """
 搜索版本，如果版本不存在，则找比当前小一版本
 """
 import os
 import re
 import subprocess
 
-import requests
 from packaging import version as vs
 
 from webdrivermanager_cn.core import config
-from webdrivermanager_cn.core.config import verify_not, request_timeout
-from webdrivermanager_cn.core.download_manager import headers
-from webdrivermanager_cn.core.log_manager import wdm_logger
+from webdrivermanager_cn.core.log_manager import LogMixin
 from webdrivermanager_cn.core.os_manager import OSManager, OSType
+from webdrivermanager_cn.core.request import request_get
 
 
 class ClientType:
     Chrome = "google-chrome"
     Chromium = "chromium"
     Edge = "edge"
     Firefox = "firefox"
@@ -64,31 +62,29 @@
 
     @property
     def _version_list(self):
         """
         解析driver url，获取所有driver版本
         :return:
         """
-        response = requests.get(self.get_host, timeout=request_timeout(), headers=headers(), verify=verify_not())
-        response.close()
-        response_data = response.json()
+        response_data = request_get(self.get_host).json()
         return [i["name"].replace("/", "") for i in response_data if 'LATEST' not in i]
 
     def _get_chrome_correct_version(self):
         """
         根据Chrome版本，返回源上找到合适的ChromeDriver版本
         :return:
         """
         _chrome_version = f'{self.version_obj.major}.{self.version_obj.minor}.{self.version_obj.micro}'
         _chrome_version_list = [i for i in self._version_list if _chrome_version in i and 'LATEST' not in i]
         _chrome_version_list = sorted(_chrome_version_list, key=lambda x: tuple(map(int, x.split('.'))))
         return _chrome_version_list[-1]
 
 
-class GetClientVersion(GetUrl):
+class GetClientVersion(GetUrl, LogMixin):
     """
     获取当前环境下浏览器版本
     """
 
     def __init__(self, version=""):
         super().__init__()
         self._version = version
@@ -108,15 +104,15 @@
 
     def cmd_dict(self, client):
         """
         根据不同操作系统、不同客户端，返回获取版本号的命令、正则表达式
         :param client:
         :return:
         """
-        wdm_logger().debug(f'当前OS: {self.__os_name}')
+        self.log.debug(f'当前OS: {self.__os_name}')
         cmd_map = {
             OSType.MAC: {
                 ClientType.Chrome: r"/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --version",
                 ClientType.Firefox: r"/Applications/Firefox.app/Contents/MacOS/firefox --version",
                 ClientType.Edge: r'/Applications/Microsoft\ Edge.app/Contents/MacOS/Microsoft\ Edge --version',
             },
             OSType.WIN: {
@@ -128,15 +124,15 @@
                 ClientType.Chrome: "google-chrome --version",
                 ClientType.Firefox: "firefox --version",
                 ClientType.Edge: "microsoft-edge --version",
             },
         }
         cmd = cmd_map[self.__os_name][client]
         client_pattern = CLIENT_PATTERN[client]
-        wdm_logger().debug(f'执行命令: {cmd}, 解析方式: {client_pattern}')
+        self.log.debug(f'执行命令: {cmd}, 解析方式: {client_pattern}')
         return cmd, client_pattern
 
     @staticmethod
     def __read_version_from_cmd(cmd, pattern):
         """
         执行命令，并根据传入的正则表达式，获取到正确的版本号
         :param cmd:
@@ -159,15 +155,15 @@
         获取指定浏览器版本
         如果当前类的属性中有版本号，则直接返回目标版本号
         :param client:
         :return:
         """
         if not self._version:
             self._version = self.__read_version_from_cmd(*self.cmd_dict(client))
-            wdm_logger().info(f'获取本地浏览器版本: {client} - {self._version}')
+            self.log.info(f'获取本地浏览器版本: {client} - {self._version}')
         return self._version
 
     def get_chrome_correct_version(self):
         """
         获取chrome版本对应的chromedriver版本，如果没有对应的chromedriver版本，则模糊向下匹配一个版本
         :return:
         """
@@ -178,20 +174,16 @@
     def get_chrome_latest_version(flag='Stable'):
         """
         获取最新版本的ChromeDriver版本
         :param flag: Stable、Beta、Dev、Canary
         :return:
         """
         assert flag in ['Stable', 'Beta', 'Dev', 'Canary'], '参数异常！'
-        response = requests.get(config.ChromeDriverApiNew, timeout=request_timeout(), headers=headers(), verify=verify_not())
-        response.close()
-        return response.json()['channels'][flag]['version']
+        return request_get(config.ChromeDriverApiNew).json()['channels'][flag]['version']
 
     @property
     def get_geckodriver_version(self):
         """
         获取Firefox driver版本信息
         :return:
         """
-        response = requests.get(url=config.GeckodriverApiNew, timeout=request_timeout(), headers=headers(), verify=verify_not())
-        response.close()
-        return response.json()["latest"]
+        return request_get(config.GeckodriverApiNew).json()["latest"]
```

## webdrivermanager_cn/drivers/chrome.py

```diff
@@ -1,10 +1,9 @@
 from webdrivermanager_cn.core import config
 from webdrivermanager_cn.core.driver import DriverManager
-from webdrivermanager_cn.core.log_manager import wdm_logger
 from webdrivermanager_cn.core.os_manager import OSType
 from webdrivermanager_cn.core.version_manager import GetClientVersion
 
 
 class ChromeDriver(DriverManager):
     def __init__(self, version='latest', path=None):
         self._chromedriver_version = version
@@ -26,15 +25,15 @@
             return True
 
     def download_url(self):
         if self.__is_new_version(self._version):
             url = f'{config.ChromeDriverUrlNew}/{self.driver_version}/{self.get_os_info()}/{self.get_driver_name}'
         else:
             url = f'{config.ChromeDriverUrl}/{self.driver_version}/{self.get_driver_name}'
-        wdm_logger().debug(f'拼接下载url: {url}')
+        self.log.debug(f'拼接下载url: {url}')
         return url
 
     @property
     def _version(self):
         """
         获取当前系统内chrome的版本，并模糊匹配当前版本最高版本的ChromeDriver，否则返回指定的ChromeDriver版本
         :return:
```

## webdrivermanager_cn/drivers/microsoft.py

```diff
@@ -1,21 +1,18 @@
-import requests
-
 from webdrivermanager_cn.core import config
-from webdrivermanager_cn.core.config import verify_not, request_timeout
-from webdrivermanager_cn.core.download_manager import headers
 from webdrivermanager_cn.core.driver import DriverManager
 from webdrivermanager_cn.core.os_manager import OSType
+from webdrivermanager_cn.core.request import request_get
 from webdrivermanager_cn.core.version_manager import GetClientVersion, ClientType
 
 
 class EdgeDriver(DriverManager):
     def __init__(self, version=None, path=None):
         super().__init__(driver_name="edgedriver", version="", root_dir=path)
-        self.driver_version = version if version else self.get_version()
+        self.driver_version = self.get_version(version)  # edge 官方没有latest的url，只能根据本地版本获取
 
     def get_driver_name(self) -> str:
         return f"{self.driver_name}_{self.get_os_info()}.zip"
 
     def get_os_info(self):
         _os_info = self.os_info.get_os_type
         if self.os_info.get_mac_framework in ["_m1", "_m2"]:
@@ -23,27 +20,26 @@
         return _os_info
 
     def download_url(self) -> str:
         return f"{config.EdgeDriverUrl}/{self.driver_version}/{self.get_driver_name()}"
 
     def get_version(self, version=None):
         """
-        获取edge driver版本
+        根据传入版本，或者自动获取的Edge版本，获取匹配的webdriver版本
         :param version:
         :return:
         """
-        if version:
-            return version
-
-        client_version = GetClientVersion().get_version(ClientType.Edge)
+        if version and version != 'latest':
+            client_version = version
+        else:
+            client_version = GetClientVersion().get_version(ClientType.Edge)
         client_version_parser = GetClientVersion(client_version)
         _os_name = self.os_info.get_os_name
         if _os_name == OSType.WIN:
             suffix = "windows"
         elif _os_name == OSType.MAC:
             suffix = "macos"
         else:
             suffix = OSType.LINUX
         latest_url = f"{config.EdgeDriverUrl}/LATEST_RELEASE_{client_version_parser.version_obj.major}_{suffix.upper()}"
-        response = requests.get(latest_url, timeout=request_timeout(), headers=headers(), verify=verify_not())
-        response.close()
-        return response.text.strip()
+
+        return request_get(latest_url).text.strip()
```

## Comparing `webdrivermanager_cn-1.6.1.dist-info/LICENSE` & `webdrivermanager_cn-1.7.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `webdrivermanager_cn-1.6.1.dist-info/METADATA` & `webdrivermanager_cn-1.7.0.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: webdrivermanager-cn
-Version: 1.6.1
+Version: 1.7.0
 Summary: 基于阿里源开发的WebDriver管理工具
 Home-page: https://gitee.com/Joker_JH/webdrivermanagercn
 Author: 御风
 Author-email: eternallyyf@163.com
 License: Apache License 2.0
 Platform: UNKNOWN
 Requires-Python: >=3.7
```

## Comparing `webdrivermanager_cn-1.6.1.dist-info/RECORD` & `webdrivermanager_cn-1.7.0.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,24 +1,26 @@
 webdrivermanager_cn/__init__.py,sha256=FoN8c9Ra0F3kWvds4QOMmTKXxgMBXhKpFAmy7yXfVOA,281
 webdrivermanager_cn/chrome.py,sha256=UcVUJfTPRkKzOaSvdu8YPGiJ9x_6aIbkBOCLYdCxRFk,743
 webdrivermanager_cn/geckodriver.py,sha256=9wOwZCPRTw6-SW30kNih7gIc6VzyAimqGIA6g02Gkfs,512
-webdrivermanager_cn/microsoft.py,sha256=vnp3UZqSUilUhgqRCAhtCdLZ0DUbzYDpDHEH8YU7R5w,301
-webdrivermanager_cn/version.py,sha256=oDluLC_9mfrig_c5jmX2Gi7Ne_JiuThPYb_X-whcYso,18
+webdrivermanager_cn/microsoft.py,sha256=2oWJPrsWAQC_EFwbsmvQststgsYkT0bpCUwfQIWKqC4,305
+webdrivermanager_cn/version.py,sha256=QQ5zfyEqpDHVIxQknvlXhMcoyjCpps5a0drNyuuGZO8,18
 webdrivermanager_cn/core/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-webdrivermanager_cn/core/cache_manager.py,sha256=M-Mn5gXSqngX0B6bu1ucILoULsPoUvxELE_szEwUq1M,5310
-webdrivermanager_cn/core/config.py,sha256=HbK_NzFnxobLWzAQBgp6_A-bAywJUnwsZ_hXpkjwqbE,2538
-webdrivermanager_cn/core/download_manager.py,sha256=8a5ot2Tpw_WQ0Gn_ai6iRrPUicRaKshFs0fWU6sm-Ms,1468
-webdrivermanager_cn/core/driver.py,sha256=1Rbg7T5WcmMH4xlUPopHUiUUkmErNOQmVbarreSZYUg,4571
-webdrivermanager_cn/core/file_manager.py,sha256=-2W7N-nuc5mO7nCGcbIdax1So1SPvIXUqJJNYFZ37MA,3819
-webdrivermanager_cn/core/log_manager.py,sha256=d1uvED1G6EpDqDeaWhxnRwagrIh7YKo1IpZhagcMSU0,1042
+webdrivermanager_cn/core/cache_manager.py,sha256=u9B8LDu7lkUwt-JwXxwV19fWFdxMTvP9dnveg9eJDPQ,5298
+webdrivermanager_cn/core/config.py,sha256=UfkyhzEIpH-APZ_IwlU6m8K8XdaH-avDpOy_JzQWvJM,2602
+webdrivermanager_cn/core/download_manager.py,sha256=eimVT-pjGTYh4EuDgOYaQSpeme2-yEKlCo2Ddg_0n5w,991
+webdrivermanager_cn/core/driver.py,sha256=b71Gc46tMMPlvPtq_kAT1yV6P7BcFrolz1C1bDrTcxI,5014
+webdrivermanager_cn/core/file_manager.py,sha256=2YkdIrQH6nuqOcj6Xke4PaP8eTjpiYr9KDSQKM4yCd4,3823
+webdrivermanager_cn/core/log_manager.py,sha256=A36QLsu6YNpzEFh4BGQi-eb1HTwT7TwIEOsjfKJNVCA,1227
+webdrivermanager_cn/core/mixin.py,sha256=ua72E0uMzV5dznLbTQJff0THA_WzFHxtV1W124Ez5MA,785
 webdrivermanager_cn/core/os_manager.py,sha256=JHR8hZ0KsvxTJyIUf6PtDlRdG_pXMhTWrpElQ3l44Tg,2036
+webdrivermanager_cn/core/request.py,sha256=DbInDRaZ9cFDYrhq1eeboQxKTI0yOo91kFdnDM4ftt0,1365
 webdrivermanager_cn/core/time_.py,sha256=OGaOE3qOMcexSKp6Al2G1m0n7IY4h10CkWHjUaG1Kh4,86
-webdrivermanager_cn/core/version_manager.py,sha256=pOjbxnKGM2pELFwoUgn77hTzDNTMkXfo4Ib-j91gi94,6674
+webdrivermanager_cn/core/version_manager.py,sha256=eTSH6X9MDsUGaj6mms3btGusKn4niXghBeFR45lg3hM,6210
 webdrivermanager_cn/drivers/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-webdrivermanager_cn/drivers/chrome.py,sha256=AkuWT-RzCWb7BrYT4fejPvl4ihhyBm_njTKfT3_PDXk,2425
+webdrivermanager_cn/drivers/chrome.py,sha256=VDtH96FpGZeq4hJLZ5Ps5bLLvvzNfhT02ioaVxnId-U,2361
 webdrivermanager_cn/drivers/geckodriver.py,sha256=PfpMZL8k4a2gFHsNYV8hZ8fnbrSZDph3m8mvYjbapGU,1379
-webdrivermanager_cn/drivers/microsoft.py,sha256=fGkK2Mg6zf5yO_aIBR0r56XxWGvYN7lpjTCMDU_oLrw,1880
-webdrivermanager_cn-1.6.1.dist-info/LICENSE,sha256=HrhfyXIkWY2tGFK11kg7vPCqhgh5DcxleloqdhrpyMY,11558
-webdrivermanager_cn-1.6.1.dist-info/METADATA,sha256=7CpMM4lZtX3dCqzF0cXw51DGb2awO-UYGAKrCQu8K8Q,3807
-webdrivermanager_cn-1.6.1.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-webdrivermanager_cn-1.6.1.dist-info/top_level.txt,sha256=6C7e8yCpDgi5-bY_s2Utf2cGppod3DluCG4LbXXRMQY,20
-webdrivermanager_cn-1.6.1.dist-info/RECORD,,
+webdrivermanager_cn/drivers/microsoft.py,sha256=HVGXucqGkGEhT89IuTEelaflUJOWMXm6WX32uAWVzXI,1828
+webdrivermanager_cn-1.7.0.dist-info/LICENSE,sha256=HrhfyXIkWY2tGFK11kg7vPCqhgh5DcxleloqdhrpyMY,11558
+webdrivermanager_cn-1.7.0.dist-info/METADATA,sha256=yhkUQxLHXZwMuNGYJnRK6oydXWP2o9Qmb1Cnu--pCwA,3807
+webdrivermanager_cn-1.7.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+webdrivermanager_cn-1.7.0.dist-info/top_level.txt,sha256=6C7e8yCpDgi5-bY_s2Utf2cGppod3DluCG4LbXXRMQY,20
+webdrivermanager_cn-1.7.0.dist-info/RECORD,,
```

