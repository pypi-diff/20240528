# Comparing `tmp/scicom-0.4.0.tar.gz` & `tmp/scicom-0.4.1.tar.gz`

## Comparing `scicom-0.4.0.tar` & `scicom-0.4.1.tar`

### file list

```diff
@@ -1,124 +1,109 @@
--rw-r--r--   0        0        0      841 2020-02-02 00:00:00.000000 scicom-0.4.0/.gitlab-ci.yml
--rw-r--r--   0        0        0      230 2020-02-02 00:00:00.000000 scicom-0.4.0/.readthedocs.yaml
--rw-r--r--   0        0        0       28 2020-02-02 00:00:00.000000 scicom-0.4.0/MANIFEST.in
--rw-r--r--   0        0        0      840 2020-02-02 00:00:00.000000 scicom-0.4.0/tox.ini
--rw-r--r--   0        0        0   822615 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/HistoricalLetters.png
--rw-r--r--   0        0        0      634 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/Makefile
--rw-r--r--   0        0        0       28 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/authors.rst
--rw-r--r--   0        0        0     2249 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/conf.py
--rw-r--r--   0        0        0     1042 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/index.rst
--rw-r--r--   0        0        0       45 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/license.rst
--rw-r--r--   0        0        0      765 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/make.bat
--rw-r--r--   0        0        0       54 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/readme.rst
--rw-r--r--   0        0        0       11 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/requirements.txt
--rw-r--r--   0        0        0      742 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/usingmesa.rst
--rw-r--r--   0        0        0    12534 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/_static/bmbf.png
--rw-r--r--   0        0        0    13387 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/_static/logo.png
--rw-r--r--   0        0        0    37002 2020-02-02 00:00:00.000000 scicom-0.4.0/docs/_static/mpiwg.png
--rw-r--r--   0        0        0   189800 2020-02-02 00:00:00.000000 scicom-0.4.0/examples/RunModel.ipynb
--rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/__init__.py
--rw-r--r--   0        0        0      973 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/interface.py
--rw-r--r--   0        0        0      677 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/run.py
--rw-r--r--   0        0        0   389859 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/data/NUTS_RG_60M_2021_3857_LEVL_2.geojson
--rw-r--r--   0        0        0   327135 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/data/nuts_rg_60M_2013_lvl_2.geojson
--rw-r--r--   0        0        0     9175 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/data/pone.0162678.s003.csv
--rw-r--r--   0        0        0     7225 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/data/relPop_plosOne.csv
--rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/historicalletters/__init__.py
--rw-r--r--   0        0        0    11634 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/historicalletters/agents.py
--rw-r--r--   0        0        0     3694 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/historicalletters/interface.py
--rw-r--r--   0        0        0    11456 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/historicalletters/model.py
--rw-r--r--   0        0        0     2702 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/historicalletters/server.py
--rw-r--r--   0        0        0     2110 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/historicalletters/space.py
--rw-r--r--   0        0        0     3449 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/historicalletters/utils.py
--rw-r--r--   0        0        0     1246 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/knowledgespread/SimpleContinuousModule.py
--rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/knowledgespread/__init__.py
--rw-r--r--   0        0        0     6662 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/knowledgespread/agents.py
--rw-r--r--   0        0        0     1653 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/knowledgespread/interface.py
--rw-r--r--   0        0        0     6076 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/knowledgespread/model.py
--rw-r--r--   0        0        0     5831 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/knowledgespread/server.py
--rw-r--r--   0        0        0     1859 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/knowledgespread/simple_continuous_canvas.js
--rw-r--r--   0        0        0     8601 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/knowledgespread/utils.py
--rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/utilities/__init__.py
--rw-r--r--   0        0        0    10232 2020-02-02 00:00:00.000000 scicom-0.4.0/src/scicom/utilities/statistics.py
--rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/__init__.py
--rw-r--r--   0        0        0       27 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/.gitignore
--rw-r--r--   0        0        0    21865 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/coverage_html.js
--rw-r--r--   0        0        0     4454 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_02d42bec932dca30___init___py.html
--rw-r--r--   0        0        0    11176 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_02d42bec932dca30_run_py.html
--rw-r--r--   0        0        0     4536 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe___init___py.html
--rw-r--r--   0        0        0    81276 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_agents_py.html
--rw-r--r--   0        0        0    78861 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_model_py.html
--rw-r--r--   0        0        0    26866 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_server_py.html
--rw-r--r--   0        0        0    19668 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_space_py.html
--rw-r--r--   0        0        0    30811 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_utils_py.html
--rw-r--r--   0        0        0     4534 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_6392e7e021769227___init___py.html
--rw-r--r--   0        0        0    10336 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_6392e7e021769227_test_model_py.html
--rw-r--r--   0        0        0    24612 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_6392e7e021769227_test_utils_py.html
--rw-r--r--   0        0        0     4444 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_a44f0ac069e85531___init___py.html
--rw-r--r--   0        0        0    14928 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095_SimpleContinuousModule_py.html
--rw-r--r--   0        0        0     4556 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095___init___py.html
--rw-r--r--   0        0        0    43401 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095_agents_py.html
--rw-r--r--   0        0        0    27864 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095_model_py.html
--rw-r--r--   0        0        0    34577 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095_server_py.html
--rw-r--r--   0        0        0     4518 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_e1dbc2383e9dc8ec___init___py.html
--rw-r--r--   0        0        0    11546 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_e1dbc2383e9dc8ec_statistics_py.html
--rw-r--r--   0        0        0    14624 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_SimpleContinuousModule_py.html
--rw-r--r--   0        0        0     4560 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3___init___py.html
--rw-r--r--   0        0        0    52169 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_agents_py.html
--rw-r--r--   0        0        0    20584 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_app_py.html
--rw-r--r--   0        0        0    53509 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_model_py.html
--rw-r--r--   0        0        0    60784 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_server_py.html
--rw-r--r--   0        0        0    80723 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_utils_py.html
--rw-r--r--   0        0        0     1732 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/favicon_32.png
--rw-r--r--   0        0        0    10640 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/index.html
--rw-r--r--   0        0        0     9004 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/keybd_closed.png
--rw-r--r--   0        0        0     9003 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/keybd_open.png
--rw-r--r--   0        0        0     5257 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/status.json
--rw-r--r--   0        0        0    12394 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/coverage-html/style.css
--rw-r--r--   0        0        0       27 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/.gitignore
--rw-r--r--   0        0        0    21865 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/coverage_html.js
--rw-r--r--   0        0        0     4606 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_277402163e1a7589___init___py.html
--rw-r--r--   0        0        0    83693 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_277402163e1a7589_agents_py.html
--rw-r--r--   0        0        0    40711 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_277402163e1a7589_interface_py.html
--rw-r--r--   0        0        0    90092 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_277402163e1a7589_model_py.html
--rw-r--r--   0        0        0    27176 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_277402163e1a7589_server_py.html
--rw-r--r--   0        0        0    20757 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_277402163e1a7589_space_py.html
--rw-r--r--   0        0        0    33530 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_277402163e1a7589_utils_py.html
--rw-r--r--   0        0        0    15089 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_SimpleContinuousModule_py.html
--rw-r--r--   0        0        0     4630 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_2e9db29e074df228___init___py.html
--rw-r--r--   0        0        0    52036 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_agents_py.html
--rw-r--r--   0        0        0    20654 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_app_py.html
--rw-r--r--   0        0        0    19411 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_interface_py.html
--rw-r--r--   0        0        0    53579 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_model_py.html
--rw-r--r--   0        0        0    60441 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_server_py.html
--rw-r--r--   0        0        0    80922 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_utils_py.html
--rw-r--r--   0        0        0     4578 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_3142edd200b00bad___init___py.html
--rw-r--r--   0        0        0    49663 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_3142edd200b00bad_prune_py.html
--rw-r--r--   0        0        0   105137 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_3142edd200b00bad_statistics_py.html
--rw-r--r--   0        0        0     4524 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_8a655f2681f565c9___init___py.html
--rw-r--r--   0        0        0    14338 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_8a655f2681f565c9_interface_py.html
--rw-r--r--   0        0        0    10453 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_8a655f2681f565c9_run_py.html
--rw-r--r--   0        0        0    15405 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_d0052f7b3fb6bc9f_SimpleContinuousModule_py.html
--rw-r--r--   0        0        0     4626 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_d0052f7b3fb6bc9f___init___py.html
--rw-r--r--   0        0        0    43471 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_d0052f7b3fb6bc9f_agents_py.html
--rw-r--r--   0        0        0    27934 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_d0052f7b3fb6bc9f_model_py.html
--rw-r--r--   0        0        0    34647 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/d_d0052f7b3fb6bc9f_server_py.html
--rw-r--r--   0        0        0     1732 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/favicon_32.png
--rw-r--r--   0        0        0    10351 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/index.html
--rw-r--r--   0        0        0     9004 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/keybd_closed.png
--rw-r--r--   0        0        0     9003 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/keybd_open.png
--rw-r--r--   0        0        0     7054 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/status.json
--rw-r--r--   0        0        0    12394 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/reports/html/style.css
--rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/scicom/__init__.py
--rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/scicom/historicalletters/__init__.py
--rw-r--r--   0        0        0     2287 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/scicom/historicalletters/test_model.py
--rw-r--r--   0        0        0      782 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/scicom/historicalletters/test_server.py
--rw-r--r--   0        0        0      733 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/scicom/historicalletters/test_space.py
--rw-r--r--   0        0        0     1442 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/scicom/historicalletters/test_statistics.py
--rw-r--r--   0        0        0     2374 2020-02-02 00:00:00.000000 scicom-0.4.0/tests/scicom/historicalletters/test_utils.py
--rw-r--r--   0        0        0      139 2020-02-02 00:00:00.000000 scicom-0.4.0/.gitignore
--rw-r--r--   0        0        0      232 2020-02-02 00:00:00.000000 scicom-0.4.0/AUTHORS.rst
--rw-r--r--   0        0        0     1086 2020-02-02 00:00:00.000000 scicom-0.4.0/LICENSE.md
--rw-r--r--   0        0        0     1828 2020-02-02 00:00:00.000000 scicom-0.4.0/README.md
--rw-r--r--   0        0        0     1292 2020-02-02 00:00:00.000000 scicom-0.4.0/pyproject.toml
--rw-r--r--   0        0        0     4502 2020-02-02 00:00:00.000000 scicom-0.4.0/PKG-INFO
+-rw-r--r--   0        0        0      841 2020-02-02 00:00:00.000000 scicom-0.4.1/.gitlab-ci.yml
+-rw-r--r--   0        0        0      230 2020-02-02 00:00:00.000000 scicom-0.4.1/.readthedocs.yaml
+-rw-r--r--   0        0        0       28 2020-02-02 00:00:00.000000 scicom-0.4.1/MANIFEST.in
+-rw-r--r--   0        0        0      840 2020-02-02 00:00:00.000000 scicom-0.4.1/tox.ini
+-rw-r--r--   0        0        0   822615 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/HistoricalLetters.png
+-rw-r--r--   0        0        0      634 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/Makefile
+-rw-r--r--   0        0        0       28 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/authors.rst
+-rw-r--r--   0        0        0     2249 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/conf.py
+-rw-r--r--   0        0        0     1042 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/index.rst
+-rw-r--r--   0        0        0       45 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/license.rst
+-rw-r--r--   0        0        0      765 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/make.bat
+-rw-r--r--   0        0        0       54 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/readme.rst
+-rw-r--r--   0        0        0       11 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/requirements.txt
+-rw-r--r--   0        0        0      742 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/usingmesa.rst
+-rw-r--r--   0        0        0    12534 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/_static/bmbf.png
+-rw-r--r--   0        0        0    13387 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/_static/logo.png
+-rw-r--r--   0        0        0    37002 2020-02-02 00:00:00.000000 scicom-0.4.1/docs/_static/mpiwg.png
+-rw-r--r--   0        0        0   189800 2020-02-02 00:00:00.000000 scicom-0.4.1/examples/RunModel.ipynb
+-rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/__init__.py
+-rw-r--r--   0        0        0      973 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/interface.py
+-rw-r--r--   0        0        0      677 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/run.py
+-rw-r--r--   0        0        0   389859 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/data/NUTS_RG_60M_2021_3857_LEVL_2.geojson
+-rw-r--r--   0        0        0   327135 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/data/nuts_rg_60M_2013_lvl_2.geojson
+-rw-r--r--   0        0        0     9175 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/data/pone.0162678.s003.csv
+-rw-r--r--   0        0        0     7225 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/data/relPop_plosOne.csv
+-rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/historicalletters/__init__.py
+-rw-r--r--   0        0        0    11987 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/historicalletters/agents.py
+-rw-r--r--   0        0        0     3694 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/historicalletters/interface.py
+-rw-r--r--   0        0        0    11897 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/historicalletters/model.py
+-rw-r--r--   0        0        0     2702 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/historicalletters/server.py
+-rw-r--r--   0        0        0     2110 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/historicalletters/space.py
+-rw-r--r--   0        0        0     3449 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/historicalletters/utils.py
+-rw-r--r--   0        0        0     1246 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/knowledgespread/SimpleContinuousModule.py
+-rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/knowledgespread/__init__.py
+-rw-r--r--   0        0        0     6662 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/knowledgespread/agents.py
+-rw-r--r--   0        0        0     1653 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/knowledgespread/interface.py
+-rw-r--r--   0        0        0     6076 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/knowledgespread/model.py
+-rw-r--r--   0        0        0     5831 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/knowledgespread/server.py
+-rw-r--r--   0        0        0     1859 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/knowledgespread/simple_continuous_canvas.js
+-rw-r--r--   0        0        0     8601 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/knowledgespread/utils.py
+-rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/utilities/__init__.py
+-rw-r--r--   0        0        0    10232 2020-02-02 00:00:00.000000 scicom-0.4.1/src/scicom/utilities/statistics.py
+-rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/__init__.py
+-rw-r--r--   0        0        0       27 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/.gitignore
+-rw-r--r--   0        0        0    21865 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/coverage_html.js
+-rw-r--r--   0        0        0    15089 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_SimpleContinuousModule_py.html
+-rw-r--r--   0        0        0     4630 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79___init___py.html
+-rw-r--r--   0        0        0    52036 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_agents_py.html
+-rw-r--r--   0        0        0    20654 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_app_py.html
+-rw-r--r--   0        0        0    19411 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_interface_py.html
+-rw-r--r--   0        0        0    53579 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_model_py.html
+-rw-r--r--   0        0        0    60441 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_server_py.html
+-rw-r--r--   0        0        0    80922 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_utils_py.html
+-rw-r--r--   0        0        0     4578 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_22d2582a602e487e___init___py.html
+-rw-r--r--   0        0        0    50076 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_22d2582a602e487e_prune_py.html
+-rw-r--r--   0        0        0    55927 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_22d2582a602e487e_statistics_py.html
+-rw-r--r--   0        0        0     4606 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5___init___py.html
+-rw-r--r--   0        0        0    85089 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_agents_py.html
+-rw-r--r--   0        0        0    40711 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_interface_py.html
+-rw-r--r--   0        0        0    93423 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_model_py.html
+-rw-r--r--   0        0        0    27176 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_server_py.html
+-rw-r--r--   0        0        0    20757 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_space_py.html
+-rw-r--r--   0        0        0    33530 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_utils_py.html
+-rw-r--r--   0        0        0     4524 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_48e31f30a7ef2afb___init___py.html
+-rw-r--r--   0        0        0    14338 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_48e31f30a7ef2afb_interface_py.html
+-rw-r--r--   0        0        0    10453 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_48e31f30a7ef2afb_run_py.html
+-rw-r--r--   0        0        0    15405 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a_SimpleContinuousModule_py.html
+-rw-r--r--   0        0        0     4626 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a___init___py.html
+-rw-r--r--   0        0        0    43471 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a_agents_py.html
+-rw-r--r--   0        0        0    27934 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a_model_py.html
+-rw-r--r--   0        0        0    34647 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a_server_py.html
+-rw-r--r--   0        0        0     4606 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21___init___py.html
+-rw-r--r--   0        0        0    84236 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_agents_py.html
+-rw-r--r--   0        0        0    40711 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_interface_py.html
+-rw-r--r--   0        0        0    88138 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_model_py.html
+-rw-r--r--   0        0        0    27176 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_server_py.html
+-rw-r--r--   0        0        0    20757 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_space_py.html
+-rw-r--r--   0        0        0    33556 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_utils_py.html
+-rw-r--r--   0        0        0    15097 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_SimpleContinuousModule_py.html
+-rw-r--r--   0        0        0     4630 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_ad23a1665840e904___init___py.html
+-rw-r--r--   0        0        0    52036 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_agents_py.html
+-rw-r--r--   0        0        0    19411 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_interface_py.html
+-rw-r--r--   0        0        0    53591 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_model_py.html
+-rw-r--r--   0        0        0    60441 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_server_py.html
+-rw-r--r--   0        0        0    80922 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_utils_py.html
+-rw-r--r--   0        0        0     4588 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_b133a5f21d483f41___init___py.html
+-rw-r--r--   0        0        0    87487 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_b133a5f21d483f41_statistics_py.html
+-rw-r--r--   0        0        0     4524 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_e85bc3a05b58e6d3___init___py.html
+-rw-r--r--   0        0        0    14338 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_e85bc3a05b58e6d3_interface_py.html
+-rw-r--r--   0        0        0    10453 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/d_e85bc3a05b58e6d3_run_py.html
+-rw-r--r--   0        0        0     1732 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/favicon_32.png
+-rw-r--r--   0        0        0    10350 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/index.html
+-rw-r--r--   0        0        0     9004 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/keybd_closed.png
+-rw-r--r--   0        0        0     9003 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/keybd_open.png
+-rw-r--r--   0        0        0    11985 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/status.json
+-rw-r--r--   0        0        0    12394 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/reports/html/style.css
+-rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/scicom/__init__.py
+-rw-r--r--   0        0        0        0 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/scicom/historicalletters/__init__.py
+-rw-r--r--   0        0        0     2287 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/scicom/historicalletters/test_model.py
+-rw-r--r--   0        0        0      782 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/scicom/historicalletters/test_server.py
+-rw-r--r--   0        0        0      733 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/scicom/historicalletters/test_space.py
+-rw-r--r--   0        0        0     1442 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/scicom/historicalletters/test_statistics.py
+-rw-r--r--   0        0        0     2374 2020-02-02 00:00:00.000000 scicom-0.4.1/tests/scicom/historicalletters/test_utils.py
+-rw-r--r--   0        0        0      139 2020-02-02 00:00:00.000000 scicom-0.4.1/.gitignore
+-rw-r--r--   0        0        0      232 2020-02-02 00:00:00.000000 scicom-0.4.1/AUTHORS.rst
+-rw-r--r--   0        0        0     1086 2020-02-02 00:00:00.000000 scicom-0.4.1/LICENSE.md
+-rw-r--r--   0        0        0     1828 2020-02-02 00:00:00.000000 scicom-0.4.1/README.md
+-rw-r--r--   0        0        0     1291 2020-02-02 00:00:00.000000 scicom-0.4.1/pyproject.toml
+-rw-r--r--   0        0        0     4501 2020-02-02 00:00:00.000000 scicom-0.4.1/PKG-INFO
```

### Comparing `scicom-0.4.0/.gitlab-ci.yml` & `scicom-0.4.1/.gitlab-ci.yml`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tox.ini` & `scicom-0.4.1/tox.ini`

 * *Files 3% similar despite different names*

```diff
@@ -1,24 +1,24 @@
 [tox]
-envlist = clean, p311, report
+envlist = clean, p312, report
 isolated_build = true
 
 [pytest]
 minversion = 6.0
 addopts = -ra -q
 testpaths =
     tests
 
 [testenv]
-commands = pytest --cov {envsitepackagesdir}/scicom --cov-append --cov-report=term-missing
+commands = pytest --cov={envsitepackagesdir}/scicom --cov-append --cov-report=term-missing
 deps =
     -e ./[test]
 depends =
-    {py311}: clean
-    report: py311
+    {py312}: clean
+    report: py312
 
 [testenv:report]
 deps = coverage
 skip_install = true
 commands =
     coverage report
     coverage html -d tests/reports/html
```

### Comparing `scicom-0.4.0/docs/HistoricalLetters.png` & `scicom-0.4.1/docs/HistoricalLetters.png`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/docs/Makefile` & `scicom-0.4.1/docs/Makefile`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/docs/conf.py` & `scicom-0.4.1/docs/conf.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/docs/index.rst` & `scicom-0.4.1/docs/index.rst`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/docs/make.bat` & `scicom-0.4.1/docs/make.bat`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/docs/usingmesa.rst` & `scicom-0.4.1/docs/usingmesa.rst`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/docs/_static/bmbf.png` & `scicom-0.4.1/docs/_static/bmbf.png`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/docs/_static/logo.png` & `scicom-0.4.1/docs/_static/logo.png`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/docs/_static/mpiwg.png` & `scicom-0.4.1/docs/_static/mpiwg.png`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/examples/RunModel.ipynb` & `scicom-0.4.1/examples/RunModel.ipynb`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/interface.py` & `scicom-0.4.1/src/scicom/interface.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/run.py` & `scicom-0.4.1/src/scicom/run.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/data/NUTS_RG_60M_2021_3857_LEVL_2.geojson` & `scicom-0.4.1/src/scicom/data/NUTS_RG_60M_2021_3857_LEVL_2.geojson`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/data/nuts_rg_60M_2013_lvl_2.geojson` & `scicom-0.4.1/src/scicom/data/nuts_rg_60M_2013_lvl_2.geojson`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/data/pone.0162678.s003.csv` & `scicom-0.4.1/src/scicom/data/pone.0162678.s003.csv`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/data/relPop_plosOne.csv` & `scicom-0.4.1/src/scicom/data/relPop_plosOne.csv`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/historicalletters/agents.py` & `scicom-0.4.1/src/scicom/historicalletters/agents.py`

 * *Files 3% similar despite different names*

```diff
@@ -45,20 +45,24 @@
         self.letterRange = letterRange
         self.topicVec = ""
         self.topicLedger = []
         self.numLettersReceived = 0
         self.numLettersSend = 0
 
     def move(self, neighbors:list) -> None:
-        """Agent can randomly move to neighboring positions."""
+        """Agent can randomly move to neighboring positions.
+
+        Neighbours with a higher number of received letters are
+        more likely targets of a movement process. The amount of
+        movement is randomly drawn.
+        """
         if neighbors:
             # Random decision to move or not, weights are 10% moving, 90% staying.
             move = random.choices([0, 1], weights=[0.9, 0.1], k=1)
             if move[0] == 1:
-                self.model.movements += 1
                 weights = []
                 possible_steps = []
                 # Weighted random choice to target of moving.
                 # Strong receivers are more likely targets.
                 # This is another Polya Urn-like process.
                 for n in neighbors:
                     if n != self:
@@ -68,21 +72,27 @@
                 if possible_steps:
                     if sum(weights) > 0:
                         lineEndPoint = random.choices(possible_steps, weights, k=1)
                     else:
                         lineEndPoint = random.choices(possible_steps, k=1)
                     next_position = getPositionOnLine(self.geometry, lineEndPoint[0])
                     # Capture cases where next position has no overlap with region shapefiles.
+                    # This can e.g. happen when crossing the English channel or the mediteranian
+                    # sea.
                     # TODO(malte): Is there a more clever way to find nearby valid regions?
                     try:
                         regionID = getRegion(next_position, self.model)
-                        self.model.space.move_sender(self, next_position, regionID)
+                        self.model.updatedPositionDict.update(
+                            {self.unique_id: [next_position, regionID]},
+                        )
+                        self.model.movements += 1
                     except IndexError:
-                        text = f"No overlap for {next_position}, aborting movement."
-                        print(text)
+                        if self.model.debug is True:
+                            text = f"No overlap for {next_position}, aborting movement."
+                            print(text)
 
     def has_letter_contacts(self, *, neighbors: list = False) -> list:
         """List of already established and potential contacts.
 
         Implements the ego-reinforcing by allowing mutliple entries
         of the same agent. In neighbourhoods agents are added proportional
         to the number of letters they received, thus increasing the reinforcement.
@@ -181,19 +191,15 @@
                 )
 
     def step(self) -> None:
         """Perform one simulation step."""
         # If the agent has received a letter in the previous step and
         # has updated its internal topicVec state, the new topic state is
         # appended to the topicLedger
-        if not self.topicLedger:
-            self.topicLedger.append(
-                self.topicVec,
-            )
-        elif self.topicVec != self.topicLedger[-1]:
+        if not self.topicLedger or self.topicVec != self.topicLedger[-1]:
             self.topicLedger.append(
                 self.topicVec,
             )
         currentActivation = random.choices(
             population=[0, 1],
             weights=[1 - self.activationWeight, self.activationWeight],
             k=1,
```

### Comparing `scicom-0.4.0/src/scicom/historicalletters/interface.py` & `scicom-0.4.1/src/scicom/historicalletters/interface.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/historicalletters/model.py` & `scicom-0.4.1/src/scicom/historicalletters/model.py`

 * *Files 2% similar despite different names*

```diff
@@ -125,14 +125,15 @@
         # Output variables
         self.letterLedger = []
         self.movements = 0
         # Internal variables
         self.schedule = mesa.time.RandomActivation(self)
         self.scaleSendInput = {}
         self.updatedTopicsDict = {}
+        self.updatedPositionDict = {}
         self.space = Nuts2Eu()
         self.debug = debug
 
         #######
         # Initialize region agents
         #######
 
@@ -218,14 +219,18 @@
                 x.unique_id for x in self.regions if contains(x.geometry, sender.geometry)
             ]
             try:
                 self.space.add_sender(sender, regionID[0])
             except IndexError as exc:
                 text = f"Problem finding region for {sender.geometry}."
                 raise IndexError(text) from exc
+            # Prepopulate positions dict
+            self.updatedPositionDict.update(
+                {sender.unique_id: [sender.geometry, regionID[0]]},
+            )
             # Add sender to schedule
             self.schedule.add(sender)
 
         # Create social network
         if useSocialNetwork is True:
             for agent in self.schedule.agents:
                 if isinstance(agent, SenderAgent):
@@ -282,17 +287,21 @@
 
     def step_no_data(self) -> None:
         """One simulation step without data collection."""
         self.scaleSendInput.update(
             **{x.unique_id: x.numLettersReceived for x in self.schedule.agents},
         )
         # Update the currently held topicVec for each agent, based
-        # on potential previouse communication events.
+        # on potential previouse communication events and the position
+        # based on a previous movement.
         for agent in self.schedule.agents:
             agent.topicVec = self.updatedTopicsDict[agent.unique_id]
+            newGeom = self.updatedPositionDict[agent.unique_id]
+            if newGeom[0] != agent.geometry:
+                self.space.move_sender(agent, newGeom[0], newGeom[1])
         self.schedule.step()
 
     def run(self, n:int) -> None:
         """Run the model for n steps.
 
         Data collection is only run at the end of n steps.
         This is useful for batch runs accross different
```

### Comparing `scicom-0.4.0/src/scicom/historicalletters/server.py` & `scicom-0.4.1/src/scicom/historicalletters/server.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/historicalletters/space.py` & `scicom-0.4.1/src/scicom/historicalletters/space.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/historicalletters/utils.py` & `scicom-0.4.1/src/scicom/historicalletters/utils.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/knowledgespread/SimpleContinuousModule.py` & `scicom-0.4.1/src/scicom/knowledgespread/SimpleContinuousModule.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/knowledgespread/agents.py` & `scicom-0.4.1/src/scicom/knowledgespread/agents.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/knowledgespread/interface.py` & `scicom-0.4.1/src/scicom/knowledgespread/interface.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/knowledgespread/model.py` & `scicom-0.4.1/src/scicom/knowledgespread/model.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/knowledgespread/server.py` & `scicom-0.4.1/src/scicom/knowledgespread/server.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/knowledgespread/simple_continuous_canvas.js` & `scicom-0.4.1/src/scicom/knowledgespread/simple_continuous_canvas.js`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/knowledgespread/utils.py` & `scicom-0.4.1/src/scicom/knowledgespread/utils.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/src/scicom/utilities/statistics.py` & `scicom-0.4.1/src/scicom/utilities/statistics.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/reports/coverage-html/coverage_html.js` & `scicom-0.4.1/tests/reports/html/coverage_html.js`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_02d42bec932dca30___init___py.html` & `scicom-0.4.1/tests/reports/html/d_e85bc3a05b58e6d3___init___py.html`

 * *Files 3% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/__init__.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/__init__.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/__init__.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/__init__.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -58,18 +58,18 @@
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
             <a id="prevFileLink" class="nav" href="index.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -82,16 +82,16 @@
 <main id="source">
 </main>
 <footer>
     <div class="content">
         <p>
             <a id="prevFileLink" class="nav" href="index.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,15 +1,16 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//____iinniitt____..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//____iinniitt____..ppyy::
+110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 00 ssttaatteemmeennttss ?  00 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_02d42bec932dca30_run_py.html` & `scicom-0.4.1/tests/reports/html/d_48e31f30a7ef2afb_run_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/run.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/run.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/run.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/run.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,75 +50,72 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">13 statements &nbsp;</span>
+            <span class="text">10 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">13<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">10<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e1dbc2383e9dc8ec___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_b133a5f21d483f41___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">argparse</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="nam">parser</span> <span class="op">=</span> <span class="nam">argparse</span><span class="op">.</span><span class="nam">ArgumentParser</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t">    <span class="nam">prog</span><span class="op">=</span><span class="str">'Run SciCom Simulations'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="nam">description</span><span class="op">=</span><span class="str">'This script starts the server interfaces for the different ABM.'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">epilog</span><span class="op">=</span><span class="str">'During the running of this script, the interfaces should be reachable at http://127.0.0.1:8521'</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="nam">parser</span><span class="op">.</span><span class="nam">add_argument</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="str">'simulation'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="nam">choices</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">        <span class="str">"randomletters"</span><span class="op">,</span> <span class="str">"historicalletters"</span><span class="op">,</span> <span class="str">"knowledgespread"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""Run simulations."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">argparse</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="nam">parser</span> <span class="op">=</span> <span class="nam">argparse</span><span class="op">.</span><span class="nam">ArgumentParser</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="nam">prog</span><span class="op">=</span><span class="str">"Run SciCom Simulations"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">description</span><span class="op">=</span><span class="str">"This script starts the server interfaces for the different ABM."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="nam">epilog</span><span class="op">=</span><span class="str">"During the running of this script, the interfaces should be reachable at http://127.0.0.1:8521"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="nam">parser</span><span class="op">.</span><span class="nam">add_argument</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="str">"simulation"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">    <span class="nam">choices</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">        <span class="str">"historicalletters"</span><span class="op">,</span> <span class="str">"knowledgespread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="nam">args</span> <span class="op">=</span> <span class="nam">parser</span><span class="op">.</span><span class="nam">parse_args</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="key">if</span> <span class="nam">args</span><span class="op">.</span><span class="nam">simulation</span> <span class="op">==</span> <span class="str">"randomletters"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="key">from</span> <span class="nam">randomletters</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="nam">server</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="key">if</span> <span class="nam">args</span><span class="op">.</span><span class="nam">simulation</span> <span class="op">==</span> <span class="str">"historicalletters"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="nam">server</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="nam">server</span><span class="op">.</span><span class="nam">launch</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="key">elif</span> <span class="nam">args</span><span class="op">.</span><span class="nam">simulation</span> <span class="op">==</span> <span class="str">"historicalletters"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="key">from</span> <span class="nam">historicalletters</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="nam">server</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="key">elif</span> <span class="nam">args</span><span class="op">.</span><span class="nam">simulation</span> <span class="op">==</span> <span class="str">"knowledgespread"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="nam">server</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="nam">server</span><span class="op">.</span><span class="nam">launch</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="key">elif</span> <span class="nam">args</span><span class="op">.</span><span class="nam">simulation</span> <span class="op">==</span> <span class="str">"knowledgespread"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="key">from</span> <span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="nam">server</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="nam">server</span><span class="op">.</span><span class="nam">launch</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e1dbc2383e9dc8ec___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_b133a5f21d483f41___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,44 +1,42 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//rruunn..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//rruunn..ppyy:: 00%%
+************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 1133 ssttaatteemmeennttss ?  00 rruunn 1133 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
-_1import argparse 
-_2 
-_3parser = argparse.ArgumentParser( 
-_4 prog='Run SciCom Simulations', 
-_5 description='This script starts the server interfaces for the different
-ABM.', 
-_6 epilog='During the running of this script, the interfaces should be reachable
-at http://127.0.0.1:8521' 
-_7) 
-_8 
-_9parser.add_argument( 
-_1_0 'simulation', 
-_1_1 choices=[ 
-_1_2 "randomletters", "historicalletters", "knowledgespread" 
-_1_3 ] 
-_1_4) 
-_1_5 
+********** 1100 ssttaatteemmeennttss ?  00 rruunn 1100 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_1"""Run simulations.""" 
+_2import argparse 
+_3 
+_4parser = argparse.ArgumentParser( 
+_5 prog="Run SciCom Simulations", 
+_6 description="This script starts the server interfaces for the different
+ABM.", 
+_7 epilog="During the running of this script, the interfaces should be reachable
+at http://127.0.0.1:8521", 
+_8) 
+_9 
+_1_0parser.add_argument( 
+_1_1 "simulation", 
+_1_2 choices=[ 
+_1_3 "historicalletters", "knowledgespread", 
+_1_4 ], 
+_1_5) 
 _1_6 
 _1_7args = parser.parse_args() 
 _1_8 
-_1_9if args.simulation == "randomletters": 
-_2_0 from randomletters.server import server 
+_1_9if args.simulation == "historicalletters": 
+_2_0 from scicom.historicalletters.server import server 
 _2_1 server.launch() 
-_2_2elif args.simulation == "historicalletters": 
-_2_3 from historicalletters.server import server 
+_2_2elif args.simulation == "knowledgespread": 
+_2_3 from scicom.knowledgespread.server import server 
 _2_4 server.launch() 
-_2_5elif args.simulation == "knowledgespread": 
-_2_6 from knowledgespread.server import server 
-_2_7 server.launch() 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe___init___py.html` & `scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21___init___py.html`

 * *Files 4% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/historicalletters/__init__.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/historicalletters/__init__.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/historicalletters/__init__.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/historicalletters/__init__.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">0 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_02d42bec932dca30___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_e85bc3a05b58e6d3___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,18 +80,18 @@
     </div>
 </header>
 <main id="source">
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_02d42bec932dca30___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_e85bc3a05b58e6d3___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,15 +1,16 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//hhiissttoorriiccaalllleetttteerrss//____iinniitt____..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//____iinniitt____..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 00 ssttaatteemmeennttss ?  00 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_agents_py.html` & `scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_model_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/historicalletters/agents.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/historicalletters/model.py: 94%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/historicalletters/agents.py</b>:
-            <span class="pc_cov">0%</span>
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/historicalletters/model.py</b>:
+            <span class="pc_cov">94%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,305 +50,347 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">123 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">123<span class="text"> missing</span></button>
+            <span class="text">109 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">103<span class="text"> run</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">6<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-26 18:34 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">random</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="com">#from shapely.geometry import LineString</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="com">#from sympy import Point3D, Line3D</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="com">#from sympy.abc import t</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">getRegion</span><span class="op">,</span> <span class="nam">getPositionOnLine</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""The model class for HistoricalLetters."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">random</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">from</span> <span class="nam">pathlib</span> <span class="key">import</span> <span class="nam">Path</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">from</span> <span class="nam">numpy</span> <span class="key">import</span> <span class="nam">mean</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="key">from</span> <span class="nam">shapely</span> <span class="key">import</span> <span class="nam">contains</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">from</span> <span class="nam">tqdm</span> <span class="key">import</span> <span class="nam">tqdm</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="key">class</span> <span class="nam">SenderAgent</span><span class="op">(</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="str">"""The agent sending letters.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="str">    On initialization an agent is places in a geographical coordinate.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="str">    Each agent can send letters to other agents within a distance</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="str">    determined by the letterRange. Agents can also move to new positions</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="str">    within the moveRange. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">SenderAgent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">space</span> <span class="key">import</span> <span class="nam">Nuts2Eu</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">createData</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">utilities</span><span class="op">.</span><span class="nam">statistics</span> <span class="key">import</span> <span class="nam">prune</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="key">def</span> <span class="nam">getPrunedLedger</span><span class="op">(</span><span class="nam">model</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="str">"""Model reporter for simulation of archiving.</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="str">    Agents keep track of their changing "interest" by having a vector</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="str">    of all held positions in topic space. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span> <span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">,</span> <span class="nam">crs</span><span class="op">,</span> <span class="nam">updateTopic</span><span class="op">,</span> <span class="nam">similarityThreshold</span><span class="op">,</span> <span class="nam">moveRange</span><span class="op">,</span> <span class="nam">letterRange</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">,</span> <span class="nam">crs</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">region_id</span> <span class="op">=</span> <span class="str">''</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span> <span class="op">=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="com"># Not implemented:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="com"># The updating is a random walk along a line between receiver and sender.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="com"># The strength of adaption is therefore random.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="com"># self.updateTopic = updateTopic</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">similarityThreshold</span> <span class="op">=</span> <span class="nam">similarityThreshold</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">=</span> <span class="nam">moveRange</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span> <span class="op">=</span> <span class="nam">letterRange</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersSend</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">    <span class="key">def</span> <span class="nam">move</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">        <span class="str">"""The agent can randomly move to neighboring positions."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">            <span class="com"># Random decision to move or not, weights are 10% moving, 90% staying.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">            <span class="nam">move</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">0.9</span><span class="op">,</span> <span class="num">0.1</span><span class="op">]</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">            <span class="key">if</span> <span class="nam">move</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">movements</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">                <span class="nam">weights</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">                <span class="nam">possible_steps</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">                <span class="com"># Weighted random choice to target of moving.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">                <span class="com"># Strong receivers are more likely targets.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">                <span class="com"># This is another Polya Urn-like process.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">                <span class="key">for</span> <span class="nam">n</span> <span class="key">in</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">                    <span class="key">if</span> <span class="nam">n</span> <span class="op">!=</span> <span class="nam">self</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">                        <span class="nam">possible_steps</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">n</span><span class="op">.</span><span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">                        <span class="nam">weights</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">n</span><span class="op">.</span><span class="nam">numLettersReceived</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">                <span class="com"># Capture cases where no possible steps exist.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">                <span class="key">if</span> <span class="nam">possible_steps</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">                    <span class="key">if</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">weights</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">                        <span class="nam">lineEndPoint</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="nam">possible_steps</span><span class="op">,</span> <span class="nam">weights</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">                    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">                        <span class="nam">lineEndPoint</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="nam">possible_steps</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">                    <span class="nam">next_position</span> <span class="op">=</span> <span class="nam">getPositionOnLine</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">lineEndPoint</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">                    <span class="com"># Capture cases where next position has no overlap with region shapefiles.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">                    <span class="com"># TODO: Is there a more clever way to find nearby valid regions?</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">                    <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">                        <span class="nam">regionID</span> <span class="op">=</span> <span class="nam">getRegion</span><span class="op">(</span><span class="nam">next_position</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">                        <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">move_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">next_position</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">                    <span class="key">except</span> <span class="nam">IndexError</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">                        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">debug</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">                            <span class="nam">print</span><span class="op">(</span><span class="str">f"No overlap for {next_position}, aborting movement."</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">                        <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="str">    Returns statistics of ledger network of model run</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="str">    and various iterations of statistics of pruned networks.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="str">    The routine assumes that the network contains fields of sender,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t"><span class="str">    receiver and step information.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">    <span class="key">if</span> <span class="nam">model</span><span class="op">.</span><span class="nam">runPruning</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">ledgerColumns</span> <span class="op">=</span> <span class="op">[</span><span class="str">"sender"</span><span class="op">,</span> <span class="str">"receiver"</span><span class="op">,</span> <span class="str">"sender_location"</span><span class="op">,</span> <span class="str">"receiver_location"</span><span class="op">,</span> <span class="str">"topic"</span><span class="op">,</span> <span class="str">"step"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">modelparams</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="str">"population"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">population</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="str">"moveRange"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">moveRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="str">"letterRange"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">letterRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">            <span class="str">"useActivation"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">useActivation</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">            <span class="str">"useSocialNetwork"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">useSocialNetwork</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">            <span class="str">"similarityThreshold"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">similarityThreshold</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">            <span class="str">"longRangeNetworkFactor"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">            <span class="str">"shortRangeNetworkFactor"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="nam">result</span> <span class="op">=</span> <span class="nam">prune</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">            <span class="nam">modelparameters</span><span class="op">=</span><span class="nam">modelparams</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">            <span class="nam">network</span><span class="op">=</span><span class="nam">model</span><span class="op">.</span><span class="nam">letterLedger</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">            <span class="nam">columns</span><span class="op">=</span><span class="nam">ledgerColumns</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">            <span class="nam">iterations</span><span class="op">=</span><span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">            <span class="nam">delAmounts</span><span class="op">=</span><span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.25</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">            <span class="nam">delTypes</span><span class="op">=</span><span class="op">(</span><span class="str">"degree"</span><span class="op">,</span> <span class="str">"unif"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="nam">result</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">letterLedger</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">    <span class="key">return</span> <span class="nam">result</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t"><span class="key">def</span> <span class="nam">getComponents</span><span class="op">(</span><span class="nam">model</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span> <span class="op">-></span> <span class="nam">int</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">    <span class="str">"""Model reporter to get number of components.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t"><span class="str">    The MultiDiGraph is converted to undirected,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t"><span class="str">    considering only edges that are reciprocal, ie.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t"><span class="str">    edges are established if sender and receiver have</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t"><span class="str">    exchanged at least a letter in each direction.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="nam">newg</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">.</span><span class="nam">to_undirected</span><span class="op">(</span><span class="nam">reciprocal</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">    <span class="key">return</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">number_connected_components</span><span class="op">(</span><span class="nam">newg</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t"><span class="key">def</span> <span class="nam">getScaledLetters</span><span class="op">(</span><span class="nam">model</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span> <span class="op">-></span> <span class="nam">float</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="str">"""Return relative number of send letters."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">    <span class="key">return</span> <span class="nam">len</span><span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">letterLedger</span><span class="op">)</span><span class="op">/</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t"><span class="key">def</span> <span class="nam">getScaledMovements</span><span class="op">(</span><span class="nam">model</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span> <span class="op">-></span> <span class="nam">float</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">    <span class="str">"""Return relative number of movements."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">    <span class="key">return</span> <span class="nam">model</span><span class="op">.</span><span class="nam">movements</span><span class="op">/</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">    <span class="op">@</span><span class="nam">property</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">    <span class="key">def</span> <span class="nam">has_topic</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">        <span class="str">"""Current topic of the agent."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">    <span class="key">def</span> <span class="nam">has_letter_contacts</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">        <span class="str">"""List of already established and potential contacts.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t"><span class="str">        Implements the ego-reinforcing by allowing mutliple entries</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t"><span class="str">        of the same agent. In neighbourhoods agents are added proportional</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t"><span class="str">        to the number of letters they received, thus increasing the reinforcement.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t"><span class="str">        The range of the visible neighborhood is defined by the letterRange parameter</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t"><span class="str">        during model initialization.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t"><span class="str">        For neigbors in the social network (which can be long-tie), the same process </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t"><span class="str">        applies. Here, at the begining of each step a list of currently valid scalings</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t"><span class="str">        is created, see step function in model.py. This prevents updating of </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t"><span class="str">        scales during the random activations of agents in one step. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">        <span class="nam">contacts</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="com"># Social contacts </span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="nam">socialNetwork</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">G</span><span class="op">.</span><span class="nam">neighbors</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">scaleSocial</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">        <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">scaleSendInput</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">            <span class="key">if</span> <span class="nam">y</span> <span class="op">!=</span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">                <span class="nam">scaleSocial</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span><span class="op">{</span><span class="nam">x</span><span class="op">:</span> <span class="nam">y</span><span class="op">}</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">            <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">                <span class="nam">scaleSocial</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span><span class="op">{</span><span class="nam">x</span><span class="op">:</span> <span class="num">1</span><span class="op">}</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">        <span class="nam">reinforceSocial</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">y</span> <span class="key">in</span> <span class="op">[</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">*</span><span class="nam">scaleSocial</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">socialNetwork</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">y</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="nam">contacts</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">reinforceSocial</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">        <span class="com"># Geographical neighbors</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">            <span class="nam">neighborRec</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="key">for</span> <span class="nam">n</span> <span class="key">in</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">                <span class="key">if</span> <span class="nam">n</span> <span class="op">!=</span> <span class="nam">self</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">                    <span class="key">if</span> <span class="nam">n</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">                        <span class="nam">nMult</span> <span class="op">=</span> <span class="op">[</span><span class="nam">n</span><span class="op">]</span> <span class="op">*</span> <span class="nam">n</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">                        <span class="nam">neighborRec</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">nMult</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">                    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">                        <span class="nam">neighborRec</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">            <span class="nam">contacts</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">neighborRec</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">        <span class="key">return</span> <span class="nam">contacts</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">    <span class="key">def</span> <span class="nam">chooses_topic</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">        <span class="str">"""Choose the topic to write about in the letter.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t"><span class="str">        Agents can choose to write a topic from their own ledger or</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t"><span class="str">        in relation to the topics of the receiver. The choice is random.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="nam">topicChoices</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">        <span class="nam">topicChoices</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">receiver</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="key">if</span> <span class="nam">topicChoices</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="nam">initTopic</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">topicChoices</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">            <span class="nam">initTopic</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">        <span class="key">return</span> <span class="nam">initTopic</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t"><span class="key">class</span> <span class="nam">HistoricalLetters</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">    <span class="str">"""A letter sending model with historical informed initital positions.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t"><span class="str">    Each agent has an initial topic vector, expressed as a RGB value. The</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t"><span class="str">    initial positions of the agents is based on a weighted random draw</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t"><span class="str">    based on data from [1].</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t"><span class="str">    Each step, agents generate two neighbourhoods for sending letters and</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t"><span class="str">    potential targets to move towards. The probability to send letters is</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t"><span class="str">    a self-reinforcing process. During each sending the internal topic of</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t"><span class="str">    the sender is updated as a random rotation towards the receivers topic.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t"><span class="str">    [1] J. Lobo et al, Population-Area Relationship for Medieval European Cities,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t"><span class="str">        PLoS ONE 11(10): e0162678.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="nam">population</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">100</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">        <span class="nam">moveRange</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">        <span class="nam">letterRange</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.2</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="nam">similarityThreshold</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.2</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="nam">longRangeNetworkFactor</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.3</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">shortRangeNetworkFactor</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.4</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">        <span class="nam">regionData</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="nam">Path</span><span class="op">(</span><span class="nam">Path</span><span class="op">(</span><span class="nam">__file__</span><span class="op">)</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">resolve</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">"data/NUTS_RG_60M_2021_3857_LEVL_2.geojson"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="nam">populationDistributionData</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="nam">Path</span><span class="op">(</span><span class="nam">Path</span><span class="op">(</span><span class="nam">__file__</span><span class="op">)</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">resolve</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">"data/pone.0162678.s003.csv"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="op">*</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">        <span class="nam">useActivation</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">        <span class="nam">useSocialNetwork</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">        <span class="nam">runPruning</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="nam">debug</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="str">"""Initialize a HistoricalLetters model."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="com"># Parameters for agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">population</span> <span class="op">=</span> <span class="nam">population</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">=</span> <span class="nam">moveRange</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span> <span class="op">=</span> <span class="nam">letterRange</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">        <span class="com"># Parameters for model</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">runPruning</span> <span class="op">=</span> <span class="nam">runPruning</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">useActivation</span> <span class="op">=</span> <span class="nam">useActivation</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">similarityThreshold</span> <span class="op">=</span> <span class="nam">similarityThreshold</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">useSocialNetwork</span> <span class="op">=</span> <span class="nam">useSocialNetwork</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span> <span class="op">=</span> <span class="nam">longRangeNetworkFactor</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span> <span class="op">=</span> <span class="nam">shortRangeNetworkFactor</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">        <span class="com"># Initialize social network</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">socialNetwork</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">MultiDiGraph</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">        <span class="com"># Output variables</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">letterLedger</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">movements</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">        <span class="com"># Internal variables</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">time</span><span class="op">.</span><span class="nam">RandomActivation</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSendInput</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopicsDict</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span> <span class="op">=</span> <span class="nam">Nuts2Eu</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">debug</span> <span class="op">=</span> <span class="nam">debug</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">    <span class="key">def</span> <span class="nam">sendLetter</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">        <span class="str">"""Sending a letter based on an urn model."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">        <span class="nam">contacts</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">has_letter_contacts</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">        <span class="key">if</span> <span class="nam">contacts</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">            <span class="com"># Randomly choose from the list of possible receivers</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">            <span class="nam">receiver</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">contacts</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">            <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">receiver</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="key">and</span> <span class="nam">receiver</span> <span class="op">!=</span> <span class="nam">self</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">                <span class="nam">initTopic</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">chooses_topic</span><span class="op">(</span><span class="nam">receiver</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                <span class="com"># Calculate distance between own chosen topic </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">                <span class="com"># and current topic of receiver.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">                <span class="nam">distance</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">linalg</span><span class="op">.</span><span class="nam">norm</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">receiver</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">)</span> <span class="op">-</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">initTopic</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">                <span class="com"># If the calculated distance falls below a similarityThreshold,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">                <span class="com"># send the letter.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">                <span class="key">if</span> <span class="nam">distance</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">similarityThreshold</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">                    <span class="nam">receiver</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersSend</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">                    <span class="com"># Update model social network</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">G</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">                        <span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">                        <span class="nam">receiver</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">                        <span class="nam">step</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">G</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span><span class="op">[</span><span class="str">'numLettersSend'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersSend</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">G</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">receiver</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span><span class="op">[</span><span class="str">'numLettersReceived'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">receiver</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">                    <span class="com"># Update receivers topic vector as a random movement</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">                    <span class="com"># in 3D space on the line between receivers current topic</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">                    <span class="com"># and the senders chosen topic vectors. An amount of 1 would</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">                    <span class="com"># correspond to a complete addaption of the senders chosen topic</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">                    <span class="com"># vector by the receiver. An amount of 0 means the </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">                    <span class="com"># receiver is not influencend by the sender at all.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">                    <span class="com"># If both topics coincide nothing is changing. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">                    <span class="nam">start</span> <span class="op">=</span> <span class="nam">receiver</span><span class="op">.</span><span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">                    <span class="nam">end</span> <span class="op">=</span> <span class="nam">initTopic</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">                    <span class="key">if</span> <span class="key">not</span> <span class="nam">start</span> <span class="op">==</span> <span class="nam">end</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">                        <span class="nam">updatedTopicVec</span> <span class="op">=</span> <span class="nam">getPositionOnLine</span><span class="op">(</span><span class="nam">start</span><span class="op">,</span> <span class="nam">end</span><span class="op">,</span> <span class="nam">returnType</span><span class="op">=</span><span class="str">"coords"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">                    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">                        <span class="nam">updatedTopicVec</span> <span class="op">=</span> <span class="nam">initTopic</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">                    <span class="com"># The letter sending process is complet and the chosen topic of the letter is put into a ledger entry.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">letterLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">                        <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">                            <span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">region_id</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">.</span><span class="nam">region_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">                            <span class="nam">initTopic</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">steps</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">                        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">                    <span class="com"># Take note of the influence the letter had on the receiver. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">                    <span class="com"># This information is used in the step function to update all</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">                    <span class="com"># agent's currently held topic positions.  </span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">                        <span class="op">{</span><span class="nam">receiver</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">updatedTopicVec</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">updatedTopic</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">        <span class="nam">currentActivation</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">            <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">            <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">            <span class="nam">k</span><span class="op">=</span><span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">        <span class="key">if</span> <span class="nam">currentActivation</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">            <span class="nam">neighborsMove</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">                    <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">                    <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">                    <span class="nam">center</span><span class="op">=</span><span class="key">False</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">                <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">            <span class="nam">neighborsSend</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">                    <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">                    <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">                    <span class="nam">center</span><span class="op">=</span><span class="key">False</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">                <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">sendLetter</span><span class="op">(</span><span class="nam">neighborsSend</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">move</span><span class="op">(</span><span class="nam">neighborsMove</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t"><span class="key">class</span> <span class="nam">RegionAgent</span><span class="op">(</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">    <span class="str">"""The region keeping track of contained agents.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t"><span class="str">    This agent type is introduced for visualization purposes.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t"><span class="str">    SenderAgents are linked to regions by calculation of a </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t"><span class="str">    geographic overlap of the region shape with the SenderAgent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t"><span class="str">    position. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t"><span class="str">    At initialization, the regions are populated with SenderAgents</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t"><span class="str">    giving rise to a dictionary of the contained SenderAgent IDs and</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t"><span class="str">    their initial topic. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t"><span class="str">    At each movement, the SenderAgent might cross region boundaries. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t"><span class="str">    This reqieres a re-calculation of the potential overlap. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">,</span> <span class="nam">crs</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">,</span> <span class="nam">crs</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">        <span class="com"># Initialize region agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">        <span class="com"># Set up the grid with patches for every NUTS region</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">        <span class="com"># Create region agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">        <span class="nam">ac</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">AgentCreator</span><span class="op">(</span><span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">regions</span> <span class="op">=</span> <span class="nam">ac</span><span class="op">.</span><span class="nam">from_file</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">            <span class="nam">regionData</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">            <span class="nam">unique_id</span><span class="op">=</span><span class="str">"NUTS_ID"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">        <span class="com"># Add regions to Nuts2Eu geospace</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">add_regions</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">regions</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="com"># Initialize sender agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="com"># Draw initial geographic positions of agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">        <span class="nam">initSenderGeoDf</span> <span class="op">=</span> <span class="nam">createData</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">            <span class="nam">population</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">            <span class="nam">populationDistribution</span><span class="op">=</span><span class="nam">populationDistributionData</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">        <span class="com"># Calculate mean of mean distances for each agent.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">        <span class="com"># This is used as a measure for the range of exchanges.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">        <span class="nam">meandistances</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span> <span class="key">in</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">index</span><span class="op">.</span><span class="nam">to_numpy</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">            <span class="nam">name</span> <span class="op">=</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">loc</span><span class="op">[</span><span class="nam">idx</span><span class="op">,</span> <span class="str">"unique_id"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">            <span class="nam">geom</span> <span class="op">=</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">loc</span><span class="op">[</span><span class="nam">idx</span><span class="op">,</span> <span class="str">"geometry"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">            <span class="nam">otherAgents</span> <span class="op">=</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">f"unique_id != '{name}'"</span><span class="op">)</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">            <span class="nam">geometries</span> <span class="op">=</span> <span class="nam">otherAgents</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">to_numpy</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">            <span class="nam">distances</span> <span class="op">=</span> <span class="op">[</span><span class="nam">geom</span><span class="op">.</span><span class="nam">distance</span><span class="op">(</span><span class="nam">othergeom</span><span class="op">)</span> <span class="key">for</span> <span class="nam">othergeom</span> <span class="key">in</span> <span class="nam">geometries</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">            <span class="nam">meandistances</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">mean</span><span class="op">(</span><span class="nam">distances</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">meandistance</span> <span class="op">=</span> <span class="nam">mean</span><span class="op">(</span><span class="nam">meandistances</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">        <span class="com"># Populate factors dictionary</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">factors</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">            <span class="str">"similarityThreshold"</span><span class="op">:</span> <span class="nam">similarityThreshold</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">            <span class="str">"moveRange"</span><span class="op">:</span> <span class="nam">moveRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">            <span class="str">"letterRange"</span><span class="op">:</span> <span class="nam">letterRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">        <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">        <span class="com"># Set up agent creator for senders</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">        <span class="nam">ac_senders</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">AgentCreator</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">            <span class="nam">SenderAgent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">            <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">            <span class="nam">agent_kwargs</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">factors</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">        <span class="com"># Create agents based on random coordinates generated</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">        <span class="com"># in the createData step above, see util.py file.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">        <span class="nam">senders</span> <span class="op">=</span> <span class="nam">ac_senders</span><span class="op">.</span><span class="nam">from_GeoDataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">            <span class="nam">initSenderGeoDf</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">            <span class="nam">unique_id</span><span class="op">=</span><span class="str">"unique_id"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">        <span class="com"># Create random set of initial topic vectors.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">        <span class="nam">topics</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">            <span class="nam">tuple</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">                <span class="op">[</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">3</span><span class="op">)</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">            <span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">        <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">        <span class="com"># Setup senders</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span><span class="op">,</span> <span class="nam">sender</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">senders</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">            <span class="com"># Add to social network</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">.</span><span class="nam">add_node</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">                <span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">                <span class="nam">numLettersSend</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">                <span class="nam">numLettersReceived</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">            <span class="com"># Give sender topic</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">            <span class="nam">sender</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">idx</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">            <span class="com"># Add current topic to dict</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">                <span class="op">{</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">idx</span><span class="op">]</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">            <span class="com"># Set random activation weight</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">            <span class="key">if</span> <span class="nam">useActivation</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">                <span class="nam">sender</span><span class="op">.</span><span class="nam">activationWeight</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">            <span class="com"># Add sender to its region</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">            <span class="nam">regionID</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">                <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">regions</span> <span class="key">if</span> <span class="nam">contains</span><span class="op">(</span><span class="nam">x</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">sender</span><span class="op">.</span><span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">            <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">add_sender</span><span class="op">(</span><span class="nam">sender</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">            <span class="key">except</span> <span class="nam">IndexError</span> <span class="key">as</span> <span class="nam">exc</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">                <span class="nam">text</span> <span class="op">=</span> <span class="str">f"Problem finding region for {sender.geometry}."</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">                <span class="key">raise</span> <span class="nam">IndexError</span><span class="op">(</span><span class="nam">text</span><span class="op">)</span> <span class="key">from</span> <span class="nam">exc</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">            <span class="com"># Add sender to schedule</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">add</span><span class="op">(</span><span class="nam">sender</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t">        <span class="com"># Create social network</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">        <span class="key">if</span> <span class="nam">useSocialNetwork</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">            <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t">                <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">_createSocialEdges</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t">    <span class="key">def</span> <span class="nam">has_main_topic</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">            <span class="nam">topics</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span><span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">            <span class="nam">total</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span><span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">            <span class="key">if</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">                <span class="nam">weight</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="op">/</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">total</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">            <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">                <span class="nam">weight</span> <span class="op">=</span> <span class="op">[</span><span class="num">1</span><span class="op">/</span><span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">]</span> <span class="op">*</span> <span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">            <span class="nam">mixed_colors</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="op">[</span><span class="nam">np</span><span class="op">.</span><span class="nam">multiply</span><span class="op">(</span><span class="nam">weight</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">,</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">)</span> <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">            <span class="nam">colors_inverse</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">subtract</span><span class="op">(</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">,</span> <span class="nam">mixed_colors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">            <span class="key">return</span> <span class="nam">colors_inverse</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">            <span class="key">return</span> <span class="op">(</span><span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">sender</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t">        <span class="nam">receivedLetters</span> <span class="op">=</span> <span class="nam">sender</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t">        <span class="key">if</span> <span class="nam">receivedLetters</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t">            <span class="nam">scale</span> <span class="op">=</span> <span class="nam">receivedLetters</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t">            <span class="nam">scale</span> <span class="op">=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t253" href="#t253">253</a></span><span class="t">            <span class="op">{</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="op">(</span><span class="nam">sender</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">,</span> <span class="nam">scale</span><span class="op">)</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t254" href="#t254">254</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t255" href="#t255">255</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t256" href="#t256">256</a></span><span class="t">    <span class="key">def</span> <span class="nam">remove_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">sender</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t257" href="#t257">257</a></span><span class="t">        <span class="key">del</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">[</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">DataCollector</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">            <span class="nam">model_reporters</span><span class="op">=</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">                <span class="str">"Ledger"</span><span class="op">:</span> <span class="nam">getPrunedLedger</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">                <span class="str">"Letters"</span><span class="op">:</span> <span class="nam">getScaledLetters</span> <span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">                <span class="str">"Movements"</span><span class="op">:</span> <span class="nam">getScaledMovements</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">                <span class="str">"Clusters"</span><span class="op">:</span> <span class="nam">getComponents</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">            <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">    <span class="key">def</span> <span class="nam">_createSocialEdges</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">graph</span><span class="op">:</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">MultiDiGraph</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">        <span class="str">"""Create social edges with the different wiring factors.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t"><span class="str">        Define a close range by using the moveRange parameter. Among</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t"><span class="str">        these neighbors, create a connection with probability set by</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t"><span class="str">        the shortRangeNetworkFactor.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t"><span class="str">        For all other agents, that are not in this closeRange group,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t"><span class="str">        create a connection with the probability set by the longRangeNetworkFactor.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t">        <span class="nam">closerange</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t">            <span class="nam">agent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t253" href="#t253">253</a></span><span class="t">            <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t254" href="#t254">254</a></span><span class="t">            <span class="nam">center</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t255" href="#t255">255</a></span><span class="t">        <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t256" href="#t256">256</a></span><span class="t">        <span class="key">for</span> <span class="nam">neighbor</span> <span class="key">in</span> <span class="nam">closerange</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t257" href="#t257">257</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">!=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t258" href="#t258">258</a></span><span class="t">                <span class="nam">connect</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t259" href="#t259">259</a></span><span class="t">                    <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t260" href="#t260">260</a></span><span class="t">                    <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span><span class="op">,</span> <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t261" href="#t261">261</a></span><span class="t">                    <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t262" href="#t262">262</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t263" href="#t263">263</a></span><span class="t">                <span class="key">if</span> <span class="nam">connect</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t264" href="#t264">264</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t265" href="#t265">265</a></span><span class="t">        <span class="nam">longrange</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span> <span class="key">if</span> <span class="nam">x</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">closerange</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t266" href="#t266">266</a></span><span class="t">        <span class="key">for</span> <span class="nam">neighbor</span> <span class="key">in</span> <span class="nam">longrange</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t267" href="#t267">267</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">!=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t268" href="#t268">268</a></span><span class="t">                <span class="nam">connect</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t269" href="#t269">269</a></span><span class="t">                    <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t270" href="#t270">270</a></span><span class="t">                    <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span><span class="op">,</span> <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t271" href="#t271">271</a></span><span class="t">                    <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t272" href="#t272">272</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t273" href="#t273">273</a></span><span class="t">                <span class="key">if</span> <span class="nam">connect</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t274" href="#t274">274</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t275" href="#t275">275</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t276" href="#t276">276</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t277" href="#t277">277</a></span><span class="t">        <span class="str">"""One simulation step."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t278" href="#t278">278</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSendInput</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t279" href="#t279">279</a></span><span class="t">            <span class="op">**</span><span class="op">{</span><span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">x</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t280" href="#t280">280</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t281" href="#t281">281</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t282" href="#t282">282</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">collect</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t283" href="#t283">283</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t284" href="#t284">284</a></span><span class="t">    <span class="key">def</span> <span class="nam">step_no_data</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t285" href="#t285">285</a></span><span class="t">        <span class="str">"""One simulation step without datacollection."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t286" href="#t286">286</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSendInput</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t287" href="#t287">287</a></span><span class="t">            <span class="op">**</span><span class="op">{</span><span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">x</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t288" href="#t288">288</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t289" href="#t289">289</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t290" href="#t290">290</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t291" href="#t291">291</a></span><span class="t">    <span class="key">def</span> <span class="nam">run</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">n</span><span class="op">:</span><span class="nam">int</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t292" href="#t292">292</a></span><span class="t">        <span class="str">"""Run the model for n steps."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t293" href="#t293">293</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">debug</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t294" href="#t294">294</a></span><span class="t">            <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">tqdm</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t295" href="#t295">295</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">step_no_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t296" href="#t296">296</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t297" href="#t297">297</a></span><span class="t">            <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t298" href="#t298">298</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">step_no_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t299" href="#t299">299</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">collect</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-26 18:34 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,282 +1,322 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//hhiissttoorriiccaalllleetttteerrss//aaggeennttss..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//mmooddeell..ppyy:: 9944%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 112233 ssttaatteemmeennttss ?  00 rruunn 112233 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 110099 ssttaatteemmeennttss ?  110033 rruunn 66 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
-_1import random 
-_2import numpy as np 
-_3import networkx as nx 
-_4#from shapely.geometry import LineString 
-_5#from sympy import Point3D, Line3D 
-_6#from sympy.abc import t 
-_7 
-_8import mesa 
-_9import mesa_geo as mg 
-_1_0 
-_1_1from scicom.historicalletters.utils import getRegion, getPositionOnLine 
+26 18:34 +0200
+_1"""The model class for HistoricalLetters.""" 
+_2import random 
+_3from pathlib import Path 
+_4 
+_5import mesa 
+_6import mesa_geo as mg 
+_7import networkx as nx 
+_8import pandas as pd 
+_9from numpy import mean 
+_1_0from shapely import contains 
+_1_1from tqdm import tqdm 
 _1_2 
-_1_3 
-_1_4class SenderAgent(mg.GeoAgent): 
-_1_5 """The agent sending letters. 
-_1_6  
-_1_7 On initialization an agent is places in a geographical coordinate. 
-_1_8 Each agent can send letters to other agents within a distance 
-_1_9 determined by the letterRange. Agents can also move to new positions 
-_2_0 within the moveRange.  
+_1_3from scicom.historicalletters.agents import RegionAgent, SenderAgent 
+_1_4from scicom.historicalletters.space import Nuts2Eu 
+_1_5from scicom.historicalletters.utils import createData 
+_1_6from scicom.utilities.statistics import prune 
+_1_7 
+_1_8 
+_1_9def getPrunedLedger(model: mesa.Model) -> pd.DataFrame: 
+_2_0 """Model reporter for simulation of archiving. 
 _2_1 
-_2_2 Agents keep track of their changing "interest" by having a vector 
-_2_3 of all held positions in topic space.  
-_2_4 """ 
-_2_5 def __init__( 
-_2_6 self, unique_id, model, geometry, crs, updateTopic, similarityThreshold,
-moveRange, letterRange 
-_2_7 ): 
-_2_8 super().__init__(unique_id, model, geometry, crs) 
-_2_9 self.region_id = '' 
-_3_0 self.activationWeight = 1 
-_3_1 # Not implemented: 
-_3_2 # The updating is a random walk along a line between receiver and sender. 
-_3_3 # The strength of adaption is therefore random. 
-_3_4 # self.updateTopic = updateTopic 
-_3_5 self.similarityThreshold = similarityThreshold 
-_3_6 self.moveRange = moveRange 
-_3_7 self.letterRange = letterRange 
-_3_8 self.topicLedger = [] 
-_3_9 self.numLettersReceived = 0 
-_4_0 self.numLettersSend = 0 
-_4_1 
-_4_2 def move(self, neighbors): 
-_4_3 """The agent can randomly move to neighboring positions.""" 
-_4_4 if neighbors: 
-_4_5 # Random decision to move or not, weights are 10% moving, 90% staying. 
-_4_6 move = random.choices([0, 1], weights=[0.9, 0.1], k=1) 
-_4_7 if move[0] == 1: 
-_4_8 self.model.movements += 1 
-_4_9 weights = [] 
-_5_0 possible_steps = [] 
-_5_1 # Weighted random choice to target of moving. 
-_5_2 # Strong receivers are more likely targets. 
-_5_3 # This is another Polya Urn-like process. 
-_5_4 for n in neighbors: 
-_5_5 if n != self: 
-_5_6 possible_steps.append(n.geometry) 
-_5_7 weights.append(n.numLettersReceived) 
-_5_8 # Capture cases where no possible steps exist. 
-_5_9 if possible_steps: 
-_6_0 if sum(weights) > 0: 
-_6_1 lineEndPoint = random.choices(possible_steps, weights, k=1) 
-_6_2 else: 
-_6_3 lineEndPoint = random.choices(possible_steps, k=1) 
-_6_4 next_position = getPositionOnLine(self.geometry, lineEndPoint[0]) 
-_6_5 # Capture cases where next position has no overlap with region shapefiles. 
-_6_6 # TODO: Is there a more clever way to find nearby valid regions? 
-_6_7 try: 
-_6_8 regionID = getRegion(next_position, self.model) 
-_6_9 self.model.space.move_sender(self, next_position, regionID) 
-_7_0 except IndexError: 
-_7_1 if self.model.debug: 
-_7_2 print(f"No overlap for {next_position}, aborting movement.") 
-_7_3 pass 
+_2_2 Returns statistics of ledger network of model run 
+_2_3 and various iterations of statistics of pruned networks. 
+_2_4 
+_2_5 The routine assumes that the network contains fields of sender, 
+_2_6 receiver and step information. 
+_2_7 """ 
+_2_8 if model.runPruning is True: 
+_2_9 ledgerColumns = ["sender", "receiver", "sender_location",
+"receiver_location", "topic", "step"] 
+_3_0 modelparams = { 
+_3_1 "population": model.population, 
+_3_2 "moveRange": model.moveRange, 
+_3_3 "letterRange": model.letterRange, 
+_3_4 "useActivation": model.useActivation, 
+_3_5 "useSocialNetwork": model.useSocialNetwork, 
+_3_6 "similarityThreshold": model.similarityThreshold, 
+_3_7 "longRangeNetworkFactor": model.longRangeNetworkFactor, 
+_3_8 "shortRangeNetworkFactor": model.shortRangeNetworkFactor, 
+_3_9 } 
+_4_0 result = prune( 
+_4_1 modelparameters=modelparams, 
+_4_2 network=model.letterLedger, 
+_4_3 columns=ledgerColumns, 
+_4_4 iterations=10, 
+_4_5 delAmounts=(0.1, 0.25, 0.5, 0.75, 0.9), 
+_4_6 delTypes=("degree", "unif", "exp", "beta"), 
+_4_7 ) 
+_4_8 else: 
+_4_9 result = model.letterLedger 
+_5_0 return result 
+_5_1 
+_5_2 
+_5_3def getComponents(model: mesa.Model) -> int: 
+_5_4 """Model reporter to get number of components. 
+_5_5 
+_5_6 The MultiDiGraph is converted to undirected, 
+_5_7 considering only edges that are reciprocal, ie. 
+_5_8 edges are established if sender and receiver have 
+_5_9 exchanged at least a letter in each direction. 
+_6_0 """ 
+_6_1 newg = model.socialNetwork.to_undirected(reciprocal=True) 
+_6_2 return nx.number_connected_components(newg) 
+_6_3 
+_6_4 
+_6_5def getScaledLetters(model: mesa.Model) -> float: 
+_6_6 """Return relative number of send letters.""" 
+_6_7 return len(model.letterLedger)/model.schedule.time 
+_6_8 
+_6_9 
+_7_0def getScaledMovements(model: mesa.Model) -> float: 
+_7_1 """Return relative number of movements.""" 
+_7_2 return model.movements/model.schedule.time 
+_7_3 
 _7_4 
-_7_5 
-_7_6 @property 
-_7_7 def has_topic(self): 
-_7_8 """Current topic of the agent.""" 
-_7_9 return self.topicVec 
-_8_0 
-_8_1 def has_letter_contacts(self, neighbors=False): 
-_8_2 """List of already established and potential contacts. 
-_8_3 
-_8_4 Implements the ego-reinforcing by allowing mutliple entries 
-_8_5 of the same agent. In neighbourhoods agents are added proportional 
-_8_6 to the number of letters they received, thus increasing the reinforcement. 
-_8_7 The range of the visible neighborhood is defined by the letterRange
-parameter 
-_8_8 during model initialization. 
-_8_9 
-_9_0 For neigbors in the social network (which can be long-tie), the same process
- 
-_9_1 applies. Here, at the begining of each step a list of currently valid
-scalings 
-_9_2 is created, see step function in model.py. This prevents updating of  
-_9_3 scales during the random activations of agents in one step.  
-_9_4 """ 
-_9_5 contacts = [] 
-_9_6 # Social contacts  
-_9_7 socialNetwork = [x for x in self.model.G.neighbors(self.unique_id)] 
-_9_8 scaleSocial = {} 
-_9_9 for x, y in self.model.scaleSendInput.items(): 
-_1_0_0 if y != 0: 
-_1_0_1 scaleSocial.update({x: y}) 
-_1_0_2 else: 
-_1_0_3 scaleSocial.update({x: 1}) 
-_1_0_4 reinforceSocial = [x for y in [[x]*scaleSocial[x] for x in socialNetwork]
-for x in y] 
-_1_0_5 contacts.extend(reinforceSocial) 
-_1_0_6 # Geographical neighbors 
-_1_0_7 if neighbors: 
-_1_0_8 neighborRec = [] 
-_1_0_9 for n in neighbors: 
-_1_1_0 if n != self: 
-_1_1_1 if n.numLettersReceived > 0: 
-_1_1_2 nMult = [n] * n.numLettersReceived 
-_1_1_3 neighborRec.extend(nMult) 
-_1_1_4 else: 
-_1_1_5 neighborRec.append(n) 
-_1_1_6 contacts.extend(neighborRec) 
-_1_1_7 return contacts 
-_1_1_8 
-_1_1_9 def chooses_topic(self, receiver): 
-_1_2_0 """Choose the topic to write about in the letter. 
-_1_2_1 
-_1_2_2 Agents can choose to write a topic from their own ledger or 
-_1_2_3 in relation to the topics of the receiver. The choice is random. 
-_1_2_4 """ 
-_1_2_5 topicChoices = self.topicLedger.copy() 
-_1_2_6 topicChoices.extend(receiver.topicLedger.copy()) 
-_1_2_7 if topicChoices: 
-_1_2_8 initTopic = random.choice(topicChoices) 
-_1_2_9 else: 
-_1_3_0 initTopic = self.topicVec 
-_1_3_1 return initTopic 
+_7_5class HistoricalLetters(mesa.Model): 
+_7_6 """A letter sending model with historical informed initital positions. 
+_7_7 
+_7_8 Each agent has an initial topic vector, expressed as a RGB value. The 
+_7_9 initial positions of the agents is based on a weighted random draw 
+_8_0 based on data from [1]. 
+_8_1 
+_8_2 Each step, agents generate two neighbourhoods for sending letters and 
+_8_3 potential targets to move towards. The probability to send letters is 
+_8_4 a self-reinforcing process. During each sending the internal topic of 
+_8_5 the sender is updated as a random rotation towards the receivers topic. 
+_8_6 
+_8_7 [1] J. Lobo et al, Population-Area Relationship for Medieval European
+Cities, 
+_8_8 PLoS ONE 11(10): e0162678. 
+_8_9 """ 
+_9_0 
+_9_1 def __init__( 
+_9_2 self, 
+_9_3 population: int = 100, 
+_9_4 moveRange: float = 0.05, 
+_9_5 letterRange: float = 0.2, 
+_9_6 similarityThreshold: float = 0.2, 
+_9_7 longRangeNetworkFactor: float = 0.3, 
+_9_8 shortRangeNetworkFactor: float = 0.4, 
+_9_9 regionData: str = Path(Path(__file__).parent.parent.resolve(), "data/
+NUTS_RG_60M_2021_3857_LEVL_2.geojson"), 
+_1_0_0 populationDistributionData: str = Path(Path(__file__).parent.parent.resolve
+(), "data/pone.0162678.s003.csv"), 
+_1_0_1 *, 
+_1_0_2 useActivation: bool = False, 
+_1_0_3 useSocialNetwork: bool = False, 
+_1_0_4 runPruning: bool = False, 
+_1_0_5 debug: bool = False, 
+_1_0_6 ) -> None: 
+_1_0_7 """Initialize a HistoricalLetters model.""" 
+_1_0_8 super().__init__() 
+_1_0_9 
+_1_1_0 # Parameters for agents 
+_1_1_1 self.population = population 
+_1_1_2 self.moveRange = moveRange 
+_1_1_3 self.letterRange = letterRange 
+_1_1_4 # Parameters for model 
+_1_1_5 self.runPruning = runPruning 
+_1_1_6 self.useActivation = useActivation 
+_1_1_7 self.similarityThreshold = similarityThreshold 
+_1_1_8 self.useSocialNetwork = useSocialNetwork 
+_1_1_9 self.longRangeNetworkFactor = longRangeNetworkFactor 
+_1_2_0 self.shortRangeNetworkFactor = shortRangeNetworkFactor 
+_1_2_1 # Initialize social network 
+_1_2_2 self.socialNetwork = nx.MultiDiGraph() 
+_1_2_3 # Output variables 
+_1_2_4 self.letterLedger = [] 
+_1_2_5 self.movements = 0 
+_1_2_6 # Internal variables 
+_1_2_7 self.schedule = mesa.time.RandomActivation(self) 
+_1_2_8 self.scaleSendInput = {} 
+_1_2_9 self.updatedTopicsDict = {} 
+_1_3_0 self.space = Nuts2Eu() 
+_1_3_1 self.debug = debug 
 _1_3_2 
-_1_3_3 def sendLetter(self, neighbors): 
-_1_3_4 """Sending a letter based on an urn model.""" 
-_1_3_5 contacts = self.has_letter_contacts(neighbors) 
-_1_3_6 if contacts: 
-_1_3_7 # Randomly choose from the list of possible receivers 
-_1_3_8 receiver = random.choice(contacts) 
-_1_3_9 if isinstance(receiver, SenderAgent) and receiver != self: 
-_1_4_0 initTopic = self.chooses_topic(receiver) 
-_1_4_1 # Calculate distance between own chosen topic  
-_1_4_2 # and current topic of receiver. 
-_1_4_3 distance = np.linalg.norm(np.array(receiver.topicVec) - np.array
-(initTopic)) 
-_1_4_4 # If the calculated distance falls below a similarityThreshold, 
-_1_4_5 # send the letter. 
-_1_4_6 if distance < self.similarityThreshold: 
-_1_4_7 receiver.numLettersReceived += 1 
-_1_4_8 self.numLettersSend += 1 
-_1_4_9 # Update model social network 
-_1_5_0 self.model.G.add_edge( 
-_1_5_1 self.unique_id, 
-_1_5_2 receiver.unique_id, 
-_1_5_3 step=self.model.schedule.time 
-_1_5_4 ) 
-_1_5_5 self.model.G.nodes()[self.unique_id]['numLettersSend'] =
-self.numLettersSend 
-_1_5_6 self.model.G.nodes()[receiver.unique_id]['numLettersReceived'] =
-receiver.numLettersReceived 
-_1_5_7 # Update receivers topic vector as a random movement 
-_1_5_8 # in 3D space on the line between receivers current topic 
-_1_5_9 # and the senders chosen topic vectors. An amount of 1 would 
-_1_6_0 # correspond to a complete addaption of the senders chosen topic 
-_1_6_1 # vector by the receiver. An amount of 0 means the  
-_1_6_2 # receiver is not influencend by the sender at all. 
-_1_6_3 # If both topics coincide nothing is changing.  
-_1_6_4 start = receiver.topicVec 
-_1_6_5 end = initTopic 
-_1_6_6 if not start == end: 
-_1_6_7 updatedTopicVec = getPositionOnLine(start, end, returnType="coords") 
-_1_6_8 else: 
-_1_6_9 updatedTopicVec = initTopic 
-_1_7_0 # The letter sending process is complet and the chosen topic of the letter
-is put into a ledger entry. 
-_1_7_1 self.model.letterLedger.append( 
-_1_7_2 ( 
-_1_7_3 self.unique_id, receiver.unique_id, self.region_id, receiver.region_id, 
-_1_7_4 initTopic, self.model.schedule.steps 
-_1_7_5 ) 
-_1_7_6 ) 
-_1_7_7 # Take note of the influence the letter had on the receiver.  
-_1_7_8 # This information is used in the step function to update all 
-_1_7_9 # agent's currently held topic positions.  
-_1_8_0 self.model.updatedTopicsDict.update( 
-_1_8_1 {receiver.unique_id: updatedTopicVec} 
-_1_8_2 ) 
-_1_8_3 self.model.updatedTopic += 1 
-_1_8_4 
-_1_8_5 def step(self): 
-_1_8_6 self.topicVec = self.model.updatedTopicsDict[self.unique_id] 
-_1_8_7 self.topicLedger.append( 
-_1_8_8 self.topicVec 
-_1_8_9 ) 
-_1_9_0 currentActivation = random.choices( 
-_1_9_1 population=[0, 1], 
-_1_9_2 weights=[1 - self.activationWeight, self.activationWeight], 
-_1_9_3 k=1 
-_1_9_4 ) 
-_1_9_5 if currentActivation[0] == 1: 
-_1_9_6 neighborsMove = [ 
-_1_9_7 x for x in self.model.space.get_neighbors_within_distance( 
-_1_9_8 self, 
-_1_9_9 distance=self.moveRange * self.model.meandistance, 
-_2_0_0 center=False 
-_2_0_1 ) if isinstance(x, SenderAgent) 
-_2_0_2 ] 
-_2_0_3 neighborsSend = [ 
-_2_0_4 x for x in self.model.space.get_neighbors_within_distance( 
-_2_0_5 self, 
-_2_0_6 distance=self.letterRange * self.model.meandistance, 
-_2_0_7 center=False 
-_2_0_8 ) if isinstance(x, SenderAgent) 
-_2_0_9 ] 
-_2_1_0 self.sendLetter(neighborsSend) 
-_2_1_1 self.move(neighborsMove) 
-_2_1_2 
-_2_1_3 
-_2_1_4class RegionAgent(mg.GeoAgent): 
-_2_1_5 """The region keeping track of contained agents. 
-_2_1_6  
-_2_1_7 This agent type is introduced for visualization purposes. 
-_2_1_8 SenderAgents are linked to regions by calculation of a  
-_2_1_9 geographic overlap of the region shape with the SenderAgent 
-_2_2_0 position.  
-_2_2_1 At initialization, the regions are populated with SenderAgents 
-_2_2_2 giving rise to a dictionary of the contained SenderAgent IDs and 
-_2_2_3 their initial topic.  
-_2_2_4 At each movement, the SenderAgent might cross region boundaries.  
-_2_2_5 This reqieres a re-calculation of the potential overlap.  
-_2_2_6 """ 
-_2_2_7 
-_2_2_8 def __init__(self, unique_id, model, geometry, crs): 
-_2_2_9 super().__init__(unique_id, model, geometry, crs) 
-_2_3_0 self.senders_in_region = dict() 
+_1_3_3 ####### 
+_1_3_4 # Initialize region agents 
+_1_3_5 ####### 
+_1_3_6 
+_1_3_7 # Set up the grid with patches for every NUTS region 
+_1_3_8 # Create region agents 
+_1_3_9 ac = mg.AgentCreator(RegionAgent, model=self) 
+_1_4_0 self.regions = ac.from_file( 
+_1_4_1 regionData, 
+_1_4_2 unique_id="NUTS_ID", 
+_1_4_3 ) 
+_1_4_4 # Add regions to Nuts2Eu geospace 
+_1_4_5 self.space.add_regions(self.regions) 
+_1_4_6 
+_1_4_7 ####### 
+_1_4_8 # Initialize sender agents 
+_1_4_9 ####### 
+_1_5_0 
+_1_5_1 # Draw initial geographic positions of agents 
+_1_5_2 initSenderGeoDf = createData( 
+_1_5_3 population, 
+_1_5_4 populationDistribution=populationDistributionData, 
+_1_5_5 ) 
+_1_5_6 
+_1_5_7 # Calculate mean of mean distances for each agent. 
+_1_5_8 # This is used as a measure for the range of exchanges. 
+_1_5_9 meandistances = [] 
+_1_6_0 for idx in initSenderGeoDf.index.to_numpy(): 
+_1_6_1 name = initSenderGeoDf.loc[idx, "unique_id"] 
+_1_6_2 geom = initSenderGeoDf.loc[idx, "geometry"] 
+_1_6_3 otherAgents = initSenderGeoDf.query(f"unique_id != '{name}'").copy() 
+_1_6_4 geometries = otherAgents.geometry.to_numpy() 
+_1_6_5 distances = [geom.distance(othergeom) for othergeom in geometries] 
+_1_6_6 meandistances.append(mean(distances)) 
+_1_6_7 self.meandistance = mean(meandistances) 
+_1_6_8 
+_1_6_9 # Populate factors dictionary 
+_1_7_0 self.factors = { 
+_1_7_1 "similarityThreshold": similarityThreshold, 
+_1_7_2 "moveRange": moveRange, 
+_1_7_3 "letterRange": letterRange, 
+_1_7_4 } 
+_1_7_5 
+_1_7_6 # Set up agent creator for senders 
+_1_7_7 ac_senders = mg.AgentCreator( 
+_1_7_8 SenderAgent, 
+_1_7_9 model=self, 
+_1_8_0 agent_kwargs=self.factors, 
+_1_8_1 ) 
+_1_8_2 
+_1_8_3 # Create agents based on random coordinates generated 
+_1_8_4 # in the createData step above, see util.py file. 
+_1_8_5 senders = ac_senders.from_GeoDataFrame( 
+_1_8_6 initSenderGeoDf, 
+_1_8_7 unique_id="unique_id", 
+_1_8_8 ) 
+_1_8_9 
+_1_9_0 # Create random set of initial topic vectors. 
+_1_9_1 topics = [ 
+_1_9_2 tuple( 
+_1_9_3 [random.random() for x in range(3)], 
+_1_9_4 ) for x in range(self.population) 
+_1_9_5 ] 
+_1_9_6 
+_1_9_7 # Setup senders 
+_1_9_8 for idx, sender in enumerate(senders): 
+_1_9_9 # Add to social network 
+_2_0_0 self.socialNetwork.add_node( 
+_2_0_1 sender.unique_id, 
+_2_0_2 numLettersSend=0, 
+_2_0_3 numLettersReceived=0, 
+_2_0_4 ) 
+_2_0_5 # Give sender topic 
+_2_0_6 sender.topicVec = topics[idx] 
+_2_0_7 # Add current topic to dict 
+_2_0_8 self.updatedTopicsDict.update( 
+_2_0_9 {sender.unique_id: topics[idx]}, 
+_2_1_0 ) 
+_2_1_1 # Set random activation weight 
+_2_1_2 if useActivation is True: 
+_2_1_3 sender.activationWeight = random.random() 
+_2_1_4 # Add sender to its region 
+_2_1_5 regionID = [ 
+_2_1_6 x.unique_id for x in self.regions if contains(x.geometry, sender.geometry) 
+_2_1_7 ] 
+_2_1_8 try: 
+_2_1_9 self.space.add_sender(sender, regionID[0]) 
+_2_2_0 except IndexError as exc: 
+_2_2_1 text = f"Problem finding region for {sender.geometry}." 
+_2_2_2 raise IndexError(text) from exc 
+_2_2_3 # Add sender to schedule 
+_2_2_4 self.schedule.add(sender) 
+_2_2_5 
+_2_2_6 # Create social network 
+_2_2_7 if useSocialNetwork is True: 
+_2_2_8 for agent in self.schedule.agents: 
+_2_2_9 if isinstance(agent, SenderAgent): 
+_2_3_0 self._createSocialEdges(agent, self.socialNetwork) 
 _2_3_1 
-_2_3_2 def has_main_topic(self): 
-_2_3_3 if len(self.senders_in_region) > 0: 
-_2_3_4 topics = [y[0] for x,y in self.senders_in_region.items()] 
-_2_3_5 total = [y[1] for x,y in self.senders_in_region.items()] 
-_2_3_6 if sum(total) > 0: 
-_2_3_7 weight = [x / sum(total) for x in total] 
-_2_3_8 else: 
-_2_3_9 weight = [1/len(topics)] * len(topics) 
-_2_4_0 mixed_colors = np.sum([np.multiply(weight[i], topics[i]) for i in range(len
-(topics))], axis=0) 
-_2_4_1 colors_inverse = np.subtract((1, 1, 1), mixed_colors) 
-_2_4_2 return colors_inverse 
-_2_4_3 else: 
-_2_4_4 return (0.5, 0.5, 0.5) 
-_2_4_5 
-_2_4_6 def add_sender(self, sender): 
-_2_4_7 receivedLetters = sender.numLettersReceived 
-_2_4_8 if receivedLetters > 0: 
-_2_4_9 scale = receivedLetters 
-_2_5_0 else: 
-_2_5_1 scale = 1 
-_2_5_2 self.senders_in_region.update( 
-_2_5_3 {sender.unique_id: (sender.topicVec, scale)} 
-_2_5_4 ) 
-_2_5_5 
-_2_5_6 def remove_sender(self, sender): 
-_2_5_7 del self.senders_in_region[sender.unique_id] 
+_2_3_2 self.datacollector = mesa.DataCollector( 
+_2_3_3 model_reporters={ 
+_2_3_4 "Ledger": getPrunedLedger, 
+_2_3_5 "Letters": getScaledLetters , 
+_2_3_6 "Movements": getScaledMovements, 
+_2_3_7 "Clusters": getComponents, 
+_2_3_8 }, 
+_2_3_9 ) 
+_2_4_0 
+_2_4_1 def _createSocialEdges(self, agent: SenderAgent, graph: nx.MultiDiGraph) -
+> None: 
+_2_4_2 """Create social edges with the different wiring factors. 
+_2_4_3 
+_2_4_4 Define a close range by using the moveRange parameter. Among 
+_2_4_5 these neighbors, create a connection with probability set by 
+_2_4_6 the shortRangeNetworkFactor. 
+_2_4_7 
+_2_4_8 For all other agents, that are not in this closeRange group, 
+_2_4_9 create a connection with the probability set by the
+longRangeNetworkFactor. 
+_2_5_0 """ 
+_2_5_1 closerange = [x for x in self.space.get_neighbors_within_distance( 
+_2_5_2 agent, 
+_2_5_3 distance=self.moveRange * self.meandistance, 
+_2_5_4 center=False, 
+_2_5_5 ) if isinstance(x, SenderAgent)] 
+_2_5_6 for neighbor in closerange: 
+_2_5_7 if neighbor.unique_id != agent.unique_id: 
+_2_5_8 connect = random.choices( 
+_2_5_9 population=[True, False], 
+_2_6_0 weights=[self.shortRangeNetworkFactor, 1 - self.shortRangeNetworkFactor], 
+_2_6_1 k=1, 
+_2_6_2 ) 
+_2_6_3 if connect[0] is True: 
+_2_6_4 graph.add_edge(agent.unique_id, neighbor.unique_id, step=0) 
+_2_6_5 longrange = [x for x in self.schedule.agents if x not in closerange and
+isinstance(x, SenderAgent)] 
+_2_6_6 for neighbor in longrange: 
+_2_6_7 if neighbor.unique_id != agent.unique_id: 
+_2_6_8 connect = random.choices( 
+_2_6_9 population=[True, False], 
+_2_7_0 weights=[self.longRangeNetworkFactor, 1 - self.longRangeNetworkFactor], 
+_2_7_1 k=1, 
+_2_7_2 ) 
+_2_7_3 if connect[0] is True: 
+_2_7_4 graph.add_edge(agent.unique_id, neighbor.unique_id, step=0) 
+_2_7_5 
+_2_7_6 def step(self) -> None: 
+_2_7_7 """One simulation step.""" 
+_2_7_8 self.scaleSendInput.update( 
+_2_7_9 **{x.unique_id: x.numLettersReceived for x in self.schedule.agents}, 
+_2_8_0 ) 
+_2_8_1 self.schedule.step() 
+_2_8_2 self.datacollector.collect(self) 
+_2_8_3 
+_2_8_4 def step_no_data(self) -> None: 
+_2_8_5 """One simulation step without datacollection.""" 
+_2_8_6 self.scaleSendInput.update( 
+_2_8_7 **{x.unique_id: x.numLettersReceived for x in self.schedule.agents}, 
+_2_8_8 ) 
+_2_8_9 self.schedule.step() 
+_2_9_0 
+_2_9_1 def run(self, n:int) -> None: 
+_2_9_2 """Run the model for n steps.""" 
+_2_9_3 if self.debug is True: 
+_2_9_4 for _ in tqdm(range(n)): 
+_2_9_5 self.step_no_data() 
+_2_9_6 else: 
+_2_9_7 for _ in range(n): 
+_2_9_8 self.step_no_data() 
+_2_9_9 self.datacollector.collect(self) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+26 18:34 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_model_py.html` & `scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_agents_py.html`

 * *Files 5% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/historicalletters/model.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/historicalletters/agents.py: 92%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/historicalletters/model.py</b>:
-            <span class="pc_cov">0%</span>
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/agents.py</b>:
+            <span class="pc_cov">92%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,312 +50,320 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">102 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">102<span class="text"> missing</span></button>
+            <span class="text">114 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">105<span class="text"> run</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">9<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">random</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">from</span> <span class="nam">pathlib</span> <span class="key">import</span> <span class="nam">Path</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="com">#from statistics import mean</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">tqdm</span> <span class="key">import</span> <span class="nam">tqdm</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">from</span> <span class="nam">numpy</span> <span class="key">import</span> <span class="nam">mean</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">from</span> <span class="nam">shapely</span> <span class="key">import</span> <span class="nam">contains</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">utilities</span><span class="op">.</span><span class="nam">statistics</span> <span class="key">import</span> <span class="nam">prune</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">createData</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">RegionAgent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">space</span> <span class="key">import</span> <span class="nam">Nuts2Eu</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""The agent classes for HistoricalLetters."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">random</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">import</span> <span class="nam">shapely</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">getNewTopic</span><span class="op">,</span> <span class="nam">getPositionOnLine</span><span class="op">,</span> <span class="nam">getRegion</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">class</span> <span class="nam">SenderAgent</span><span class="op">(</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="str">"""The agent sending letters.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    On initialization an agent is places in a geographical coordinate.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    Each agent can send letters to other agents within a distance</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="str">    determined by the letterRange. Agents can also move to new positions</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="str">    within the moveRange.</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="key">def</span> <span class="nam">getPrunedLedger</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="str">"""Model reporter for simulation of archiving.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="str">    Returns statistics of ledger network of model run</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t"><span class="str">    and various iterations of statistics of pruned networks. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="com"># TODO: Add all model params</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="key">if</span> <span class="nam">model</span><span class="op">.</span><span class="nam">runPruning</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">ledgerColumns</span> <span class="op">=</span> <span class="op">[</span><span class="str">'sender'</span><span class="op">,</span> <span class="str">'receiver'</span><span class="op">,</span> <span class="str">'sender_location'</span><span class="op">,</span> <span class="str">'receiver_location'</span><span class="op">,</span> <span class="str">'topic'</span><span class="op">,</span> <span class="str">'step'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">modelparams</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="str">"population"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">population</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="str">"moveRange"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">moveRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="str">"letterRange"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">letterRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="str">"useActivation"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">useActivation</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">            <span class="str">"useSocialNetwork"</span><span class="op">:</span> <span class="nam">model</span><span class="op">.</span><span class="nam">useSocialNetwork</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="nam">result</span> <span class="op">=</span> <span class="nam">prune</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">            <span class="nam">modelparameters</span><span class="op">=</span><span class="nam">modelparams</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">            <span class="nam">network</span><span class="op">=</span><span class="nam">model</span><span class="op">.</span><span class="nam">letterLedger</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">            <span class="nam">columns</span><span class="op">=</span><span class="nam">ledgerColumns</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">        <span class="nam">result</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">letterLedger</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">    <span class="key">return</span> <span class="nam">result</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t"><span class="key">def</span> <span class="nam">getComponents</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="str">"""Model reporter to get number of components.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t"><span class="str">    The MultiDiGraph is converted to undirected, </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t"><span class="str">    considering only edges that are reciprocal, ie.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t"><span class="str">    edges are established if sender and receiver have </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t"><span class="str">    exchanged at least a letter in each direction.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">    <span class="nam">newG</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">G</span><span class="op">.</span><span class="nam">to_undirected</span><span class="op">(</span><span class="nam">reciprocal</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">    <span class="nam">comp</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">number_connected_components</span><span class="op">(</span><span class="nam">newG</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">    <span class="key">return</span> <span class="nam">comp</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t"><span class="key">class</span> <span class="nam">HistoricalLetters</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">    <span class="str">"""A letter sending model with historical informed initital positions.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t"><span class="str">    Each agent has an initial topic vector, expressed as a RGB value. The </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t"><span class="str">    initial positions of the agents is based on a weighted random draw</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t"><span class="str">    based on data from [1]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t"><span class="str">    Each step, agents generate two neighbourhoods for sending letters and </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t"><span class="str">    potential targets to move towards. The probability to send letters is </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t"><span class="str">    a self-reinforcing process. During each sending the internal topic of </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t"><span class="str">    the sender is updated as a random rotation towards the receivers topic.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t"><span class="str">    [1] J. Lobo et al, Population-Area Relationship for Medieval European Cities,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t"><span class="str">        PLoS ONE 11(10): e0162678.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="nam">population</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">100</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="nam">moveRange</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">        <span class="nam">letterRange</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.2</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">        <span class="nam">similarityThreshold</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.2</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">        <span class="nam">updateTopic</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">        <span class="nam">useActivation</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">        <span class="nam">useSocialNetwork</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">        <span class="nam">longRangeNetworkFactor</span><span class="op">=</span><span class="num">0.3</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">        <span class="nam">shortRangeNetworkFactor</span><span class="op">=</span><span class="num">0.8</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">        <span class="nam">runPruning</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">        <span class="nam">regionData</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="nam">Path</span><span class="op">(</span><span class="nam">Path</span><span class="op">(</span><span class="nam">__file__</span><span class="op">)</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">resolve</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">"data/NUTS_RG_60M_2021_3857_LEVL_2.geojson"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">        <span class="nam">populationDistributionData</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="nam">Path</span><span class="op">(</span><span class="nam">Path</span><span class="op">(</span><span class="nam">__file__</span><span class="op">)</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">resolve</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">"data/pone.0162678.s003.csv"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">        <span class="nam">tempfolder</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="str">"./"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">        <span class="nam">debug</span><span class="op">=</span><span class="key">False</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">        <span class="com"># Control variables</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">population</span> <span class="op">=</span> <span class="nam">population</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">=</span> <span class="nam">moveRange</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span> <span class="op">=</span> <span class="nam">letterRange</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">useActivation</span> <span class="op">=</span> <span class="nam">useActivation</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="com"># Initialize social network</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">useSocialNetwork</span> <span class="op">=</span> <span class="nam">useSocialNetwork</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">G</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">MultiDiGraph</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span> <span class="op">=</span> <span class="nam">longRangeNetworkFactor</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span> <span class="op">=</span> <span class="nam">shortRangeNetworkFactor</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">        <span class="com"># Collected output variables</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">letterLedger</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">runPruning</span> <span class="op">=</span> <span class="nam">runPruning</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">movements</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopic</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="com"># Internal variables</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">time</span><span class="op">.</span><span class="nam">RandomActivation</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSendInput</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopicsDict</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span> <span class="op">=</span> <span class="nam">Nuts2Eu</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">personRegionMap</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">tempfolder</span> <span class="op">=</span> <span class="nam">tempfolder</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">debug</span> <span class="op">=</span> <span class="nam">debug</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">initSenderGeoDf</span> <span class="op">=</span> <span class="nam">createData</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">            <span class="nam">population</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">            <span class="nam">populationDistribution</span><span class="op">=</span><span class="nam">populationDistributionData</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">        <span class="com"># Calculate mean of mean distances for each agent. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">        <span class="com"># This is used as a measure for the range of exchanges.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">        <span class="nam">distances</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span><span class="op">,</span> <span class="nam">row</span> <span class="key">in</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">            <span class="nam">p1</span> <span class="op">=</span> <span class="nam">row</span><span class="op">[</span><span class="str">'geometry'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">            <span class="nam">distances</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">                <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">p1</span><span class="op">.</span><span class="nam">distance</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="op">)</span><span class="op">.</span><span class="nam">mean</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">meandistance</span> <span class="op">=</span> <span class="nam">mean</span><span class="op">(</span><span class="nam">distances</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">factors</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">            <span class="nam">updateTopic</span><span class="op">=</span><span class="nam">updateTopic</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">            <span class="nam">similarityThreshold</span><span class="op">=</span><span class="nam">similarityThreshold</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">            <span class="nam">moveRange</span><span class="op">=</span><span class="nam">moveRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">            <span class="nam">letterRange</span><span class="op">=</span><span class="nam">letterRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">        <span class="com"># Set up the grid with patches for every NUTS region</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">        <span class="nam">ac</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">AgentCreator</span><span class="op">(</span><span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">regions</span> <span class="op">=</span> <span class="nam">ac</span><span class="op">.</span><span class="nam">from_file</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">            <span class="nam">regionData</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">            <span class="nam">unique_id</span><span class="op">=</span><span class="str">"NUTS_ID"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">add_regions</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">regions</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">        <span class="com"># Set up agent creator for senders</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">        <span class="nam">ac_senders</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">AgentCreator</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">            <span class="nam">SenderAgent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">            <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">            <span class="nam">agent_kwargs</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">factors</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">        <span class="com"># Create agents based on random coordinates generated </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">        <span class="com"># in the createData step above, see util.py file.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">        <span class="nam">senders</span> <span class="op">=</span> <span class="nam">ac_senders</span><span class="op">.</span><span class="nam">from_GeoDataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">            <span class="nam">initSenderGeoDf</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">            <span class="nam">unique_id</span><span class="op">=</span><span class="str">"unique_id"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">        <span class="com"># Create random set of initial topic vectors.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">        <span class="nam">topics</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">            <span class="nam">tuple</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">                <span class="op">[</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">3</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">            <span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">        <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">        <span class="com"># Attach topic and activationWeight to each agent,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">        <span class="com"># connect to social network graph.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span><span class="op">,</span> <span class="nam">sender</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">senders</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">G</span><span class="op">.</span><span class="nam">add_node</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">                <span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">                <span class="nam">numLettersSend</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">                <span class="nam">numLettersReceived</span><span class="op">=</span><span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">            <span class="nam">sender</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">idx</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">            <span class="com"># Add current topic to dict</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">                <span class="op">{</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">idx</span><span class="op">]</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">            <span class="key">if</span> <span class="nam">useActivation</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">                <span class="nam">sender</span><span class="op">.</span><span class="nam">activationWeight</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">senders</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">            <span class="nam">regionID</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">                <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">regions</span> <span class="key">if</span> <span class="nam">contains</span><span class="op">(</span><span class="nam">x</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">            <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">add_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">            <span class="key">except</span> <span class="nam">IndexError</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">                <span class="key">raise</span> <span class="nam">IndexError</span><span class="op">(</span><span class="str">f"Problem finding region for {agent.geometry}."</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">add</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="str">    Agents keep track of their changing "interest" by having a vector</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t"><span class="str">    of all held positions in topic space.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">:</span><span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">model</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">geometry</span><span class="op">:</span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">point</span><span class="op">.</span><span class="nam">Point</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">crs</span><span class="op">:</span><span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">similarityThreshold</span><span class="op">:</span><span class="nam">float</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">moveRange</span><span class="op">:</span><span class="nam">float</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">letterRange</span><span class="op">:</span><span class="nam">float</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="str">"""Initialize an agent.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t"><span class="str">        With a model, a geometry, crs,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t"><span class="str">        and values for updateTopic, similarityThreshold, moveRange,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t"><span class="str">        and letterRange.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">,</span> <span class="nam">crs</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">region_id</span> <span class="op">=</span> <span class="str">""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span> <span class="op">=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">similarityThreshold</span> <span class="op">=</span> <span class="nam">similarityThreshold</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">=</span> <span class="nam">moveRange</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span> <span class="op">=</span> <span class="nam">letterRange</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="str">""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersSend</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="key">def</span> <span class="nam">move</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">:</span><span class="nam">list</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="str">"""Agent can randomly move to neighboring positions.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t"><span class="str">        Neighbours with a higher number of received letters are</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t"><span class="str">        more likely targets of a movement process. The amount of</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t"><span class="str">        movement is randomly drawn.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">            <span class="com"># Random decision to move or not, weights are 10% moving, 90% staying.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">            <span class="nam">move</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">0.9</span><span class="op">,</span> <span class="num">0.1</span><span class="op">]</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">            <span class="key">if</span> <span class="nam">move</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">                <span class="nam">weights</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">                <span class="nam">possible_steps</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">                <span class="com"># Weighted random choice to target of moving.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">                <span class="com"># Strong receivers are more likely targets.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">                <span class="com"># This is another Polya Urn-like process.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">                <span class="key">for</span> <span class="nam">n</span> <span class="key">in</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">                    <span class="key">if</span> <span class="nam">n</span> <span class="op">!=</span> <span class="nam">self</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">                        <span class="nam">possible_steps</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">n</span><span class="op">.</span><span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">                        <span class="nam">weights</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">n</span><span class="op">.</span><span class="nam">numLettersReceived</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">                <span class="com"># Capture cases where no possible steps exist.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">                <span class="key">if</span> <span class="nam">possible_steps</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">                    <span class="key">if</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">weights</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">                        <span class="nam">lineEndPoint</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="nam">possible_steps</span><span class="op">,</span> <span class="nam">weights</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">                    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">                        <span class="nam">lineEndPoint</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="nam">possible_steps</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">                    <span class="nam">next_position</span> <span class="op">=</span> <span class="nam">getPositionOnLine</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">lineEndPoint</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">                    <span class="com"># Capture cases where next position has no overlap with region shapefiles.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">                    <span class="com"># This can e.g. happen when crossing the English channel or the mediteranian</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">                    <span class="com"># sea.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">                    <span class="com"># TODO(malte): Is there a more clever way to find nearby valid regions?</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">                    <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">                        <span class="nam">regionID</span> <span class="op">=</span> <span class="nam">getRegion</span><span class="op">(</span><span class="nam">next_position</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">                        <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">updatedPositionDict</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">                            <span class="op">{</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="op">[</span><span class="nam">next_position</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">]</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">                        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">                        <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">movements</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">                    <span class="key">except</span> <span class="nam">IndexError</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">                        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">debug</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">                            <span class="nam">text</span> <span class="op">=</span> <span class="str">f"No overlap for {next_position}, aborting movement."</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">                            <span class="nam">print</span><span class="op">(</span><span class="nam">text</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">    <span class="key">def</span> <span class="nam">has_letter_contacts</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="op">*</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">:</span> <span class="nam">list</span> <span class="op">=</span> <span class="key">False</span><span class="op">)</span> <span class="op">-></span> <span class="nam">list</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">        <span class="str">"""List of already established and potential contacts.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t"><span class="str">        Implements the ego-reinforcing by allowing mutliple entries</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t"><span class="str">        of the same agent. In neighbourhoods agents are added proportional</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="str">        to the number of letters they received, thus increasing the reinforcement.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t"><span class="str">        The range of the visible neighborhood is defined by the letterRange parameter</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t"><span class="str">        during model initialization.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t"><span class="str">        For neigbors in the social network (which can be long-tie), the same process</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t"><span class="str">        applies. Here, at the begining of each step a list of currently valid scalings</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t"><span class="str">        is created, see step function in model.py. This prevents updating of</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t"><span class="str">        scales during the random activations of agents in one step.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="nam">contacts</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="com"># Social contacts</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">        <span class="nam">socialNetwork</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">.</span><span class="nam">neighbors</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="nam">scaleSocial</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">scaleSendInput</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">            <span class="key">if</span> <span class="nam">y</span> <span class="op">!=</span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">                <span class="nam">scaleSocial</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span><span class="op">{</span><span class="nam">x</span><span class="op">:</span> <span class="nam">y</span><span class="op">}</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">            <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">                <span class="nam">scaleSocial</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span><span class="op">{</span><span class="nam">x</span><span class="op">:</span> <span class="num">1</span><span class="op">}</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">reinforceSocial</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">y</span> <span class="key">in</span> <span class="op">[</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span> <span class="op">*</span> <span class="nam">scaleSocial</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">socialNetwork</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">y</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">        <span class="nam">contacts</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">reinforceSocial</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">        <span class="com"># Geographical neighbors</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">            <span class="nam">neighborRec</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">            <span class="key">for</span> <span class="nam">n</span> <span class="key">in</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">                <span class="key">if</span> <span class="nam">n</span> <span class="op">!=</span> <span class="nam">self</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">                    <span class="nam">curID</span> <span class="op">=</span> <span class="nam">n</span><span class="op">.</span><span class="nam">unique_id</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">                    <span class="key">if</span> <span class="nam">n</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">                        <span class="nam">nMult</span> <span class="op">=</span> <span class="op">[</span><span class="nam">curID</span><span class="op">]</span> <span class="op">*</span> <span class="nam">n</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">                        <span class="nam">neighborRec</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">nMult</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">                    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">                        <span class="nam">neighborRec</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">curID</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">            <span class="nam">contacts</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">neighborRec</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">        <span class="key">return</span> <span class="nam">contacts</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">    <span class="key">def</span> <span class="nam">chooses_topic</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span> <span class="op">-></span> <span class="nam">tuple</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">        <span class="str">"""Choose the topic to write about in the letter.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t"><span class="str">        Agents can choose to write a topic from their own ledger or</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t"><span class="str">        in relation to the topics of the receiver. The choice is random.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">        <span class="nam">topicChoices</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">        <span class="nam">topicChoices</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">receiver</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">        <span class="key">return</span>  <span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">topicChoices</span><span class="op">)</span> <span class="key">if</span> <span class="nam">topicChoices</span> <span class="key">else</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">    <span class="key">def</span> <span class="nam">sendLetter</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">:</span><span class="nam">list</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">        <span class="str">"""Send a letter based on an urn model."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">        <span class="nam">contacts</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">has_letter_contacts</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">=</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">        <span class="key">if</span> <span class="nam">contacts</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">            <span class="com"># Randomly choose from the list of possible receivers</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">            <span class="nam">receiverID</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">contacts</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">            <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">                <span class="key">if</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">==</span> <span class="nam">receiverID</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">                    <span class="nam">receiver</span> <span class="op">=</span> <span class="nam">agent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">            <span class="nam">initTopic</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">chooses_topic</span><span class="op">(</span><span class="nam">receiver</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">            <span class="com"># Calculate distance between own chosen topic</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">            <span class="com"># and current topic of receiver.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">            <span class="nam">distance</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">linalg</span><span class="op">.</span><span class="nam">norm</span><span class="op">(</span><span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">receiver</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">)</span> <span class="op">-</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">initTopic</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">            <span class="com"># If the calculated distance falls below a similarityThreshold,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">            <span class="com"># send the letter.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">            <span class="key">if</span> <span class="nam">distance</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">similarityThreshold</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">                <span class="nam">receiver</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersSend</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">                <span class="com"># Update model social network</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">                    <span class="nam">receiver</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">                    <span class="nam">step</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span><span class="op">[</span><span class="str">"numLettersSend"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersSend</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">receiver</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span><span class="op">[</span><span class="str">"numLettersReceived"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">receiver</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">                <span class="com"># Update receivers topic vector as a random movement</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">                <span class="com"># in 3D space on the line between receivers current topic</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">                <span class="com"># and the senders chosen topic vectors. An amount of 1 would</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">                <span class="com"># correspond to a complete addaption of the senders chosen topic</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">                <span class="com"># vector by the receiver. An amount of 0 means the</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">                <span class="com"># receiver is not influencend by the sender at all.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">                <span class="com"># If both topics coincide nothing is changing.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">                <span class="nam">start</span> <span class="op">=</span> <span class="nam">receiver</span><span class="op">.</span><span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">                <span class="nam">end</span> <span class="op">=</span> <span class="nam">initTopic</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">                <span class="nam">updatedTopicVec</span> <span class="op">=</span> <span class="nam">getNewTopic</span><span class="op">(</span><span class="nam">start</span><span class="op">,</span> <span class="nam">end</span><span class="op">)</span> <span class="key">if</span> <span class="nam">start</span> <span class="op">!=</span> <span class="nam">end</span> <span class="key">else</span> <span class="nam">initTopic</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">                <span class="com"># The letter sending process is complet and</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">                <span class="com"># the chosen topic of the letter is put into a ledger entry.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">letterLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">                    <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">                        <span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">region_id</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">.</span><span class="nam">region_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">                        <span class="nam">initTopic</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">steps</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">                    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">                <span class="com"># Take note of the influence the letter had on the receiver.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">                <span class="com"># This information is used in the step function to update all</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">                <span class="com"># agent's currently held topic positions.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">                    <span class="op">{</span><span class="nam">receiver</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">updatedTopicVec</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">        <span class="com"># Add graph to network grid for potential visualization.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">        <span class="com"># TODO: Not yet implemented. Maybe use Solara backend for this? </span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">grid</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">NetworkGrid</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">G</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">        <span class="com"># Create social network</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">        <span class="key">if</span> <span class="nam">useSocialNetwork</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">            <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">                <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">_createSocialEdges</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">G</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">        <span class="com"># TODO: What comparitive values are useful for visualizations?</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">DataCollector</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">            <span class="nam">model_reporters</span><span class="op">=</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">                <span class="str">"Ledger"</span><span class="op">:</span> <span class="nam">getPrunedLedger</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">                <span class="str">"Letters"</span><span class="op">:</span> <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">letterLedger</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">                <span class="str">"Movements"</span><span class="op">:</span> <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">movements</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">                <span class="str">"Clusters"</span><span class="op">:</span> <span class="nam">getComponents</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">            <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">    <span class="key">def</span> <span class="nam">_createSocialEdges</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">,</span> <span class="nam">graph</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">        <span class="str">"""Create social edges with the different wiring factors.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t"><span class="str">        Define a close range by using the moveRange parameter. Among</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t"><span class="str">        these neighbors, create a connection with probability set by</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t"><span class="str">        the shortRangeNetworkFactor. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t"><span class="str">        For all other agents, that are not in this closeRange group,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t"><span class="str">        create a connection with the probability set by the longRangeNetworkFactor.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">        <span class="nam">closerange</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t">            <span class="nam">agent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t">            <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t">            <span class="nam">center</span><span class="op">=</span><span class="key">False</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">        <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">        <span class="key">for</span> <span class="nam">neighbor</span> <span class="key">in</span> <span class="nam">closerange</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">!=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t">                <span class="nam">connect</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t">                    <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t">                    <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span><span class="op">,</span> <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">                    <span class="nam">k</span><span class="op">=</span><span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">                <span class="key">if</span> <span class="nam">connect</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">        <span class="nam">longrange</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span> <span class="key">if</span> <span class="nam">x</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">closerange</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">        <span class="key">for</span> <span class="nam">neighbor</span> <span class="key">in</span> <span class="nam">longrange</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">!=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">                <span class="nam">connect</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">                    <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">                    <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span><span class="op">,</span> <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">                    <span class="nam">k</span><span class="op">=</span><span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t">                <span class="key">if</span> <span class="nam">connect</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSendInput</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t">            <span class="op">**</span><span class="op">{</span><span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">x</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t253" href="#t253">253</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t254" href="#t254">254</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t255" href="#t255">255</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">collect</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t256" href="#t256">256</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t257" href="#t257">257</a></span><span class="t">    <span class="key">def</span> <span class="nam">run</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t258" href="#t258">258</a></span><span class="t">        <span class="str">"""Run the model for n steps."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t259" href="#t259">259</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">debug</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t260" href="#t260">260</a></span><span class="t">            <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">tqdm</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t261" href="#t261">261</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t262" href="#t262">262</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t263" href="#t263">263</a></span><span class="t">            <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t264" href="#t264">264</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">        <span class="str">"""Perform one simulation step."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">        <span class="com"># If the agent has received a letter in the previous step and</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">        <span class="com"># has updated its internal topicVec state, the new topic state is</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">        <span class="com"># appended to the topicLedger</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">        <span class="key">if</span> <span class="key">not</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span> <span class="key">or</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">!=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">        <span class="nam">currentActivation</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">            <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">            <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">            <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">        <span class="key">if</span> <span class="nam">currentActivation</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">            <span class="nam">neighborsMove</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">                    <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">                    <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">                    <span class="nam">center</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">                <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">            <span class="nam">neighborsSend</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">                    <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">                    <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">                    <span class="nam">center</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">                <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">sendLetter</span><span class="op">(</span><span class="nam">neighborsSend</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">move</span><span class="op">(</span><span class="nam">neighborsMove</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t"><span class="key">class</span> <span class="nam">RegionAgent</span><span class="op">(</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">    <span class="str">"""The region keeping track of contained agents.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t"><span class="str">    This agent type is introduced for visualization purposes.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t"><span class="str">    SenderAgents are linked to regions by calculation of a</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t"><span class="str">    geographic overlap of the region shape with the SenderAgent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t"><span class="str">    position.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t"><span class="str">    At initialization, the regions are populated with SenderAgents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t"><span class="str">    giving rise to a dictionary of the contained SenderAgent IDs and</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t"><span class="str">    their initial topic.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t"><span class="str">    At each movement, the SenderAgent might cross region boundaries.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t"><span class="str">    This reqieres a re-calculation of the potential overlap.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">:</span><span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">        <span class="nam">model</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">        <span class="nam">geometry</span><span class="op">:</span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">polygon</span><span class="op">.</span><span class="nam">Polygon</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">        <span class="nam">crs</span><span class="op">:</span><span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t">        <span class="str">"""Initialize region with id, model, geometry and crs."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">,</span> <span class="nam">crs</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">main_topic</span><span class="op">:</span><span class="nam">tuple</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">has_main_topic</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t">    <span class="key">def</span> <span class="nam">has_main_topic</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">tuple</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t253" href="#t253">253</a></span><span class="t">        <span class="str">"""Return weighted average topics of agents in region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t254" href="#t254">254</a></span><span class="t">        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t255" href="#t255">255</a></span><span class="t">            <span class="nam">topics</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t256" href="#t256">256</a></span><span class="t">            <span class="nam">total</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t257" href="#t257">257</a></span><span class="t">            <span class="nam">weight</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="op">/</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">total</span><span class="op">]</span> <span class="key">if</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span> <span class="key">else</span> <span class="op">[</span><span class="num">1</span> <span class="op">/</span> <span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">]</span> <span class="op">*</span> <span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t258" href="#t258">258</a></span><span class="t">            <span class="nam">mixed_colors</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="op">[</span><span class="nam">np</span><span class="op">.</span><span class="nam">multiply</span><span class="op">(</span><span class="nam">weight</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">,</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">)</span> <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t259" href="#t259">259</a></span><span class="t">            <span class="key">return</span> <span class="nam">np</span><span class="op">.</span><span class="nam">subtract</span><span class="op">(</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">,</span> <span class="nam">mixed_colors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t260" href="#t260">260</a></span><span class="t">        <span class="key">return</span> <span class="op">(</span><span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t261" href="#t261">261</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t262" href="#t262">262</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">sender</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t263" href="#t263">263</a></span><span class="t">        <span class="str">"""Add a sender to the region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t264" href="#t264">264</a></span><span class="t">        <span class="nam">receivedLetters</span> <span class="op">=</span> <span class="nam">sender</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t265" href="#t265">265</a></span><span class="t">        <span class="nam">scale</span> <span class="op">=</span> <span class="nam">receivedLetters</span> <span class="key">if</span> <span class="nam">receivedLetters</span> <span class="key">else</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t266" href="#t266">266</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t267" href="#t267">267</a></span><span class="t">            <span class="op">{</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="op">(</span><span class="nam">sender</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">,</span> <span class="nam">scale</span><span class="op">)</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t268" href="#t268">268</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t269" href="#t269">269</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t270" href="#t270">270</a></span><span class="t">    <span class="key">def</span> <span class="nam">remove_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">sender</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t271" href="#t271">271</a></span><span class="t">        <span class="str">"""Remove a sender from the region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t272" href="#t272">272</a></span><span class="t">        <span class="key">del</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">[</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,285 +1,299 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//hhiissttoorriiccaalllleetttteerrss//mmooddeell..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//aaggeennttss..ppyy:: 9922%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 110022 ssttaatteemmeennttss ?  00 rruunn 110022 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
-_1 
+********** 111144 ssttaatteemmeennttss ?  110055 rruunn 99 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_1"""The agent classes for HistoricalLetters.""" 
 _2import random 
-_3from pathlib import Path 
-_4#from statistics import mean 
-_5from tqdm import tqdm 
-_6from numpy import mean 
-_7 
-_8import mesa 
-_9import networkx as nx 
-_1_0import mesa_geo as mg 
-_1_1from shapely import contains 
-_1_2 
-_1_3from scicom.utilities.statistics import prune 
-_1_4from scicom.historicalletters.utils import createData 
-_1_5 
-_1_6from scicom.historicalletters.agents import SenderAgent, RegionAgent 
-_1_7from scicom.historicalletters.space import Nuts2Eu 
-_1_8 
+_3 
+_4import mesa 
+_5import mesa_geo as mg 
+_6import numpy as np 
+_7import shapely 
+_8 
+_9from scicom.historicalletters.utils import getNewTopic, getPositionOnLine,
+getRegion 
+_1_0 
+_1_1 
+_1_2class SenderAgent(mg.GeoAgent): 
+_1_3 """The agent sending letters. 
+_1_4 
+_1_5 On initialization an agent is places in a geographical coordinate. 
+_1_6 Each agent can send letters to other agents within a distance 
+_1_7 determined by the letterRange. Agents can also move to new positions 
+_1_8 within the moveRange. 
 _1_9 
-_2_0def getPrunedLedger(model): 
-_2_1 """Model reporter for simulation of archiving. 
-_2_2  
-_2_3 Returns statistics of ledger network of model run 
-_2_4 and various iterations of statistics of pruned networks.  
-_2_5 """ 
-_2_6 # TODO: Add all model params 
-_2_7 if model.runPruning is True: 
-_2_8 ledgerColumns = ['sender', 'receiver', 'sender_location',
-'receiver_location', 'topic', 'step'] 
-_2_9 modelparams = { 
-_3_0 "population": model.population, 
-_3_1 "moveRange": model.moveRange, 
-_3_2 "letterRange": model.letterRange, 
-_3_3 "useActivation": model.useActivation, 
-_3_4 "useSocialNetwork": model.useSocialNetwork, 
-_3_5 } 
-_3_6 result = prune( 
-_3_7 modelparameters=modelparams, 
-_3_8 network=model.letterLedger, 
-_3_9 columns=ledgerColumns 
-_4_0 ) 
-_4_1 else: 
-_4_2 result = model.letterLedger 
-_4_3 return result 
-_4_4 
-_4_5def getComponents(model): 
-_4_6 """Model reporter to get number of components. 
-_4_7  
-_4_8 The MultiDiGraph is converted to undirected,  
-_4_9 considering only edges that are reciprocal, ie. 
-_5_0 edges are established if sender and receiver have  
-_5_1 exchanged at least a letter in each direction. 
-_5_2 """ 
-_5_3 newG = model.G.to_undirected(reciprocal=True) 
-_5_4 comp = nx.number_connected_components(newG) 
-_5_5 return comp 
-_5_6 
-_5_7 
-_5_8class HistoricalLetters(mesa.Model): 
-_5_9 """A letter sending model with historical informed initital positions. 
-_6_0  
-_6_1 Each agent has an initial topic vector, expressed as a RGB value. The  
-_6_2 initial positions of the agents is based on a weighted random draw 
-_6_3 based on data from [1] 
-_6_4  
-_6_5 Each step, agents generate two neighbourhoods for sending letters and  
-_6_6 potential targets to move towards. The probability to send letters is  
-_6_7 a self-reinforcing process. During each sending the internal topic of  
-_6_8 the sender is updated as a random rotation towards the receivers topic. 
-_6_9 
-_7_0 [1] J. Lobo et al, Population-Area Relationship for Medieval European
-Cities, 
-_7_1 PLoS ONE 11(10): e0162678. 
-_7_2 """ 
-_7_3 def __init__( 
-_7_4 self, 
-_7_5 population: int = 100, 
-_7_6 moveRange: float = 0.05, 
-_7_7 letterRange: float = 0.2, 
-_7_8 similarityThreshold: float = 0.2, 
-_7_9 updateTopic: float = 0.1, 
-_8_0 useActivation=False, 
-_8_1 useSocialNetwork=False, 
-_8_2 longRangeNetworkFactor=0.3, 
-_8_3 shortRangeNetworkFactor=0.8, 
-_8_4 runPruning=False, 
-_8_5 regionData: str = Path(Path(__file__).parent.parent.resolve(), "data/
-NUTS_RG_60M_2021_3857_LEVL_2.geojson"), 
-_8_6 populationDistributionData: str = Path(Path(__file__).parent.parent.resolve
-(), "data/pone.0162678.s003.csv"), 
-_8_7 tempfolder: str = "./", 
-_8_8 debug=False 
-_8_9 ): 
-_9_0 super().__init__() 
-_9_1 
-_9_2 # Control variables 
-_9_3 self.population = population 
-_9_4 self.moveRange = moveRange 
-_9_5 self.letterRange = letterRange 
-_9_6 self.useActivation = useActivation 
-_9_7 # Initialize social network 
-_9_8 self.useSocialNetwork = useSocialNetwork 
-_9_9 self.G = nx.MultiDiGraph() 
-_1_0_0 self.longRangeNetworkFactor = longRangeNetworkFactor 
-_1_0_1 self.shortRangeNetworkFactor = shortRangeNetworkFactor 
-_1_0_2 # Collected output variables 
-_1_0_3 self.letterLedger = [] 
-_1_0_4 self.runPruning = runPruning 
-_1_0_5 self.movements = 0 
-_1_0_6 self.updatedTopic = 0 
-_1_0_7 # Internal variables 
-_1_0_8 self.schedule = mesa.time.RandomActivation(self) 
-_1_0_9 self.scaleSendInput = {} 
-_1_1_0 self.updatedTopicsDict = {} 
-_1_1_1 self.space = Nuts2Eu() 
-_1_1_2 self.personRegionMap = {} 
-_1_1_3 self.tempfolder = tempfolder 
-_1_1_4 self.debug = debug 
-_1_1_5 
-_1_1_6 initSenderGeoDf = createData( 
-_1_1_7 population, 
-_1_1_8 populationDistribution=populationDistributionData 
-_1_1_9 ) 
-_1_2_0 
-_1_2_1 # Calculate mean of mean distances for each agent.  
-_1_2_2 # This is used as a measure for the range of exchanges. 
-_1_2_3 distances = [] 
-_1_2_4 for idx, row in initSenderGeoDf.iterrows(): 
-_1_2_5 p1 = row['geometry'] 
-_1_2_6 distances.append( 
-_1_2_7 initSenderGeoDf.geometry.apply(lambda x: p1.distance(x)).mean() 
-_1_2_8 ) 
-_1_2_9 self.meandistance = mean(distances) 
-_1_3_0 
-_1_3_1 self.factors = dict( 
-_1_3_2 updateTopic=updateTopic, 
-_1_3_3 similarityThreshold=similarityThreshold, 
-_1_3_4 moveRange=moveRange, 
-_1_3_5 letterRange=letterRange, 
-_1_3_6 ) 
-_1_3_7 
-_1_3_8 # Set up the grid with patches for every NUTS region 
-_1_3_9 ac = mg.AgentCreator(RegionAgent, model=self) 
-_1_4_0 self.regions = ac.from_file( 
-_1_4_1 regionData, 
-_1_4_2 unique_id="NUTS_ID" 
-_1_4_3 ) 
-_1_4_4 self.space.add_regions(self.regions) 
-_1_4_5 
-_1_4_6 # Set up agent creator for senders 
-_1_4_7 ac_senders = mg.AgentCreator( 
-_1_4_8 SenderAgent, 
-_1_4_9 model=self, 
-_1_5_0 agent_kwargs=self.factors 
-_1_5_1 ) 
-_1_5_2 
-_1_5_3 # Create agents based on random coordinates generated  
-_1_5_4 # in the createData step above, see util.py file. 
-_1_5_5 senders = ac_senders.from_GeoDataFrame( 
-_1_5_6 initSenderGeoDf, 
-_1_5_7 unique_id="unique_id" 
-_1_5_8 ) 
-_1_5_9 
-_1_6_0 # Create random set of initial topic vectors. 
-_1_6_1 topics = [ 
-_1_6_2 tuple( 
-_1_6_3 [random.random() for x in range(3)] 
-_1_6_4 ) for x in range(self.population) 
-_1_6_5 ] 
-_1_6_6 
-_1_6_7 # Attach topic and activationWeight to each agent, 
-_1_6_8 # connect to social network graph. 
-_1_6_9 for idx, sender in enumerate(senders): 
-_1_7_0 self.G.add_node( 
-_1_7_1 sender.unique_id, 
-_1_7_2 numLettersSend=0, 
-_1_7_3 numLettersReceived=0 
-_1_7_4 ) 
-_1_7_5 sender.topicVec = topics[idx] 
-_1_7_6 # Add current topic to dict 
-_1_7_7 self.updatedTopicsDict.update( 
-_1_7_8 {sender.unique_id: topics[idx]} 
-_1_7_9 ) 
-_1_8_0 if useActivation is True: 
-_1_8_1 sender.activationWeight = random.random() 
-_1_8_2 
-_1_8_3 for agent in senders: 
-_1_8_4 regionID = [ 
-_1_8_5 x.unique_id for x in self.regions if contains(x.geometry, agent.geometry) 
-_1_8_6 ] 
-_1_8_7 try: 
-_1_8_8 self.space.add_sender(agent, regionID[0]) 
-_1_8_9 except IndexError: 
-_1_9_0 raise IndexError(f"Problem finding region for {agent.geometry}.") 
-_1_9_1 self.schedule.add(agent) 
+_2_0 Agents keep track of their changing "interest" by having a vector 
+_2_1 of all held positions in topic space. 
+_2_2 """ 
+_2_3 
+_2_4 def __init__( 
+_2_5 self, 
+_2_6 unique_id:str, 
+_2_7 model:mesa.Model, 
+_2_8 geometry: shapely.geometry.point.Point, 
+_2_9 crs:str, 
+_3_0 similarityThreshold:float, 
+_3_1 moveRange:float, 
+_3_2 letterRange:float, 
+_3_3 ) -> None: 
+_3_4 """Initialize an agent. 
+_3_5 
+_3_6 With a model, a geometry, crs, 
+_3_7 and values for updateTopic, similarityThreshold, moveRange, 
+_3_8 and letterRange. 
+_3_9 """ 
+_4_0 super().__init__(unique_id, model, geometry, crs) 
+_4_1 self.region_id = "" 
+_4_2 self.activationWeight = 1 
+_4_3 self.similarityThreshold = similarityThreshold 
+_4_4 self.moveRange = moveRange 
+_4_5 self.letterRange = letterRange 
+_4_6 self.topicVec = "" 
+_4_7 self.topicLedger = [] 
+_4_8 self.numLettersReceived = 0 
+_4_9 self.numLettersSend = 0 
+_5_0 
+_5_1 def move(self, neighbors:list) -> None: 
+_5_2 """Agent can randomly move to neighboring positions. 
+_5_3 
+_5_4 Neighbours with a higher number of received letters are 
+_5_5 more likely targets of a movement process. The amount of 
+_5_6 movement is randomly drawn. 
+_5_7 """ 
+_5_8 if neighbors: 
+_5_9 # Random decision to move or not, weights are 10% moving, 90% staying. 
+_6_0 move = random.choices([0, 1], weights=[0.9, 0.1], k=1) 
+_6_1 if move[0] == 1: 
+_6_2 weights = [] 
+_6_3 possible_steps = [] 
+_6_4 # Weighted random choice to target of moving. 
+_6_5 # Strong receivers are more likely targets. 
+_6_6 # This is another Polya Urn-like process. 
+_6_7 for n in neighbors: 
+_6_8 if n != self: 
+_6_9 possible_steps.append(n.geometry) 
+_7_0 weights.append(n.numLettersReceived) 
+_7_1 # Capture cases where no possible steps exist. 
+_7_2 if possible_steps: 
+_7_3 if sum(weights) > 0: 
+_7_4 lineEndPoint = random.choices(possible_steps, weights, k=1) 
+_7_5 else: 
+_7_6 lineEndPoint = random.choices(possible_steps, k=1) 
+_7_7 next_position = getPositionOnLine(self.geometry, lineEndPoint[0]) 
+_7_8 # Capture cases where next position has no overlap with region shapefiles. 
+_7_9 # This can e.g. happen when crossing the English channel or the
+mediteranian 
+_8_0 # sea. 
+_8_1 # TODO(malte): Is there a more clever way to find nearby valid regions? 
+_8_2 try: 
+_8_3 regionID = getRegion(next_position, self.model) 
+_8_4 self.model.updatedPositionDict.update( 
+_8_5 {self.unique_id: [next_position, regionID]}, 
+_8_6 ) 
+_8_7 self.model.movements += 1 
+_8_8 except IndexError: 
+_8_9 if self.model.debug is True: 
+_9_0 text = f"No overlap for {next_position}, aborting movement." 
+_9_1 print(text) 
+_9_2 
+_9_3 def has_letter_contacts(self, *, neighbors: list = False) -> list: 
+_9_4 """List of already established and potential contacts. 
+_9_5 
+_9_6 Implements the ego-reinforcing by allowing mutliple entries 
+_9_7 of the same agent. In neighbourhoods agents are added proportional 
+_9_8 to the number of letters they received, thus increasing the reinforcement. 
+_9_9 The range of the visible neighborhood is defined by the letterRange
+parameter 
+_1_0_0 during model initialization. 
+_1_0_1 
+_1_0_2 For neigbors in the social network (which can be long-tie), the same
+process 
+_1_0_3 applies. Here, at the begining of each step a list of currently valid
+scalings 
+_1_0_4 is created, see step function in model.py. This prevents updating of 
+_1_0_5 scales during the random activations of agents in one step. 
+_1_0_6 """ 
+_1_0_7 contacts = [] 
+_1_0_8 # Social contacts 
+_1_0_9 socialNetwork = list(self.model.socialNetwork.neighbors(self.unique_id)) 
+_1_1_0 scaleSocial = {} 
+_1_1_1 for x, y in self.model.scaleSendInput.items(): 
+_1_1_2 if y != 0: 
+_1_1_3 scaleSocial.update({x: y}) 
+_1_1_4 else: 
+_1_1_5 scaleSocial.update({x: 1}) 
+_1_1_6 reinforceSocial = [x for y in [[x] * scaleSocial[x] for x in socialNetwork]
+for x in y] 
+_1_1_7 contacts.extend(reinforceSocial) 
+_1_1_8 # Geographical neighbors 
+_1_1_9 if neighbors: 
+_1_2_0 neighborRec = [] 
+_1_2_1 for n in neighbors: 
+_1_2_2 if n != self: 
+_1_2_3 curID = n.unique_id 
+_1_2_4 if n.numLettersReceived > 0: 
+_1_2_5 nMult = [curID] * n.numLettersReceived 
+_1_2_6 neighborRec.extend(nMult) 
+_1_2_7 else: 
+_1_2_8 neighborRec.append(curID) 
+_1_2_9 contacts.extend(neighborRec) 
+_1_3_0 return contacts 
+_1_3_1 
+_1_3_2 def chooses_topic(self, receiver: str) -> tuple: 
+_1_3_3 """Choose the topic to write about in the letter. 
+_1_3_4 
+_1_3_5 Agents can choose to write a topic from their own ledger or 
+_1_3_6 in relation to the topics of the receiver. The choice is random. 
+_1_3_7 """ 
+_1_3_8 topicChoices = self.topicLedger.copy() 
+_1_3_9 topicChoices.extend(receiver.topicLedger.copy()) 
+_1_4_0 return random.choice(topicChoices) if topicChoices else self.topicVec 
+_1_4_1 
+_1_4_2 def sendLetter(self, neighbors:list) -> None: 
+_1_4_3 """Send a letter based on an urn model.""" 
+_1_4_4 contacts = self.has_letter_contacts(neighbors=neighbors) 
+_1_4_5 if contacts: 
+_1_4_6 # Randomly choose from the list of possible receivers 
+_1_4_7 receiverID = random.choice(contacts) 
+_1_4_8 for agent in self.model.schedule.agents: 
+_1_4_9 if agent.unique_id == receiverID: 
+_1_5_0 receiver = agent 
+_1_5_1 initTopic = self.chooses_topic(receiver) 
+_1_5_2 # Calculate distance between own chosen topic 
+_1_5_3 # and current topic of receiver. 
+_1_5_4 distance = np.linalg.norm(np.array(receiver.topicVec) - np.array
+(initTopic)) 
+_1_5_5 # If the calculated distance falls below a similarityThreshold, 
+_1_5_6 # send the letter. 
+_1_5_7 if distance < self.similarityThreshold: 
+_1_5_8 receiver.numLettersReceived += 1 
+_1_5_9 self.numLettersSend += 1 
+_1_6_0 # Update model social network 
+_1_6_1 self.model.socialNetwork.add_edge( 
+_1_6_2 self.unique_id, 
+_1_6_3 receiver.unique_id, 
+_1_6_4 step=self.model.schedule.time, 
+_1_6_5 ) 
+_1_6_6 self.model.socialNetwork.nodes()[self.unique_id]["numLettersSend"] =
+self.numLettersSend 
+_1_6_7 self.model.socialNetwork.nodes()[receiver.unique_id]["numLettersReceived"]
+= receiver.numLettersReceived 
+_1_6_8 # Update receivers topic vector as a random movement 
+_1_6_9 # in 3D space on the line between receivers current topic 
+_1_7_0 # and the senders chosen topic vectors. An amount of 1 would 
+_1_7_1 # correspond to a complete addaption of the senders chosen topic 
+_1_7_2 # vector by the receiver. An amount of 0 means the 
+_1_7_3 # receiver is not influencend by the sender at all. 
+_1_7_4 # If both topics coincide nothing is changing. 
+_1_7_5 start = receiver.topicVec 
+_1_7_6 end = initTopic 
+_1_7_7 updatedTopicVec = getNewTopic(start, end) if start != end else initTopic 
+_1_7_8 # The letter sending process is complet and 
+_1_7_9 # the chosen topic of the letter is put into a ledger entry. 
+_1_8_0 self.model.letterLedger.append( 
+_1_8_1 ( 
+_1_8_2 self.unique_id, receiver.unique_id, self.region_id, receiver.region_id, 
+_1_8_3 initTopic, self.model.schedule.steps, 
+_1_8_4 ), 
+_1_8_5 ) 
+_1_8_6 # Take note of the influence the letter had on the receiver. 
+_1_8_7 # This information is used in the step function to update all 
+_1_8_8 # agent's currently held topic positions. 
+_1_8_9 self.model.updatedTopicsDict.update( 
+_1_9_0 {receiver.unique_id: updatedTopicVec}, 
+_1_9_1 ) 
 _1_9_2 
-_1_9_3 # Add graph to network grid for potential visualization. 
-_1_9_4 # TODO: Not yet implemented. Maybe use Solara backend for this?  
-_1_9_5 self.grid = mesa.space.NetworkGrid(self.G) 
-_1_9_6 
-_1_9_7 # Create social network 
-_1_9_8 if useSocialNetwork is True: 
-_1_9_9 for agent in self.schedule.agents: 
-_2_0_0 if isinstance(agent, SenderAgent): 
-_2_0_1 self._createSocialEdges(agent, self.G) 
-_2_0_2 
-_2_0_3 # TODO: What comparitive values are useful for visualizations? 
-_2_0_4 self.datacollector = mesa.DataCollector( 
-_2_0_5 model_reporters={ 
-_2_0_6 "Ledger": getPrunedLedger, 
-_2_0_7 "Letters": lambda x: len(self.letterLedger), 
-_2_0_8 "Movements": lambda x: self.movements, 
-_2_0_9 "Clusters": getComponents 
-_2_1_0 }, 
-_2_1_1 ) 
-_2_1_2 
-_2_1_3 def _createSocialEdges(self, agent, graph): 
-_2_1_4 """Create social edges with the different wiring factors. 
-_2_1_5 
-_2_1_6 Define a close range by using the moveRange parameter. Among 
-_2_1_7 these neighbors, create a connection with probability set by 
-_2_1_8 the shortRangeNetworkFactor.  
-_2_1_9 
-_2_2_0 For all other agents, that are not in this closeRange group, 
-_2_2_1 create a connection with the probability set by the
-longRangeNetworkFactor. 
-_2_2_2 """ 
-_2_2_3 closerange = [x for x in self.space.get_neighbors_within_distance( 
-_2_2_4 agent, 
-_2_2_5 distance=self.moveRange * self.meandistance, 
-_2_2_6 center=False 
-_2_2_7 ) if isinstance(x, SenderAgent)] 
-_2_2_8 for neighbor in closerange: 
-_2_2_9 if neighbor.unique_id != agent.unique_id: 
-_2_3_0 connect = random.choices( 
-_2_3_1 population=[True, False], 
-_2_3_2 weights=[self.shortRangeNetworkFactor, 1 - self.shortRangeNetworkFactor], 
-_2_3_3 k=1 
-_2_3_4 ) 
-_2_3_5 if connect[0] is True: 
-_2_3_6 graph.add_edge(agent.unique_id, neighbor.unique_id, step=0) 
-_2_3_7 graph.add_edge(neighbor.unique_id, agent.unique_id, step=0) 
-_2_3_8 longrange = [x for x in self.schedule.agents if x not in closerange and
-isinstance(x, SenderAgent)] 
-_2_3_9 for neighbor in longrange: 
-_2_4_0 if neighbor.unique_id != agent.unique_id: 
-_2_4_1 connect = random.choices( 
-_2_4_2 population=[True, False], 
-_2_4_3 weights=[self.longRangeNetworkFactor, 1 - self.longRangeNetworkFactor], 
-_2_4_4 k=1 
-_2_4_5 ) 
-_2_4_6 if connect[0] is True: 
-_2_4_7 graph.add_edge(agent.unique_id, neighbor.unique_id, step=0) 
-_2_4_8 graph.add_edge(neighbor.unique_id, agent.unique_id, step=0) 
-_2_4_9 
-_2_5_0 def step(self): 
-_2_5_1 self.scaleSendInput.update( 
-_2_5_2 **{x.unique_id: x.numLettersReceived for x in self.schedule.agents} 
-_2_5_3 ) 
-_2_5_4 self.schedule.step() 
-_2_5_5 self.datacollector.collect(self) 
-_2_5_6 
-_2_5_7 def run(self, n): 
-_2_5_8 """Run the model for n steps.""" 
-_2_5_9 if self.debug is True: 
-_2_6_0 for _ in tqdm(range(n)): 
-_2_6_1 self.step() 
-_2_6_2 else: 
-_2_6_3 for _ in range(n): 
-_2_6_4 self.step() 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+_1_9_3 def step(self) -> None: 
+_1_9_4 """Perform one simulation step.""" 
+_1_9_5 # If the agent has received a letter in the previous step and 
+_1_9_6 # has updated its internal topicVec state, the new topic state is 
+_1_9_7 # appended to the topicLedger 
+_1_9_8 if not self.topicLedger or self.topicVec != self.topicLedger[-1]: 
+_1_9_9 self.topicLedger.append( 
+_2_0_0 self.topicVec, 
+_2_0_1 ) 
+_2_0_2 currentActivation = random.choices( 
+_2_0_3 population=[0, 1], 
+_2_0_4 weights=[1 - self.activationWeight, self.activationWeight], 
+_2_0_5 k=1, 
+_2_0_6 ) 
+_2_0_7 if currentActivation[0] == 1: 
+_2_0_8 neighborsMove = [ 
+_2_0_9 x for x in self.model.space.get_neighbors_within_distance( 
+_2_1_0 self, 
+_2_1_1 distance=self.moveRange * self.model.meandistance, 
+_2_1_2 center=False, 
+_2_1_3 ) if isinstance(x, SenderAgent) 
+_2_1_4 ] 
+_2_1_5 neighborsSend = [ 
+_2_1_6 x for x in self.model.space.get_neighbors_within_distance( 
+_2_1_7 self, 
+_2_1_8 distance=self.letterRange * self.model.meandistance, 
+_2_1_9 center=False, 
+_2_2_0 ) if isinstance(x, SenderAgent) 
+_2_2_1 ] 
+_2_2_2 self.sendLetter(neighborsSend) 
+_2_2_3 self.move(neighborsMove) 
+_2_2_4 
+_2_2_5 
+_2_2_6class RegionAgent(mg.GeoAgent): 
+_2_2_7 """The region keeping track of contained agents. 
+_2_2_8 
+_2_2_9 This agent type is introduced for visualization purposes. 
+_2_3_0 SenderAgents are linked to regions by calculation of a 
+_2_3_1 geographic overlap of the region shape with the SenderAgent 
+_2_3_2 position. 
+_2_3_3 At initialization, the regions are populated with SenderAgents 
+_2_3_4 giving rise to a dictionary of the contained SenderAgent IDs and 
+_2_3_5 their initial topic. 
+_2_3_6 At each movement, the SenderAgent might cross region boundaries. 
+_2_3_7 This reqieres a re-calculation of the potential overlap. 
+_2_3_8 """ 
+_2_3_9 
+_2_4_0 def __init__( 
+_2_4_1 self, 
+_2_4_2 unique_id:str, 
+_2_4_3 model:mesa.Model, 
+_2_4_4 geometry: shapely.geometry.polygon.Polygon, 
+_2_4_5 crs:str, 
+_2_4_6 ) -> None: 
+_2_4_7 """Initialize region with id, model, geometry and crs.""" 
+_2_4_8 super().__init__(unique_id, model, geometry, crs) 
+_2_4_9 self.senders_in_region = {} 
+_2_5_0 self.main_topic:tuple = self.has_main_topic() 
+_2_5_1 
+_2_5_2 def has_main_topic(self) -> tuple: 
+_2_5_3 """Return weighted average topics of agents in region.""" 
+_2_5_4 if len(self.senders_in_region) > 0: 
+_2_5_5 topics = [y[0] for x, y in self.senders_in_region.items()] 
+_2_5_6 total = [y[1] for x, y in self.senders_in_region.items()] 
+_2_5_7 weight = [x / sum(total) for x in total] if sum(total) > 0 else [1 / len
+(topics)] * len(topics) 
+_2_5_8 mixed_colors = np.sum([np.multiply(weight[i], topics[i]) for i in range(len
+(topics))], axis=0) 
+_2_5_9 return np.subtract((1, 1, 1), mixed_colors) 
+_2_6_0 return (0.5, 0.5, 0.5) 
+_2_6_1 
+_2_6_2 def add_sender(self, sender: SenderAgent) -> None: 
+_2_6_3 """Add a sender to the region.""" 
+_2_6_4 receivedLetters = sender.numLettersReceived 
+_2_6_5 scale = receivedLetters if receivedLetters else 1 
+_2_6_6 self.senders_in_region.update( 
+_2_6_7 {sender.unique_id: (sender.topicVec, scale)}, 
+_2_6_8 ) 
+_2_6_9 
+_2_7_0 def remove_sender(self, sender: SenderAgent) -> None: 
+_2_7_1 """Remove a sender from the region.""" 
+_2_7_2 del self.senders_in_region[sender.unique_id] 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_server_py.html` & `scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_server_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/historicalletters/server.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/historicalletters/server.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/historicalletters/server.py</b>:
-            <span class="pc_cov">0%</span>
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/server.py</b>:
+            <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,132 +50,134 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">26 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">26<span class="text"> missing</span></button>
+            <span class="text">22 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">22<span class="text"> run</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_space_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_space_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">matplotlib</span><span class="op">.</span><span class="nam">colors</span> <span class="key">as</span> <span class="nam">colors</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">modules</span> <span class="key">import</span> <span class="nam">ChartVisualization</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""A visualization interface for HistoricalLetters using the older visualization option of mesa."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">matplotlib</span> <span class="key">import</span> <span class="nam">colors</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">modules</span> <span class="key">import</span> <span class="nam">ChartVisualization</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">RegionAgent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">HistoricalLetters</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">SenderAgent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">HistoricalLetters</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="com">#"population": 100,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">    <span class="str">"population"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">         <span class="str">"Number of persons"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">         <span class="num">50</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">         <span class="nam">description</span><span class="op">=</span><span class="str">"Choose how many senders to include in the model."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">     <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">    <span class="str">"useSocialNetwork"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Checkbox</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="str">"Create initial social network of agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="str">"useActivation"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Checkbox</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="str">"Use heterogenous activations"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">    <span class="str">"similarityThreshold"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="str">"Similarity threshold"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="num">0.5</span><span class="op">,</span> <span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose how similar two agents topics have to be, to send a letter."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">    <span class="str">"moveRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="str">"Range for moving position&lt;/br>(% of mean agent distances)"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="num">0.1</span><span class="op">,</span> <span class="num">0.05</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose the visibility range for finding potential locations to move to."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">    <span class="str">"letterRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="str">"Range for letter sending&lt;/br>(% of mean agent distances)"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="num">0.2</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span><span class="num">1.0</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose the visibility range for finding potential recipients."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="str">"population"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">        <span class="str">"Number of persons"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">        <span class="num">50</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose how many senders to include in the model."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">    <span class="str">"useSocialNetwork"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Checkbox</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="str">"Create initial social network of agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="str">"useActivation"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Checkbox</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="str">"Use heterogenous activations"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="str">"similarityThreshold"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="str">"Similarity threshold"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="num">0.5</span><span class="op">,</span> <span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose how similar two agents topics have to be, to send a letter."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="str">"moveRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="str">"Range for moving position&lt;/br>(% of mean agent distances)"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="num">0.01</span><span class="op">,</span> <span class="num">0.00</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose the visibility range for finding potential locations to move to."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="str">"letterRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="str">"Range for letter sending&lt;/br>(% of mean agent distances)"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="num">0.2</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span> <span class="num">1.0</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose the visibility range for finding potential recipients."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t"><span class="key">def</span> <span class="nam">topic_draw</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">    <span class="nam">portrayal</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">RegionAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">        <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">            <span class="nam">color</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">has_main_topic</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="key">except</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">            <span class="nam">print</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">has_main_topic</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">            <span class="key">raise</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">color</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">    <span class="key">elif</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"radius"</span><span class="op">]</span> <span class="op">=</span> <span class="num">5</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"shape"</span><span class="op">]</span> <span class="op">=</span> <span class="str">"circle"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"description"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">str</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">    <span class="key">return</span> <span class="nam">portrayal</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t"><span class="nam">map_element</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">MapModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">    <span class="nam">portrayal_method</span><span class="op">=</span><span class="nam">topic_draw</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">    <span class="nam">view</span><span class="op">=</span><span class="op">[</span><span class="num">52</span><span class="op">,</span> <span class="num">12</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">    <span class="nam">zoom</span><span class="op">=</span><span class="num">4</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">    <span class="nam">map_width</span><span class="op">=</span><span class="num">700</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="nam">map_height</span><span class="op">=</span><span class="num">500</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t"><span class="nam">chart</span> <span class="op">=</span> <span class="nam">ChartVisualization</span><span class="op">.</span><span class="nam">ChartModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">    <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Movements"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"red"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Clusters"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"black"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="op">{</span><span class="str">'Label'</span><span class="op">:</span> <span class="str">"Letters"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"green"</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">    <span class="nam">data_collector_name</span><span class="op">=</span><span class="str">'datacollector'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t"><span class="nam">server</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">ModularServer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">    <span class="nam">HistoricalLetters</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">    <span class="op">[</span><span class="nam">map_element</span><span class="op">,</span> <span class="nam">chart</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">    <span class="str">"Historical Letters"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="key">def</span> <span class="nam">topic_draw</span><span class="op">(</span><span class="nam">agent</span><span class="op">:</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoAgent</span><span class="op">)</span> <span class="op">-></span> <span class="nam">dict</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">    <span class="str">"""Define visualization strategies for agents.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t"><span class="str">    Region agents get the main color as a mean of</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t"><span class="str">    all region agents topic vectors.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t"><span class="str">    Sender agetns have the color of their current</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t"><span class="str">    topic vector.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="nam">portrayal</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">    <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">RegionAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">color</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">has_main_topic</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">color</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">    <span class="key">elif</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"radius"</span><span class="op">]</span> <span class="op">=</span> <span class="num">5</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"shape"</span><span class="op">]</span> <span class="op">=</span> <span class="str">"circle"</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"description"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">str</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="key">return</span> <span class="nam">portrayal</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t"><span class="nam">map_element</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">MapModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">    <span class="nam">portrayal_method</span><span class="op">=</span><span class="nam">topic_draw</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">    <span class="nam">view</span><span class="op">=</span><span class="op">[</span><span class="num">52</span><span class="op">,</span> <span class="num">12</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="nam">zoom</span><span class="op">=</span><span class="num">4</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">    <span class="nam">map_width</span><span class="op">=</span><span class="num">700</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">    <span class="nam">map_height</span><span class="op">=</span><span class="num">500</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t"><span class="nam">chart</span> <span class="op">=</span> <span class="nam">ChartVisualization</span><span class="op">.</span><span class="nam">ChartModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">    <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Movements"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"red"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Clusters"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"black"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Letters"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"green"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">    <span class="nam">data_collector_name</span><span class="op">=</span><span class="str">"datacollector"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t"><span class="nam">server</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">ModularServer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">    <span class="nam">HistoricalLetters</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">    <span class="op">[</span><span class="nam">map_element</span><span class="op">,</span> <span class="nam">chart</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="str">"Historical Letters"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_space_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_space_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,102 +1,106 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//hhiissttoorriiccaalllleetttteerrss//sseerrvveerr..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//sseerrvveerr..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 2266 ssttaatteemmeennttss ?  00 rruunn 2266 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
-_1import matplotlib.colors as colors 
-_2 
-_3import mesa 
-_4import mesa_geo as mg 
+********** 2222 ssttaatteemmeennttss ?  2222 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_1"""A visualization interface for HistoricalLetters using the older
+visualization option of mesa.""" 
+_2import mesa 
+_3import mesa_geo as mg 
+_4from matplotlib import colors 
 _5from mesa.visualization.modules import ChartVisualization 
 _6 
-_7from scicom.historicalletters.agents import SenderAgent, RegionAgent 
+_7from scicom.historicalletters.agents import RegionAgent, SenderAgent 
 _8from scicom.historicalletters.model import HistoricalLetters 
 _9 
 _1_0model_params = { 
-_1_1 #"population": 100, 
-_1_2 "population": mesa.visualization.Slider( 
-_1_3 "Number of persons", 
-_1_4 50, 10, 100, 10, 
-_1_5 description="Choose how many senders to include in the model.", 
-_1_6 ), 
-_1_7 "useSocialNetwork": mesa.visualization.Checkbox( 
-_1_8 "Create initial social network of agents", 
-_1_9 False 
-_2_0 ), 
-_2_1 "useActivation": mesa.visualization.Checkbox( 
-_2_2 "Use heterogenous activations", 
-_2_3 False 
-_2_4 ), 
-_2_5 "similarityThreshold": mesa.visualization.Slider( 
-_2_6 "Similarity threshold", 
-_2_7 0.5, 0.0, 1.0, 0.1, 
-_2_8 description="Choose how similar two agents topics have to be, to send a
+_1_1 "population": mesa.visualization.Slider( 
+_1_2 "Number of persons", 
+_1_3 50, 10, 100, 10, 
+_1_4 description="Choose how many senders to include in the model.", 
+_1_5 ), 
+_1_6 "useSocialNetwork": mesa.visualization.Checkbox( 
+_1_7 "Create initial social network of agents", 
+_1_8 False, 
+_1_9 ), 
+_2_0 "useActivation": mesa.visualization.Checkbox( 
+_2_1 "Use heterogenous activations", 
+_2_2 False, 
+_2_3 ), 
+_2_4 "similarityThreshold": mesa.visualization.Slider( 
+_2_5 "Similarity threshold", 
+_2_6 0.5, 0.0, 1.0, 0.1, 
+_2_7 description="Choose how similar two agents topics have to be, to send a
 letter.", 
-_2_9 ), 
-_3_0 "moveRange": mesa.visualization.Slider( 
-_3_1 "Range for moving position</br>(% of mean agent distances)", 
-_3_2 0.1, 0.05, 0.75, 0.05, 
-_3_3 description="Choose the visibility range for finding potential locations to
+_2_8 ), 
+_2_9 "moveRange": mesa.visualization.Slider( 
+_3_0 "Range for moving position</br>(% of mean agent distances)", 
+_3_1 0.01, 0.00, 0.5, 0.05, 
+_3_2 description="Choose the visibility range for finding potential locations to
 move to.", 
-_3_4 ), 
-_3_5 "letterRange": mesa.visualization.Slider( 
-_3_6 "Range for letter sending</br>(% of mean agent distances)", 
-_3_7 0.2, 0.1,1.0, 0.1, 
-_3_8 description="Choose the visibility range for finding potential
+_3_3 ), 
+_3_4 "letterRange": mesa.visualization.Slider( 
+_3_5 "Range for letter sending</br>(% of mean agent distances)", 
+_3_6 0.2, 0.1, 1.0, 0.1, 
+_3_7 description="Choose the visibility range for finding potential
 recipients.", 
-_3_9 ), 
-_4_0} 
+_3_8 ), 
+_3_9} 
+_4_0 
 _4_1 
-_4_2 
-_4_3def topic_draw(agent): 
-_4_4 portrayal = {} 
-_4_5 if isinstance(agent, RegionAgent): 
-_4_6 try: 
-_4_7 color = colors.to_hex(agent.has_main_topic()) 
-_4_8 except: 
-_4_9 print(agent.has_main_topic()) 
-_5_0 raise 
-_5_1 portrayal["color"] = color 
-_5_2 elif isinstance(agent, SenderAgent): 
-_5_3 colortuple = set(agent.topicVec) 
-_5_4 portrayal["radius"] = 5 
-_5_5 portrayal["shape"] = "circle" 
-_5_6 portrayal["color"] = colors.to_hex(colortuple) 
-_5_7 portrayal["description"] = str(agent.unique_id) 
-_5_8 return portrayal 
-_5_9 
-_6_0 
-_6_1map_element = mg.visualization.MapModule( 
-_6_2 portrayal_method=topic_draw, 
-_6_3 view=[52, 12], 
-_6_4 zoom=4, 
-_6_5 map_width=700, 
-_6_6 map_height=500, 
-_6_7) 
-_6_8 
-_6_9chart = ChartVisualization.ChartModule( 
-_7_0 [ 
-_7_1 {"Label": "Movements", "Color": "red"}, 
-_7_2 {"Label": "Clusters", "Color": "black"}, 
-_7_3 {'Label': "Letters", "Color": "green"} 
-_7_4 ], 
-_7_5 data_collector_name='datacollector', 
-_7_6) 
-_7_7 
-_7_8 
-_7_9server = mesa.visualization.ModularServer( 
-_8_0 HistoricalLetters, 
-_8_1 [map_element, chart], 
-_8_2 "Historical Letters", 
-_8_3 model_params, 
-_8_4) 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+_4_2def topic_draw(agent:mg.GeoAgent) -> dict: 
+_4_3 """Define visualization strategies for agents. 
+_4_4 
+_4_5 Region agents get the main color as a mean of 
+_4_6 all region agents topic vectors. 
+_4_7 
+_4_8 Sender agetns have the color of their current 
+_4_9 topic vector. 
+_5_0 """ 
+_5_1 portrayal = {} 
+_5_2 if isinstance(agent, RegionAgent): 
+_5_3 color = colors.to_hex(agent.has_main_topic()) 
+_5_4 portrayal["color"] = color 
+_5_5 elif isinstance(agent, SenderAgent): 
+_5_6 colortuple = set(agent.topicVec) 
+_5_7 portrayal["radius"] = 5 
+_5_8 portrayal["shape"] = "circle" 
+_5_9 portrayal["color"] = colors.to_hex(colortuple) 
+_6_0 portrayal["description"] = str(agent.unique_id) 
+_6_1 return portrayal 
+_6_2 
+_6_3map_element = mg.visualization.MapModule( 
+_6_4 portrayal_method=topic_draw, 
+_6_5 view=[52, 12], 
+_6_6 zoom=4, 
+_6_7 map_width=700, 
+_6_8 map_height=500, 
+_6_9) 
+_7_0 
+_7_1chart = ChartVisualization.ChartModule( 
+_7_2 [ 
+_7_3 {"Label": "Movements", "Color": "red"}, 
+_7_4 {"Label": "Clusters", "Color": "black"}, 
+_7_5 {"Label": "Letters", "Color": "green"}, 
+_7_6 ], 
+_7_7 data_collector_name="datacollector", 
+_7_8) 
+_7_9 
+_8_0 
+_8_1server = mesa.visualization.ModularServer( 
+_8_2 HistoricalLetters, 
+_8_3 [map_element, chart], 
+_8_4 "Historical Letters", 
+_8_5 model_params, 
+_8_6) 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_space_py.html` & `scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_space_py.html`

 * *Files 4% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/historicalletters/space.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/historicalletters/space.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/historicalletters/space.py</b>:
-            <span class="pc_cov">0%</span>
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/space.py</b>:
+            <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,100 +50,107 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">33 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">33<span class="text"> missing</span></button>
+            <span class="text">27 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">27<span class="text"> run</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_utils_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">random</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">from</span> <span class="nam">typing</span> <span class="key">import</span> <span class="nam">Dict</span><span class="op">,</span> <span class="nam">DefaultDict</span><span class="op">,</span> <span class="nam">Set</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">from</span> <span class="nam">collections</span> <span class="key">import</span> <span class="nam">defaultdict</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">geometry</span> <span class="key">import</span> <span class="nam">Point</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""The geographical space for HistoricalLetters."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">SenderAgent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">SenderAgent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">class</span> <span class="nam">Nuts2Eu</span><span class="op">(</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoSpace</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="str">"""Define regions containing senders of letters.</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">class</span> <span class="nam">Nuts2Eu</span><span class="op">(</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoSpace</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="str">"""Define regions containing senders of letters.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    This is modified from a mesa-geo example, here</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    https://github.com/projectmesa/mesa-examples/blob/main/gis/geo_schelling_points/geo_schelling_points/space.py</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">    <span class="nam">_id_region_map</span><span class="op">:</span> <span class="nam">Dict</span><span class="op">[</span><span class="nam">str</span><span class="op">,</span> <span class="nam">RegionAgent</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">warn_crs_conversion</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">_id_region_map</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_regions</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agents</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">add_agents</span><span class="op">(</span><span class="nam">agents</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="nam">total_area</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">_id_region_map</span><span class="op">[</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_sender_to_region</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">,</span> <span class="nam">region_id</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">agent</span><span class="op">.</span><span class="nam">region_id</span> <span class="op">=</span> <span class="nam">region_id</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">_id_region_map</span><span class="op">[</span><span class="nam">region_id</span><span class="op">]</span><span class="op">.</span><span class="nam">add_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="key">def</span> <span class="nam">remove_sender_from_region</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">_id_region_map</span><span class="op">[</span><span class="nam">agent</span><span class="op">.</span><span class="nam">region_id</span><span class="op">]</span><span class="op">.</span><span class="nam">remove_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="nam">agent</span><span class="op">.</span><span class="nam">region_id</span> <span class="op">=</span> <span class="key">None</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">    The space model is initialized with all EU NUTS2 regions.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    The movement of one agent during the model run consitst of</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    the removing the sender from the old region, setting the</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    new sender position and then adding the sender to the new</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    region.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="str">    This is modified from a mesa-geo example, here</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="str">    https://github.com/projectmesa/mesa-examples/blob/main/gis/geo_schelling_points/geo_schelling_points/space.py</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="str">"""Initialize space model."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">warn_crs_conversion</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">_id_region_map</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_regions</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agents</span><span class="op">:</span> <span class="nam">RegionAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="str">"""Add regions to space."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">add_agents</span><span class="op">(</span><span class="nam">agents</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">_id_region_map</span><span class="op">[</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_sender_to_region</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">region_id</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="str">"""Add sender to region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">agent</span><span class="op">.</span><span class="nam">region_id</span> <span class="op">=</span> <span class="nam">region_id</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">_id_region_map</span><span class="op">[</span><span class="nam">region_id</span><span class="op">]</span><span class="op">.</span><span class="nam">add_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">add_agents</span><span class="op">(</span><span class="op">[</span><span class="nam">agent</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">add_sender_to_region</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">    <span class="key">def</span> <span class="nam">move_sender</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">pos</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">FloatCoordinate</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">:</span> <span class="nam">str</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">__remove_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">        <span class="nam">agent</span><span class="op">.</span><span class="nam">geometry</span> <span class="op">=</span> <span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">add_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">    <span class="key">def</span> <span class="nam">__remove_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">remove_agent</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">remove_sender_from_region</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="key">def</span> <span class="nam">remove_sender_from_region</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="str">"""Remove sender from region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">_id_region_map</span><span class="op">[</span><span class="nam">agent</span><span class="op">.</span><span class="nam">region_id</span><span class="op">]</span><span class="op">.</span><span class="nam">remove_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">        <span class="nam">agent</span><span class="op">.</span><span class="nam">region_id</span> <span class="op">=</span> <span class="key">None</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="str">"""Add sender to specific region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">add_agents</span><span class="op">(</span><span class="op">[</span><span class="nam">agent</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">add_sender_to_region</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">    <span class="key">def</span> <span class="nam">move_sender</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">pos</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">FloatCoordinate</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="str">"""Move sender from old to new region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">__remove_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">agent</span><span class="op">.</span><span class="nam">geometry</span> <span class="op">=</span> <span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">add_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">    <span class="key">def</span> <span class="nam">__remove_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="str">"""Remove sender."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">remove_agent</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">remove_sender_from_region</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_444d8314c29d6cbe_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_utils_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,68 +1,76 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//hhiissttoorriiccaalllleetttteerrss//ssppaaccee..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//ssppaaccee..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 3333 ssttaatteemmeennttss ?  00 rruunn 3333 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
-_1import random 
-_2from typing import Dict, DefaultDict, Set 
-_3from collections import defaultdict 
-_4 
-_5import mesa 
-_6import mesa_geo as mg 
-_7from shapely.geometry import Point 
+********** 2277 ssttaatteemmeennttss ?  2277 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_1"""The geographical space for HistoricalLetters.""" 
+_2 
+_3import mesa 
+_4import mesa_geo as mg 
+_5 
+_6from scicom.historicalletters.agents import RegionAgent, SenderAgent 
+_7 
 _8 
-_9from scicom.historicalletters.agents import RegionAgent, SenderAgent 
-_1_0 
+_9class Nuts2Eu(mg.GeoSpace): 
+_1_0 """Define regions containing senders of letters. 
 _1_1 
-_1_2class Nuts2Eu(mg.GeoSpace): 
-_1_3 """Define regions containing senders of letters. 
-_1_4  
-_1_5 This is modified from a mesa-geo example, here 
-_1_6 https://github.com/projectmesa/mesa-examples/blob/main/gis/
+_1_2 The space model is initialized with all EU NUTS2 regions. 
+_1_3 The movement of one agent during the model run consitst of 
+_1_4 the removing the sender from the old region, setting the 
+_1_5 new sender position and then adding the sender to the new 
+_1_6 region. 
+_1_7 
+_1_8 This is modified from a mesa-geo example, here 
+_1_9 https://github.com/projectmesa/mesa-examples/blob/main/gis/
 geo_schelling_points/geo_schelling_points/space.py 
-_1_7 """ 
-_1_8 _id_region_map: Dict[str, RegionAgent] 
-_1_9 
-_2_0 def __init__(self): 
-_2_1 super().__init__(warn_crs_conversion=True) 
-_2_2 self._id_region_map = {} 
-_2_3 
-_2_4 def add_regions(self, agents): 
-_2_5 super().add_agents(agents) 
-_2_6 total_area = 0 
-_2_7 for agent in agents: 
-_2_8 self._id_region_map[agent.unique_id] = agent 
-_2_9 
-_3_0 def add_sender_to_region(self, agent, region_id): 
-_3_1 agent.region_id = region_id 
-_3_2 self._id_region_map[region_id].add_sender(agent) 
-_3_3 
-_3_4 def remove_sender_from_region(self, agent): 
-_3_5 self._id_region_map[agent.region_id].remove_sender(agent) 
-_3_6 agent.region_id = None 
+_2_0 """ 
+_2_1 
+_2_2 def __init__(self) -> None: 
+_2_3 """Initialize space model.""" 
+_2_4 super().__init__(warn_crs_conversion=True) 
+_2_5 self._id_region_map = {} 
+_2_6 
+_2_7 def add_regions(self, agents: RegionAgent) -> None: 
+_2_8 """Add regions to space.""" 
+_2_9 super().add_agents(agents) 
+_3_0 for agent in agents: 
+_3_1 self._id_region_map[agent.unique_id] = agent 
+_3_2 
+_3_3 def add_sender_to_region(self, agent: SenderAgent, region_id: str) -> None: 
+_3_4 """Add sender to region.""" 
+_3_5 agent.region_id = region_id 
+_3_6 self._id_region_map[region_id].add_sender(agent) 
 _3_7 
-_3_8 def add_sender(self, agent: SenderAgent, regionID: str) -> None: 
-_3_9 super().add_agents([agent]) 
-_4_0 self.add_sender_to_region(agent, regionID) 
-_4_1 
-_4_2 def move_sender( 
-_4_3 self, agent: SenderAgent, pos: mesa.space.FloatCoordinate, regionID: str 
-_4_4 ) -> None: 
-_4_5 self.__remove_sender(agent) 
-_4_6 agent.geometry = pos 
-_4_7 self.add_sender(agent, regionID) 
-_4_8 
-_4_9 def __remove_sender(self, agent: SenderAgent) -> None: 
-_5_0 super().remove_agent(agent) 
-_5_1 self.remove_sender_from_region(agent) 
-_5_2 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+_3_8 def remove_sender_from_region(self, agent: SenderAgent) -> None: 
+_3_9 """Remove sender from region.""" 
+_4_0 self._id_region_map[agent.region_id].remove_sender(agent) 
+_4_1 agent.region_id = None 
+_4_2 
+_4_3 def add_sender(self, agent: SenderAgent, regionID: str) -> None: 
+_4_4 """Add sender to specific region.""" 
+_4_5 super().add_agents([agent]) 
+_4_6 self.add_sender_to_region(agent, regionID) 
+_4_7 
+_4_8 def move_sender( 
+_4_9 self, agent: SenderAgent, pos: mesa.space.FloatCoordinate, regionID: str, 
+_5_0 ) -> None: 
+_5_1 """Move sender from old to new region.""" 
+_5_2 self.__remove_sender(agent) 
+_5_3 agent.geometry = pos 
+_5_4 self.add_sender(agent, regionID) 
+_5_5 
+_5_6 def __remove_sender(self, agent: SenderAgent) -> None: 
+_5_7 """Remove sender.""" 
+_5_8 super().remove_agent(agent) 
+_5_9 self.remove_sender_from_region(agent) 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_444d8314c29d6cbe_utils_py.html` & `scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_utils_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/historicalletters/utils.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/historicalletters/utils.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/historicalletters/utils.py</b>:
-            <span class="pc_cov">0%</span>
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/historicalletters/utils.py</b>:
+            <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,154 +50,162 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">35 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">35<span class="text"> missing</span></button>
+            <span class="text">39 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">39<span class="text"> run</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_space_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_space_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_SimpleContinuousModule_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_SimpleContinuousModule_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-26 17:45 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">random</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">geopandas</span> <span class="key">as</span> <span class="nam">gpd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">shapely</span> <span class="key">import</span> <span class="nam">contains</span><span class="op">,</span> <span class="nam">LineString</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">def</span> <span class="nam">createData</span><span class="op">(</span><span class="nam">population</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span> <span class="nam">populationDistribution</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="str">"""Create random coordinates of historically motivated choices.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="str">    The routine samples a population sample based on estimated</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="str">    population density of that coordinate. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    The original CSV dataset is retrieved from </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    https://doi.org/10.1371/journal.pone.0162678.s003</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">    <span class="nam">initial_population_choices</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">read_csv</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">populationDistribution</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="nam">encoding</span><span class="op">=</span><span class="str">"latin1"</span><span class="op">,</span> <span class="nam">index_col</span><span class="op">=</span><span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">    <span class="com"># Calculate relative population ratio to estimated settlement area.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="com"># This will correspont to the probabilities to draw an agent from</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="com"># these coordinates.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">    <span class="nam">relPop</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="key">for</span> <span class="nam">idx</span> <span class="op">,</span><span class="nam">row</span> <span class="key">in</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">relPop</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="nam">row</span><span class="op">[</span><span class="str">"Area"</span><span class="op">]</span><span class="op">/</span><span class="nam">row</span><span class="op">[</span><span class="str">"Pop"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">'relPop'</span><span class="op">,</span> <span class="nam">relPop</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="com"># Four costal cities can not be considered, since the modern NUTS regions</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">    <span class="com"># give zero overlap to their coordinates, leading to potential errors when </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="com"># agents move.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">    <span class="nam">excludeCoastal</span> <span class="op">=</span> <span class="op">[</span><span class="str">'Great Yarmouth'</span><span class="op">,</span> <span class="str">'Kingston-upon-Hull'</span><span class="op">,</span> <span class="str">'Calais'</span><span class="op">,</span> <span class="str">'Toulon'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="nam">initial_population_choices</span> <span class="op">=</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">"~Settlement.isin(@excludeCoastal)"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">    <span class="nam">loc_probabilities</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">    <span class="nam">loc_values</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">    <span class="key">for</span> <span class="nam">idx</span><span class="op">,</span> <span class="nam">row</span> <span class="key">in</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">        <span class="nam">loc_probabilities</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">row</span><span class="op">[</span><span class="str">"relPop"</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="nam">loc_values</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">            <span class="op">(</span><span class="nam">row</span><span class="op">[</span><span class="str">"longitude"</span><span class="op">]</span><span class="op">,</span> <span class="nam">row</span><span class="op">[</span><span class="str">"latitude"</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">    <span class="nam">coordinates</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="nam">loc_values</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">loc_probabilities</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="nam">k</span><span class="op">=</span><span class="nam">population</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">coordinates</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">"longitude"</span><span class="op">,</span> <span class="str">"latitude"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">    <span class="nam">data</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">        <span class="str">'unique_id'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">        <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">            <span class="str">"P"</span> <span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">population</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">        <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">    <span class="com"># Read the Geodataframe with EPSG:4326 projection.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">    <span class="nam">geodf</span> <span class="op">=</span> <span class="nam">gpd</span><span class="op">.</span><span class="nam">GeoDataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="nam">data</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="nam">geometry</span><span class="op">=</span><span class="nam">gpd</span><span class="op">.</span><span class="nam">points_from_xy</span><span class="op">(</span><span class="nam">data</span><span class="op">.</span><span class="nam">longitude</span><span class="op">,</span> <span class="nam">data</span><span class="op">.</span><span class="nam">latitude</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="nam">crs</span><span class="op">=</span><span class="str">"EPSG:4326"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">    <span class="com"># Transform to EPSG:3857, since the NUTS shape files are in </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">    <span class="com"># that projection.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">    <span class="nam">geodf</span> <span class="op">=</span> <span class="nam">geodf</span><span class="op">.</span><span class="nam">to_crs</span><span class="op">(</span><span class="str">"EPSG:3857"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""Utility functions for HistoricalLetters."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">random</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">geopandas</span> <span class="key">as</span> <span class="nam">gpd</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">import</span> <span class="nam">shapely</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">from</span> <span class="nam">shapely</span> <span class="key">import</span> <span class="nam">LineString</span><span class="op">,</span> <span class="nam">contains</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">def</span> <span class="nam">createData</span><span class="op">(</span><span class="nam">population</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span> <span class="nam">populationDistribution</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span> <span class="op">-></span> <span class="nam">gpd</span><span class="op">.</span><span class="nam">GeoDataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="str">"""Create random coordinates of historically motivated choices.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    The routine samples a population sample based on estimated</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    population density of that coordinate.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="str">    The original CSV dataset is retrieved from</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="str">    https://doi.org/10.1371/journal.pone.0162678.s003</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="nam">initial_population_choices</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">read_csv</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">populationDistribution</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="nam">encoding</span><span class="op">=</span><span class="str">"latin1"</span><span class="op">,</span> <span class="nam">index_col</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="com"># Calculate relative population ratio to estimated settlement area.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="com"># This will correspont to the probabilities to draw an agent from</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">    <span class="com"># these coordinates.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="nam">relPop</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">    <span class="key">for</span> <span class="nam">_</span><span class="op">,</span> <span class="nam">row</span> <span class="key">in</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">relPop</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="nam">row</span><span class="op">[</span><span class="str">"Area"</span><span class="op">]</span> <span class="op">/</span> <span class="nam">row</span><span class="op">[</span><span class="str">"Pop"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"relPop"</span><span class="op">,</span> <span class="nam">relPop</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="com"># Four costal cities can not be considered, since the modern NUTS regions</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">    <span class="com"># give zero overlap to their coordinates, leading to potential errors when</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">    <span class="com"># agents move.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">    <span class="nam">excludeCoastal</span> <span class="op">=</span> <span class="op">[</span><span class="str">"Great Yarmouth"</span><span class="op">,</span> <span class="str">"Kingston-upon-Hull"</span><span class="op">,</span> <span class="str">"Calais"</span><span class="op">,</span> <span class="str">"Toulon"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">    <span class="nam">initial_population_choices</span> <span class="op">=</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">"~Settlement.isin(@excludeCoastal)"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">    <span class="nam">loc_probabilities</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="nam">loc_values</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="key">for</span> <span class="nam">_</span><span class="op">,</span> <span class="nam">row</span> <span class="key">in</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="nam">loc_probabilities</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">row</span><span class="op">[</span><span class="str">"relPop"</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="nam">loc_values</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">            <span class="op">(</span><span class="nam">row</span><span class="op">[</span><span class="str">"longitude"</span><span class="op">]</span><span class="op">,</span> <span class="nam">row</span><span class="op">[</span><span class="str">"latitude"</span><span class="op">]</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">    <span class="nam">coordinates</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">loc_values</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">loc_probabilities</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">k</span><span class="op">=</span><span class="nam">population</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="nam">coordinates</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">"longitude"</span><span class="op">,</span> <span class="str">"latitude"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">    <span class="nam">data</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">        <span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">        <span class="str">"unique_id"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">        <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">            <span class="str">"P"</span> <span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">population</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">    <span class="com"># Read the Geodataframe with EPSG:4326 projection.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">    <span class="nam">geodf</span> <span class="op">=</span> <span class="nam">gpd</span><span class="op">.</span><span class="nam">GeoDataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="nam">data</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="nam">geometry</span><span class="op">=</span><span class="nam">gpd</span><span class="op">.</span><span class="nam">points_from_xy</span><span class="op">(</span><span class="nam">data</span><span class="op">.</span><span class="nam">longitude</span><span class="op">,</span> <span class="nam">data</span><span class="op">.</span><span class="nam">latitude</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="nam">crs</span><span class="op">=</span><span class="str">"EPSG:4326"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">    <span class="key">return</span> <span class="nam">geodf</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t"><span class="key">def</span> <span class="nam">getRegion</span><span class="op">(</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">    <span class="str">"""Get region ID overlaping with input geometry.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t"><span class="str">    Might e.g. fail if line of connection crosses international</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t"><span class="str">    waters, since there is no NUTS region assigned then.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">    <span class="nam">regionID</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">                <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">regions</span> <span class="key">if</span> <span class="nam">contains</span><span class="op">(</span><span class="nam">x</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">    <span class="key">if</span> <span class="nam">regionID</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">        <span class="key">return</span> <span class="nam">regionID</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="key">raise</span> <span class="nam">IndexError</span><span class="op">(</span><span class="str">f"Can not find overlaping region to geometry {geometry}"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t"><span class="key">def</span> <span class="nam">getPositionOnLine</span><span class="op">(</span><span class="nam">start</span><span class="op">,</span> <span class="nam">target</span><span class="op">,</span> <span class="nam">returnType</span><span class="op">=</span><span class="str">"point"</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">    <span class="str">"""Interpolate movement along line between two given points.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t"><span class="str">    The amount of moving from start to target is random.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">    <span class="nam">segment</span> <span class="op">=</span> <span class="nam">LineString</span><span class="op">(</span><span class="op">[</span><span class="nam">start</span><span class="op">,</span> <span class="nam">target</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">    <span class="nam">newPos</span> <span class="op">=</span> <span class="nam">segment</span><span class="op">.</span><span class="nam">interpolate</span><span class="op">(</span><span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0.0</span><span class="op">,</span><span class="num">1.0</span><span class="op">)</span><span class="op">,</span> <span class="nam">normalized</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">    <span class="key">if</span> <span class="nam">returnType</span> <span class="op">==</span> <span class="str">"point"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">        <span class="key">return</span> <span class="nam">newPos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">    <span class="key">elif</span> <span class="nam">returnType</span> <span class="op">==</span> <span class="str">"coords"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">        <span class="key">return</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">newPos</span><span class="op">.</span><span class="nam">coords</span><span class="op">]</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">    <span class="com"># Transform to EPSG:3857, since the NUTS shape files are in</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">    <span class="com"># that projection.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">    <span class="key">return</span> <span class="nam">geodf</span><span class="op">.</span><span class="nam">to_crs</span><span class="op">(</span><span class="str">"EPSG:3857"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t"><span class="key">def</span> <span class="nam">getRegion</span><span class="op">(</span><span class="nam">geometry</span><span class="op">:</span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">point</span><span class="op">.</span><span class="nam">Point</span><span class="op">,</span> <span class="nam">model</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="str">"""Get region ID overlaping with input geometry.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t"><span class="str">    Might e.g. fail if line of connection crosses international</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t"><span class="str">    waters, since there is no NUTS region assigned then.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">    <span class="nam">regionID</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">regions</span> <span class="key">if</span> <span class="nam">contains</span><span class="op">(</span><span class="nam">x</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">    <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">    <span class="key">if</span> <span class="nam">regionID</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="key">return</span> <span class="nam">regionID</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">    <span class="nam">text</span> <span class="op">=</span> <span class="str">f"Can not find overlaping region to geometry {geometry}"</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="key">raise</span> <span class="nam">IndexError</span><span class="op">(</span><span class="nam">text</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="key">def</span> <span class="nam">getPositionOnLine</span><span class="op">(</span><span class="nam">start</span><span class="op">:</span><span class="nam">shapely</span><span class="op">.</span><span class="nam">Point</span><span class="op">,</span> <span class="nam">target</span><span class="op">:</span><span class="nam">shapely</span><span class="op">.</span><span class="nam">Point</span><span class="op">)</span> <span class="op">-></span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">Point</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">    <span class="str">"""Interpolate movement along line between two given points.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t"><span class="str">    The amount of moving from start to target is random.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">    <span class="nam">segment</span> <span class="op">=</span> <span class="nam">LineString</span><span class="op">(</span><span class="op">[</span><span class="nam">start</span><span class="op">,</span> <span class="nam">target</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="key">return</span> <span class="nam">segment</span><span class="op">.</span><span class="nam">interpolate</span><span class="op">(</span><span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">)</span><span class="op">,</span> <span class="nam">normalized</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t"><span class="key">def</span> <span class="nam">getNewTopic</span><span class="op">(</span><span class="nam">start</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span> <span class="nam">target</span><span class="op">:</span><span class="nam">tuple</span><span class="op">)</span> <span class="op">-></span> <span class="nam">tuple</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">    <span class="str">"""Interpolate new topic between two topics.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t"><span class="str">    The amount of moving from start to target is random.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">    <span class="nam">p1</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">start</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">    <span class="nam">p2</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">target</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">    <span class="nam">p3</span> <span class="op">=</span> <span class="nam">p1</span> <span class="op">+</span> <span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">p2</span> <span class="op">-</span><span class="nam">p1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">    <span class="key">return</span> <span class="nam">tuple</span><span class="op">(</span><span class="nam">p3</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_space_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_space_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_SimpleContinuousModule_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_SimpleContinuousModule_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-26 17:45 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,123 +1,135 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//hhiissttoorriiccaalllleetttteerrss//uuttiillss..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//uuttiillss..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 3355 ssttaatteemmeennttss ?  00 rruunn 3355 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 3399 ssttaatteemmeennttss ?  3399 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
-_1import random 
-_2import pandas as pd 
-_3import geopandas as gpd 
-_4from shapely import contains, LineString 
-_5 
-_6 
-_7def createData(population: int, populationDistribution: str): 
-_8 """Create random coordinates of historically motivated choices. 
-_9  
-_1_0 The routine samples a population sample based on estimated 
-_1_1 population density of that coordinate.  
-_1_2 
-_1_3 The original CSV dataset is retrieved from  
-_1_4 https://doi.org/10.1371/journal.pone.0162678.s003 
-_1_5 """ 
-_1_6 
-_1_7 initial_population_choices = pd.read_csv( 
-_1_8 populationDistribution, 
-_1_9 encoding="latin1", index_col=0 
-_2_0 ) 
-_2_1 
-_2_2 # Calculate relative population ratio to estimated settlement area. 
-_2_3 # This will correspont to the probabilities to draw an agent from 
-_2_4 # these coordinates. 
-_2_5 relPop = [] 
-_2_6 
-_2_7 for idx ,row in initial_population_choices.iterrows(): 
-_2_8 relPop.append( 
-_2_9 row["Area"]/row["Pop"] 
-_3_0 ) 
-_3_1 
-_3_2 initial_population_choices.insert(0, 'relPop', relPop) 
-_3_3 
-_3_4 # Four costal cities can not be considered, since the modern NUTS regions 
-_3_5 # give zero overlap to their coordinates, leading to potential errors when  
-_3_6 # agents move. 
-_3_7 excludeCoastal = ['Great Yarmouth', 'Kingston-upon-Hull', 'Calais',
-'Toulon'] 
-_3_8 initial_population_choices = initial_population_choices.query
+26 17:45 +0200
+_1"""Utility functions for HistoricalLetters.""" 
+_2import random 
+_3 
+_4import geopandas as gpd 
+_5import mesa 
+_6import numpy as np 
+_7import pandas as pd 
+_8import shapely 
+_9from shapely import LineString, contains 
+_1_0 
+_1_1 
+_1_2def createData(population: int, populationDistribution: str) -
+> gpd.GeoDataFrame: 
+_1_3 """Create random coordinates of historically motivated choices. 
+_1_4 
+_1_5 The routine samples a population sample based on estimated 
+_1_6 population density of that coordinate. 
+_1_7 
+_1_8 The original CSV dataset is retrieved from 
+_1_9 https://doi.org/10.1371/journal.pone.0162678.s003 
+_2_0 """ 
+_2_1 initial_population_choices = pd.read_csv( 
+_2_2 populationDistribution, 
+_2_3 encoding="latin1", index_col=0, 
+_2_4 ) 
+_2_5 
+_2_6 # Calculate relative population ratio to estimated settlement area. 
+_2_7 # This will correspont to the probabilities to draw an agent from 
+_2_8 # these coordinates. 
+_2_9 relPop = [] 
+_3_0 
+_3_1 for _, row in initial_population_choices.iterrows(): 
+_3_2 relPop.append( 
+_3_3 row["Area"] / row["Pop"], 
+_3_4 ) 
+_3_5 
+_3_6 initial_population_choices.insert(0, "relPop", relPop) 
+_3_7 
+_3_8 # Four costal cities can not be considered, since the modern NUTS regions 
+_3_9 # give zero overlap to their coordinates, leading to potential errors when 
+_4_0 # agents move. 
+_4_1 excludeCoastal = ["Great Yarmouth", "Kingston-upon-Hull", "Calais",
+"Toulon"] 
+_4_2 initial_population_choices = initial_population_choices.query
 ("~Settlement.isin(@excludeCoastal)") 
-_3_9 
-_4_0 loc_probabilities = [] 
-_4_1 loc_values = [] 
-_4_2 for idx, row in initial_population_choices.iterrows(): 
-_4_3 loc_probabilities.append(row["relPop"]) 
-_4_4 loc_values.append( 
-_4_5 (row["longitude"], row["latitude"]) 
-_4_6 ) 
-_4_7 
-_4_8 coordinates = random.choices( 
-_4_9 loc_values, 
-_5_0 loc_probabilities, 
-_5_1 k=population 
-_5_2 ) 
-_5_3 
-_5_4 data = pd.DataFrame( 
-_5_5 coordinates, 
-_5_6 columns=["longitude", "latitude"] 
-_5_7 ) 
-_5_8 
-_5_9 data.insert( 
-_6_0 0, 
-_6_1 'unique_id', 
-_6_2 [ 
-_6_3 "P" + str(x) for x in list(range(population)) 
-_6_4 ] 
-_6_5 ) 
-_6_6 
-_6_7 # Read the Geodataframe with EPSG:4326 projection. 
-_6_8 geodf = gpd.GeoDataFrame( 
-_6_9 data, 
-_7_0 geometry=gpd.points_from_xy(data.longitude, data.latitude), 
-_7_1 crs="EPSG:4326" 
-_7_2 ) 
-_7_3 
-_7_4 # Transform to EPSG:3857, since the NUTS shape files are in  
-_7_5 # that projection. 
-_7_6 geodf = geodf.to_crs("EPSG:3857") 
+_4_3 
+_4_4 loc_probabilities = [] 
+_4_5 loc_values = [] 
+_4_6 for _, row in initial_population_choices.iterrows(): 
+_4_7 loc_probabilities.append(row["relPop"]) 
+_4_8 loc_values.append( 
+_4_9 (row["longitude"], row["latitude"]), 
+_5_0 ) 
+_5_1 
+_5_2 coordinates = random.choices( 
+_5_3 loc_values, 
+_5_4 loc_probabilities, 
+_5_5 k=population, 
+_5_6 ) 
+_5_7 
+_5_8 data = pd.DataFrame( 
+_5_9 coordinates, 
+_6_0 columns=["longitude", "latitude"], 
+_6_1 ) 
+_6_2 
+_6_3 data.insert( 
+_6_4 0, 
+_6_5 "unique_id", 
+_6_6 [ 
+_6_7 "P" + str(x) for x in list(range(population)) 
+_6_8 ], 
+_6_9 ) 
+_7_0 
+_7_1 # Read the Geodataframe with EPSG:4326 projection. 
+_7_2 geodf = gpd.GeoDataFrame( 
+_7_3 data, 
+_7_4 geometry=gpd.points_from_xy(data.longitude, data.latitude), 
+_7_5 crs="EPSG:4326", 
+_7_6 ) 
 _7_7 
-_7_8 return geodf 
-_7_9 
-_8_0 
-_8_1def getRegion(geometry, model): 
-_8_2 """Get region ID overlaping with input geometry. 
-_8_3  
-_8_4 Might e.g. fail if line of connection crosses international 
-_8_5 waters, since there is no NUTS region assigned then. 
-_8_6 """ 
-_8_7 regionID = [ 
-_8_8 x.unique_id for x in model.regions if contains(x.geometry, geometry) 
-_8_9 ] 
-_9_0 if regionID: 
-_9_1 return regionID[0] 
-_9_2 else: 
-_9_3 raise IndexError(f"Can not find overlaping region to geometry {geometry}") 
-_9_4 
-_9_5 
-_9_6def getPositionOnLine(start, target, returnType="point"): 
-_9_7 """Interpolate movement along line between two given points. 
-_9_8  
-_9_9 The amount of moving from start to target is random. 
-_1_0_0 """ 
-_1_0_1 segment = LineString([start, target]) 
-_1_0_2 newPos = segment.interpolate(random.uniform(0.0,1.0), normalized=True) 
-_1_0_3 if returnType == "point": 
-_1_0_4 return newPos 
-_1_0_5 elif returnType == "coords": 
-_1_0_6 return [x for x in newPos.coords][0] 
+_7_8 # Transform to EPSG:3857, since the NUTS shape files are in 
+_7_9 # that projection. 
+_8_0 return geodf.to_crs("EPSG:3857") 
+_8_1 
+_8_2 
+_8_3def getRegion(geometry: shapely.geometry.point.Point, model:mesa.Model) -
+> str: 
+_8_4 """Get region ID overlaping with input geometry. 
+_8_5 
+_8_6 Might e.g. fail if line of connection crosses international 
+_8_7 waters, since there is no NUTS region assigned then. 
+_8_8 """ 
+_8_9 regionID = [ 
+_9_0 x.unique_id for x in model.regions if contains(x.geometry, geometry) 
+_9_1 ] 
+_9_2 if regionID: 
+_9_3 return regionID[0] 
+_9_4 text = f"Can not find overlaping region to geometry {geometry}" 
+_9_5 raise IndexError(text) 
+_9_6 
+_9_7 
+_9_8def getPositionOnLine(start:shapely.Point, target:shapely.Point) -
+> shapely.Point: 
+_9_9 """Interpolate movement along line between two given points. 
+_1_0_0 
+_1_0_1 The amount of moving from start to target is random. 
+_1_0_2 """ 
+_1_0_3 segment = LineString([start, target]) 
+_1_0_4 return segment.interpolate(random.uniform(0.0, 1.0), normalized=True) 
+_1_0_5 
+_1_0_6def getNewTopic(start: tuple, target:tuple) -> tuple: 
+_1_0_7 """Interpolate new topic between two topics. 
+_1_0_8 
+_1_0_9 The amount of moving from start to target is random. 
+_1_1_0 """ 
+_1_1_1 p1 = np.array(start) 
+_1_1_2 p2 = np.array(target) 
+_1_1_3 p3 = p1 + random.uniform(0, 1) * (p2 -p1) 
+_1_1_4 return tuple(p3) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+26 17:45 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_6392e7e021769227___init___py.html` & `scicom-0.4.1/tests/reports/html/d_48e31f30a7ef2afb___init___py.html`

 * *Files 4% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for tests/historicalletters/__init__.py: 100%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/__init__.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>tests/historicalletters/__init__.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/__init__.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">0 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_a44f0ac069e85531___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="index.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_6392e7e021769227_test_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:13 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,18 +80,18 @@
     </div>
 </header>
 <main id="source">
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_a44f0ac069e85531___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="index.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_6392e7e021769227_test_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:13 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,15 +1,16 @@
-************ CCoovveerraaggee ffoorr tteessttss//hhiissttoorriiccaalllleetttteerrss//____iinniitt____..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//____iinniitt____..ppyy::
+110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 00 ssttaatteemmeennttss ?  00 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:13 +0200
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:13 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_6392e7e021769227_test_model_py.html` & `scicom-0.4.1/tests/reports/html/d_e85bc3a05b58e6d3_run_py.html`

 * *Files 14% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for tests/historicalletters/test_model.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/run.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>tests/historicalletters/test_model.py</b>:
-            <span class="pc_cov">100%</span>
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/run.py</b>:
+            <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,74 +50,72 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">12 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">12<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
+            <span class="text">10 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">10<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_6392e7e021769227___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_6392e7e021769227_test_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_22d2582a602e487e___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:13 +0200
+            created at 2024-04-26 17:45 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="run"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">math</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">from</span> <span class="nam">unittest</span><span class="op">.</span><span class="nam">mock</span> <span class="key">import</span> <span class="nam">Mock</span><span class="op">,</span> <span class="nam">patch</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">from</span> <span class="nam">collections</span> <span class="key">import</span> <span class="nam">Counter</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">geopandas</span> <span class="key">as</span> <span class="nam">gpd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">from</span> <span class="nam">shapely</span> <span class="key">import</span> <span class="nam">Point</span><span class="op">,</span> <span class="nam">LineString</span><span class="op">,</span> <span class="nam">contains</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">pathlib</span> <span class="key">import</span> <span class="nam">Path</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">import</span> <span class="nam">pytest</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""Run simulations."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">argparse</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="nam">parser</span> <span class="op">=</span> <span class="nam">argparse</span><span class="op">.</span><span class="nam">ArgumentParser</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="nam">prog</span><span class="op">=</span><span class="str">"Run SciCom Simulations"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">description</span><span class="op">=</span><span class="str">"This script starts the server interfaces for the different ABM."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="nam">epilog</span><span class="op">=</span><span class="str">"During the running of this script, the interfaces should be reachable at http://127.0.0.1:8521"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">    <span class="nam">HistoricalLetters</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="nam">prune</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="nam">parser</span><span class="op">.</span><span class="nam">add_argument</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="str">"simulation"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">    <span class="nam">choices</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">        <span class="str">"historicalletters"</span><span class="op">,</span> <span class="str">"knowledgespread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="com">#####</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="com"># Test model setup</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="com">#####</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t"><span class="key">def</span> <span class="nam">test_model_initialization</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">    <span class="str">"""Model initialization puts agents on sheduler."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="com"># initialize model for 30 agents with defaults</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="nam">model</span> <span class="op">=</span> <span class="nam">HistoricalLetters</span><span class="op">(</span><span class="num">30</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">    <span class="com"># 30 agents should be on the scheduler</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="key">assert</span> <span class="nam">len</span><span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">)</span> <span class="op">==</span> <span class="num">30</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="nam">args</span> <span class="op">=</span> <span class="nam">parser</span><span class="op">.</span><span class="nam">parse_args</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="key">if</span> <span class="nam">args</span><span class="op">.</span><span class="nam">simulation</span> <span class="op">==</span> <span class="str">"historicalletters"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="nam">server</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="nam">server</span><span class="op">.</span><span class="nam">launch</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="key">elif</span> <span class="nam">args</span><span class="op">.</span><span class="nam">simulation</span> <span class="op">==</span> <span class="str">"knowledgespread"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="nam">server</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="nam">server</span><span class="op">.</span><span class="nam">launch</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_6392e7e021769227___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_6392e7e021769227_test_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_22d2582a602e487e___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:13 +0200
+            created at 2024-04-26 17:45 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,41 +1,42 @@
-************ CCoovveerraaggee ffoorr tteessttss//hhiissttoorriiccaalllleetttteerrss//tteesstt__mmooddeell..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//rruunn..ppyy:: 00%%
+************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 1122 ssttaatteemmeennttss ?  1122 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 1100 ssttaatteemmeennttss ?  00 rruunn 1100 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:13 +0200
-_1import math 
-_2from unittest.mock import Mock, patch 
-_3from collections import Counter 
-_4import pandas as pd 
-_5import geopandas as gpd 
-_6from shapely import Point, LineString, contains 
-_7from pathlib import Path 
-_8import pytest 
+26 17:45 +0200
+_1"""Run simulations.""" 
+_2import argparse 
+_3 
+_4parser = argparse.ArgumentParser( 
+_5 prog="Run SciCom Simulations", 
+_6 description="This script starts the server interfaces for the different
+ABM.", 
+_7 epilog="During the running of this script, the interfaces should be reachable
+at http://127.0.0.1:8521", 
+_8) 
 _9 
-_1_0 
-_1_1from scicom.historicalletters.model import ( 
-_1_2 HistoricalLetters, 
-_1_3 prune, 
-_1_4) 
-_1_5 
+_1_0parser.add_argument( 
+_1_1 "simulation", 
+_1_2 choices=[ 
+_1_3 "historicalletters", "knowledgespread", 
+_1_4 ], 
+_1_5) 
 _1_6 
-_1_7##### 
-_1_8# Test model setup 
-_1_9##### 
-_2_0 
-_2_1def test_model_initialization(): 
-_2_2 """Model initialization puts agents on sheduler.""" 
-_2_3 # initialize model for 30 agents with defaults 
-_2_4 model = HistoricalLetters(30) 
-_2_5 # 30 agents should be on the scheduler 
-_2_6 assert len(model.schedule.agents) == 30 
+_1_7args = parser.parse_args() 
+_1_8 
+_1_9if args.simulation == "historicalletters": 
+_2_0 from scicom.historicalletters.server import server 
+_2_1 server.launch() 
+_2_2elif args.simulation == "knowledgespread": 
+_2_3 from scicom.knowledgespread.server import server 
+_2_4 server.launch() 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:13 +0200
+26 17:45 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_6392e7e021769227_test_utils_py.html` & `scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_server_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for tests/historicalletters/test_utils.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/historicalletters/server.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>tests/historicalletters/test_utils.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/historicalletters/server.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,122 +50,134 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">38 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">38<span class="text"> run</span></button>
+            <span class="text">22 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">22<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_6392e7e021769227_test_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="index.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_space_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:13 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="run"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">math</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">from</span> <span class="nam">unittest</span><span class="op">.</span><span class="nam">mock</span> <span class="key">import</span> <span class="nam">Mock</span><span class="op">,</span> <span class="nam">patch</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">from</span> <span class="nam">collections</span> <span class="key">import</span> <span class="nam">Counter</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">geopandas</span> <span class="key">as</span> <span class="nam">gpd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">from</span> <span class="nam">shapely</span> <span class="key">import</span> <span class="nam">Point</span><span class="op">,</span> <span class="nam">LineString</span><span class="op">,</span> <span class="nam">contains</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">pathlib</span> <span class="key">import</span> <span class="nam">Path</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">import</span> <span class="nam">pytest</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""A visualization interface for HistoricalLetters using the older visualization option of mesa."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">matplotlib</span> <span class="key">import</span> <span class="nam">colors</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">modules</span> <span class="key">import</span> <span class="nam">ChartVisualization</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">SenderAgent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">HistoricalLetters</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">HistoricalLetters</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="nam">createData</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">    <span class="nam">getPositionOnLine</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="nam">getRegion</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="com">######</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="com"># Utility function testing</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="com">######</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="key">def</span> <span class="nam">test_initial_population_creation</span><span class="op">(</span><span class="nam">tmp_path</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="str">"""Initial population should contain</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="str">    lat/long and geometry information.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t"><span class="str">    The chosen CRS is essential since overlap</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t"><span class="str">    calculation depends on the regions CRS.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="nam">file</span> <span class="op">=</span> <span class="nam">createData</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">population</span><span class="op">=</span><span class="num">30</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">populationDistribution</span><span class="op">=</span><span class="nam">Path</span><span class="op">(</span><span class="nam">Path</span><span class="op">(</span><span class="nam">__file__</span><span class="op">)</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">resolve</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">"src/scicom/data/pone.0162678.s003.csv"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="key">assert</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">file</span><span class="op">,</span> <span class="nam">gpd</span><span class="op">.</span><span class="nam">GeoDataFrame</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="key">assert</span> <span class="nam">file</span><span class="op">.</span><span class="nam">shape</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">30</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">    <span class="key">for</span> <span class="nam">col</span> <span class="key">in</span>  <span class="op">[</span><span class="str">"longitude"</span><span class="op">,</span> <span class="str">"latitude"</span><span class="op">,</span> <span class="str">"unique_id"</span><span class="op">,</span> <span class="str">"geometry"</span><span class="op">]</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="key">assert</span> <span class="nam">col</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">file</span><span class="op">.</span><span class="nam">columns</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">    <span class="key">assert</span> <span class="nam">file</span><span class="op">.</span><span class="nam">crs</span> <span class="op">==</span> <span class="str">"EPSG:3857"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t"><span class="key">def</span> <span class="nam">test_getPositionOnLine</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">    <span class="str">"""Get random point on line between two points.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="str">    Return type is either a shaple geometry Point,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t"><span class="str">    or a tuple of coordinates."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">    <span class="nam">p1</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.3</span><span class="op">,</span><span class="num">0.2</span><span class="op">,</span><span class="num">0.3</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="nam">p2</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.5</span><span class="op">,</span> <span class="num">0.4</span><span class="op">,</span><span class="num">0.9</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="nam">p3</span> <span class="op">=</span> <span class="nam">getPositionOnLine</span><span class="op">(</span><span class="nam">p1</span><span class="op">,</span><span class="nam">p2</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">    <span class="key">assert</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">p3</span><span class="op">,</span> <span class="nam">Point</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">    <span class="nam">line</span> <span class="op">=</span> <span class="nam">LineString</span><span class="op">(</span><span class="op">[</span><span class="nam">p1</span><span class="op">,</span><span class="nam">p2</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">    <span class="key">assert</span> <span class="nam">contains</span><span class="op">(</span><span class="nam">line</span><span class="op">,</span> <span class="nam">p3</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">    <span class="nam">p4</span> <span class="op">=</span> <span class="nam">getPositionOnLine</span><span class="op">(</span><span class="nam">p1</span><span class="op">,</span><span class="nam">p2</span><span class="op">,</span> <span class="nam">returnType</span><span class="op">=</span><span class="str">"coords"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="key">assert</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">p4</span><span class="op">,</span> <span class="nam">tuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t"><span class="key">def</span> <span class="nam">test_getRegion</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">    <span class="str">"""Returns the id of the overlaping region</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t"><span class="str">    for a given agent."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">    <span class="nam">model</span> <span class="op">=</span> <span class="nam">HistoricalLetters</span><span class="op">(</span><span class="num">10</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">    <span class="nam">a1</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">    <span class="com">## New York coord</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">    <span class="nam">coord</span> <span class="op">=</span> <span class="op">(</span><span class="num">40.712728</span><span class="op">,</span> <span class="op">-</span><span class="num">74.006015</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="nam">d1</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span><span class="op">[</span><span class="nam">coord</span><span class="op">]</span><span class="op">,</span> <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">"lat"</span><span class="op">,</span> <span class="str">"long"</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">    <span class="nam">geodf</span> <span class="op">=</span> <span class="nam">gpd</span><span class="op">.</span><span class="nam">GeoDataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">            <span class="nam">d1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">            <span class="nam">geometry</span><span class="op">=</span><span class="nam">gpd</span><span class="op">.</span><span class="nam">points_from_xy</span><span class="op">(</span><span class="nam">d1</span><span class="op">.</span><span class="nam">long</span><span class="op">,</span> <span class="nam">d1</span><span class="op">.</span><span class="nam">lat</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">            <span class="nam">crs</span><span class="op">=</span><span class="str">"EPSG:4326"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">    <span class="nam">geodf</span><span class="op">.</span><span class="nam">to_crs</span><span class="op">(</span><span class="str">"EPSG:3857"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">    <span class="nam">a2fail</span> <span class="op">=</span> <span class="nam">geodf</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">iloc</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">    <span class="nam">reg</span> <span class="op">=</span> <span class="nam">getRegion</span><span class="op">(</span><span class="nam">a1</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">    <span class="key">assert</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">reg</span><span class="op">,</span> <span class="nam">str</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">    <span class="key">with</span> <span class="nam">pytest</span><span class="op">.</span><span class="nam">raises</span><span class="op">(</span><span class="nam">IndexError</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="nam">getRegion</span><span class="op">(</span><span class="nam">a2fail</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="str">"population"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">        <span class="str">"Number of persons"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">        <span class="num">50</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose how many senders to include in the model."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">    <span class="str">"useSocialNetwork"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Checkbox</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="str">"Create initial social network of agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="str">"useActivation"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Checkbox</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="str">"Use heterogenous activations"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="str">"similarityThreshold"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="str">"Similarity threshold"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="num">0.5</span><span class="op">,</span> <span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose how similar two agents topics have to be, to send a letter."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="str">"moveRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="str">"Range for moving position&lt;/br>(% of mean agent distances)"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="num">0.01</span><span class="op">,</span> <span class="num">0.00</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose the visibility range for finding potential locations to move to."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="str">"letterRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="str">"Range for letter sending&lt;/br>(% of mean agent distances)"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="num">0.2</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span> <span class="num">1.0</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose the visibility range for finding potential recipients."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="key">def</span> <span class="nam">topic_draw</span><span class="op">(</span><span class="nam">agent</span><span class="op">:</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoAgent</span><span class="op">)</span> <span class="op">-></span> <span class="nam">dict</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">    <span class="str">"""Define visualization strategies for agents.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t"><span class="str">    Region agents get the main color as a mean of</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t"><span class="str">    all region agents topic vectors.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t"><span class="str">    Sender agetns have the color of their current</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t"><span class="str">    topic vector.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="nam">portrayal</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">    <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">RegionAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">color</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">has_main_topic</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">color</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">    <span class="key">elif</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"radius"</span><span class="op">]</span> <span class="op">=</span> <span class="num">5</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"shape"</span><span class="op">]</span> <span class="op">=</span> <span class="str">"circle"</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"description"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">str</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="key">return</span> <span class="nam">portrayal</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t"><span class="nam">map_element</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">MapModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">    <span class="nam">portrayal_method</span><span class="op">=</span><span class="nam">topic_draw</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">    <span class="nam">view</span><span class="op">=</span><span class="op">[</span><span class="num">52</span><span class="op">,</span> <span class="num">12</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="nam">zoom</span><span class="op">=</span><span class="num">4</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">    <span class="nam">map_width</span><span class="op">=</span><span class="num">700</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">    <span class="nam">map_height</span><span class="op">=</span><span class="num">500</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t"><span class="nam">chart</span> <span class="op">=</span> <span class="nam">ChartVisualization</span><span class="op">.</span><span class="nam">ChartModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">    <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Movements"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"red"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Clusters"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"black"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Letters"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"green"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">    <span class="nam">data_collector_name</span><span class="op">=</span><span class="str">"datacollector"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t"><span class="nam">server</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">ModularServer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">    <span class="nam">HistoricalLetters</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">    <span class="op">[</span><span class="nam">map_element</span><span class="op">,</span> <span class="nam">chart</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="str">"Historical Letters"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_6392e7e021769227_test_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="index.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_space_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:13 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,90 +1,106 @@
-************ CCoovveerraaggee ffoorr tteessttss//hhiissttoorriiccaalllleetttteerrss//tteesstt__uuttiillss..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//sseerrvveerr..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 3388 ssttaatteemmeennttss ?  3388 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 2222 ssttaatteemmeennttss ?  2222 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:13 +0200
-_1import math 
-_2from unittest.mock import Mock, patch 
-_3from collections import Counter 
-_4import pandas as pd 
-_5import geopandas as gpd 
-_6from shapely import Point, LineString, contains 
-_7from pathlib import Path 
-_8import pytest 
+26 17:47 +0200
+_1"""A visualization interface for HistoricalLetters using the older
+visualization option of mesa.""" 
+_2import mesa 
+_3import mesa_geo as mg 
+_4from matplotlib import colors 
+_5from mesa.visualization.modules import ChartVisualization 
+_6 
+_7from scicom.historicalletters.agents import RegionAgent, SenderAgent 
+_8from scicom.historicalletters.model import HistoricalLetters 
 _9 
-_1_0from scicom.historicalletters.model import HistoricalLetters 
-_1_1 
-_1_2from scicom.historicalletters.utils import ( 
-_1_3 createData, 
-_1_4 getPositionOnLine, 
-_1_5 getRegion 
-_1_6) 
-_1_7 
-_1_8###### 
-_1_9# Utility function testing 
-_2_0###### 
-_2_1 
-_2_2 
-_2_3def test_initial_population_creation(tmp_path): 
-_2_4 """Initial population should contain 
-_2_5 lat/long and geometry information. 
-_2_6 The chosen CRS is essential since overlap 
-_2_7 calculation depends on the regions CRS. 
-_2_8 """ 
-_2_9 file = createData( 
-_3_0 population=30, 
-_3_1 populationDistribution=Path(Path(__file__).parent.parent.parent.resolve(),
-"src/scicom/data/pone.0162678.s003.csv") 
-_3_2 ) 
-_3_3 assert isinstance(file, gpd.GeoDataFrame) 
-_3_4 assert file.shape[0] == 30 
-_3_5 for col in ["longitude", "latitude", "unique_id", "geometry"]: 
-_3_6 assert col in list(file.columns) 
-_3_7 assert file.crs == "EPSG:3857" 
-_3_8 
-_3_9 
-_4_0def test_getPositionOnLine(): 
-_4_1 """Get random point on line between two points. 
-_4_2 Return type is either a shaple geometry Point, 
-_4_3 or a tuple of coordinates.""" 
-_4_4 p1 = (0.3,0.2,0.3) 
-_4_5 p2 = (0.5, 0.4,0.9) 
-_4_6 p3 = getPositionOnLine(p1,p2) 
-_4_7 assert isinstance(p3, Point) 
-_4_8 line = LineString([p1,p2]) 
-_4_9 assert contains(line, p3) 
-_5_0 p4 = getPositionOnLine(p1,p2, returnType="coords") 
-_5_1 assert isinstance(p4, tuple) 
-_5_2 
-_5_3 
-_5_4def test_getRegion(): 
-_5_5 """Returns the id of the overlaping region 
-_5_6 for a given agent.""" 
-_5_7 model = HistoricalLetters(10) 
-_5_8 a1 = model.schedule.agents[0] 
-_5_9 ## New York coord 
-_6_0 coord = (40.712728, -74.006015) 
-_6_1 d1 = pd.DataFrame([coord], columns=["lat", "long"]) 
-_6_2 geodf = gpd.GeoDataFrame( 
-_6_3 d1, 
-_6_4 geometry=gpd.points_from_xy(d1.long, d1.lat), 
-_6_5 crs="EPSG:4326" 
-_6_6 ) 
-_6_7 geodf.to_crs("EPSG:3857") 
-_6_8 a2fail = geodf.geometry.iloc[0] 
-_6_9 reg = getRegion(a1.geometry, model) 
-_7_0 assert isinstance(reg, str) 
-_7_1 with pytest.raises(IndexError): 
-_7_2 getRegion(a2fail, model) 
-_7_3 
-_7_4 
+_1_0model_params = { 
+_1_1 "population": mesa.visualization.Slider( 
+_1_2 "Number of persons", 
+_1_3 50, 10, 100, 10, 
+_1_4 description="Choose how many senders to include in the model.", 
+_1_5 ), 
+_1_6 "useSocialNetwork": mesa.visualization.Checkbox( 
+_1_7 "Create initial social network of agents", 
+_1_8 False, 
+_1_9 ), 
+_2_0 "useActivation": mesa.visualization.Checkbox( 
+_2_1 "Use heterogenous activations", 
+_2_2 False, 
+_2_3 ), 
+_2_4 "similarityThreshold": mesa.visualization.Slider( 
+_2_5 "Similarity threshold", 
+_2_6 0.5, 0.0, 1.0, 0.1, 
+_2_7 description="Choose how similar two agents topics have to be, to send a
+letter.", 
+_2_8 ), 
+_2_9 "moveRange": mesa.visualization.Slider( 
+_3_0 "Range for moving position</br>(% of mean agent distances)", 
+_3_1 0.01, 0.00, 0.5, 0.05, 
+_3_2 description="Choose the visibility range for finding potential locations to
+move to.", 
+_3_3 ), 
+_3_4 "letterRange": mesa.visualization.Slider( 
+_3_5 "Range for letter sending</br>(% of mean agent distances)", 
+_3_6 0.2, 0.1, 1.0, 0.1, 
+_3_7 description="Choose the visibility range for finding potential
+recipients.", 
+_3_8 ), 
+_3_9} 
+_4_0 
+_4_1 
+_4_2def topic_draw(agent:mg.GeoAgent) -> dict: 
+_4_3 """Define visualization strategies for agents. 
+_4_4 
+_4_5 Region agents get the main color as a mean of 
+_4_6 all region agents topic vectors. 
+_4_7 
+_4_8 Sender agetns have the color of their current 
+_4_9 topic vector. 
+_5_0 """ 
+_5_1 portrayal = {} 
+_5_2 if isinstance(agent, RegionAgent): 
+_5_3 color = colors.to_hex(agent.has_main_topic()) 
+_5_4 portrayal["color"] = color 
+_5_5 elif isinstance(agent, SenderAgent): 
+_5_6 colortuple = set(agent.topicVec) 
+_5_7 portrayal["radius"] = 5 
+_5_8 portrayal["shape"] = "circle" 
+_5_9 portrayal["color"] = colors.to_hex(colortuple) 
+_6_0 portrayal["description"] = str(agent.unique_id) 
+_6_1 return portrayal 
+_6_2 
+_6_3map_element = mg.visualization.MapModule( 
+_6_4 portrayal_method=topic_draw, 
+_6_5 view=[52, 12], 
+_6_6 zoom=4, 
+_6_7 map_width=700, 
+_6_8 map_height=500, 
+_6_9) 
+_7_0 
+_7_1chart = ChartVisualization.ChartModule( 
+_7_2 [ 
+_7_3 {"Label": "Movements", "Color": "red"}, 
+_7_4 {"Label": "Clusters", "Color": "black"}, 
+_7_5 {"Label": "Letters", "Color": "green"}, 
+_7_6 ], 
+_7_7 data_collector_name="datacollector", 
+_7_8) 
+_7_9 
+_8_0 
+_8_1server = mesa.visualization.ModularServer( 
+_8_2 HistoricalLetters, 
+_8_3 [map_element, chart], 
+_8_4 "Historical Letters", 
+_8_5 model_params, 
+_8_6) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:13 +0200
+26 17:47 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_a44f0ac069e85531___init___py.html` & `scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79___init___py.html`

 * *Files 10% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for tests/__init__.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/__init__.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>tests/__init__.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/__init__.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">0 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="index.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_6392e7e021769227___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:13 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,18 +80,18 @@
     </div>
 </header>
 <main id="source">
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="index.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_6392e7e021769227___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:13 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,15 +1,16 @@
-************ CCoovveerraaggee ffoorr tteessttss//____iinniitt____..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//____iinniitt____..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 00 ssttaatteemmeennttss ?  00 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:13 +0200
+16 09:50 +0200
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:13 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095_SimpleContinuousModule_py.html` & `scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_SimpleContinuousModule_py.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/randomletters/SimpleContinuousModule.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/SimpleContinuousModule.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/randomletters/SimpleContinuousModule.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/SimpleContinuousModule.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,26 +50,26 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">24 statements &nbsp;</span>
+            <span class="text">23 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">24<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">23<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,16 +80,16 @@
     </div>
 </header>
 <main id="source">
     <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">class</span> <span class="nam">SimpleCanvas</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">VisualizationElement</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="nam">local_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"randomletters/simple_continuous_canvas.js"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">local_css_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"randomletters/map.png"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="str">"""Display agents on a map background. No coordinates."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">local_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"knowledgespread/simple_continuous_canvas.js"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="nam">portrayal_method</span> <span class="op">=</span> <span class="key">None</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="nam">canvas_height</span> <span class="op">=</span> <span class="num">720</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="nam">canvas_width</span> <span class="op">=</span> <span class="num">1280</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">portrayal_method</span><span class="op">,</span> <span class="nam">canvas_height</span><span class="op">=</span><span class="num">720</span><span class="op">,</span> <span class="nam">canvas_width</span><span class="op">=</span><span class="num">1280</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">        <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">        Instantiate a new SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
@@ -99,32 +99,33 @@
     <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span> <span class="op">=</span> <span class="nam">canvas_width</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">new_element</span> <span class="op">=</span> <span class="str">"new Simple_Continuous_Module({}, {})"</span><span class="op">.</span><span class="nam">format</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">js_code</span> <span class="op">=</span> <span class="str">"elements.push("</span> <span class="op">+</span> <span class="nam">new_element</span> <span class="op">+</span> <span class="str">");"</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="key">def</span> <span class="nam">render</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="nam">space_state</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="key">for</span> <span class="nam">obj</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">            <span class="nam">portrayal</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span><span class="op">(</span><span class="nam">obj</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">            <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="op">=</span> <span class="nam">obj</span><span class="op">.</span><span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">            <span class="nam">x</span> <span class="op">=</span> <span class="op">(</span><span class="nam">x</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="nam">y</span> <span class="op">=</span> <span class="op">(</span><span class="nam">y</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">x</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">y</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="nam">space_state</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">portrayal</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="key">return</span> <span class="nam">space_state</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="str">"""Draw agents."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">space_state</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="key">for</span> <span class="nam">obj</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">            <span class="nam">portrayal</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span><span class="op">(</span><span class="nam">obj</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">            <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="op">=</span> <span class="nam">obj</span><span class="op">.</span><span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="nam">x</span> <span class="op">=</span> <span class="op">(</span><span class="nam">x</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="nam">y</span> <span class="op">=</span> <span class="op">(</span><span class="nam">y</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">x</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">y</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="nam">space_state</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">portrayal</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="key">return</span> <span class="nam">space_state</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,27 +1,27 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//rraannddoommlleetttteerrss//SSiimmpplleeCCoonnttiinnuuoouussMMoodduullee..ppyy:: 00%%
-************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//SSiimmpplleeCCoonnttiinnuuoouussMMoodduullee..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 2244 ssttaatteemmeennttss ?  00 rruunn 2244 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 2233 ssttaatteemmeennttss ?  00 rruunn 2233 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
 _1import mesa 
 _2 
 _3 
 _4class SimpleCanvas(mesa.visualization.VisualizationElement): 
-_5 local_includes = ["randomletters/simple_continuous_canvas.js"] 
-_6 local_css_includes = ["randomletters/map.png"] 
+_5 """Display agents on a map background. No coordinates.""" 
+_6 local_includes = ["knowledgespread/simple_continuous_canvas.js"] 
 _7 portrayal_method = None 
 _8 canvas_height = 720 
 _9 canvas_width = 1280 
 _1_0 
 _1_1 def __init__(self, portrayal_method, canvas_height=720, canvas_width=1280): 
 _1_2 """ 
 _1_3 Instantiate a new SimpleCanvas 
@@ -31,19 +31,20 @@
 _1_7 self.canvas_width = canvas_width 
 _1_8 new_element = "new Simple_Continuous_Module({}, {})".format( 
 _1_9 self.canvas_width, self.canvas_height 
 _2_0 ) 
 _2_1 self.js_code = "elements.push(" + new_element + ");" 
 _2_2 
 _2_3 def render(self, model): 
-_2_4 space_state = [] 
-_2_5 for obj in model.schedule.agents: 
-_2_6 portrayal = self.portrayal_method(obj) 
-_2_7 x, y = obj.pos 
-_2_8 x = (x - model.space.x_min) / (model.space.x_max - model.space.x_min) 
-_2_9 y = (y - model.space.y_min) / (model.space.y_max - model.space.y_min) 
-_3_0 portrayal["x"] = x 
-_3_1 portrayal["y"] = y 
-_3_2 space_state.append(portrayal) 
-_3_3 return space_state 
+_2_4 """Draw agents.""" 
+_2_5 space_state = [] 
+_2_6 for obj in model.schedule.agents: 
+_2_7 portrayal = self.portrayal_method(obj) 
+_2_8 x, y = obj.pos 
+_2_9 x = (x - model.space.x_min) / (model.space.x_max - model.space.x_min) 
+_3_0 y = (y - model.space.y_min) / (model.space.y_max - model.space.y_min) 
+_3_1 portrayal["x"] = x 
+_3_2 portrayal["y"] = y 
+_3_3 space_state.append(portrayal) 
+_3_4 return space_state 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095___init___py.html` & `scicom-0.4.1/tests/reports/html/d_22d2582a602e487e___init___py.html`

 * *Files 7% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/randomletters/__init__.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/utilities/__init__.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/randomletters/__init__.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/utilities/__init__.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">0 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_e85bc3a05b58e6d3_run_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_22d2582a602e487e_prune_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,18 +80,18 @@
     </div>
 </header>
 <main id="source">
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_e85bc3a05b58e6d3_run_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_22d2582a602e487e_prune_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,15 +1,16 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//rraannddoommlleetttteerrss//____iinniitt____..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//uuttiilliittiieess//
+____iinniitt____..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 00 ssttaatteemmeennttss ?  00 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095_agents_py.html` & `scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a_agents_py.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/randomletters/agents.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/randomletters/agents.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/randomletters/agents.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/randomletters/agents.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">74 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">74<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_8a73bc3a8cf0a89a___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_8a73bc3a8cf0a89a_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -209,18 +209,18 @@
     <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">lettersReceived</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">lettersSend</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_8a73bc3a8cf0a89a___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_8a73bc3a8cf0a89a_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,20 +1,21 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//rraannddoommlleetttteerrss//aaggeennttss..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+rraannddoommlleetttteerrss//aaggeennttss..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 7744 ssttaatteemmeennttss ?  00 rruunn 7744 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
 _1import mesa 
 _2import numpy as np 
 _3 
 _4 
 _5class LetterAgent(mesa.Agent): 
 _6 """An agent with fixed initial start position. 
 _7  
@@ -143,8 +144,8 @@
 _1_2_4 ): 
 _1_2_5 """Create letter with position, topic vector and parameters.""" 
 _1_2_6 super().__init__(unique_id, model) 
 _1_2_7 self.topicVec = topicVec 
 _1_2_8 self.lettersReceived = 0 
 _1_2_9 self.lettersSend = 0 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095_model_py.html` & `scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a_model_py.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/randomletters/model.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/randomletters/model.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/randomletters/model.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/randomletters/model.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">34 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">34<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_8a73bc3a8cf0a89a_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_8a73bc3a8cf0a89a_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -161,18 +161,18 @@
     <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">        <span class="str">"""Run the model for n steps."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">        <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_8a73bc3a8cf0a89a_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_8a73bc3a8cf0a89a_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,20 +1,21 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//rraannddoommlleetttteerrss//mmooddeell..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+rraannddoommlleetttteerrss//mmooddeell..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 3344 ssttaatteemmeennttss ?  00 rruunn 3344 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
 _1import mesa 
 _2import numpy as np 
 _3import networkx as nx 
 _4 
 _5from .agents import LetterAgent, LetterNode 
 _6 
 _7 
@@ -93,8 +94,8 @@
 _7_6 nx.spring_layout(self.G) 
 _7_7 
 _7_8 def run(self, n): 
 _7_9 """Run the model for n steps.""" 
 _8_0 for _ in range(n): 
 _8_1 self.step() 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_baa64d8b15786095_server_py.html` & `scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a_server_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/randomletters/server.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/randomletters/server.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/randomletters/server.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/randomletters/server.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">32 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">32<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_8a73bc3a8cf0a89a_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_02d42bec932dca30_run_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_e85bc3a05b58e6d3_run_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -193,18 +193,18 @@
     <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t"><span class="nam">server</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">ModularServer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">    <span class="nam">LetterSpace</span><span class="op">,</span> <span class="op">[</span><span class="nam">letter_canvas</span><span class="op">,</span> <span class="nam">network_canvas</span><span class="op">]</span><span class="op">,</span> <span class="str">"Random Letters"</span><span class="op">,</span> <span class="nam">model_params</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_baa64d8b15786095_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_8a73bc3a8cf0a89a_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_02d42bec932dca30_run_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_e85bc3a05b58e6d3_run_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,20 +1,21 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//rraannddoommlleetttteerrss//sseerrvveerr..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+rraannddoommlleetttteerrss//sseerrvveerr..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 3322 ssttaatteemmeennttss ?  00 rruunn 3322 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
 _1import mesa 
 _2 
 _3from .model import LetterSpace 
 _4from .SimpleContinuousModule import SimpleCanvas 
 _5 
 _6 
 _7def letter_draw(agent): 
@@ -129,8 +130,8 @@
 _1_0_9} 
 _1_1_0 
 _1_1_1server = mesa.visualization.ModularServer( 
 _1_1_2 LetterSpace, [letter_canvas, network_canvas], "Random Letters",
 model_params 
 _1_1_3) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_e1dbc2383e9dc8ec___init___py.html` & `scicom-0.4.1/tests/reports/html/d_b133a5f21d483f41___init___py.html`

 * *Files 7% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/utilities/__init__.py: 100%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/utilities/__init__.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/utilities/__init__.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/utilities/__init__.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">0 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_02d42bec932dca30_run_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_48e31f30a7ef2afb_run_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e1dbc2383e9dc8ec_statistics_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_b133a5f21d483f41_statistics_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,18 +80,18 @@
     </div>
 </header>
 <main id="source">
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_02d42bec932dca30_run_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_48e31f30a7ef2afb_run_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e1dbc2383e9dc8ec_statistics_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_b133a5f21d483f41_statistics_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,15 +1,16 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//uuttiilliittiieess//____iinniitt____..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//uuttiilliittiieess//
+____iinniitt____..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 00 ssttaatteemmeennttss ?  00 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_SimpleContinuousModule_py.html` & `scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_SimpleContinuousModule_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/knowledgespread/SimpleContinuousModule.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/SimpleContinuousModule.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/knowledgespread/SimpleContinuousModule.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/SimpleContinuousModule.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">23 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">23<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_48e31f30a7ef2afb_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,50 +80,52 @@
     </div>
 </header>
 <main id="source">
     <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">class</span> <span class="nam">SimpleCanvas</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">VisualizationElement</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="nam">local_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"knowledgespread/simple_continuous_canvas.js"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">portrayal_method</span> <span class="op">=</span> <span class="key">None</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="nam">canvas_height</span> <span class="op">=</span> <span class="num">720</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="nam">canvas_width</span> <span class="op">=</span> <span class="num">1280</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">portrayal_method</span><span class="op">,</span> <span class="nam">canvas_height</span><span class="op">=</span><span class="num">720</span><span class="op">,</span> <span class="nam">canvas_width</span><span class="op">=</span><span class="num">1280</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">        <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">        Instantiate a new SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span> <span class="op">=</span> <span class="nam">portrayal_method</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span> <span class="op">=</span> <span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span> <span class="op">=</span> <span class="nam">canvas_width</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">new_element</span> <span class="op">=</span> <span class="str">"new Simple_Continuous_Module({}, {})"</span><span class="op">.</span><span class="nam">format</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">js_code</span> <span class="op">=</span> <span class="str">"elements.push("</span> <span class="op">+</span> <span class="nam">new_element</span> <span class="op">+</span> <span class="str">");"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">    <span class="key">def</span> <span class="nam">render</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="nam">space_state</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="key">for</span> <span class="nam">obj</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">            <span class="nam">portrayal</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span><span class="op">(</span><span class="nam">obj</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">            <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="op">=</span> <span class="nam">obj</span><span class="op">.</span><span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">            <span class="nam">x</span> <span class="op">=</span> <span class="op">(</span><span class="nam">x</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">            <span class="nam">y</span> <span class="op">=</span> <span class="op">(</span><span class="nam">y</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">x</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">y</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="nam">space_state</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">portrayal</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="key">return</span> <span class="nam">space_state</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="str">"""Display agents on a map background. No coordinates."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">local_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"knowledgespread/simple_continuous_canvas.js"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="nam">portrayal_method</span> <span class="op">=</span> <span class="key">None</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="nam">canvas_height</span> <span class="op">=</span> <span class="num">720</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="nam">canvas_width</span> <span class="op">=</span> <span class="num">1280</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">portrayal_method</span><span class="op">,</span> <span class="nam">canvas_height</span><span class="op">=</span><span class="num">720</span><span class="op">,</span> <span class="nam">canvas_width</span><span class="op">=</span><span class="num">1280</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">        <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">        Instantiate a new SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span> <span class="op">=</span> <span class="nam">portrayal_method</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span> <span class="op">=</span> <span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span> <span class="op">=</span> <span class="nam">canvas_width</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">new_element</span> <span class="op">=</span> <span class="str">"new Simple_Continuous_Module({}, {})"</span><span class="op">.</span><span class="nam">format</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">js_code</span> <span class="op">=</span> <span class="str">"elements.push("</span> <span class="op">+</span> <span class="nam">new_element</span> <span class="op">+</span> <span class="str">");"</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="key">def</span> <span class="nam">render</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="str">"""Draw agents."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">space_state</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="key">for</span> <span class="nam">obj</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">            <span class="nam">portrayal</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span><span class="op">(</span><span class="nam">obj</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">            <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="op">=</span> <span class="nam">obj</span><span class="op">.</span><span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="nam">x</span> <span class="op">=</span> <span class="op">(</span><span class="nam">x</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="nam">y</span> <span class="op">=</span> <span class="op">(</span><span class="nam">y</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">x</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">y</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="nam">space_state</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">portrayal</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="key">return</span> <span class="nam">space_state</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_444d8314c29d6cbe_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_48e31f30a7ef2afb_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,48 +1,50 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//kknnoowwlleeddggeesspprreeaadd//SSiimmpplleeCCoonnttiinnuuoouussMMoodduullee..ppyy:: 00%%
-************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//SSiimmpplleeCCoonnttiinnuuoouussMMoodduullee..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 2233 ssttaatteemmeennttss ?  00 rruunn 2233 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
 _1import mesa 
 _2 
 _3 
 _4class SimpleCanvas(mesa.visualization.VisualizationElement): 
-_5 local_includes = ["knowledgespread/simple_continuous_canvas.js"] 
-_6 portrayal_method = None 
-_7 canvas_height = 720 
-_8 canvas_width = 1280 
-_9 
-_1_0 def __init__(self, portrayal_method, canvas_height=720, canvas_width=1280): 
-_1_1 """ 
-_1_2 Instantiate a new SimpleCanvas 
-_1_3 """ 
-_1_4 self.portrayal_method = portrayal_method 
-_1_5 self.canvas_height = canvas_height 
-_1_6 self.canvas_width = canvas_width 
-_1_7 new_element = "new Simple_Continuous_Module({}, {})".format( 
-_1_8 self.canvas_width, self.canvas_height 
-_1_9 ) 
-_2_0 self.js_code = "elements.push(" + new_element + ");" 
-_2_1 
-_2_2 def render(self, model): 
-_2_3 space_state = [] 
-_2_4 for obj in model.schedule.agents: 
-_2_5 portrayal = self.portrayal_method(obj) 
-_2_6 x, y = obj.pos 
-_2_7 x = (x - model.space.x_min) / (model.space.x_max - model.space.x_min) 
-_2_8 y = (y - model.space.y_min) / (model.space.y_max - model.space.y_min) 
-_2_9 portrayal["x"] = x 
-_3_0 portrayal["y"] = y 
-_3_1 space_state.append(portrayal) 
-_3_2 return space_state 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+_5 """Display agents on a map background. No coordinates.""" 
+_6 local_includes = ["knowledgespread/simple_continuous_canvas.js"] 
+_7 portrayal_method = None 
+_8 canvas_height = 720 
+_9 canvas_width = 1280 
+_1_0 
+_1_1 def __init__(self, portrayal_method, canvas_height=720, canvas_width=1280): 
+_1_2 """ 
+_1_3 Instantiate a new SimpleCanvas 
+_1_4 """ 
+_1_5 self.portrayal_method = portrayal_method 
+_1_6 self.canvas_height = canvas_height 
+_1_7 self.canvas_width = canvas_width 
+_1_8 new_element = "new Simple_Continuous_Module({}, {})".format( 
+_1_9 self.canvas_width, self.canvas_height 
+_2_0 ) 
+_2_1 self.js_code = "elements.push(" + new_element + ");" 
+_2_2 
+_2_3 def render(self, model): 
+_2_4 """Draw agents.""" 
+_2_5 space_state = [] 
+_2_6 for obj in model.schedule.agents: 
+_2_7 portrayal = self.portrayal_method(obj) 
+_2_8 x, y = obj.pos 
+_2_9 x = (x - model.space.x_min) / (model.space.x_max - model.space.x_min) 
+_3_0 y = (y - model.space.y_min) / (model.space.y_max - model.space.y_min) 
+_3_1 portrayal["x"] = x 
+_3_2 portrayal["y"] = y 
+_3_3 space_state.append(portrayal) 
+_3_4 return space_state 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3___init___py.html` & `scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5___init___py.html`

 * *Files 5% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/knowledgespread/__init__.py: 100%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/historicalletters/__init__.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/knowledgespread/__init__.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/__init__.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">0 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_48e31f30a7ef2afb___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,18 +80,18 @@
     </div>
 </header>
 <main id="source">
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_48e31f30a7ef2afb___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,15 +1,16 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//kknnoowwlleeddggeesspprreeaadd//____iinniitt____..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//____iinniitt____..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 00 ssttaatteemmeennttss ?  00 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_agents_py.html` & `scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_agents_py.html`

 * *Files 0% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/knowledgespread/agents.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/agents.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/knowledgespread/agents.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/agents.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,26 +50,26 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">73 statements &nbsp;</span>
+            <span class="text">71 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">73<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">71<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_app_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -77,134 +77,134 @@
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
     <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">epistemicRange</span><span class="op">,</span> <span class="nam">ageFunction</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">ageFunction</span><span class="op">,</span> <span class="nam">epistemicRange</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">class</span> <span class="nam">ScientistAgent</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="str">"""A scientist with an idea.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="str">    Each scientist has a geographic position, is related to other</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="str">    agents by a social network, and is intialized with a starttime, that</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">    describes the year at which the agent becomes active. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="nam">pos</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># The projected position in 2D epistemic space. For actual movements and neighborhood calculations take into account z coordinate as well. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="nam">topicledger</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span>  <span class="com"># Representing the mental model of the agent: A list of all visited topics represented as triples [(x,y,z), (x,y,z)] </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="nam">geopos</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># Representing scientific affiliation, a tuple of latitude/longitude of current affiliation. Could also keep track of previous affiliations</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">birthtime</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span>  <span class="com"># A step number that represents the timestep at which the scientist becomes active</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="nam">productivity</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># Parameters determining the shape of the activation weight function</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="nam">opposition</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>  <span class="com"># Whether or not an agent is always oposing new epistemic positions.  </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span> <span class="op">=</span> <span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">a</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">b</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">1</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">c</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">2</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span> <span class="op">=</span> <span class="nam">topicledger</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">geopos</span> <span class="op">=</span> <span class="nam">geopos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span> <span class="op">=</span> <span class="nam">birthtime</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">opposition</span> <span class="op">=</span> <span class="nam">opposition</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">    <span class="key">def</span> <span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="str">"""Returns an age dependent activation weight.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t"><span class="str">        </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t"><span class="str">        A bell-shaped function with a ramp, plateuax and decend.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="str">        Can be drawn from random distribution in model initialization.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">        <span class="key">return</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">a</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">b</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">c</span><span class="op">,</span> <span class="nam">radius</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="key">def</span> <span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">        <span class="str">"""Calculate the change in epistemic space.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t"><span class="str">        </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t"><span class="str">        From all neighbors select one random choice.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t"><span class="str">        To update the agents position, determine the heading </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t"><span class="str">        towards the selected neighbor. If the agent is an</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t"><span class="str">        oposing one, inverte the direction. Then select a </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t"><span class="str">        random amount to move into the selected direction.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t"><span class="str">        The new position is noted down in the topic ledger</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t"><span class="str">        an the the agent is moved.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="com"># Select random elemt from potential neighbors</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="nam">neighborID</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">neighborID</span><span class="op">,</span> <span class="nam">float</span><span class="op">)</span> <span class="key">or</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">neighborID</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">            <span class="nam">neighbors</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span> <span class="key">if</span> <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">==</span> <span class="nam">neighborID</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">                <span class="nam">neighbor</span> <span class="op">=</span> <span class="nam">neighbors</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">            <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">                <span class="key">return</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">            <span class="nam">neighbor</span> <span class="op">=</span> <span class="nam">neighborID</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="com"># Get heading</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="nam">direction</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_heading</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="com"># Some agents always opose the epistemic position and therefore move in the oposite direction</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">opposition</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">            <span class="nam">direction</span> <span class="op">=</span> <span class="op">(</span><span class="op">-</span> <span class="nam">direction</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="op">-</span> <span class="nam">direction</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="com"># Select new postion with random amount into direction of neighbor</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="nam">amount</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="nam">new_pos</span> <span class="op">=</span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">+</span> <span class="nam">amount</span> <span class="op">*</span> <span class="nam">direction</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">+</span> <span class="nam">amount</span> <span class="op">*</span> <span class="nam">direction</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="com"># New mental position</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">        <span class="nam">topic</span> <span class="op">=</span> <span class="op">(</span><span class="nam">new_pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">        <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">            <span class="com"># Move agent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">topic</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">move_agent</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">        <span class="key">except</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">            <span class="com"># Out of bounds of epi space</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">            <span class="com"># TODO: What is a sensible exception of movement in this case.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">            <span class="com"># Current solution: Append topic to ledger but do not move</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">topic</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">    <span class="key">def</span> <span class="nam">updateSocialNetwork</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">        <span class="str">"""Create new links in agents social network."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">class</span> <span class="nam">ScientistAgent</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="str">"""A scientist with an idea.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="str">    Each scientist has a geographic position, is related to other</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">    agents by a social network, and is intialized with a starttime, that</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    describes the year at which the agent becomes active. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="nam">model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="nam">pos</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># The projected position in 2D epistemic space. For actual movements and neighborhood calculations take into account z coordinate as well.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="nam">topicledger</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span>  <span class="com"># Representing the mental model of the agent: A list of all visited topics represented as triples [(x,y,z), (x,y,z)]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">geopos</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># Representing scientific affiliation, a tuple of latitude/longitude of current affiliation. Could also keep track of previous affiliations</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="nam">birthtime</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span>  <span class="com"># A step number that represents the timestep at which the scientist becomes active</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="nam">productivity</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># Parameters determining the shape of the activation weight function</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">opposition</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>  <span class="com"># Whether or not an agent is always oposing new epistemic positions.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span> <span class="op">=</span> <span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">a</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">b</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">1</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">c</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">2</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span> <span class="op">=</span> <span class="nam">topicledger</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">geopos</span> <span class="op">=</span> <span class="nam">geopos</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span> <span class="op">=</span> <span class="nam">birthtime</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">opposition</span> <span class="op">=</span> <span class="nam">opposition</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="key">def</span> <span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">float</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="str">"""Return an age dependent activation weight.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="str">        A bell-shaped function with a ramp, plateuax and decend.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="str">        Can be drawn from random distribution in model initialization.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="key">return</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">a</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">b</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">c</span><span class="op">,</span> <span class="nam">radius</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="key">def</span> <span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="str">"""Calculate the change in epistemic space.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t"><span class="str">        From all neighbors select one random choice.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t"><span class="str">        To update the agents position, determine the heading </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t"><span class="str">        towards the selected neighbor. If the agent is an</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t"><span class="str">        oposing one, inverte the direction. Then select a </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t"><span class="str">        random amount to move into the selected direction.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t"><span class="str">        The new position is noted down in the topic ledger</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t"><span class="str">        an the the agent is moved.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="com"># Select random elemt from potential neighbors</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="nam">neighborID</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">neighborID</span><span class="op">,</span> <span class="op">(</span><span class="nam">float</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">            <span class="nam">neighbors</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span> <span class="key">if</span> <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">==</span> <span class="nam">neighborID</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">                <span class="nam">neighbor</span> <span class="op">=</span> <span class="nam">neighbors</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">            <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">                <span class="key">return</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">            <span class="nam">neighbor</span> <span class="op">=</span> <span class="nam">neighborID</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="com"># Get heading</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="nam">direction</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_heading</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="com"># Some agents always opose the epistemic position and therefore move in the oposite direction</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">opposition</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">            <span class="nam">direction</span> <span class="op">=</span> <span class="op">(</span><span class="op">-</span> <span class="nam">direction</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="op">-</span> <span class="nam">direction</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="com"># Select new postion with random amount into direction of neighbor</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="nam">amount</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="nam">new_pos</span> <span class="op">=</span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">+</span> <span class="nam">amount</span> <span class="op">*</span> <span class="nam">direction</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">+</span> <span class="nam">amount</span> <span class="op">*</span> <span class="nam">direction</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">        <span class="com"># New mental position</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">        <span class="nam">topic</span> <span class="op">=</span> <span class="op">(</span><span class="nam">new_pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">        <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">            <span class="com"># Move agent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">topic</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">move_agent</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">        <span class="key">except</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">            <span class="com"># Out of bounds of epi space</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">            <span class="com"># TODO: What is a sensible exception of movement in this case.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">            <span class="com"># Current solution: Append topic to ledger but do not move</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">topic</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">    <span class="key">def</span> <span class="nam">updateSocialNetwork</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="str">"""Create new links in agents social network."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">    <span class="key">def</span> <span class="nam">moveGeoSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="key">def</span> <span class="nam">moveSocSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">maxDist</span><span class="op">=</span><span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="str">"""Change epistemic position based on social network."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="nam">neighbors</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">currentTime</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">        <span class="nam">G</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="nam">H</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">Graph</span><span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span><span class="op">)</span> <span class="key">for</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">G</span><span class="op">.</span><span class="nam">edges</span><span class="op">(</span><span class="nam">data</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">e</span><span class="op">[</span><span class="str">'time'</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="nam">currentTime</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="nam">H</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">Graph</span><span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span><span class="op">)</span> <span class="key">for</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">G</span><span class="op">.</span><span class="nam">edges</span><span class="op">(</span><span class="nam">data</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">e</span><span class="op">[</span><span class="str">"time"</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="nam">currentTime</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="key">for</span> <span class="nam">dist</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="nam">maxDist</span> <span class="op">+</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">            <span class="nam">neighb</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">descendants_at_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">                <span class="nam">H</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">                <span class="nam">dist</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">                <span class="nam">dist</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">            <span class="nam">neighbors</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">list</span><span class="op">(</span><span class="nam">neighb</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">            <span class="key">return</span> <span class="key">True</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">            <span class="key">return</span> <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">    <span class="key">def</span> <span class="nam">moveEpiSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">        <span class="str">"""Change epistemic position based on distance in epistemic space."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">neighbors</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">            <span class="nam">radius</span><span class="op">=</span><span class="nam">epistemicRange</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">epiRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">            <span class="com"># Random search for new epistemic position</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">            <span class="nam">direction</span> <span class="op">=</span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="nam">new_pos</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span> <span class="op">*</span> <span class="nam">direction</span>&nbsp;</span><span class="r"></span></p>
@@ -226,37 +226,36 @@
     <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t"><span class="str">        the agent is removed from the schedule.</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">            <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="key">elif</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="num">0.00001</span> <span class="key">and</span> <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">></span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">remove</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">            <span class="com"># self.age += 1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">            <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">            <span class="nam">currentActivation</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">                <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">                    <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">                <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">                <span class="nam">k</span><span class="op">=</span><span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">            <span class="key">if</span> <span class="nam">currentActivation</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">                <span class="com"># TODO: Should the choice of movement be another random process?</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">                <span class="nam">res</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">moveSocSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">                <span class="key">if</span> <span class="nam">res</span> <span class="key">is</span> <span class="key">False</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">moveEpiSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">            <span class="nam">currentActivation</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">                <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">                    <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">                <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">                <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">            <span class="key">if</span> <span class="nam">currentActivation</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">                <span class="com"># TODO: Should the choice of movement be another random process?</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">                <span class="nam">res</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">moveSocSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">                <span class="key">if</span> <span class="nam">res</span> <span class="key">is</span> <span class="key">False</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">moveEpiSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_app_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,152 +1,153 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//kknnoowwlleeddggeesspprreeaadd//aaggeennttss..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//aaggeennttss..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 7733 ssttaatteemmeennttss ?  00 rruunn 7733 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+********** 7711 ssttaatteemmeennttss ?  00 rruunn 7711 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
 _1 
-_2from scicom.knowledgespread.utils import epistemicRange, ageFunction 
+_2import mesa 
 _3import networkx as nx 
-_4import mesa 
-_5 
+_4 
+_5from scicom.knowledgespread.utils import ageFunction, epistemicRange 
 _6 
-_7class ScientistAgent(mesa.Agent): 
-_8 """A scientist with an idea. 
-_9  
-_1_0 Each scientist has a geographic position, is related to other 
-_1_1 agents by a social network, and is intialized with a starttime, that 
-_1_2 describes the year at which the agent becomes active.  
-_1_3 """ 
-_1_4 
-_1_5 def __init__( 
-_1_6 self, 
-_1_7 unique_id, 
-_1_8 model, 
-_1_9 pos: tuple, # The projected position in 2D epistemic space. For actual
-movements and neighborhood calculations take into account z coordinate as well.
- 
-_2_0 topicledger: list, # Representing the mental model of the agent: A list of
-all visited topics represented as triples [(x,y,z), (x,y,z)]  
-_2_1 geopos: tuple, # Representing scientific affiliation, a tuple of latitude/
+_7 
+_8class ScientistAgent(mesa.Agent): 
+_9 """A scientist with an idea. 
+_1_0  
+_1_1 Each scientist has a geographic position, is related to other 
+_1_2 agents by a social network, and is intialized with a starttime, that 
+_1_3 describes the year at which the agent becomes active.  
+_1_4 """ 
+_1_5 
+_1_6 def __init__( 
+_1_7 self, 
+_1_8 unique_id, 
+_1_9 model, 
+_2_0 pos: tuple, # The projected position in 2D epistemic space. For actual
+movements and neighborhood calculations take into account z coordinate as
+well. 
+_2_1 topicledger: list, # Representing the mental model of the agent: A list of
+all visited topics represented as triples [(x,y,z), (x,y,z)] 
+_2_2 geopos: tuple, # Representing scientific affiliation, a tuple of latitude/
 longitude of current affiliation. Could also keep track of previous
 affiliations 
-_2_2 birthtime: int, # A step number that represents the timestep at which the
+_2_3 birthtime: int, # A step number that represents the timestep at which the
 scientist becomes active 
-_2_3 productivity: tuple, # Parameters determining the shape of the activation
+_2_4 productivity: tuple, # Parameters determining the shape of the activation
 weight function 
-_2_4 opposition: bool = False, # Whether or not an agent is always oposing new
-epistemic positions.  
-_2_5 ): 
-_2_6 super().__init__(unique_id, model) 
-_2_7 self.pos = pos 
-_2_8 self.a = productivity[0] 
-_2_9 self.b = productivity[1] 
-_3_0 self.c = productivity[2] 
-_3_1 self.topicledger = topicledger 
-_3_2 self.geopos = geopos 
-_3_3 self.birthtime = birthtime 
-_3_4 self.age = 0 
-_3_5 self.opposition = opposition 
-_3_6 
-_3_7 def _currentActivationWeight(self): 
-_3_8 """Returns an age dependent activation weight. 
-_3_9  
-_4_0 A bell-shaped function with a ramp, plateuax and decend. 
-_4_1 Can be drawn from random distribution in model initialization. 
-_4_2 """ 
-_4_3 return ageFunction(self, self.a, self.b, self.c, radius=1) 
-_4_4 
-_4_5 def _changeEpistemicPosition(self, neighbors): 
-_4_6 """Calculate the change in epistemic space. 
-_4_7  
-_4_8 From all neighbors select one random choice. 
-_4_9 To update the agents position, determine the heading  
-_5_0 towards the selected neighbor. If the agent is an 
-_5_1 oposing one, inverte the direction. Then select a  
-_5_2 random amount to move into the selected direction. 
-_5_3 The new position is noted down in the topic ledger 
-_5_4 an the the agent is moved. 
-_5_5 """ 
-_5_6 # Select random elemt from potential neighbors 
-_5_7 neighborID = self.random.choice(neighbors) 
-_5_8 if isinstance(neighborID, float) or isinstance(neighborID, int): 
-_5_9 neighbors = [ 
-_6_0 x for x in self.model.schedule.agents if x.unique_id == neighborID 
-_6_1 ] 
-_6_2 if neighbors: 
-_6_3 neighbor = neighbors[0] 
-_6_4 else: 
-_6_5 return 
-_6_6 else: 
-_6_7 neighbor = neighborID 
-_6_8 # Get heading 
-_6_9 direction = self.model.space.get_heading(self.pos, neighbor.pos) 
-_7_0 # Some agents always opose the epistemic position and therefore move in the
+_2_5 opposition: bool = False, # Whether or not an agent is always oposing new
+epistemic positions. 
+_2_6 ): 
+_2_7 super().__init__(unique_id, model) 
+_2_8 self.pos = pos 
+_2_9 self.a = productivity[0] 
+_3_0 self.b = productivity[1] 
+_3_1 self.c = productivity[2] 
+_3_2 self.topicledger = topicledger 
+_3_3 self.geopos = geopos 
+_3_4 self.birthtime = birthtime 
+_3_5 self.age = 0 
+_3_6 self.opposition = opposition 
+_3_7 
+_3_8 def _currentActivationWeight(self) -> float: 
+_3_9 """Return an age dependent activation weight. 
+_4_0 
+_4_1 A bell-shaped function with a ramp, plateuax and decend. 
+_4_2 Can be drawn from random distribution in model initialization. 
+_4_3 """ 
+_4_4 return ageFunction(self, self.a, self.b, self.c, radius=1) 
+_4_5 
+_4_6 def _changeEpistemicPosition(self, neighbors): 
+_4_7 """Calculate the change in epistemic space. 
+_4_8 
+_4_9 From all neighbors select one random choice. 
+_5_0 To update the agents position, determine the heading  
+_5_1 towards the selected neighbor. If the agent is an 
+_5_2 oposing one, inverte the direction. Then select a  
+_5_3 random amount to move into the selected direction. 
+_5_4 The new position is noted down in the topic ledger 
+_5_5 an the the agent is moved. 
+_5_6 """ 
+_5_7 # Select random elemt from potential neighbors 
+_5_8 neighborID = self.random.choice(neighbors) 
+_5_9 if isinstance(neighborID, (float, int)): 
+_6_0 neighbors = [ 
+_6_1 x for x in self.model.schedule.agents if x.unique_id == neighborID 
+_6_2 ] 
+_6_3 if neighbors: 
+_6_4 neighbor = neighbors[0] 
+_6_5 else: 
+_6_6 return 
+_6_7 else: 
+_6_8 neighbor = neighborID 
+_6_9 # Get heading 
+_7_0 direction = self.model.space.get_heading(self.pos, neighbor.pos) 
+_7_1 # Some agents always opose the epistemic position and therefore move in the
 oposite direction 
-_7_1 if self.opposition is True: 
-_7_2 direction = (- direction[0], - direction[1]) 
-_7_3 # Select new postion with random amount into direction of neighbor 
-_7_4 amount = self.model.random.random() 
-_7_5 new_pos = (self.pos[0] + amount * direction[0], self.pos[1] + amount *
+_7_2 if self.opposition is True: 
+_7_3 direction = (- direction[0], - direction[1]) 
+_7_4 # Select new postion with random amount into direction of neighbor 
+_7_5 amount = self.model.random.random() 
+_7_6 new_pos = (self.pos[0] + amount * direction[0], self.pos[1] + amount *
 direction[1]) 
-_7_6 # New mental position 
-_7_7 topic = (new_pos[0], new_pos[1], self.model.random.random()) 
-_7_8 try: 
-_7_9 # Move agent 
-_8_0 self.topicledger.append(topic) 
-_8_1 self.model.space.move_agent(self, new_pos) 
-_8_2 except: 
-_8_3 # Out of bounds of epi space 
-_8_4 # TODO: What is a sensible exception of movement in this case. 
-_8_5 # Current solution: Append topic to ledger but do not move 
-_8_6 self.topicledger.append(topic) 
-_8_7 
-_8_8 def updateSocialNetwork(self): 
-_8_9 """Create new links in agents social network.""" 
-_9_0 pass 
+_7_7 # New mental position 
+_7_8 topic = (new_pos[0], new_pos[1], self.model.random.random()) 
+_7_9 try: 
+_8_0 # Move agent 
+_8_1 self.topicledger.append(topic) 
+_8_2 self.model.space.move_agent(self, new_pos) 
+_8_3 except: 
+_8_4 # Out of bounds of epi space 
+_8_5 # TODO: What is a sensible exception of movement in this case. 
+_8_6 # Current solution: Append topic to ledger but do not move 
+_8_7 self.topicledger.append(topic) 
+_8_8 
+_8_9 def updateSocialNetwork(self): 
+_9_0 """Create new links in agents social network.""" 
 _9_1 
 _9_2 def moveGeoSpace(self): 
 _9_3 pass 
 _9_4 
 _9_5 def moveSocSpace(self, maxDist=1): 
 _9_6 """Change epistemic position based on social network.""" 
 _9_7 neighbors = [] 
 _9_8 currentTime = self.model.schedule.time 
 _9_9 G = self.model.socialNetwork 
-_1_0_0 H = nx.Graph(((u, v, e) for u, v, e in G.edges(data=True) if e['time'] <=
+_1_0_0 H = nx.Graph(((u, v, e) for u, v, e in G.edges(data=True) if e["time"] <=
 currentTime)) 
 _1_0_1 for dist in range(0, maxDist + 1, 1): 
 _1_0_2 neighb = nx.descendants_at_distance( 
 _1_0_3 H, 
 _1_0_4 self.unique_id, 
-_1_0_5 dist 
+_1_0_5 dist, 
 _1_0_6 ) 
 _1_0_7 neighbors.extend(list(neighb)) 
 _1_0_8 if neighbors: 
 _1_0_9 self._changeEpistemicPosition(neighbors) 
 _1_1_0 return True 
 _1_1_1 else: 
 _1_1_2 return False 
 _1_1_3 
 _1_1_4 def moveEpiSpace(self): 
 _1_1_5 """Change epistemic position based on distance in epistemic space.""" 
 _1_1_6 neighbors = self.model.space.get_neighbors( 
 _1_1_7 self.pos, 
 _1_1_8 radius=epistemicRange( 
 _1_1_9 self.model.epiRange, 
-_1_2_0 self.model.schedule.time - self.birthtime 
-_1_2_1 ) 
+_1_2_0 self.model.schedule.time - self.birthtime, 
+_1_2_1 ), 
 _1_2_2 ) 
 _1_2_3 if neighbors: 
 _1_2_4 self._changeEpistemicPosition(neighbors) 
 _1_2_5 else: 
 _1_2_6 # Random search for new epistemic position 
 _1_2_7 direction = (self.model.random.random(), self.model.random.random()) 
 _1_2_8 new_pos = self.model.random.random() * direction 
@@ -168,24 +169,23 @@
 _1_4_4 the agent is removed from the schedule. 
 _1_4_5 """ 
 _1_4_6 if self.model.schedule.time < self.birthtime: 
 _1_4_7 pass 
 _1_4_8 elif self._currentActivationWeight() <= 0.00001 and self.age > 1: 
 _1_4_9 self.model.schedule.remove(self) 
 _1_5_0 # self.age += 1 
-_1_5_1 pass 
-_1_5_2 else: 
-_1_5_3 self.age += 1 
-_1_5_4 currentActivation = self.model.random.choices( 
-_1_5_5 population=[0, 1], 
-_1_5_6 weights=[ 
-_1_5_7 1 - self._currentActivationWeight(), self._currentActivationWeight() 
-_1_5_8 ], 
-_1_5_9 k=1 
-_1_6_0 ) 
-_1_6_1 if currentActivation[0] == 1: 
-_1_6_2 # TODO: Should the choice of movement be another random process? 
-_1_6_3 res = self.moveSocSpace() 
-_1_6_4 if res is False: 
-_1_6_5 self.moveEpiSpace() 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+_1_5_1 else: 
+_1_5_2 self.age += 1 
+_1_5_3 currentActivation = self.model.random.choices( 
+_1_5_4 population=[0, 1], 
+_1_5_5 weights=[ 
+_1_5_6 1 - self._currentActivationWeight(), self._currentActivationWeight(), 
+_1_5_7 ], 
+_1_5_8 k=1, 
+_1_5_9 ) 
+_1_6_0 if currentActivation[0] == 1: 
+_1_6_1 # TODO: Should the choice of movement be another random process? 
+_1_6_2 res = self.moveSocSpace() 
+_1_6_3 if res is False: 
+_1_6_4 self.moveEpiSpace() 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_app_py.html` & `scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_app_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/knowledgespread/app.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/app.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/knowledgespread/app.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/app.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">9 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">9<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -147,18 +147,18 @@
     <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">    <span class="nam">agent_portrayal</span><span class="op">=</span><span class="nam">agent_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="nam">space_drawer</span><span class="op">=</span><span class="nam">epiSpace_draw_altair</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,20 +1,21 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//kknnoowwlleeddggeesspprreeaadd//aapppp..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//aapppp..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 99 ssttaatteemmeennttss ?  00 rruunn 99 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
 _1import mesa 
 _2from mesa.experimental import JupyterViz, make_text 
 _3import altair as alt 
 _4 
 _5from scicom.knowledgespread.agents import ScientistAgent 
 _6from scicom.knowledgespread.model import ( 
 _7 KnowledgeSpread, 
@@ -76,8 +77,8 @@
 _6_3 measures=[socialNetwork_draw_altair, chart_draw_altair_agents,
 chart_draw_altair_communities], 
 _6_4 name="Knowledge spread", 
 _6_5 agent_portrayal=agent_draw_altair, 
 _6_6 space_drawer=epiSpace_draw_altair 
 _6_7) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_model_py.html` & `scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_model_py.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/knowledgespread/model.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/model.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/knowledgespread/model.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/model.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">71 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">71<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_app_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_app_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -249,18 +249,18 @@
     <p class="pln"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">        <span class="str">"""Run model for n steps."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">        <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_app_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_app_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,20 +1,21 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//kknnoowwlleeddggeesspprreeaadd//mmooddeell..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//mmooddeell..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 7711 ssttaatteemmeennttss ?  00 rruunn 7711 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
 _1import networkx as nx 
 _2import mesa 
 _3from scicom.knowledgespread.agents import ScientistAgent 
 _4from scicom.knowledgespread.utils import GenerateInitalPopulation,
 GenerateSocNet 
 _5 
 _6 
@@ -188,8 +189,8 @@
 _1_6_4 self.datacollector.collect(self) 
 _1_6_5 
 _1_6_6 def run(self, n): 
 _1_6_7 """Run model for n steps.""" 
 _1_6_8 for _ in range(n): 
 _1_6_9 self.step() 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_server_py.html` & `scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_server_py.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/knowledgespread/server.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/server.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/knowledgespread/server.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/server.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,238 +50,235 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">70 statements &nbsp;</span>
+            <span class="text">69 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">70<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">69<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_utils_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">solara</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">altair</span> <span class="key">as</span> <span class="nam">alt</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">nx_altair</span> <span class="key">as</span> <span class="nam">nxa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">import</span> <span class="nam">matplotlib</span><span class="op">.</span><span class="nam">colors</span> <span class="key">as</span> <span class="nam">colors</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">SimpleContinuousModule</span> <span class="key">import</span> <span class="nam">SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">modules</span> <span class="key">import</span> <span class="nam">ChartVisualization</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">ScientistAgent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">KnowledgeSpread</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">ageFunction</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">    <span class="str">"num_scientists"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="str">"Initial number of scientists"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="num">100</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">200</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">    <span class="str">"num_timesteps"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="str">"How long is the number of agents growing?"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="num">20</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="str">"oppositionPercent"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="str">"Percentage of opposing agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="num">0.05</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">    <span class="str">"epiInit"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Choice</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="str">'Choose initial conditions for epistemic space'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">value</span><span class="op">=</span><span class="op">(</span><span class="str">'complex'</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="nam">choices</span><span class="op">=</span><span class="op">[</span><span class="str">'complex'</span><span class="op">,</span> <span class="str">"central"</span><span class="op">,</span> <span class="str">"polarized"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">    <span class="str">"timeInit"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Choice</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="str">'Choose initial conditions for population growth.'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="nam">value</span><span class="op">=</span><span class="op">(</span><span class="str">'saturate'</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="nam">choices</span><span class="op">=</span><span class="op">[</span><span class="str">'saturate'</span><span class="op">,</span> <span class="str">"linear"</span><span class="op">,</span> <span class="str">"exponential"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">    <span class="str">"epiRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">        <span class="str">"Basic range of visibility in epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">        <span class="num">0.005</span><span class="op">,</span> <span class="num">0.001</span><span class="op">,</span> <span class="num">0.03</span><span class="op">,</span> <span class="num">0.001</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t"><span class="key">def</span> <span class="nam">agent_draw_altair</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">    <span class="nam">shapeDict</span> <span class="op">=</span> <span class="op">{</span><span class="key">True</span><span class="op">:</span> <span class="str">"triangle-up"</span><span class="op">,</span> <span class="key">False</span><span class="op">:</span> <span class="str">"circle"</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">    <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">    <span class="nam">color</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="com">#color = "#" + "".join(format(int(round(val * 255)), "02x") for val in colortuple)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">    <span class="key">if</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">age</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">size</span> <span class="op">=</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">a</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">b</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">c</span><span class="op">,</span> <span class="num">10</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">size</span> <span class="op">=</span> <span class="num">0.001</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">    <span class="nam">probDict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="com">#"Shape": shapeDict[agent.opposition],</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="str">"opposition"</span><span class="op">:</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">opposition</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="com">#"r": ageFunction(agent),</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="str">"size"</span><span class="op">:</span> <span class="nam">size</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">        <span class="com">#"Filled": "true",</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">        <span class="str">"Color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">        <span class="str">"color"</span><span class="op">:</span> <span class="nam">color</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">    <span class="key">return</span> <span class="nam">probDict</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t"><span class="key">def</span> <span class="nam">chart_draw_altair_agents</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">get_model_vars_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="op">.</span><span class="nam">mark_bar</span><span class="op">(</span><span class="nam">color</span><span class="op">=</span><span class="str">"orange"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">            <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"index"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"Step"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">                <span class="str">"Active Agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">                <span class="nam">title</span><span class="op">=</span><span class="str">"Active agents"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t"><span class="key">def</span> <span class="nam">chart_draw_altair_communities</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">get_model_vars_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">    <span class="nam">data</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"compLen"</span><span class="op">,</span> <span class="nam">data</span><span class="op">[</span><span class="str">"Graph structure"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">len</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">        <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">        <span class="op">.</span><span class="nam">mark_bar</span><span class="op">(</span><span class="nam">color</span><span class="op">=</span><span class="str">"orange"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">            <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"index"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"Step"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">            <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">                <span class="str">"compLen"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">                <span class="nam">title</span><span class="op">=</span><span class="str">"Communities in social network"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t"><span class="key">def</span> <span class="nam">epiSpace_draw_altair</span><span class="op">(</span><span class="nam">model</span><span class="op">,</span> <span class="nam">agent_portrayal</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">    <span class="nam">isOpposed</span> <span class="op">=</span> <span class="op">(</span><span class="key">False</span><span class="op">,</span> <span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">    <span class="nam">shape_range</span> <span class="op">=</span> <span class="op">(</span><span class="str">"circle"</span><span class="op">,</span> <span class="str">"triangle-up"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="nam">all_agent_data</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">    <span class="key">if</span> <span class="key">not</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">        <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">Markdown</span><span class="op">(</span><span class="str">"## Finished run"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="nam">cur_agent</span> <span class="op">=</span> <span class="nam">agent_draw_altair</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">            <span class="nam">cur_agent</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">            <span class="nam">cur_agent</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">            <span class="nam">all_agent_data</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">cur_agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">        <span class="nam">df</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span><span class="nam">all_agent_data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">        <span class="nam">colors</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">set</span><span class="op">(</span><span class="nam">a</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="key">for</span> <span class="nam">a</span> <span class="key">in</span> <span class="nam">all_agent_data</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">        <span class="nam">chart_color</span> <span class="op">=</span> <span class="nam">alt</span><span class="op">.</span><span class="nam">Color</span><span class="op">(</span><span class="str">"color"</span><span class="op">)</span><span class="op">.</span><span class="nam">legend</span><span class="op">(</span><span class="key">None</span><span class="op">)</span><span class="op">.</span><span class="nam">scale</span><span class="op">(</span><span class="nam">domain</span><span class="op">=</span><span class="nam">colors</span><span class="op">,</span> <span class="nam">range</span><span class="op">=</span><span class="nam">colors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">            <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">df</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">            <span class="op">.</span><span class="nam">mark_point</span><span class="op">(</span><span class="nam">filled</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">            <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"x"</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">,</span>  <span class="com"># no x-axis label</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">                <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span><span class="str">"y"</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">,</span>  <span class="com"># no y-axis label</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">                <span class="nam">size</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Size</span><span class="op">(</span><span class="str">"size"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"current activity"</span><span class="op">)</span><span class="op">,</span>  <span class="com"># relabel size for legend</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">                <span class="nam">color</span><span class="op">=</span><span class="nam">chart_color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">                <span class="nam">shape</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Shape</span><span class="op">(</span>  <span class="com"># use shape to indicate choice</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">                    <span class="str">"opposition"</span><span class="op">,</span> <span class="nam">scale</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Scale</span><span class="op">(</span><span class="nam">domain</span><span class="op">=</span><span class="nam">isOpposed</span><span class="op">,</span> <span class="nam">range</span><span class="op">=</span><span class="nam">shape_range</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">                <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="op">.</span><span class="nam">configure_view</span><span class="op">(</span><span class="nam">strokeOpacity</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>  <span class="com"># hide grid/chart lines</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">        <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t"><span class="key">def</span> <span class="nam">socialNetwork_draw_altair</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">    <span class="nam">currentTime</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">    <span class="nam">H</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">    <span class="nam">Graph</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">Graph</span><span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span><span class="op">)</span> <span class="key">for</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">H</span><span class="op">.</span><span class="nam">edges</span><span class="op">(</span><span class="nam">data</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">e</span><span class="op">[</span><span class="str">'time'</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="nam">currentTime</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">    <span class="nam">pos</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">kamada_kawai_layout</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">    <span class="nam">between</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">betweenness_centrality</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">    <span class="nam">nx</span><span class="op">.</span><span class="nam">set_node_attributes</span><span class="op">(</span><span class="nam">Graph</span><span class="op">,</span> <span class="nam">between</span><span class="op">,</span> <span class="str">'between'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">    <span class="nam">communities</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">nx</span><span class="op">.</span><span class="nam">community</span><span class="op">.</span><span class="nam">label_propagation_communities</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">    <span class="key">for</span> <span class="nam">f</span> <span class="key">in</span> <span class="nam">Graph</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">c</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">communities</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">            <span class="key">if</span> <span class="nam">f</span> <span class="key">in</span> <span class="nam">c</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">                <span class="nam">Graph</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">f</span><span class="op">]</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">                    <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">                        <span class="str">"community"</span><span class="op">:</span> <span class="nam">str</span><span class="op">(</span><span class="nam">i</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">                        <span class="str">"name"</span><span class="op">:</span> <span class="nam">f</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">                    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="nam">nxa</span><span class="op">.</span><span class="nam">draw_networkx</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="nam">G</span><span class="op">=</span><span class="nam">Graph</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">        <span class="nam">pos</span><span class="op">=</span><span class="nam">pos</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">        <span class="nam">node_color</span><span class="op">=</span><span class="str">"between"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">        <span class="nam">edge_color</span><span class="op">=</span><span class="str">'time'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">        <span class="nam">cmap</span><span class="op">=</span><span class="str">'viridis'</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">    <span class="nam">chart</span><span class="op">.</span><span class="nam">configure_view</span><span class="op">(</span><span class="nam">strokeOpacity</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>  <span class="com"># hide grid/chart lines</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t"><span class="key">def</span> <span class="nam">agent_draw</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">    <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">    <span class="nam">color</span> <span class="op">=</span> <span class="str">"#"</span> <span class="op">+</span> <span class="str">""</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">format</span><span class="op">(</span><span class="nam">int</span><span class="op">(</span><span class="nam">round</span><span class="op">(</span><span class="nam">val</span> <span class="op">*</span> <span class="num">255</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="str">"02x"</span><span class="op">)</span> <span class="key">for</span> <span class="nam">val</span> <span class="key">in</span> <span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">    <span class="nam">probDict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">        <span class="str">"Shape"</span><span class="op">:</span> <span class="str">"circle"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">        <span class="str">"r"</span><span class="op">:</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">        <span class="str">"Filled"</span><span class="op">:</span> <span class="str">"true"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">        <span class="str">"Color"</span><span class="op">:</span> <span class="nam">color</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">    <span class="key">return</span> <span class="nam">probDict</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t"><span class="nam">chart</span> <span class="op">=</span> <span class="nam">ChartVisualization</span><span class="op">.</span><span class="nam">ChartModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">    <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Active Agents"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"#000000"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Graph components"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"black"</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">    <span class="nam">data_collector_name</span><span class="op">=</span><span class="str">'datacollector'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">altair</span> <span class="key">as</span> <span class="nam">alt</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">nx_altair</span> <span class="key">as</span> <span class="nam">nxa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">solara</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">matplotlib</span> <span class="key">import</span> <span class="nam">colors</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">modules</span> <span class="key">import</span> <span class="nam">ChartVisualization</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">KnowledgeSpread</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">SimpleContinuousModule</span> <span class="key">import</span> <span class="nam">SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">ageFunction</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="str">"num_scientists"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">        <span class="str">"Initial number of scientists"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="num">100</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">200</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">    <span class="str">"num_timesteps"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="str">"How long is the number of agents growing?"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="num">20</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="str">"oppositionPercent"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="str">"Percentage of opposing agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="num">0.05</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="str">"epiInit"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Choice</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="str">"Choose initial conditions for epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">value</span><span class="op">=</span><span class="op">(</span><span class="str">"complex"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">choices</span><span class="op">=</span><span class="op">[</span><span class="str">"complex"</span><span class="op">,</span> <span class="str">"central"</span><span class="op">,</span> <span class="str">"polarized"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="str">"timeInit"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Choice</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="str">"Choose initial conditions for population growth."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="nam">value</span><span class="op">=</span><span class="op">(</span><span class="str">"saturate"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">choices</span><span class="op">=</span><span class="op">[</span><span class="str">"saturate"</span><span class="op">,</span> <span class="str">"linear"</span><span class="op">,</span> <span class="str">"exponential"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">    <span class="str">"epiRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="str">"Basic range of visibility in epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="num">0.005</span><span class="op">,</span> <span class="num">0.001</span><span class="op">,</span> <span class="num">0.03</span><span class="op">,</span> <span class="num">0.001</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t"><span class="key">def</span> <span class="nam">agent_draw_altair</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="nam">shapeDict</span> <span class="op">=</span> <span class="op">{</span><span class="key">True</span><span class="op">:</span> <span class="str">"triangle-up"</span><span class="op">,</span> <span class="key">False</span><span class="op">:</span> <span class="str">"circle"</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">    <span class="nam">color</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">    <span class="com">#color = "#" + "".join(format(int(round(val * 255)), "02x") for val in colortuple)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">    <span class="key">if</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">age</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">size</span> <span class="op">=</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">a</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">b</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">c</span><span class="op">,</span> <span class="num">10</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="nam">size</span> <span class="op">=</span> <span class="num">0.001</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">    <span class="nam">probDict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="com">#"Shape": shapeDict[agent.opposition],</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="str">"opposition"</span><span class="op">:</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">opposition</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="com">#"r": ageFunction(agent),</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="str">"size"</span><span class="op">:</span> <span class="nam">size</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="com">#"Filled": "true",</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="str">"Color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="str">"color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">    <span class="key">return</span> <span class="nam">probDict</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t"><span class="key">def</span> <span class="nam">chart_draw_altair_agents</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">get_model_vars_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="op">.</span><span class="nam">mark_bar</span><span class="op">(</span><span class="nam">color</span><span class="op">=</span><span class="str">"orange"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">            <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"index"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"Step"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">            <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">                <span class="str">"Active Agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">                <span class="nam">title</span><span class="op">=</span><span class="str">"Active agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t"><span class="key">def</span> <span class="nam">chart_draw_altair_communities</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">get_model_vars_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">    <span class="nam">data</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"compLen"</span><span class="op">,</span> <span class="nam">data</span><span class="op">[</span><span class="str">"Graph structure"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">len</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">        <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">        <span class="op">.</span><span class="nam">mark_bar</span><span class="op">(</span><span class="nam">color</span><span class="op">=</span><span class="str">"orange"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">        <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">            <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"index"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"Step"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">            <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">                <span class="str">"compLen"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">                <span class="nam">title</span><span class="op">=</span><span class="str">"Communities in social network"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="key">def</span> <span class="nam">epiSpace_draw_altair</span><span class="op">(</span><span class="nam">model</span><span class="op">,</span> <span class="nam">agent_portrayal</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">    <span class="nam">isOpposed</span> <span class="op">=</span> <span class="op">(</span><span class="key">False</span><span class="op">,</span> <span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">    <span class="nam">shape_range</span> <span class="op">=</span> <span class="op">(</span><span class="str">"circle"</span><span class="op">,</span> <span class="str">"triangle-up"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">    <span class="nam">all_agent_data</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">    <span class="key">if</span> <span class="key">not</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">        <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">Markdown</span><span class="op">(</span><span class="str">"## Finished run"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">            <span class="nam">cur_agent</span> <span class="op">=</span> <span class="nam">agent_draw_altair</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">            <span class="nam">cur_agent</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">            <span class="nam">cur_agent</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="nam">all_agent_data</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">cur_agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="nam">df</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span><span class="nam">all_agent_data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="nam">colors</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">set</span><span class="op">(</span><span class="nam">a</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="key">for</span> <span class="nam">a</span> <span class="key">in</span> <span class="nam">all_agent_data</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="nam">chart_color</span> <span class="op">=</span> <span class="nam">alt</span><span class="op">.</span><span class="nam">Color</span><span class="op">(</span><span class="str">"color"</span><span class="op">)</span><span class="op">.</span><span class="nam">legend</span><span class="op">(</span><span class="key">None</span><span class="op">)</span><span class="op">.</span><span class="nam">scale</span><span class="op">(</span><span class="nam">domain</span><span class="op">=</span><span class="nam">colors</span><span class="op">,</span> <span class="nam">range</span><span class="op">=</span><span class="nam">colors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">        <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">            <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">df</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">            <span class="op">.</span><span class="nam">mark_point</span><span class="op">(</span><span class="nam">filled</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">            <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">                <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"x"</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">,</span>  <span class="com"># no x-axis label</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">                <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span><span class="str">"y"</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">,</span>  <span class="com"># no y-axis label</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">                <span class="nam">size</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Size</span><span class="op">(</span><span class="str">"size"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"current activity"</span><span class="op">)</span><span class="op">,</span>  <span class="com"># relabel size for legend</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="nam">color</span><span class="op">=</span><span class="nam">chart_color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">                <span class="nam">shape</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Shape</span><span class="op">(</span>  <span class="com"># use shape to indicate choice</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">                    <span class="str">"opposition"</span><span class="op">,</span> <span class="nam">scale</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Scale</span><span class="op">(</span><span class="nam">domain</span><span class="op">=</span><span class="nam">isOpposed</span><span class="op">,</span> <span class="nam">range</span><span class="op">=</span><span class="nam">shape_range</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">                <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">            <span class="op">.</span><span class="nam">configure_view</span><span class="op">(</span><span class="nam">strokeOpacity</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>  <span class="com"># hide grid/chart lines</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t"><span class="key">def</span> <span class="nam">socialNetwork_draw_altair</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">    <span class="nam">currentTime</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">    <span class="nam">H</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">    <span class="nam">Graph</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">Graph</span><span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span><span class="op">)</span> <span class="key">for</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">H</span><span class="op">.</span><span class="nam">edges</span><span class="op">(</span><span class="nam">data</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">e</span><span class="op">[</span><span class="str">"time"</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="nam">currentTime</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">    <span class="nam">pos</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">kamada_kawai_layout</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">    <span class="nam">between</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">betweenness_centrality</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">    <span class="nam">nx</span><span class="op">.</span><span class="nam">set_node_attributes</span><span class="op">(</span><span class="nam">Graph</span><span class="op">,</span> <span class="nam">between</span><span class="op">,</span> <span class="str">"between"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">    <span class="nam">communities</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">nx</span><span class="op">.</span><span class="nam">community</span><span class="op">.</span><span class="nam">label_propagation_communities</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">    <span class="key">for</span> <span class="nam">f</span> <span class="key">in</span> <span class="nam">Graph</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">c</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">communities</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">            <span class="key">if</span> <span class="nam">f</span> <span class="key">in</span> <span class="nam">c</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                <span class="nam">Graph</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">f</span><span class="op">]</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">                    <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">                        <span class="str">"community"</span><span class="op">:</span> <span class="nam">str</span><span class="op">(</span><span class="nam">i</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">                        <span class="str">"name"</span><span class="op">:</span> <span class="nam">f</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">                    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="nam">nxa</span><span class="op">.</span><span class="nam">draw_networkx</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="nam">G</span><span class="op">=</span><span class="nam">Graph</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">        <span class="nam">pos</span><span class="op">=</span><span class="nam">pos</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">        <span class="nam">node_color</span><span class="op">=</span><span class="str">"between"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="nam">edge_color</span><span class="op">=</span><span class="str">"time"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">        <span class="nam">cmap</span><span class="op">=</span><span class="str">"viridis"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">    <span class="nam">chart</span><span class="op">.</span><span class="nam">configure_view</span><span class="op">(</span><span class="nam">strokeOpacity</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>  <span class="com"># hide grid/chart lines</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t"><span class="key">def</span> <span class="nam">agent_draw</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">    <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">    <span class="nam">color</span> <span class="op">=</span> <span class="str">"#"</span> <span class="op">+</span> <span class="str">""</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">format</span><span class="op">(</span><span class="nam">int</span><span class="op">(</span><span class="nam">round</span><span class="op">(</span><span class="nam">val</span> <span class="op">*</span> <span class="num">255</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="str">"02x"</span><span class="op">)</span> <span class="key">for</span> <span class="nam">val</span> <span class="key">in</span> <span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">    <span class="nam">probDict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">        <span class="str">"Shape"</span><span class="op">:</span> <span class="str">"circle"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">        <span class="str">"r"</span><span class="op">:</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">        <span class="str">"Filled"</span><span class="op">:</span> <span class="str">"true"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">        <span class="str">"Color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">    <span class="key">return</span> <span class="nam">probDict</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t"><span class="nam">chart</span> <span class="op">=</span> <span class="nam">ChartVisualization</span><span class="op">.</span><span class="nam">ChartModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">    <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Active Agents"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"#000000"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Graph components"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"black"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">    <span class="nam">data_collector_name</span><span class="op">=</span><span class="str">"datacollector"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t"><span class="nam">epistemic_canvas</span> <span class="op">=</span> <span class="nam">SimpleCanvas</span><span class="op">(</span><span class="nam">agent_draw</span><span class="op">,</span> <span class="num">720</span><span class="op">,</span> <span class="num">720</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t"><span class="nam">epistemic_canvas</span> <span class="op">=</span> <span class="nam">SimpleCanvas</span><span class="op">(</span><span class="nam">agent_draw</span><span class="op">,</span> <span class="num">720</span><span class="op">,</span> <span class="num">720</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t"><span class="nam">server</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">ModularServer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">    <span class="nam">KnowledgeSpread</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">    <span class="op">[</span><span class="nam">epistemic_canvas</span><span class="op">,</span> <span class="nam">chart</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">    <span class="str">"Knowledge spread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t"><span class="nam">server</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">ModularServer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">    <span class="nam">KnowledgeSpread</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">    <span class="op">[</span><span class="nam">epistemic_canvas</span><span class="op">,</span> <span class="nam">chart</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">    <span class="str">"Knowledge spread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_e5ea8e3c7b0425c3_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_utils_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,209 +1,207 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//kknnoowwlleeddggeesspprreeaadd//sseerrvveerr..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//sseerrvveerr..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 7700 ssttaatteemmeennttss ?  00 rruunn 7700 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 6699 ssttaatteemmeennttss ?  00 rruunn 6699 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
-_1import mesa 
-_2import solara 
-_3import altair as alt 
-_4import pandas as pd 
-_5import nx_altair as nxa 
-_6import networkx as nx 
-_7import matplotlib.colors as colors 
-_8 
-_9from scicom.knowledgespread.SimpleContinuousModule import SimpleCanvas 
-_1_0from mesa.visualization.modules import ChartVisualization 
-_1_1 
-_1_2 
-_1_3from scicom.knowledgespread.agents import ScientistAgent 
-_1_4from scicom.knowledgespread.model import KnowledgeSpread 
-_1_5from scicom.knowledgespread.utils import ageFunction 
-_1_6 
-_1_7model_params = { 
-_1_8 "num_scientists": mesa.visualization.Slider( 
-_1_9 "Initial number of scientists", 
-_2_0 100, 10, 200, 10, 
-_2_1 ), 
-_2_2 "num_timesteps": mesa.visualization.Slider( 
-_2_3 "How long is the number of agents growing?", 
-_2_4 20, 5, 100, 5, 
-_2_5 ), 
-_2_6 "oppositionPercent": mesa.visualization.Slider( 
-_2_7 "Percentage of opposing agents", 
-_2_8 0.05, 0, 0.5, 0.05, 
-_2_9 ), 
-_3_0 "epiInit": mesa.visualization.Choice( 
-_3_1 'Choose initial conditions for epistemic space', 
-_3_2 value=('complex'), 
-_3_3 choices=['complex', "central", "polarized"] 
-_3_4 ), 
-_3_5 "timeInit": mesa.visualization.Choice( 
-_3_6 'Choose initial conditions for population growth.', 
-_3_7 value=('saturate'), 
-_3_8 choices=['saturate', "linear", "exponential"] 
-_3_9 ), 
-_4_0 "epiRange": mesa.visualization.Slider( 
-_4_1 "Basic range of visibility in epistemic space", 
-_4_2 0.005, 0.001, 0.03, 0.001, 
-_4_3 ) 
-_4_4} 
-_4_5 
-_4_6 
-_4_7def agent_draw_altair(agent): 
-_4_8 shapeDict = {True: "triangle-up", False: "circle"} 
-_4_9 colortuple = set(agent.topicledger[-1]) 
-_5_0 color = colors.to_hex(colortuple) 
-_5_1 #color = "#" + "".join(format(int(round(val * 255)), "02x") for val in
+26 17:47 +0200
+_1import altair as alt 
+_2import mesa 
+_3import networkx as nx 
+_4import nx_altair as nxa 
+_5import pandas as pd 
+_6import solara 
+_7from matplotlib import colors 
+_8from mesa.visualization.modules import ChartVisualization 
+_9 
+_1_0from scicom.knowledgespread.model import KnowledgeSpread 
+_1_1from scicom.knowledgespread.SimpleContinuousModule import SimpleCanvas 
+_1_2from scicom.knowledgespread.utils import ageFunction 
+_1_3 
+_1_4model_params = { 
+_1_5 "num_scientists": mesa.visualization.Slider( 
+_1_6 "Initial number of scientists", 
+_1_7 100, 10, 200, 10, 
+_1_8 ), 
+_1_9 "num_timesteps": mesa.visualization.Slider( 
+_2_0 "How long is the number of agents growing?", 
+_2_1 20, 5, 100, 5, 
+_2_2 ), 
+_2_3 "oppositionPercent": mesa.visualization.Slider( 
+_2_4 "Percentage of opposing agents", 
+_2_5 0.05, 0, 0.5, 0.05, 
+_2_6 ), 
+_2_7 "epiInit": mesa.visualization.Choice( 
+_2_8 "Choose initial conditions for epistemic space", 
+_2_9 value=("complex"), 
+_3_0 choices=["complex", "central", "polarized"], 
+_3_1 ), 
+_3_2 "timeInit": mesa.visualization.Choice( 
+_3_3 "Choose initial conditions for population growth.", 
+_3_4 value=("saturate"), 
+_3_5 choices=["saturate", "linear", "exponential"], 
+_3_6 ), 
+_3_7 "epiRange": mesa.visualization.Slider( 
+_3_8 "Basic range of visibility in epistemic space", 
+_3_9 0.005, 0.001, 0.03, 0.001, 
+_4_0 ), 
+_4_1} 
+_4_2 
+_4_3 
+_4_4def agent_draw_altair(agent): 
+_4_5 shapeDict = {True: "triangle-up", False: "circle"} 
+_4_6 colortuple = set(agent.topicledger[-1]) 
+_4_7 color = colors.to_hex(colortuple) 
+_4_8 #color = "#" + "".join(format(int(round(val * 255)), "02x") for val in
 colortuple) 
-_5_2 if agent.age > 0: 
-_5_3 size = ageFunction(agent, agent.a, agent.b, agent.c, 10) 
-_5_4 else: 
-_5_5 size = 0.001 
-_5_6 probDict = { 
-_5_7 #"Shape": shapeDict[agent.opposition], 
-_5_8 "opposition": agent.opposition, 
-_5_9 #"r": ageFunction(agent), 
-_6_0 "size": size, 
-_6_1 #"Filled": "true", 
-_6_2 "Color": color, 
-_6_3 "color": color 
-_6_4 } 
-_6_5 return probDict 
-_6_6 
-_6_7 
-_6_8def chart_draw_altair_agents(model): 
-_6_9 data = model.datacollector.get_model_vars_dataframe().reset_index() 
-_7_0 chart = ( 
-_7_1 alt.Chart(data) 
-_7_2 .mark_bar(color="orange") 
-_7_3 .encode( 
-_7_4 x=alt.X("index", title="Step"), 
-_7_5 y=alt.Y( 
-_7_6 "Active Agents", 
-_7_7 title="Active agents" 
-_7_8 ), 
-_7_9 ) 
-_8_0 ) 
-_8_1 return solara.FigureAltair(chart) 
-_8_2 
-_8_3 
-_8_4def chart_draw_altair_communities(model): 
-_8_5 data = model.datacollector.get_model_vars_dataframe().reset_index() 
-_8_6 data.insert(0, "compLen", data["Graph structure"].apply(lambda x: len(x))) 
-_8_7 chart = ( 
-_8_8 alt.Chart(data) 
-_8_9 .mark_bar(color="orange") 
-_9_0 .encode( 
-_9_1 x=alt.X("index", title="Step"), 
-_9_2 y=alt.Y( 
-_9_3 "compLen", 
-_9_4 title="Communities in social network" 
-_9_5 ), 
-_9_6 ) 
-_9_7 ) 
-_9_8 return solara.FigureAltair(chart) 
-_9_9 
-_1_0_0 
-_1_0_1def epiSpace_draw_altair(model, agent_portrayal): 
-_1_0_2 isOpposed = (False, True) 
-_1_0_3 shape_range = ("circle", "triangle-up") 
-_1_0_4 all_agent_data = [] 
-_1_0_5 if not model.schedule.agents: 
-_1_0_6 return solara.Markdown("## Finished run") 
-_1_0_7 else: 
-_1_0_8 for agent in model.schedule.agents: 
-_1_0_9 cur_agent = agent_draw_altair(agent) 
-_1_1_0 cur_agent["x"] = agent.pos[0] 
-_1_1_1 cur_agent["y"] = agent.pos[1] 
-_1_1_2 all_agent_data.append(cur_agent) 
-_1_1_3 df = pd.DataFrame(all_agent_data) 
-_1_1_4 colors = list(set(a["color"] for a in all_agent_data)) 
-_1_1_5 chart_color = alt.Color("color").legend(None).scale(domain=colors,
+_4_9 if agent.age > 0: 
+_5_0 size = ageFunction(agent, agent.a, agent.b, agent.c, 10) 
+_5_1 else: 
+_5_2 size = 0.001 
+_5_3 probDict = { 
+_5_4 #"Shape": shapeDict[agent.opposition], 
+_5_5 "opposition": agent.opposition, 
+_5_6 #"r": ageFunction(agent), 
+_5_7 "size": size, 
+_5_8 #"Filled": "true", 
+_5_9 "Color": color, 
+_6_0 "color": color, 
+_6_1 } 
+_6_2 return probDict 
+_6_3 
+_6_4 
+_6_5def chart_draw_altair_agents(model): 
+_6_6 data = model.datacollector.get_model_vars_dataframe().reset_index() 
+_6_7 chart = ( 
+_6_8 alt.Chart(data) 
+_6_9 .mark_bar(color="orange") 
+_7_0 .encode( 
+_7_1 x=alt.X("index", title="Step"), 
+_7_2 y=alt.Y( 
+_7_3 "Active Agents", 
+_7_4 title="Active agents", 
+_7_5 ), 
+_7_6 ) 
+_7_7 ) 
+_7_8 return solara.FigureAltair(chart) 
+_7_9 
+_8_0 
+_8_1def chart_draw_altair_communities(model): 
+_8_2 data = model.datacollector.get_model_vars_dataframe().reset_index() 
+_8_3 data.insert(0, "compLen", data["Graph structure"].apply(lambda x: len(x))) 
+_8_4 chart = ( 
+_8_5 alt.Chart(data) 
+_8_6 .mark_bar(color="orange") 
+_8_7 .encode( 
+_8_8 x=alt.X("index", title="Step"), 
+_8_9 y=alt.Y( 
+_9_0 "compLen", 
+_9_1 title="Communities in social network", 
+_9_2 ), 
+_9_3 ) 
+_9_4 ) 
+_9_5 return solara.FigureAltair(chart) 
+_9_6 
+_9_7 
+_9_8def epiSpace_draw_altair(model, agent_portrayal): 
+_9_9 isOpposed = (False, True) 
+_1_0_0 shape_range = ("circle", "triangle-up") 
+_1_0_1 all_agent_data = [] 
+_1_0_2 if not model.schedule.agents: 
+_1_0_3 return solara.Markdown("## Finished run") 
+_1_0_4 else: 
+_1_0_5 for agent in model.schedule.agents: 
+_1_0_6 cur_agent = agent_draw_altair(agent) 
+_1_0_7 cur_agent["x"] = agent.pos[0] 
+_1_0_8 cur_agent["y"] = agent.pos[1] 
+_1_0_9 all_agent_data.append(cur_agent) 
+_1_1_0 df = pd.DataFrame(all_agent_data) 
+_1_1_1 colors = list(set(a["color"] for a in all_agent_data)) 
+_1_1_2 chart_color = alt.Color("color").legend(None).scale(domain=colors,
 range=colors) 
-_1_1_6 chart = ( 
-_1_1_7 alt.Chart(df) 
-_1_1_8 .mark_point(filled=True) 
-_1_1_9 .encode( 
-_1_2_0 x=alt.X("x", axis=None), # no x-axis label 
-_1_2_1 y=alt.Y("y", axis=None), # no y-axis label 
-_1_2_2 size=alt.Size("size", title="current activity"), # relabel size for legend 
-_1_2_3 color=chart_color, 
-_1_2_4 shape=alt.Shape( # use shape to indicate choice 
-_1_2_5 "opposition", scale=alt.Scale(domain=isOpposed, range=shape_range) 
-_1_2_6 ), 
-_1_2_7 ) 
-_1_2_8 .configure_view(strokeOpacity=0) # hide grid/chart lines 
-_1_2_9 ) 
-_1_3_0 return solara.FigureAltair(chart) 
-_1_3_1 
-_1_3_2 
-_1_3_3def socialNetwork_draw_altair(model): 
-_1_3_4 currentTime = model.schedule.time 
-_1_3_5 H = model.socialNetwork 
-_1_3_6 Graph = nx.Graph(((u, v, e) for u, v, e in H.edges(data=True) if e['time']
+_1_1_3 chart = ( 
+_1_1_4 alt.Chart(df) 
+_1_1_5 .mark_point(filled=True) 
+_1_1_6 .encode( 
+_1_1_7 x=alt.X("x", axis=None), # no x-axis label 
+_1_1_8 y=alt.Y("y", axis=None), # no y-axis label 
+_1_1_9 size=alt.Size("size", title="current activity"), # relabel size for legend 
+_1_2_0 color=chart_color, 
+_1_2_1 shape=alt.Shape( # use shape to indicate choice 
+_1_2_2 "opposition", scale=alt.Scale(domain=isOpposed, range=shape_range), 
+_1_2_3 ), 
+_1_2_4 ) 
+_1_2_5 .configure_view(strokeOpacity=0) # hide grid/chart lines 
+_1_2_6 ) 
+_1_2_7 return solara.FigureAltair(chart) 
+_1_2_8 
+_1_2_9 
+_1_3_0def socialNetwork_draw_altair(model): 
+_1_3_1 currentTime = model.schedule.time 
+_1_3_2 H = model.socialNetwork 
+_1_3_3 Graph = nx.Graph(((u, v, e) for u, v, e in H.edges(data=True) if e["time"]
 <= currentTime)) 
-_1_3_7 pos = nx.kamada_kawai_layout(Graph) 
-_1_3_8 between = nx.betweenness_centrality(Graph) 
-_1_3_9 nx.set_node_attributes(Graph, between, 'between') 
-_1_4_0 communities = list(nx.community.label_propagation_communities(Graph)) 
-_1_4_1 for f in Graph.nodes(): 
-_1_4_2 for i, c in enumerate(communities): 
-_1_4_3 if f in c: 
-_1_4_4 Graph.nodes()[f].update( 
-_1_4_5 { 
-_1_4_6 "community": str(i), 
-_1_4_7 "name": f 
-_1_4_8 } 
-_1_4_9 ) 
-_1_5_0 chart = nxa.draw_networkx( 
-_1_5_1 G=Graph, 
-_1_5_2 pos=pos, 
-_1_5_3 node_color="between", 
-_1_5_4 edge_color='time', 
-_1_5_5 cmap='viridis' 
-_1_5_6 ) 
-_1_5_7 chart.configure_view(strokeOpacity=0) # hide grid/chart lines 
-_1_5_8 return solara.FigureAltair(chart) 
-_1_5_9 
-_1_6_0 
-_1_6_1def agent_draw(agent): 
-_1_6_2 colortuple = set(agent.topicledger[-1]) 
-_1_6_3 color = "#" + "".join(format(int(round(val * 255)), "02x") for val in
+_1_3_4 pos = nx.kamada_kawai_layout(Graph) 
+_1_3_5 between = nx.betweenness_centrality(Graph) 
+_1_3_6 nx.set_node_attributes(Graph, between, "between") 
+_1_3_7 communities = list(nx.community.label_propagation_communities(Graph)) 
+_1_3_8 for f in Graph.nodes(): 
+_1_3_9 for i, c in enumerate(communities): 
+_1_4_0 if f in c: 
+_1_4_1 Graph.nodes()[f].update( 
+_1_4_2 { 
+_1_4_3 "community": str(i), 
+_1_4_4 "name": f, 
+_1_4_5 }, 
+_1_4_6 ) 
+_1_4_7 chart = nxa.draw_networkx( 
+_1_4_8 G=Graph, 
+_1_4_9 pos=pos, 
+_1_5_0 node_color="between", 
+_1_5_1 edge_color="time", 
+_1_5_2 cmap="viridis", 
+_1_5_3 ) 
+_1_5_4 chart.configure_view(strokeOpacity=0) # hide grid/chart lines 
+_1_5_5 return solara.FigureAltair(chart) 
+_1_5_6 
+_1_5_7 
+_1_5_8def agent_draw(agent): 
+_1_5_9 colortuple = set(agent.topicledger[-1]) 
+_1_6_0 color = "#" + "".join(format(int(round(val * 255)), "02x") for val in
 colortuple) 
-_1_6_4 probDict = { 
-_1_6_5 "Shape": "circle", 
-_1_6_6 "r": ageFunction(agent), 
-_1_6_7 "Filled": "true", 
-_1_6_8 "Color": color 
-_1_6_9 } 
-_1_7_0 return probDict 
-_1_7_1 
-_1_7_2 
-_1_7_3chart = ChartVisualization.ChartModule( 
-_1_7_4 [ 
-_1_7_5 {"Label": "Active Agents", "Color": "#000000"}, 
-_1_7_6 {"Label": "Graph components", "Color": "black"} 
-_1_7_7 ], 
-_1_7_8 data_collector_name='datacollector', 
-_1_7_9) 
+_1_6_1 probDict = { 
+_1_6_2 "Shape": "circle", 
+_1_6_3 "r": ageFunction(agent), 
+_1_6_4 "Filled": "true", 
+_1_6_5 "Color": color, 
+_1_6_6 } 
+_1_6_7 return probDict 
+_1_6_8 
+_1_6_9 
+_1_7_0chart = ChartVisualization.ChartModule( 
+_1_7_1 [ 
+_1_7_2 {"Label": "Active Agents", "Color": "#000000"}, 
+_1_7_3 {"Label": "Graph components", "Color": "black"}, 
+_1_7_4 ], 
+_1_7_5 data_collector_name="datacollector", 
+_1_7_6) 
+_1_7_7 
+_1_7_8 
+_1_7_9epistemic_canvas = SimpleCanvas(agent_draw, 720, 720) 
 _1_8_0 
 _1_8_1 
-_1_8_2epistemic_canvas = SimpleCanvas(agent_draw, 720, 720) 
-_1_8_3 
-_1_8_4 
-_1_8_5server = mesa.visualization.ModularServer( 
-_1_8_6 KnowledgeSpread, 
-_1_8_7 [epistemic_canvas, chart], 
-_1_8_8 "Knowledge spread", 
-_1_8_9 model_params, 
-_1_9_0) 
+_1_8_2server = mesa.visualization.ModularServer( 
+_1_8_3 KnowledgeSpread, 
+_1_8_4 [epistemic_canvas, chart], 
+_1_8_5 "Knowledge spread", 
+_1_8_6 model_params, 
+_1_8_7) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+26 17:47 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/d_e5ea8e3c7b0425c3_utils_py.html` & `scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_utils_py.html`

 * *Files 0% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for src/scicom/knowledgespread/utils.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/utils.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>src/scicom/knowledgespread/utils.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/utils.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,26 +50,26 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">128 statements &nbsp;</span>
+            <span class="text">127 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">128<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">127<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095_SimpleContinuousModule_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_e85bc3a05b58e6d3_run_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -77,50 +77,50 @@
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
     <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""Utility functions for initial condition generation."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">itertools</span> <span class="key">import</span> <span class="nam">combinations</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">from</span> <span class="nam">tqdm</span> <span class="key">import</span> <span class="nam">tqdm</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">from</span> <span class="nam">itertools</span> <span class="key">import</span> <span class="nam">combinations</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">def</span> <span class="nam">epistemicRange</span><span class="op">(</span><span class="nam">baseRange</span><span class="op">,</span> <span class="nam">age</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="str">"""Returns the age dependent search radius for epistemic discovery."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="str">"""Return the age dependent search radius for epistemic discovery."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="key">if</span> <span class="nam">age</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">        <span class="key">return</span> <span class="nam">baseRange</span> <span class="op">/</span> <span class="nam">age</span>  <span class="com"># Refine e.g. in direction of ageFuntion</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">        <span class="key">return</span> <span class="nam">baseRange</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="key">def</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">a</span><span class="op">,</span> <span class="nam">b</span><span class="op">,</span> <span class="nam">c</span><span class="op">,</span> <span class="nam">radius</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">    <span class="str">"""Returns an age dependent radius.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="key">def</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">a</span><span class="op">,</span> <span class="nam">b</span><span class="op">,</span> <span class="nam">c</span><span class="op">,</span> <span class="nam">radius</span><span class="op">)</span> <span class="op">-></span> <span class="nam">float</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">    <span class="str">"""Return an age dependent radius.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="str">    Bell-shaped function with center at c, slop and width</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t"><span class="str">    of plateau defined by a, b.</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="str">    Can be used to show age-dependent activity of agents. </span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">    <span class="key">if</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">age</span> <span class="op">==</span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="key">return</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="key">return</span> <span class="num">0.0</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="key">return</span> <span class="nam">radius</span><span class="op">/</span><span class="op">(</span><span class="num">1</span> <span class="op">+</span> <span class="nam">abs</span><span class="op">(</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">age</span> <span class="op">-</span> <span class="nam">c</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="nam">a</span><span class="op">)</span><span class="op">)</span><span class="op">**</span><span class="op">(</span><span class="num">2</span><span class="op">*</span><span class="nam">b</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t"><span class="key">class</span> <span class="nam">GenerateInitalPopulation</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="str">"""Generate sets of initial conditions,"""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t"><span class="key">class</span> <span class="nam">GenerateInitalPopulation</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="str">"""Generate sets of initial conditions."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="nam">numScientists</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="nam">timesteps</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="nam">timesteps</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">N</span> <span class="op">=</span> <span class="nam">numScientists</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">Tstep</span> <span class="op">=</span> <span class="nam">timesteps</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">    <span class="key">def</span> <span class="nam">epistemicFunc</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">fc</span><span class="op">,</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span><span class="op">,</span> <span class="nam">beta</span><span class="op">=</span><span class="num">8</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">        <span class="str">"""Epistemic space initial sampling."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="key">if</span> <span class="nam">fc</span> <span class="op">==</span> <span class="str">"complex"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
@@ -137,61 +137,61 @@
     <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="key">elif</span> <span class="nam">fcT</span> <span class="op">==</span> <span class="str">"linear"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">            <span class="nam">n2step</span> <span class="op">=</span> <span class="nam">slope</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="key">elif</span> <span class="nam">fcT</span> <span class="op">==</span> <span class="str">"exponential"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">            <span class="nam">n2step</span> <span class="op">=</span> <span class="nam">base</span> <span class="op">**</span> <span class="nam">step</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">            <span class="nam">dft</span> <span class="op">=</span> <span class="nam">dataframe</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">                <span class="nam">n2step</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="nam">abs</span><span class="op">(</span><span class="nam">dataframe</span><span class="op">.</span><span class="nam">z</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="nam">abs</span><span class="op">(</span><span class="nam">dataframe</span><span class="op">.</span><span class="nam">z</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">            <span class="key">return</span> <span class="nam">dft</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">        <span class="key">except</span> <span class="nam">ValueError</span><span class="op">(</span><span class="str">"Your sample size is larger then the data. Adjust exponential time."</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">            <span class="key">raise</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">    <span class="key">def</span> <span class="nam">sample</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">fcE</span><span class="op">=</span><span class="str">"complex"</span><span class="op">,</span> <span class="nam">fcT</span><span class="op">=</span><span class="str">"saturate"</span><span class="op">,</span> <span class="nam">beta</span><span class="op">=</span><span class="num">8</span><span class="op">,</span> <span class="nam">slope</span><span class="op">=</span><span class="num">5</span><span class="op">,</span> <span class="nam">base</span><span class="op">=</span><span class="num">5</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="str">"""Generate the sample population and add activation time."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="nam">dta</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_fullDist</span><span class="op">(</span><span class="nam">fcE</span><span class="op">=</span><span class="nam">fcE</span><span class="op">,</span> <span class="nam">beta</span><span class="op">=</span><span class="nam">beta</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="nam">initial_population</span> <span class="op">=</span> <span class="nam">dta</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">N</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="nam">abs</span><span class="op">(</span><span class="nam">dta</span><span class="op">.</span><span class="nam">z</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="nam">initial_population</span><span class="op">[</span><span class="str">'t'</span><span class="op">]</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="nam">initial_population</span><span class="op">[</span><span class="str">"t"</span><span class="op">]</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="nam">stepDF</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="key">for</span> <span class="nam">step</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">Tstep</span> <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="nam">temp</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">timeFunc</span><span class="op">(</span><span class="nam">dta</span><span class="op">,</span> <span class="nam">step</span><span class="op">,</span> <span class="nam">fcT</span><span class="op">=</span><span class="nam">fcT</span><span class="op">,</span> <span class="nam">slope</span><span class="op">=</span><span class="nam">slope</span><span class="op">,</span> <span class="nam">base</span><span class="op">=</span><span class="nam">base</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">            <span class="nam">temp</span><span class="op">[</span><span class="str">'t'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">step</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">            <span class="nam">temp</span><span class="op">[</span><span class="str">"t"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">step</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">            <span class="nam">stepDF</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">temp</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">        <span class="nam">joined</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="nam">stepDF</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">        <span class="nam">initial_population</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">            <span class="op">[</span><span class="nam">initial_population</span><span class="op">,</span> <span class="nam">joined</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">            <span class="op">[</span><span class="nam">initial_population</span><span class="op">,</span> <span class="nam">joined</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">        <span class="nam">initial_population</span> <span class="op">=</span> <span class="nam">initial_population</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="nam">drop</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">        <span class="nam">initial_population</span><span class="op">[</span><span class="str">'id'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">initial_population</span><span class="op">.</span><span class="nam">index</span> <span class="op">+</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">        <span class="nam">initial_population</span><span class="op">[</span><span class="str">"id"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">initial_population</span><span class="op">.</span><span class="nam">index</span> <span class="op">+</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">        <span class="key">return</span> <span class="nam">initial_population</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">    <span class="key">def</span> <span class="nam">_fullDist</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">fcE</span><span class="op">,</span> <span class="nam">beta</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">        <span class="str">"""Full distribution to sample from."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">        <span class="nam">x</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">linspace</span><span class="op">(</span><span class="op">-</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">10000</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">        <span class="nam">y</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">linspace</span><span class="op">(</span><span class="op">-</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">10000</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="nam">X</span><span class="op">,</span> <span class="nam">Y</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">meshgrid</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">        <span class="nam">Z</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">epistemicFunc</span><span class="op">(</span><span class="nam">fcE</span><span class="op">,</span> <span class="nam">X</span><span class="op">,</span> <span class="nam">Y</span><span class="op">,</span> <span class="nam">beta</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">        <span class="nam">dta</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">            <span class="op">{</span><span class="str">'x'</span><span class="op">:</span> <span class="nam">X</span><span class="op">.</span><span class="nam">flatten</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">'y'</span><span class="op">:</span> <span class="nam">Y</span><span class="op">.</span><span class="nam">flatten</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">'z'</span><span class="op">:</span> <span class="nam">Z</span><span class="op">.</span><span class="nam">flatten</span><span class="op">(</span><span class="op">)</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">            <span class="op">{</span><span class="str">"x"</span><span class="op">:</span> <span class="nam">X</span><span class="op">.</span><span class="nam">flatten</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">"y"</span><span class="op">:</span> <span class="nam">Y</span><span class="op">.</span><span class="nam">flatten</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">"z"</span><span class="op">:</span> <span class="nam">Z</span><span class="op">.</span><span class="nam">flatten</span><span class="op">(</span><span class="op">)</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">        <span class="key">return</span> <span class="nam">dta</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="key">class</span> <span class="nam">GenerateSocNet</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="key">class</span> <span class="nam">GenerateSocNet</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">        <span class="nam">dataframe</span><span class="op">:</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">        <span class="nam">minDist</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.0001</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">        <span class="nam">minDist</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.0001</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">population</span> <span class="op">=</span> <span class="nam">dataframe</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">density</span> <span class="op">=</span> <span class="str">''</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">allEdges</span> <span class="op">=</span> <span class="str">''</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span> <span class="op">=</span> <span class="str">''</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">density</span> <span class="op">=</span> <span class="str">""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">allEdges</span> <span class="op">=</span> <span class="str">""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span> <span class="op">=</span> <span class="str">""</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">minDist</span> <span class="op">=</span> <span class="nam">minDist</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">    <span class="key">def</span> <span class="nam">_getWeighted</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">row</span><span class="op">,</span> <span class="nam">degree</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">            <span class="key">return</span> <span class="nam">degree</span><span class="op">[</span><span class="nam">int</span><span class="op">(</span><span class="nam">row</span><span class="op">[</span><span class="str">"from_id"</span><span class="op">]</span><span class="op">)</span><span class="op">]</span> <span class="op">*</span> <span class="nam">row</span><span class="op">[</span><span class="str">"dist"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">        <span class="key">except</span> <span class="nam">KeyError</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">            <span class="key">return</span> <span class="key">None</span>&nbsp;</span><span class="r"></span></p>
@@ -207,26 +207,26 @@
     <p class="mis show_mis"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="nam">coordinateDict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">            <span class="nam">row</span><span class="op">[</span><span class="str">"id"</span><span class="op">]</span><span class="op">:</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="op">[</span><span class="nam">row</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span><span class="op">,</span> <span class="nam">row</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span><span class="op">,</span> <span class="nam">row</span><span class="op">[</span><span class="str">"z"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="key">for</span> <span class="nam">ix</span><span class="op">,</span> <span class="nam">row</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">        <span class="nam">idCombinations</span> <span class="op">=</span> <span class="op">[</span><span class="nam">tup</span> <span class="key">for</span> <span class="nam">tup</span> <span class="key">in</span> <span class="nam">combinations</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">.</span><span class="nam">id</span><span class="op">.</span><span class="nam">unique</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="num">2</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">        <span class="nam">edges</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">        <span class="key">for</span> <span class="nam">combi</span> <span class="key">in</span> <span class="nam">idCombinations</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">            <span class="nam">dist</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">linalg</span><span class="op">.</span><span class="nam">norm</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">                <span class="nam">coordinateDict</span><span class="op">[</span><span class="nam">combi</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="nam">coordinateDict</span><span class="op">[</span><span class="nam">combi</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">                <span class="nam">coordinateDict</span><span class="op">[</span><span class="nam">combi</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="nam">coordinateDict</span><span class="op">[</span><span class="nam">combi</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">            <span class="key">if</span> <span class="nam">dist</span> <span class="op">&lt;=</span> <span class="num">0.0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">                <span class="nam">dist</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">minDist</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">            <span class="nam">edges</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">                <span class="op">(</span><span class="nam">combi</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">combi</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">dist</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">                <span class="op">(</span><span class="nam">combi</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">combi</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">dist</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">allEdges</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span><span class="nam">edges</span><span class="op">,</span> <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">"from_id"</span><span class="op">,</span> <span class="str">"to_id"</span><span class="op">,</span> <span class="str">"dist"</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">        <span class="nam">social_net</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">allEdges</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">"from_id.isin(@first_gen) and to_id.isin(@first_gen)"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">        <span class="nam">social_net_sample</span> <span class="op">=</span> <span class="nam">social_net</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">            <span class="nam">round</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">density</span> <span class="op">*</span> <span class="op">(</span><span class="nam">initPopN</span> <span class="op">*</span> <span class="op">(</span><span class="nam">initPopN</span> <span class="op">-</span> <span class="num">1</span><span class="op">)</span> <span class="op">/</span> <span class="num">2</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">            <span class="nam">weights</span><span class="op">=</span><span class="nam">sum</span><span class="op">(</span><span class="nam">social_net</span><span class="op">.</span><span class="nam">dist</span><span class="op">)</span> <span class="op">/</span> <span class="nam">social_net</span><span class="op">.</span><span class="nam">dist</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">            <span class="nam">weights</span><span class="op">=</span><span class="nam">sum</span><span class="op">(</span><span class="nam">social_net</span><span class="op">.</span><span class="nam">dist</span><span class="op">)</span> <span class="op">/</span> <span class="nam">social_net</span><span class="op">.</span><span class="nam">dist</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">        <span class="nam">social_net_sample</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"time"</span><span class="op">,</span> <span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span> <span class="op">=</span> <span class="nam">social_net_sample</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">        <span class="key">return</span> <span class="nam">social_net_sample</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">    <span class="key">def</span> <span class="nam">growNodes</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">time</span><span class="op">,</span> <span class="nam">nEdges</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">        <span class="str">"""Add nodes with weighted preferential attachment.</span>&nbsp;</span><span class="r"></span></p>
@@ -238,106 +238,105 @@
     <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t"><span class="str">        select N edges for each new agent.</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t"><span class="str">        Return the concatenated new edges</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">        <span class="nam">addedEdges</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">        <span class="nam">oldIDs</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">"t &lt; @time"</span><span class="op">)</span><span class="op">.</span><span class="nam">id</span><span class="op">.</span><span class="nam">unique</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">        <span class="key">for</span> <span class="nam">newID</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">"t == @time"</span><span class="op">)</span><span class="op">.</span><span class="nam">id</span><span class="op">.</span><span class="nam">unique</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">            <span class="nam">potEdges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">allEdges</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">                <span class="str">"from_id == @newID or to_id == @newID"</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">                <span class="str">"from_id == @newID or to_id == @newID"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">            <span class="op">)</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">                <span class="str">"from_id.isin(@oldIDs) or to_id.isin(@oldIDs)"</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">                <span class="str">"from_id.isin(@oldIDs) or to_id.isin(@oldIDs)"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">            <span class="nam">socialGraph</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">from_pandas_edgelist</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">                <span class="nam">source</span><span class="op">=</span><span class="str">"from_id"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">                <span class="nam">target</span><span class="op">=</span><span class="str">"to_id"</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">                <span class="nam">target</span><span class="op">=</span><span class="str">"to_id"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">            <span class="nam">degree</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">degree</span><span class="op">(</span><span class="nam">socialGraph</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">            <span class="nam">degreeDict</span> <span class="op">=</span> <span class="nam">dict</span><span class="op">(</span><span class="nam">degree</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">            <span class="nam">weightedDist</span> <span class="op">=</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">                <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_getWeighted</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">degreeDict</span><span class="op">)</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">                <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_getWeighted</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">degreeDict</span><span class="op">)</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">            <span class="nam">potEdges</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">                <span class="num">0</span><span class="op">,</span> <span class="str">"weighted"</span><span class="op">,</span> <span class="nam">weightedDist</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">                <span class="num">0</span><span class="op">,</span> <span class="str">"weighted"</span><span class="op">,</span> <span class="nam">weightedDist</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">            <span class="nam">potEdges</span> <span class="op">=</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">dropna</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">            <span class="nam">sample</span> <span class="op">=</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">                <span class="nam">nEdges</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="nam">sum</span><span class="op">(</span><span class="nam">potEdges</span><span class="op">.</span><span class="nam">weighted</span><span class="op">)</span> <span class="op">/</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">weighted</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="nam">sum</span><span class="op">(</span><span class="nam">potEdges</span><span class="op">.</span><span class="nam">weighted</span><span class="op">)</span> <span class="op">/</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">weighted</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">            <span class="nam">sample</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"time"</span><span class="op">,</span> <span class="nam">time</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">            <span class="nam">addedEdges</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">sample</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">        <span class="key">return</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="nam">addedEdges</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">    <span class="key">def</span> <span class="nam">growEdges</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">time</span><span class="op">,</span> <span class="nam">density</span><span class="op">,</span> <span class="nam">densityGrowth</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">        <span class="str">"""Add edges with weighted preferential attachement.</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t"><span class="str">        </span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t"><span class="str">        For a given time, select the current social network,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t"><span class="str">        including newly added nodes. Add weights by current </span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t"><span class="str">        degree and distances. </span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t"><span class="str">        Sample a suffiecient number of edges to keep density</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t"><span class="str">        at a given level. </span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">        <span class="nam">curSocEdges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">"time &lt;= time"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">        <span class="nam">curSocNet</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">from_pandas_edgelist</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">            <span class="nam">curSocEdges</span><span class="op">,</span> <span class="nam">source</span><span class="op">=</span><span class="str">'from_id'</span><span class="op">,</span> <span class="nam">target</span><span class="op">=</span><span class="str">'to_id'</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">        <span class="nam">edges2add</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">            <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">                <span class="nam">curSocNet</span><span class="op">.</span><span class="nam">number_of_nodes</span><span class="op">(</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">curSocNet</span><span class="op">.</span><span class="nam">number_of_nodes</span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="num">1</span><span class="op">)</span> <span class="op">/</span> <span class="num">2</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">            <span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">density</span> <span class="op">+</span> <span class="nam">densityGrowth</span> <span class="op">*</span> <span class="nam">time</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">        <span class="op">)</span> <span class="op">-</span> <span class="nam">curSocNet</span><span class="op">.</span><span class="nam">number_of_edges</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">        <span class="nam">from_degree</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">            <span class="nam">curSocNet</span><span class="op">.</span><span class="nam">degree</span><span class="op">,</span> <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">'from_id'</span><span class="op">,</span> <span class="str">'from_degree'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">        <span class="nam">to_degree</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">            <span class="nam">curSocNet</span><span class="op">.</span><span class="nam">degree</span><span class="op">,</span> <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">'to_id'</span><span class="op">,</span> <span class="str">'to_degree'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">        <span class="nam">potEdges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">allEdges</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">            <span class="nam">from_degree</span><span class="op">,</span> <span class="nam">how</span><span class="op">=</span><span class="str">'inner'</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">        <span class="op">)</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">            <span class="nam">to_degree</span><span class="op">,</span> <span class="nam">how</span><span class="op">=</span><span class="str">'inner'</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">        <span class="nam">weights</span> <span class="op">=</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">from_degree</span> <span class="op">*</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">to_degree</span> <span class="op">*</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">dist</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">        <span class="nam">potEdges</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"weighted"</span><span class="op">,</span> <span class="nam">weights</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t">        <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t">            <span class="nam">sample</span> <span class="op">=</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t">                <span class="nam">round</span><span class="op">(</span><span class="nam">edges2add</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="nam">sum</span><span class="op">(</span><span class="nam">potEdges</span><span class="op">.</span><span class="nam">weighted</span><span class="op">)</span> <span class="op">/</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">weighted</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t">            <span class="nam">sample</span> <span class="op">=</span> <span class="nam">sample</span><span class="op">[</span><span class="op">[</span><span class="str">"from_id"</span><span class="op">,</span> <span class="str">"to_id"</span><span class="op">,</span> <span class="str">"dist"</span><span class="op">]</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t">            <span class="nam">sample</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"time"</span><span class="op">,</span> <span class="nam">time</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t">            <span class="key">return</span> <span class="nam">sample</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t">        <span class="key">except</span> <span class="nam">ValueError</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">            <span class="nam">print</span><span class="op">(</span><span class="str">"Failed"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">            <span class="key">return</span> <span class="nam">potEdges</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">    <span class="key">def</span> <span class="nam">run</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">nEdges</span><span class="op">=</span><span class="num">4</span><span class="op">,</span> <span class="nam">density</span><span class="op">=</span><span class="num">0.2</span><span class="op">,</span> <span class="nam">densityGrowth</span><span class="op">=</span><span class="num">0</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">density</span> <span class="op">=</span> <span class="nam">density</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">        <span class="nam">maxT</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">.</span><span class="nam">t</span><span class="op">.</span><span class="nam">max</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">        <span class="nam">_</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">initSocNet</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">        <span class="key">for</span> <span class="nam">time</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">maxT</span> <span class="op">+</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">            <span class="nam">newNodeEdges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">growNodes</span><span class="op">(</span><span class="nam">time</span><span class="op">,</span> <span class="nam">nEdges</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span><span class="op">,</span> <span class="nam">newNodeEdges</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">            <span class="nam">newPrefEdges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">growEdges</span><span class="op">(</span><span class="nam">time</span><span class="op">,</span> <span class="nam">density</span><span class="op">,</span> <span class="nam">densityGrowth</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span><span class="op">,</span> <span class="nam">newPrefEdges</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">        <span class="nam">curSocEdges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">"time &lt;= time"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">        <span class="nam">curSocNet</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">from_pandas_edgelist</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">            <span class="nam">curSocEdges</span><span class="op">,</span> <span class="nam">source</span><span class="op">=</span><span class="str">"from_id"</span><span class="op">,</span> <span class="nam">target</span><span class="op">=</span><span class="str">"to_id"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">        <span class="nam">edges2add</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">            <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">                <span class="nam">curSocNet</span><span class="op">.</span><span class="nam">number_of_nodes</span><span class="op">(</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">curSocNet</span><span class="op">.</span><span class="nam">number_of_nodes</span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="num">1</span><span class="op">)</span> <span class="op">/</span> <span class="num">2</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">            <span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">density</span> <span class="op">+</span> <span class="nam">densityGrowth</span> <span class="op">*</span> <span class="nam">time</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">        <span class="op">)</span> <span class="op">-</span> <span class="nam">curSocNet</span><span class="op">.</span><span class="nam">number_of_edges</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">        <span class="nam">from_degree</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">            <span class="nam">curSocNet</span><span class="op">.</span><span class="nam">degree</span><span class="op">,</span> <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">"from_id"</span><span class="op">,</span> <span class="str">"from_degree"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">        <span class="nam">to_degree</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">            <span class="nam">curSocNet</span><span class="op">.</span><span class="nam">degree</span><span class="op">,</span> <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">"to_id"</span><span class="op">,</span> <span class="str">"to_degree"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">        <span class="nam">potEdges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">allEdges</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">            <span class="nam">from_degree</span><span class="op">,</span> <span class="nam">how</span><span class="op">=</span><span class="str">"inner"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">        <span class="op">)</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">            <span class="nam">to_degree</span><span class="op">,</span> <span class="nam">how</span><span class="op">=</span><span class="str">"inner"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">        <span class="nam">weights</span> <span class="op">=</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">from_degree</span> <span class="op">*</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">to_degree</span> <span class="op">*</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">dist</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">        <span class="nam">potEdges</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"weighted"</span><span class="op">,</span> <span class="nam">weights</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">        <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t">            <span class="nam">sample</span> <span class="op">=</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t">                <span class="nam">round</span><span class="op">(</span><span class="nam">edges2add</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="nam">sum</span><span class="op">(</span><span class="nam">potEdges</span><span class="op">.</span><span class="nam">weighted</span><span class="op">)</span> <span class="op">/</span> <span class="nam">potEdges</span><span class="op">.</span><span class="nam">weighted</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">            <span class="nam">sample</span> <span class="op">=</span> <span class="nam">sample</span><span class="op">[</span><span class="op">[</span><span class="str">"from_id"</span><span class="op">,</span> <span class="str">"to_id"</span><span class="op">,</span> <span class="str">"dist"</span><span class="op">]</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t">            <span class="nam">sample</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"time"</span><span class="op">,</span> <span class="nam">time</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t">            <span class="key">return</span> <span class="nam">sample</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t">        <span class="key">except</span> <span class="nam">ValueError</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t">            <span class="nam">print</span><span class="op">(</span><span class="str">"Failed"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">            <span class="key">return</span> <span class="nam">potEdges</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">    <span class="key">def</span> <span class="nam">run</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">nEdges</span><span class="op">=</span><span class="num">4</span><span class="op">,</span> <span class="nam">density</span><span class="op">=</span><span class="num">0.2</span><span class="op">,</span> <span class="nam">densityGrowth</span><span class="op">=</span><span class="num">0</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">density</span> <span class="op">=</span> <span class="nam">density</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">        <span class="nam">maxT</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">.</span><span class="nam">t</span><span class="op">.</span><span class="nam">max</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">        <span class="nam">_</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">initSocNet</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">        <span class="key">for</span> <span class="nam">time</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">maxT</span> <span class="op">+</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">            <span class="nam">newNodeEdges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">growNodes</span><span class="op">(</span><span class="nam">time</span><span class="op">,</span> <span class="nam">nEdges</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span><span class="op">,</span> <span class="nam">newNodeEdges</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">            <span class="nam">newPrefEdges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">growEdges</span><span class="op">(</span><span class="nam">time</span><span class="op">,</span> <span class="nam">density</span><span class="op">,</span> <span class="nam">densityGrowth</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span><span class="op">,</span> <span class="nam">newPrefEdges</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_e5ea8e3c7b0425c3_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_baa64d8b15786095_SimpleContinuousModule_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_e85bc3a05b58e6d3_run_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-15 13:26 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,57 +1,58 @@
-************ CCoovveerraaggee ffoorr ssrrcc//sscciiccoomm//kknnoowwlleeddggeesspprreeaadd//uuttiillss..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//uuttiillss..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 112288 ssttaatteemmeennttss ?  00 rruunn 112288 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 112277 ssttaatteemmeennttss ?  00 rruunn 112277 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+26 17:47 +0200
 _1"""Utility functions for initial condition generation.""" 
-_2import numpy as np 
-_3import pandas as pd 
-_4from itertools import combinations 
-_5import networkx as nx 
-_6from tqdm import tqdm 
+_2from itertools import combinations 
+_3 
+_4import networkx as nx 
+_5import numpy as np 
+_6import pandas as pd 
 _7 
 _8 
 _9def epistemicRange(baseRange, age): 
-_1_0 """Returns the age dependent search radius for epistemic discovery.""" 
+_1_0 """Return the age dependent search radius for epistemic discovery.""" 
 _1_1 if age > 0: 
 _1_2 return baseRange / age # Refine e.g. in direction of ageFuntion 
 _1_3 else: 
 _1_4 return baseRange 
 _1_5 
 _1_6 
-_1_7def ageFunction(agent, a, b, c, radius): 
-_1_8 """Returns an age dependent radius. 
-_1_9  
+_1_7def ageFunction(agent, a, b, c, radius) -> float: 
+_1_8 """Return an age dependent radius. 
+_1_9 
 _2_0 Bell-shaped function with center at c, slop and width 
 _2_1 of plateau defined by a, b. 
 _2_2 
 _2_3 Can be used to show age-dependent activity of agents.  
 _2_4 """ 
 _2_5 if agent.age == 0: 
-_2_6 return 0 
+_2_6 return 0.0 
 _2_7 else: 
 _2_8 return radius/(1 + abs((agent.age - c)/(a))**(2*b)) 
 _2_9 
 _3_0 
-_3_1class GenerateInitalPopulation(): 
-_3_2 """Generate sets of initial conditions,""" 
+_3_1class GenerateInitalPopulation: 
+_3_2 """Generate sets of initial conditions.""" 
 _3_3 
 _3_4 def __init__( 
 _3_5 self, 
 _3_6 numScientists, 
-_3_7 timesteps 
+_3_7 timesteps, 
 _3_8 ): 
 _3_9 self.N = numScientists 
 _4_0 self.Tstep = timesteps 
 _4_1 
 _4_2 def epistemicFunc(self, fc, x, y, beta=8): 
 _4_3 """Epistemic space initial sampling.""" 
 _4_4 if fc == "complex": 
@@ -68,62 +69,62 @@
 _5_5 elif fcT == "linear": 
 _5_6 n2step = slope 
 _5_7 elif fcT == "exponential": 
 _5_8 n2step = base ** step 
 _5_9 try: 
 _6_0 dft = dataframe.sample( 
 _6_1 n2step, 
-_6_2 weights=abs(dataframe.z) 
+_6_2 weights=abs(dataframe.z), 
 _6_3 ) 
 _6_4 return dft 
 _6_5 except ValueError("Your sample size is larger then the data. Adjust
 exponential time."): 
 _6_6 raise 
 _6_7 
 _6_8 def sample(self, fcE="complex", fcT="saturate", beta=8, slope=5, base=5): 
 _6_9 """Generate the sample population and add activation time.""" 
 _7_0 dta = self._fullDist(fcE=fcE, beta=beta) 
 _7_1 initial_population = dta.sample(self.N, weights=abs(dta.z)) 
-_7_2 initial_population['t'] = 0 
+_7_2 initial_population["t"] = 0 
 _7_3 stepDF = [] 
 _7_4 for step in range(1, self.Tstep + 1): 
 _7_5 temp = self.timeFunc(dta, step, fcT=fcT, slope=slope, base=base) 
-_7_6 temp['t'] = step 
+_7_6 temp["t"] = step 
 _7_7 stepDF.append(temp) 
 _7_8 joined = pd.concat(stepDF) 
 _7_9 initial_population = pd.concat( 
-_8_0 [initial_population, joined] 
+_8_0 [initial_population, joined], 
 _8_1 ) 
 _8_2 initial_population = initial_population.reset_index(drop=True) 
-_8_3 initial_population['id'] = initial_population.index + 1 
+_8_3 initial_population["id"] = initial_population.index + 1 
 _8_4 return initial_population 
 _8_5 
 _8_6 def _fullDist(self, fcE, beta): 
 _8_7 """Full distribution to sample from.""" 
 _8_8 x = np.linspace(-1, 1, 10000) 
 _8_9 y = np.linspace(-1, 1, 10000) 
 _9_0 X, Y = np.meshgrid(x, y) 
 _9_1 Z = self.epistemicFunc(fcE, X, Y, beta) 
 _9_2 dta = pd.DataFrame( 
-_9_3 {'x': X.flatten(), 'y': Y.flatten(), 'z': Z.flatten()} 
+_9_3 {"x": X.flatten(), "y": Y.flatten(), "z": Z.flatten()}, 
 _9_4 ) 
 _9_5 return dta 
 _9_6 
 _9_7 
-_9_8class GenerateSocNet(): 
+_9_8class GenerateSocNet: 
 _9_9 
 _1_0_0 def __init__( 
 _1_0_1 self, 
 _1_0_2 dataframe: pd.DataFrame, 
-_1_0_3 minDist: float = 0.0001 
+_1_0_3 minDist: float = 0.0001, 
 _1_0_4 ): 
 _1_0_5 self.population = dataframe 
-_1_0_6 self.density = '' 
-_1_0_7 self.allEdges = '' 
-_1_0_8 self.socialNet = '' 
+_1_0_6 self.density = "" 
+_1_0_7 self.allEdges = "" 
+_1_0_8 self.socialNet = "" 
 _1_0_9 self.minDist = minDist 
 _1_1_0 
 _1_1_1 def _getWeighted(self, row, degree): 
 _1_1_2 try: 
 _1_1_3 return degree[int(row["from_id"])] * row["dist"] 
 _1_1_4 except KeyError: 
 _1_1_5 return None 
@@ -141,27 +142,27 @@
 self.population.iterrows() 
 _1_2_7 } 
 _1_2_8 idCombinations = [tup for tup in combinations(self.population.id.unique(),
 2)] 
 _1_2_9 edges = [] 
 _1_3_0 for combi in idCombinations: 
 _1_3_1 dist = np.linalg.norm( 
-_1_3_2 coordinateDict[combi[0]] - coordinateDict[combi[1]] 
+_1_3_2 coordinateDict[combi[0]] - coordinateDict[combi[1]], 
 _1_3_3 ) 
 _1_3_4 if dist <= 0.0: 
 _1_3_5 dist = self.minDist 
 _1_3_6 edges.append( 
-_1_3_7 (combi[0], combi[1], dist) 
+_1_3_7 (combi[0], combi[1], dist), 
 _1_3_8 ) 
 _1_3_9 self.allEdges = pd.DataFrame(edges, columns=["from_id", "to_id", "dist"]) 
 _1_4_0 social_net = self.allEdges.query("from_id.isin(@first_gen) and to_id.isin
 (@first_gen)") 
 _1_4_1 social_net_sample = social_net.sample( 
 _1_4_2 round(self.density * (initPopN * (initPopN - 1) / 2)), 
-_1_4_3 weights=sum(social_net.dist) / social_net.dist 
+_1_4_3 weights=sum(social_net.dist) / social_net.dist, 
 _1_4_4 ) 
 _1_4_5 social_net_sample.insert(0, "time", 0) 
 _1_4_6 self.socialNet = social_net_sample 
 _1_4_7 return social_net_sample 
 _1_4_8 
 _1_4_9 def growNodes(self, time, nEdges): 
 _1_5_0 """Add nodes with weighted preferential attachment. 
@@ -173,93 +174,92 @@
 _1_5_6 select N edges for each new agent. 
 _1_5_7 Return the concatenated new edges 
 _1_5_8 """ 
 _1_5_9 addedEdges = [] 
 _1_6_0 oldIDs = self.population.query("t < @time").id.unique() 
 _1_6_1 for newID in self.population.query("t == @time").id.unique(): 
 _1_6_2 potEdges = self.allEdges.query( 
-_1_6_3 "from_id == @newID or to_id == @newID" 
+_1_6_3 "from_id == @newID or to_id == @newID", 
 _1_6_4 ).query( 
-_1_6_5 "from_id.isin(@oldIDs) or to_id.isin(@oldIDs)" 
+_1_6_5 "from_id.isin(@oldIDs) or to_id.isin(@oldIDs)", 
 _1_6_6 ) 
 _1_6_7 socialGraph = nx.from_pandas_edgelist( 
 _1_6_8 self.socialNet, 
 _1_6_9 source="from_id", 
-_1_7_0 target="to_id" 
+_1_7_0 target="to_id", 
 _1_7_1 ) 
 _1_7_2 
 _1_7_3 degree = nx.degree(socialGraph) 
 _1_7_4 degreeDict = dict(degree) 
 _1_7_5 
 _1_7_6 weightedDist = potEdges.apply( 
-_1_7_7 lambda x: self._getWeighted(x, degreeDict), axis=1 
+_1_7_7 lambda x: self._getWeighted(x, degreeDict), axis=1, 
 _1_7_8 ) 
 _1_7_9 potEdges.insert( 
-_1_8_0 0, "weighted", weightedDist 
+_1_8_0 0, "weighted", weightedDist, 
 _1_8_1 ) 
 _1_8_2 
 _1_8_3 potEdges = potEdges.dropna() 
 _1_8_4 sample = potEdges.sample( 
 _1_8_5 nEdges, 
-_1_8_6 weights=sum(potEdges.weighted) / potEdges.weighted 
+_1_8_6 weights=sum(potEdges.weighted) / potEdges.weighted, 
 _1_8_7 ) 
 _1_8_8 sample.insert(0, "time", time) 
 _1_8_9 addedEdges.append(sample) 
 _1_9_0 return pd.concat(addedEdges) 
 _1_9_1 
 _1_9_2 def growEdges(self, time, density, densityGrowth): 
 _1_9_3 """Add edges with weighted preferential attachement. 
 _1_9_4  
 _1_9_5 For a given time, select the current social network, 
 _1_9_6 including newly added nodes. Add weights by current  
 _1_9_7 degree and distances.  
 _1_9_8 Sample a suffiecient number of edges to keep density 
 _1_9_9 at a given level.  
 _2_0_0 """ 
-_2_0_1 
-_2_0_2 curSocEdges = self.socialNet.query("time <= time") 
-_2_0_3 curSocNet = nx.from_pandas_edgelist( 
-_2_0_4 curSocEdges, source='from_id', target='to_id' 
-_2_0_5 ) 
-_2_0_6 edges2add = ( 
-_2_0_7 ( 
-_2_0_8 curSocNet.number_of_nodes() * (curSocNet.number_of_nodes() - 1) / 2 
-_2_0_9 ) * (density + densityGrowth * time) 
-_2_1_0 ) - curSocNet.number_of_edges() 
-_2_1_1 from_degree = pd.DataFrame( 
-_2_1_2 curSocNet.degree, columns=['from_id', 'from_degree'] 
-_2_1_3 ) 
-_2_1_4 to_degree = pd.DataFrame( 
-_2_1_5 curSocNet.degree, columns=['to_id', 'to_degree'] 
-_2_1_6 ) 
-_2_1_7 potEdges = self.allEdges.merge( 
-_2_1_8 from_degree, how='inner' 
-_2_1_9 ).merge( 
-_2_2_0 to_degree, how='inner' 
-_2_2_1 ) 
-_2_2_2 weights = potEdges.from_degree * potEdges.to_degree * potEdges.dist 
-_2_2_3 potEdges.insert(0, "weighted", weights) 
-_2_2_4 try: 
-_2_2_5 sample = potEdges.sample( 
-_2_2_6 round(edges2add), 
-_2_2_7 weights=sum(potEdges.weighted) / potEdges.weighted 
-_2_2_8 ) 
-_2_2_9 sample = sample[["from_id", "to_id", "dist"]] 
-_2_3_0 sample.insert(0, "time", time) 
-_2_3_1 return sample 
-_2_3_2 except ValueError: 
-_2_3_3 print("Failed") 
-_2_3_4 return potEdges 
-_2_3_5 
-_2_3_6 def run(self, nEdges=4, density=0.2, densityGrowth=0): 
-_2_3_7 self.density = density 
-_2_3_8 maxT = self.population.t.max() 
-_2_3_9 _ = self.initSocNet() 
-_2_4_0 for time in range(1, maxT + 1, 1): 
-_2_4_1 newNodeEdges = self.growNodes(time, nEdges) 
-_2_4_2 self.socialNet = pd.concat([self.socialNet, newNodeEdges]) 
-_2_4_3 newPrefEdges = self.growEdges(time, density, densityGrowth) 
-_2_4_4 self.socialNet = pd.concat([self.socialNet, newPrefEdges]) 
-_2_4_5 return self.socialNet 
-_2_4_6 
+_2_0_1 curSocEdges = self.socialNet.query("time <= time") 
+_2_0_2 curSocNet = nx.from_pandas_edgelist( 
+_2_0_3 curSocEdges, source="from_id", target="to_id", 
+_2_0_4 ) 
+_2_0_5 edges2add = ( 
+_2_0_6 ( 
+_2_0_7 curSocNet.number_of_nodes() * (curSocNet.number_of_nodes() - 1) / 2 
+_2_0_8 ) * (density + densityGrowth * time) 
+_2_0_9 ) - curSocNet.number_of_edges() 
+_2_1_0 from_degree = pd.DataFrame( 
+_2_1_1 curSocNet.degree, columns=["from_id", "from_degree"], 
+_2_1_2 ) 
+_2_1_3 to_degree = pd.DataFrame( 
+_2_1_4 curSocNet.degree, columns=["to_id", "to_degree"], 
+_2_1_5 ) 
+_2_1_6 potEdges = self.allEdges.merge( 
+_2_1_7 from_degree, how="inner", 
+_2_1_8 ).merge( 
+_2_1_9 to_degree, how="inner", 
+_2_2_0 ) 
+_2_2_1 weights = potEdges.from_degree * potEdges.to_degree * potEdges.dist 
+_2_2_2 potEdges.insert(0, "weighted", weights) 
+_2_2_3 try: 
+_2_2_4 sample = potEdges.sample( 
+_2_2_5 round(edges2add), 
+_2_2_6 weights=sum(potEdges.weighted) / potEdges.weighted, 
+_2_2_7 ) 
+_2_2_8 sample = sample[["from_id", "to_id", "dist"]] 
+_2_2_9 sample.insert(0, "time", time) 
+_2_3_0 return sample 
+_2_3_1 except ValueError: 
+_2_3_2 print("Failed") 
+_2_3_3 return potEdges 
+_2_3_4 
+_2_3_5 def run(self, nEdges=4, density=0.2, densityGrowth=0): 
+_2_3_6 self.density = density 
+_2_3_7 maxT = self.population.t.max() 
+_2_3_8 _ = self.initSocNet() 
+_2_3_9 for time in range(1, maxT + 1, 1): 
+_2_4_0 newNodeEdges = self.growNodes(time, nEdges) 
+_2_4_1 self.socialNet = pd.concat([self.socialNet, newNodeEdges]) 
+_2_4_2 newPrefEdges = self.growEdges(time, density, densityGrowth) 
+_2_4_3 self.socialNet = pd.concat([self.socialNet, newPrefEdges]) 
+_2_4_4 return self.socialNet 
+_2_4_5 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-15 13:26 +0200
+26 17:47 +0200
```

### Comparing `scicom-0.4.0/tests/reports/coverage-html/favicon_32.png` & `scicom-0.4.1/tests/reports/html/favicon_32.png`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/reports/coverage-html/keybd_closed.png` & `scicom-0.4.1/tests/reports/html/keybd_closed.png`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/reports/coverage-html/keybd_open.png` & `scicom-0.4.1/tests/reports/html/keybd_open.png`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/reports/coverage-html/style.css` & `scicom-0.4.1/tests/reports/html/style.css`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/reports/html/d_277402163e1a7589___init___py.html` & `scicom-0.4.1/tests/reports/html/d_ad23a1665840e904___init___py.html`

 * *Files 8% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/historicalletters/__init__.py: 100%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/__init__.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/__init__.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/__init__.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">0 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_8a655f2681f565c9___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,18 +80,18 @@
     </div>
 </header>
 <main id="source">
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_8a655f2681f565c9___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,16 +1,16 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-hhiissttoorriiccaalllleetttteerrss//____iinniitt____..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//____iinniitt____..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 00 ssttaatteemmeennttss ?  00 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_277402163e1a7589_agents_py.html` & `scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_agents_py.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/historicalletters/agents.py: 93%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/historicalletters/agents.py: 93%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/agents.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/historicalletters/agents.py</b>:
             <span class="pc_cov">93%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,26 +50,26 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">115 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">107<span class="text"> run</span></button>
+            <span class="text">116 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">108<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">8<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_interface_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 12:29 +0200
+            created at 2024-04-26 18:34 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -260,104 +260,105 @@
     <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">                <span class="com"># agent's currently held topic positions.</span>&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">                    <span class="op">{</span><span class="nam">receiver</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">updatedTopicVec</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">        <span class="str">"""Perform one simulation step."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">        <span class="com"># If the agent has received a letter in the previous step and</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">        <span class="com"># has updated its internal topicVec state, the new topic state is</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">        <span class="com"># appended to the topicLedger</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">        <span class="key">if</span> <span class="key">not</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">        <span class="key">elif</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">!=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">        <span class="nam">currentActivation</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">            <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">            <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">            <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">        <span class="key">if</span> <span class="nam">currentActivation</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">            <span class="nam">neighborsMove</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">                    <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">                    <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">                    <span class="nam">center</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">                <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">            <span class="nam">neighborsSend</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">                    <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">                    <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">                    <span class="nam">center</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">                <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">sendLetter</span><span class="op">(</span><span class="nam">neighborsSend</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">move</span><span class="op">(</span><span class="nam">neighborsMove</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">        <span class="com"># If the agent has received a letter in the previous step and</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">        <span class="com"># has updated its internal topicVec state, the new topic state is</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">        <span class="com"># appended to the topicLedger</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">        <span class="key">if</span> <span class="key">not</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">        <span class="key">elif</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">!=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">        <span class="nam">currentActivation</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">            <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">            <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">activationWeight</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">            <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">        <span class="key">if</span> <span class="nam">currentActivation</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">            <span class="nam">neighborsMove</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">                    <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">                    <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">                    <span class="nam">center</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">                <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">            <span class="nam">neighborsSend</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">                    <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">                    <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">                    <span class="nam">center</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">                <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">sendLetter</span><span class="op">(</span><span class="nam">neighborsSend</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">move</span><span class="op">(</span><span class="nam">neighborsMove</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t"><span class="key">class</span> <span class="nam">RegionAgent</span><span class="op">(</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">    <span class="str">"""The region keeping track of contained agents.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t"><span class="str">    This agent type is introduced for visualization purposes.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t"><span class="str">    SenderAgents are linked to regions by calculation of a</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t"><span class="str">    geographic overlap of the region shape with the SenderAgent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t"><span class="str">    position.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t"><span class="str">    At initialization, the regions are populated with SenderAgents</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t"><span class="str">    giving rise to a dictionary of the contained SenderAgent IDs and</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t"><span class="str">    their initial topic.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t"><span class="str">    At each movement, the SenderAgent might cross region boundaries.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t"><span class="str">    This reqieres a re-calculation of the potential overlap.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">:</span><span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">        <span class="nam">model</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">        <span class="nam">geometry</span><span class="op">:</span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">polygon</span><span class="op">.</span><span class="nam">Polygon</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">        <span class="nam">crs</span><span class="op">:</span><span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">        <span class="str">"""Initialize region with id, model, geometry and crs."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">,</span> <span class="nam">crs</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">main_topic</span><span class="op">:</span><span class="nam">tuple</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">has_main_topic</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t">    <span class="key">def</span> <span class="nam">has_main_topic</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">tuple</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t">        <span class="str">"""Return weighted average topics of agents in region."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t">        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t">            <span class="nam">topics</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t">            <span class="nam">total</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t">            <span class="nam">weight</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="op">/</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">total</span><span class="op">]</span> <span class="key">if</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span> <span class="key">else</span> <span class="op">[</span><span class="num">1</span> <span class="op">/</span> <span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">]</span> <span class="op">*</span> <span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t">            <span class="nam">mixed_colors</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="op">[</span><span class="nam">np</span><span class="op">.</span><span class="nam">multiply</span><span class="op">(</span><span class="nam">weight</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">,</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">)</span> <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t253" href="#t253">253</a></span><span class="t">            <span class="key">return</span> <span class="nam">np</span><span class="op">.</span><span class="nam">subtract</span><span class="op">(</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">,</span> <span class="nam">mixed_colors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t254" href="#t254">254</a></span><span class="t">        <span class="key">return</span> <span class="op">(</span><span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t255" href="#t255">255</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t256" href="#t256">256</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">sender</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t257" href="#t257">257</a></span><span class="t">        <span class="str">"""Add a sender to the region."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t258" href="#t258">258</a></span><span class="t">        <span class="nam">receivedLetters</span> <span class="op">=</span> <span class="nam">sender</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t259" href="#t259">259</a></span><span class="t">        <span class="nam">scale</span> <span class="op">=</span> <span class="nam">receivedLetters</span> <span class="key">if</span> <span class="nam">receivedLetters</span> <span class="key">else</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t260" href="#t260">260</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t261" href="#t261">261</a></span><span class="t">            <span class="op">{</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="op">(</span><span class="nam">sender</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">,</span> <span class="nam">scale</span><span class="op">)</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t262" href="#t262">262</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t263" href="#t263">263</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t264" href="#t264">264</a></span><span class="t">    <span class="key">def</span> <span class="nam">remove_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">sender</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t265" href="#t265">265</a></span><span class="t">        <span class="str">"""Remove a sender from the region."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t266" href="#t266">266</a></span><span class="t">        <span class="key">del</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">[</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t"><span class="key">class</span> <span class="nam">RegionAgent</span><span class="op">(</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">    <span class="str">"""The region keeping track of contained agents.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t"><span class="str">    This agent type is introduced for visualization purposes.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t"><span class="str">    SenderAgents are linked to regions by calculation of a</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t"><span class="str">    geographic overlap of the region shape with the SenderAgent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t"><span class="str">    position.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t"><span class="str">    At initialization, the regions are populated with SenderAgents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t"><span class="str">    giving rise to a dictionary of the contained SenderAgent IDs and</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t"><span class="str">    their initial topic.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t"><span class="str">    At each movement, the SenderAgent might cross region boundaries.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t"><span class="str">    This reqieres a re-calculation of the potential overlap.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">:</span><span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">        <span class="nam">model</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">        <span class="nam">geometry</span><span class="op">:</span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">polygon</span><span class="op">.</span><span class="nam">Polygon</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">        <span class="nam">crs</span><span class="op">:</span><span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">        <span class="str">"""Initialize region with id, model, geometry and crs."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">,</span> <span class="nam">crs</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">main_topic</span><span class="op">:</span><span class="nam">tuple</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">has_main_topic</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t">    <span class="key">def</span> <span class="nam">has_main_topic</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">tuple</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t">        <span class="str">"""Return weighted average topics of agents in region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t">        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t">            <span class="nam">topics</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t">            <span class="nam">total</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t">            <span class="nam">weight</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="op">/</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">total</span><span class="op">]</span> <span class="key">if</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span> <span class="key">else</span> <span class="op">[</span><span class="num">1</span> <span class="op">/</span> <span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">]</span> <span class="op">*</span> <span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t253" href="#t253">253</a></span><span class="t">            <span class="nam">mixed_colors</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="op">[</span><span class="nam">np</span><span class="op">.</span><span class="nam">multiply</span><span class="op">(</span><span class="nam">weight</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">,</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">)</span> <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t254" href="#t254">254</a></span><span class="t">            <span class="key">return</span> <span class="nam">np</span><span class="op">.</span><span class="nam">subtract</span><span class="op">(</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">,</span> <span class="nam">mixed_colors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t255" href="#t255">255</a></span><span class="t">        <span class="key">return</span> <span class="op">(</span><span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t256" href="#t256">256</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t257" href="#t257">257</a></span><span class="t">    <span class="key">def</span> <span class="nam">add_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">sender</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t258" href="#t258">258</a></span><span class="t">        <span class="str">"""Add a sender to the region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t259" href="#t259">259</a></span><span class="t">        <span class="nam">receivedLetters</span> <span class="op">=</span> <span class="nam">sender</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t260" href="#t260">260</a></span><span class="t">        <span class="nam">scale</span> <span class="op">=</span> <span class="nam">receivedLetters</span> <span class="key">if</span> <span class="nam">receivedLetters</span> <span class="key">else</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t261" href="#t261">261</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t262" href="#t262">262</a></span><span class="t">            <span class="op">{</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="op">(</span><span class="nam">sender</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">,</span> <span class="nam">scale</span><span class="op">)</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t263" href="#t263">263</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t264" href="#t264">264</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t265" href="#t265">265</a></span><span class="t">    <span class="key">def</span> <span class="nam">remove_sender</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">sender</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t266" href="#t266">266</a></span><span class="t">        <span class="str">"""Remove a sender from the region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t267" href="#t267">267</a></span><span class="t">        <span class="key">del</span> <span class="nam">self</span><span class="op">.</span><span class="nam">senders_in_region</span><span class="op">[</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_interface_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 12:29 +0200
+            created at 2024-04-26 18:34 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,21 +1,21 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
 hhiissttoorriiccaalllleetttteerrss//aaggeennttss..ppyy:: 9933%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 111155 ssttaatteemmeennttss ?  110077 rruunn 88 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 12:29 +0200
+********** 111166 ssttaatteemmeennttss ?  110088 rruunn 88 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
+26 18:34 +0200
 _1"""The agent classes for HistoricalLetters.""" 
 _2import random 
 _3 
 _4import mesa 
 _5import mesa_geo as mg 
 _6import numpy as np 
 _7import shapely 
@@ -200,93 +200,94 @@
 _1_7_8 # agent's currently held topic positions. 
 _1_7_9 self.model.updatedTopicsDict.update( 
 _1_8_0 {receiver.unique_id: updatedTopicVec}, 
 _1_8_1 ) 
 _1_8_2 
 _1_8_3 def step(self) -> None: 
 _1_8_4 """Perform one simulation step.""" 
-_1_8_5 # If the agent has received a letter in the previous step and 
-_1_8_6 # has updated its internal topicVec state, the new topic state is 
-_1_8_7 # appended to the topicLedger 
-_1_8_8 if not self.topicLedger: 
-_1_8_9 self.topicLedger.append( 
-_1_9_0 self.topicVec, 
-_1_9_1 ) 
-_1_9_2 elif self.topicVec != self.topicLedger[-1]: 
-_1_9_3 self.topicLedger.append( 
-_1_9_4 self.topicVec, 
-_1_9_5 ) 
-_1_9_6 currentActivation = random.choices( 
-_1_9_7 population=[0, 1], 
-_1_9_8 weights=[1 - self.activationWeight, self.activationWeight], 
-_1_9_9 k=1, 
-_2_0_0 ) 
-_2_0_1 if currentActivation[0] == 1: 
-_2_0_2 neighborsMove = [ 
-_2_0_3 x for x in self.model.space.get_neighbors_within_distance( 
-_2_0_4 self, 
-_2_0_5 distance=self.moveRange * self.model.meandistance, 
-_2_0_6 center=False, 
-_2_0_7 ) if isinstance(x, SenderAgent) 
-_2_0_8 ] 
-_2_0_9 neighborsSend = [ 
-_2_1_0 x for x in self.model.space.get_neighbors_within_distance( 
-_2_1_1 self, 
-_2_1_2 distance=self.letterRange * self.model.meandistance, 
-_2_1_3 center=False, 
-_2_1_4 ) if isinstance(x, SenderAgent) 
-_2_1_5 ] 
-_2_1_6 self.sendLetter(neighborsSend) 
-_2_1_7 self.move(neighborsMove) 
-_2_1_8 
+_1_8_5 self.topicVec = self.model.updatedTopicsDict[self.unique_id] 
+_1_8_6 # If the agent has received a letter in the previous step and 
+_1_8_7 # has updated its internal topicVec state, the new topic state is 
+_1_8_8 # appended to the topicLedger 
+_1_8_9 if not self.topicLedger: 
+_1_9_0 self.topicLedger.append( 
+_1_9_1 self.topicVec, 
+_1_9_2 ) 
+_1_9_3 elif self.topicVec != self.topicLedger[-1]: 
+_1_9_4 self.topicLedger.append( 
+_1_9_5 self.topicVec, 
+_1_9_6 ) 
+_1_9_7 currentActivation = random.choices( 
+_1_9_8 population=[0, 1], 
+_1_9_9 weights=[1 - self.activationWeight, self.activationWeight], 
+_2_0_0 k=1, 
+_2_0_1 ) 
+_2_0_2 if currentActivation[0] == 1: 
+_2_0_3 neighborsMove = [ 
+_2_0_4 x for x in self.model.space.get_neighbors_within_distance( 
+_2_0_5 self, 
+_2_0_6 distance=self.moveRange * self.model.meandistance, 
+_2_0_7 center=False, 
+_2_0_8 ) if isinstance(x, SenderAgent) 
+_2_0_9 ] 
+_2_1_0 neighborsSend = [ 
+_2_1_1 x for x in self.model.space.get_neighbors_within_distance( 
+_2_1_2 self, 
+_2_1_3 distance=self.letterRange * self.model.meandistance, 
+_2_1_4 center=False, 
+_2_1_5 ) if isinstance(x, SenderAgent) 
+_2_1_6 ] 
+_2_1_7 self.sendLetter(neighborsSend) 
+_2_1_8 self.move(neighborsMove) 
 _2_1_9 
-_2_2_0class RegionAgent(mg.GeoAgent): 
-_2_2_1 """The region keeping track of contained agents. 
-_2_2_2 
-_2_2_3 This agent type is introduced for visualization purposes. 
-_2_2_4 SenderAgents are linked to regions by calculation of a 
-_2_2_5 geographic overlap of the region shape with the SenderAgent 
-_2_2_6 position. 
-_2_2_7 At initialization, the regions are populated with SenderAgents 
-_2_2_8 giving rise to a dictionary of the contained SenderAgent IDs and 
-_2_2_9 their initial topic. 
-_2_3_0 At each movement, the SenderAgent might cross region boundaries. 
-_2_3_1 This reqieres a re-calculation of the potential overlap. 
-_2_3_2 """ 
-_2_3_3 
-_2_3_4 def __init__( 
-_2_3_5 self, 
-_2_3_6 unique_id:str, 
-_2_3_7 model:mesa.Model, 
-_2_3_8 geometry: shapely.geometry.polygon.Polygon, 
-_2_3_9 crs:str, 
-_2_4_0 ) -> None: 
-_2_4_1 """Initialize region with id, model, geometry and crs.""" 
-_2_4_2 super().__init__(unique_id, model, geometry, crs) 
-_2_4_3 self.senders_in_region = {} 
-_2_4_4 self.main_topic:tuple = self.has_main_topic() 
-_2_4_5 
-_2_4_6 def has_main_topic(self) -> tuple: 
-_2_4_7 """Return weighted average topics of agents in region.""" 
-_2_4_8 if len(self.senders_in_region) > 0: 
-_2_4_9 topics = [y[0] for x, y in self.senders_in_region.items()] 
-_2_5_0 total = [y[1] for x, y in self.senders_in_region.items()] 
-_2_5_1 weight = [x / sum(total) for x in total] if sum(total) > 0 else [1 / len
+_2_2_0 
+_2_2_1class RegionAgent(mg.GeoAgent): 
+_2_2_2 """The region keeping track of contained agents. 
+_2_2_3 
+_2_2_4 This agent type is introduced for visualization purposes. 
+_2_2_5 SenderAgents are linked to regions by calculation of a 
+_2_2_6 geographic overlap of the region shape with the SenderAgent 
+_2_2_7 position. 
+_2_2_8 At initialization, the regions are populated with SenderAgents 
+_2_2_9 giving rise to a dictionary of the contained SenderAgent IDs and 
+_2_3_0 their initial topic. 
+_2_3_1 At each movement, the SenderAgent might cross region boundaries. 
+_2_3_2 This reqieres a re-calculation of the potential overlap. 
+_2_3_3 """ 
+_2_3_4 
+_2_3_5 def __init__( 
+_2_3_6 self, 
+_2_3_7 unique_id:str, 
+_2_3_8 model:mesa.Model, 
+_2_3_9 geometry: shapely.geometry.polygon.Polygon, 
+_2_4_0 crs:str, 
+_2_4_1 ) -> None: 
+_2_4_2 """Initialize region with id, model, geometry and crs.""" 
+_2_4_3 super().__init__(unique_id, model, geometry, crs) 
+_2_4_4 self.senders_in_region = {} 
+_2_4_5 self.main_topic:tuple = self.has_main_topic() 
+_2_4_6 
+_2_4_7 def has_main_topic(self) -> tuple: 
+_2_4_8 """Return weighted average topics of agents in region.""" 
+_2_4_9 if len(self.senders_in_region) > 0: 
+_2_5_0 topics = [y[0] for x, y in self.senders_in_region.items()] 
+_2_5_1 total = [y[1] for x, y in self.senders_in_region.items()] 
+_2_5_2 weight = [x / sum(total) for x in total] if sum(total) > 0 else [1 / len
 (topics)] * len(topics) 
-_2_5_2 mixed_colors = np.sum([np.multiply(weight[i], topics[i]) for i in range(len
+_2_5_3 mixed_colors = np.sum([np.multiply(weight[i], topics[i]) for i in range(len
 (topics))], axis=0) 
-_2_5_3 return np.subtract((1, 1, 1), mixed_colors) 
-_2_5_4 return (0.5, 0.5, 0.5) 
-_2_5_5 
-_2_5_6 def add_sender(self, sender: SenderAgent) -> None: 
-_2_5_7 """Add a sender to the region.""" 
-_2_5_8 receivedLetters = sender.numLettersReceived 
-_2_5_9 scale = receivedLetters if receivedLetters else 1 
-_2_6_0 self.senders_in_region.update( 
-_2_6_1 {sender.unique_id: (sender.topicVec, scale)}, 
-_2_6_2 ) 
-_2_6_3 
-_2_6_4 def remove_sender(self, sender: SenderAgent) -> None: 
-_2_6_5 """Remove a sender from the region.""" 
-_2_6_6 del self.senders_in_region[sender.unique_id] 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 12:29 +0200
+_2_5_4 return np.subtract((1, 1, 1), mixed_colors) 
+_2_5_5 return (0.5, 0.5, 0.5) 
+_2_5_6 
+_2_5_7 def add_sender(self, sender: SenderAgent) -> None: 
+_2_5_8 """Add a sender to the region.""" 
+_2_5_9 receivedLetters = sender.numLettersReceived 
+_2_6_0 scale = receivedLetters if receivedLetters else 1 
+_2_6_1 self.senders_in_region.update( 
+_2_6_2 {sender.unique_id: (sender.topicVec, scale)}, 
+_2_6_3 ) 
+_2_6_4 
+_2_6_5 def remove_sender(self, sender: SenderAgent) -> None: 
+_2_6_6 """Remove a sender from the region.""" 
+_2_6_7 del self.senders_in_region[sender.unique_id] 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
+26 18:34 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_277402163e1a7589_interface_py.html` & `scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_interface_py.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/historicalletters/interface.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/historicalletters/interface.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/interface.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/interface.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">39 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">39<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -204,18 +204,18 @@
     <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">    <span class="nam">agent_portrayal</span><span class="op">=</span><span class="nam">topic_draw</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">    <span class="nam">space_drawer</span><span class="op">=</span><span class="nam">make_geospace</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,21 +1,21 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
 hhiissttoorriiccaalllleetttteerrss//iinntteerrffaaccee..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 3399 ssttaatteemmeennttss ?  00 rruunn 3399 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+28 12:02 +0200
 _1"""Define the solara interface to run and control the HistoricalLetters
 model.""" 
 _2from __future__ import annotations 
 _3 
 _4from typing import TYPE_CHECKING 
 _5 
 _6if TYPE_CHECKING: 
@@ -137,8 +137,8 @@
 _1_1_9 model_params, 
 _1_2_0 measures=["Movements", "Clusters", "Letters"], 
 _1_2_1 name="Historical Letters ABM", 
 _1_2_2 agent_portrayal=topic_draw, 
 _1_2_3 space_drawer=make_geospace, 
 _1_2_4) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_277402163e1a7589_model_py.html` & `scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_model_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/historicalletters/model.py: 95%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/historicalletters/model.py: 96%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/model.py</b>:
-            <span class="pc_cov">95%</span>
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/model.py</b>:
+            <span class="pc_cov">96%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,26 +50,26 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">110 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">105<span class="text"> run</span></button>
+            <span class="text">115 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">110<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">5<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 13:48 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -207,198 +207,207 @@
     <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="com"># Output variables</span>&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">letterLedger</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">movements</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">        <span class="com"># Internal variables</span>&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">time</span><span class="op">.</span><span class="nam">RandomActivation</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSendInput</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopicsDict</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span> <span class="op">=</span> <span class="nam">Nuts2Eu</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">debug</span> <span class="op">=</span> <span class="nam">debug</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">        <span class="com"># Initialize region agents</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">        <span class="com"># Set up the grid with patches for every NUTS region</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">        <span class="com"># Create region agents</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">        <span class="nam">ac</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">AgentCreator</span><span class="op">(</span><span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">regions</span> <span class="op">=</span> <span class="nam">ac</span><span class="op">.</span><span class="nam">from_file</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">            <span class="nam">regionData</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">            <span class="nam">unique_id</span><span class="op">=</span><span class="str">"NUTS_ID"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">        <span class="com"># Add regions to Nuts2Eu geospace</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">add_regions</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">regions</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">        <span class="com"># Initialize sender agents</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">        <span class="com"># Draw initial geographic positions of agents</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">        <span class="nam">initSenderGeoDf</span> <span class="op">=</span> <span class="nam">createData</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">            <span class="nam">population</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">            <span class="nam">populationDistribution</span><span class="op">=</span><span class="nam">populationDistributionData</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">        <span class="com"># Calculate mean of mean distances for each agent.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">        <span class="com"># This is used as a measure for the range of exchanges.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">        <span class="nam">meandistances</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span> <span class="key">in</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">index</span><span class="op">.</span><span class="nam">to_numpy</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">            <span class="nam">name</span> <span class="op">=</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">loc</span><span class="op">[</span><span class="nam">idx</span><span class="op">,</span> <span class="str">"unique_id"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">            <span class="nam">geom</span> <span class="op">=</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">loc</span><span class="op">[</span><span class="nam">idx</span><span class="op">,</span> <span class="str">"geometry"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">            <span class="nam">otherAgents</span> <span class="op">=</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">f"unique_id != '{name}'"</span><span class="op">)</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">            <span class="nam">geometries</span> <span class="op">=</span> <span class="nam">otherAgents</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">to_numpy</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">            <span class="nam">distances</span> <span class="op">=</span> <span class="op">[</span><span class="nam">geom</span><span class="op">.</span><span class="nam">distance</span><span class="op">(</span><span class="nam">othergeom</span><span class="op">)</span> <span class="key">for</span> <span class="nam">othergeom</span> <span class="key">in</span> <span class="nam">geometries</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">            <span class="nam">meandistances</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">mean</span><span class="op">(</span><span class="nam">distances</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">meandistance</span> <span class="op">=</span> <span class="nam">mean</span><span class="op">(</span><span class="nam">meandistances</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">        <span class="com"># Populate factors dictionary</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">factors</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">            <span class="str">"similarityThreshold"</span><span class="op">:</span> <span class="nam">similarityThreshold</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">            <span class="str">"moveRange"</span><span class="op">:</span> <span class="nam">moveRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">            <span class="str">"letterRange"</span><span class="op">:</span> <span class="nam">letterRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">        <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">        <span class="com"># Set up agent creator for senders</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">        <span class="nam">ac_senders</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">AgentCreator</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">            <span class="nam">SenderAgent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">            <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">            <span class="nam">agent_kwargs</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">factors</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">        <span class="com"># Create agents based on random coordinates generated</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">        <span class="com"># in the createData step above, see util.py file.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">        <span class="nam">senders</span> <span class="op">=</span> <span class="nam">ac_senders</span><span class="op">.</span><span class="nam">from_GeoDataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">            <span class="nam">initSenderGeoDf</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">            <span class="nam">unique_id</span><span class="op">=</span><span class="str">"unique_id"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">        <span class="com"># Create random set of initial topic vectors.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">        <span class="nam">topics</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">            <span class="nam">tuple</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">                <span class="op">[</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">3</span><span class="op">)</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">            <span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">        <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">        <span class="com"># Setup senders</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span><span class="op">,</span> <span class="nam">sender</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">senders</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">            <span class="com"># Add to social network</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">.</span><span class="nam">add_node</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">                <span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">                <span class="nam">numLettersSend</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">                <span class="nam">numLettersReceived</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">            <span class="com"># Give sender topic</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">            <span class="nam">sender</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">idx</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">            <span class="com"># Add current topic to dict</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">                <span class="op">{</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">idx</span><span class="op">]</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">            <span class="com"># Set random activation weight</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">            <span class="key">if</span> <span class="nam">useActivation</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">                <span class="nam">sender</span><span class="op">.</span><span class="nam">activationWeight</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">            <span class="com"># Add sender to its region</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">            <span class="nam">regionID</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">                <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">regions</span> <span class="key">if</span> <span class="nam">contains</span><span class="op">(</span><span class="nam">x</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">sender</span><span class="op">.</span><span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">            <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">add_sender</span><span class="op">(</span><span class="nam">sender</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">            <span class="key">except</span> <span class="nam">IndexError</span> <span class="key">as</span> <span class="nam">exc</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">                <span class="nam">text</span> <span class="op">=</span> <span class="str">f"Problem finding region for {sender.geometry}."</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t">                <span class="key">raise</span> <span class="nam">IndexError</span><span class="op">(</span><span class="nam">text</span><span class="op">)</span> <span class="key">from</span> <span class="nam">exc</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t">            <span class="com"># Add sender to schedule</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">add</span><span class="op">(</span><span class="nam">sender</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">        <span class="com"># Create social network</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t">        <span class="key">if</span> <span class="nam">useSocialNetwork</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t">            <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t">                <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">_createSocialEdges</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">DataCollector</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">            <span class="nam">model_reporters</span><span class="op">=</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">                <span class="str">"Ledger"</span><span class="op">:</span> <span class="nam">getPrunedLedger</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">                <span class="str">"Letters"</span><span class="op">:</span> <span class="nam">getScaledLetters</span> <span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">                <span class="str">"Movements"</span><span class="op">:</span> <span class="nam">getScaledMovements</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">                <span class="str">"Clusters"</span><span class="op">:</span> <span class="nam">getComponents</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">            <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">    <span class="key">def</span> <span class="nam">_createSocialEdges</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">graph</span><span class="op">:</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">MultiDiGraph</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">        <span class="str">"""Create social edges with the different wiring factors.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t"><span class="str">        Define a close range by using the moveRange parameter. Among</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t"><span class="str">        these neighbors, create a connection with probability set by</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t"><span class="str">        the shortRangeNetworkFactor.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t"><span class="str">        For all other agents, that are not in this closeRange group,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t"><span class="str">        create a connection with the probability set by the longRangeNetworkFactor.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t253" href="#t253">253</a></span><span class="t">        <span class="nam">closerange</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t254" href="#t254">254</a></span><span class="t">            <span class="nam">agent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t255" href="#t255">255</a></span><span class="t">            <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t256" href="#t256">256</a></span><span class="t">            <span class="nam">center</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t257" href="#t257">257</a></span><span class="t">        <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t258" href="#t258">258</a></span><span class="t">        <span class="key">for</span> <span class="nam">neighbor</span> <span class="key">in</span> <span class="nam">closerange</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t259" href="#t259">259</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">!=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t260" href="#t260">260</a></span><span class="t">                <span class="nam">connect</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t261" href="#t261">261</a></span><span class="t">                    <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t262" href="#t262">262</a></span><span class="t">                    <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span><span class="op">,</span> <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t263" href="#t263">263</a></span><span class="t">                    <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t264" href="#t264">264</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t265" href="#t265">265</a></span><span class="t">                <span class="key">if</span> <span class="nam">connect</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t266" href="#t266">266</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t267" href="#t267">267</a></span><span class="t">        <span class="nam">longrange</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span> <span class="key">if</span> <span class="nam">x</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">closerange</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t268" href="#t268">268</a></span><span class="t">        <span class="key">for</span> <span class="nam">neighbor</span> <span class="key">in</span> <span class="nam">longrange</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t269" href="#t269">269</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">!=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t270" href="#t270">270</a></span><span class="t">                <span class="nam">connect</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t271" href="#t271">271</a></span><span class="t">                    <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t272" href="#t272">272</a></span><span class="t">                    <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span><span class="op">,</span> <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t273" href="#t273">273</a></span><span class="t">                    <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t274" href="#t274">274</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t275" href="#t275">275</a></span><span class="t">                <span class="key">if</span> <span class="nam">connect</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t276" href="#t276">276</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t277" href="#t277">277</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t278" href="#t278">278</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t279" href="#t279">279</a></span><span class="t">        <span class="str">"""One simulation step with data collection."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t280" href="#t280">280</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">step_no_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t281" href="#t281">281</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">collect</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">updatedPositionDict</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span> <span class="op">=</span> <span class="nam">Nuts2Eu</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">debug</span> <span class="op">=</span> <span class="nam">debug</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">        <span class="com"># Initialize region agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">        <span class="com"># Set up the grid with patches for every NUTS region</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">        <span class="com"># Create region agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">        <span class="nam">ac</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">AgentCreator</span><span class="op">(</span><span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">regions</span> <span class="op">=</span> <span class="nam">ac</span><span class="op">.</span><span class="nam">from_file</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">            <span class="nam">regionData</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">            <span class="nam">unique_id</span><span class="op">=</span><span class="str">"NUTS_ID"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">        <span class="com"># Add regions to Nuts2Eu geospace</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">add_regions</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">regions</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="com"># Initialize sender agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">        <span class="com">#######</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">        <span class="com"># Draw initial geographic positions of agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">        <span class="nam">initSenderGeoDf</span> <span class="op">=</span> <span class="nam">createData</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">            <span class="nam">population</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">            <span class="nam">populationDistribution</span><span class="op">=</span><span class="nam">populationDistributionData</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">        <span class="com"># Calculate mean of mean distances for each agent.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">        <span class="com"># This is used as a measure for the range of exchanges.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">        <span class="nam">meandistances</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span> <span class="key">in</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">index</span><span class="op">.</span><span class="nam">to_numpy</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">            <span class="nam">name</span> <span class="op">=</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">loc</span><span class="op">[</span><span class="nam">idx</span><span class="op">,</span> <span class="str">"unique_id"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">            <span class="nam">geom</span> <span class="op">=</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">loc</span><span class="op">[</span><span class="nam">idx</span><span class="op">,</span> <span class="str">"geometry"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">            <span class="nam">otherAgents</span> <span class="op">=</span> <span class="nam">initSenderGeoDf</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">f"unique_id != '{name}'"</span><span class="op">)</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">            <span class="nam">geometries</span> <span class="op">=</span> <span class="nam">otherAgents</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">to_numpy</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">            <span class="nam">distances</span> <span class="op">=</span> <span class="op">[</span><span class="nam">geom</span><span class="op">.</span><span class="nam">distance</span><span class="op">(</span><span class="nam">othergeom</span><span class="op">)</span> <span class="key">for</span> <span class="nam">othergeom</span> <span class="key">in</span> <span class="nam">geometries</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">            <span class="nam">meandistances</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">mean</span><span class="op">(</span><span class="nam">distances</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">meandistance</span> <span class="op">=</span> <span class="nam">mean</span><span class="op">(</span><span class="nam">meandistances</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">        <span class="com"># Populate factors dictionary</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">factors</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">            <span class="str">"similarityThreshold"</span><span class="op">:</span> <span class="nam">similarityThreshold</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">            <span class="str">"moveRange"</span><span class="op">:</span> <span class="nam">moveRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">            <span class="str">"letterRange"</span><span class="op">:</span> <span class="nam">letterRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">        <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">        <span class="com"># Set up agent creator for senders</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">        <span class="nam">ac_senders</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">AgentCreator</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">            <span class="nam">SenderAgent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">            <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">            <span class="nam">agent_kwargs</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">factors</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">        <span class="com"># Create agents based on random coordinates generated</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">        <span class="com"># in the createData step above, see util.py file.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">        <span class="nam">senders</span> <span class="op">=</span> <span class="nam">ac_senders</span><span class="op">.</span><span class="nam">from_GeoDataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">            <span class="nam">initSenderGeoDf</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">            <span class="nam">unique_id</span><span class="op">=</span><span class="str">"unique_id"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">        <span class="com"># Create random set of initial topic vectors.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">        <span class="nam">topics</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">            <span class="nam">tuple</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">                <span class="op">[</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">3</span><span class="op">)</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">            <span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">population</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">        <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">        <span class="com"># Setup senders</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span><span class="op">,</span> <span class="nam">sender</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">senders</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">            <span class="com"># Add to social network</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">.</span><span class="nam">add_node</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">                <span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">                <span class="nam">numLettersSend</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">                <span class="nam">numLettersReceived</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">            <span class="com"># Give sender topic</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">            <span class="nam">sender</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">idx</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">            <span class="com"># Add current topic to dict</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">                <span class="op">{</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">idx</span><span class="op">]</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">            <span class="com"># Set random activation weight</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">            <span class="key">if</span> <span class="nam">useActivation</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">                <span class="nam">sender</span><span class="op">.</span><span class="nam">activationWeight</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">            <span class="com"># Add sender to its region</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">            <span class="nam">regionID</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">                <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">regions</span> <span class="key">if</span> <span class="nam">contains</span><span class="op">(</span><span class="nam">x</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">sender</span><span class="op">.</span><span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">            <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">add_sender</span><span class="op">(</span><span class="nam">sender</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">            <span class="key">except</span> <span class="nam">IndexError</span> <span class="key">as</span> <span class="nam">exc</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t">                <span class="nam">text</span> <span class="op">=</span> <span class="str">f"Problem finding region for {sender.geometry}."</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t">                <span class="key">raise</span> <span class="nam">IndexError</span><span class="op">(</span><span class="nam">text</span><span class="op">)</span> <span class="key">from</span> <span class="nam">exc</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t">            <span class="com"># Prepopulate positions dict</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">updatedPositionDict</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">                <span class="op">{</span><span class="nam">sender</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="op">[</span><span class="nam">sender</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">regionID</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">]</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t">            <span class="com"># Add sender to schedule</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">add</span><span class="op">(</span><span class="nam">sender</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">        <span class="com"># Create social network</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">        <span class="key">if</span> <span class="nam">useSocialNetwork</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">            <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">                <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">_createSocialEdges</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">DataCollector</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">            <span class="nam">model_reporters</span><span class="op">=</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">                <span class="str">"Ledger"</span><span class="op">:</span> <span class="nam">getPrunedLedger</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">                <span class="str">"Letters"</span><span class="op">:</span> <span class="nam">getScaledLetters</span> <span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">                <span class="str">"Movements"</span><span class="op">:</span> <span class="nam">getScaledMovements</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">                <span class="str">"Clusters"</span><span class="op">:</span> <span class="nam">getComponents</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">            <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t">    <span class="key">def</span> <span class="nam">_createSocialEdges</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">agent</span><span class="op">:</span> <span class="nam">SenderAgent</span><span class="op">,</span> <span class="nam">graph</span><span class="op">:</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">MultiDiGraph</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t">        <span class="str">"""Create social edges with the different wiring factors.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t"><span class="str">        Define a close range by using the moveRange parameter. Among</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t"><span class="str">        these neighbors, create a connection with probability set by</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t253" href="#t253">253</a></span><span class="t"><span class="str">        the shortRangeNetworkFactor.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t254" href="#t254">254</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t255" href="#t255">255</a></span><span class="t"><span class="str">        For all other agents, that are not in this closeRange group,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t256" href="#t256">256</a></span><span class="t"><span class="str">        create a connection with the probability set by the longRangeNetworkFactor.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t257" href="#t257">257</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t258" href="#t258">258</a></span><span class="t">        <span class="nam">closerange</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors_within_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t259" href="#t259">259</a></span><span class="t">            <span class="nam">agent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t260" href="#t260">260</a></span><span class="t">            <span class="nam">distance</span><span class="op">=</span><span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">*</span> <span class="nam">self</span><span class="op">.</span><span class="nam">meandistance</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t261" href="#t261">261</a></span><span class="t">            <span class="nam">center</span><span class="op">=</span><span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t262" href="#t262">262</a></span><span class="t">        <span class="op">)</span> <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t263" href="#t263">263</a></span><span class="t">        <span class="key">for</span> <span class="nam">neighbor</span> <span class="key">in</span> <span class="nam">closerange</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t264" href="#t264">264</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">!=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t265" href="#t265">265</a></span><span class="t">                <span class="nam">connect</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t266" href="#t266">266</a></span><span class="t">                    <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t267" href="#t267">267</a></span><span class="t">                    <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span><span class="op">,</span> <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">shortRangeNetworkFactor</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t268" href="#t268">268</a></span><span class="t">                    <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t269" href="#t269">269</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t270" href="#t270">270</a></span><span class="t">                <span class="key">if</span> <span class="nam">connect</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t271" href="#t271">271</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t272" href="#t272">272</a></span><span class="t">        <span class="nam">longrange</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span> <span class="key">if</span> <span class="nam">x</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">closerange</span> <span class="key">and</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t273" href="#t273">273</a></span><span class="t">        <span class="key">for</span> <span class="nam">neighbor</span> <span class="key">in</span> <span class="nam">longrange</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t274" href="#t274">274</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">!=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t275" href="#t275">275</a></span><span class="t">                <span class="nam">connect</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t276" href="#t276">276</a></span><span class="t">                    <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t277" href="#t277">277</a></span><span class="t">                    <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span><span class="op">,</span> <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">longRangeNetworkFactor</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t278" href="#t278">278</a></span><span class="t">                    <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t279" href="#t279">279</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t280" href="#t280">280</a></span><span class="t">                <span class="key">if</span> <span class="nam">connect</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t281" href="#t281">281</a></span><span class="t">                    <span class="nam">graph</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">step</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t282" href="#t282">282</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t283" href="#t283">283</a></span><span class="t">    <span class="key">def</span> <span class="nam">step_no_data</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t284" href="#t284">284</a></span><span class="t">        <span class="str">"""One simulation step without data collection."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t285" href="#t285">285</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSendInput</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t286" href="#t286">286</a></span><span class="t">            <span class="op">**</span><span class="op">{</span><span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">x</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t287" href="#t287">287</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t288" href="#t288">288</a></span><span class="t">        <span class="com"># Update the currently held topicVec for each agent, based</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t289" href="#t289">289</a></span><span class="t">        <span class="com"># on potential previouse communication events.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t290" href="#t290">290</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t291" href="#t291">291</a></span><span class="t">            <span class="nam">agent</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">[</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t292" href="#t292">292</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t293" href="#t293">293</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t294" href="#t294">294</a></span><span class="t">    <span class="key">def</span> <span class="nam">run</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">n</span><span class="op">:</span><span class="nam">int</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t295" href="#t295">295</a></span><span class="t">        <span class="str">"""Run the model for n steps.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t296" href="#t296">296</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t297" href="#t297">297</a></span><span class="t"><span class="str">        Data collection is only run at the end of n steps.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t298" href="#t298">298</a></span><span class="t"><span class="str">        This is useful for batch runs accross different</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t299" href="#t299">299</a></span><span class="t"><span class="str">        parameters.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t300" href="#t300">300</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t301" href="#t301">301</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">debug</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t302" href="#t302">302</a></span><span class="t">            <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">tqdm</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t303" href="#t303">303</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">step_no_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t304" href="#t304">304</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t305" href="#t305">305</a></span><span class="t">            <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t306" href="#t306">306</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">step_no_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t307" href="#t307">307</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">collect</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t283" href="#t283">283</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t284" href="#t284">284</a></span><span class="t">        <span class="str">"""One simulation step with data collection."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t285" href="#t285">285</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">step_no_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t286" href="#t286">286</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">collect</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t287" href="#t287">287</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t288" href="#t288">288</a></span><span class="t">    <span class="key">def</span> <span class="nam">step_no_data</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t289" href="#t289">289</a></span><span class="t">        <span class="str">"""One simulation step without data collection."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t290" href="#t290">290</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSendInput</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t291" href="#t291">291</a></span><span class="t">            <span class="op">**</span><span class="op">{</span><span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">:</span> <span class="nam">x</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t292" href="#t292">292</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t293" href="#t293">293</a></span><span class="t">        <span class="com"># Update the currently held topicVec for each agent, based</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t294" href="#t294">294</a></span><span class="t">        <span class="com"># on potential previouse communication events and the position</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t295" href="#t295">295</a></span><span class="t">        <span class="com"># based on a previous movement.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t296" href="#t296">296</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t297" href="#t297">297</a></span><span class="t">            <span class="nam">agent</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">updatedTopicsDict</span><span class="op">[</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t298" href="#t298">298</a></span><span class="t">            <span class="nam">newGeom</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">updatedPositionDict</span><span class="op">[</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t299" href="#t299">299</a></span><span class="t">            <span class="key">if</span> <span class="nam">newGeom</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">!=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">geometry</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t300" href="#t300">300</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">move_sender</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">newGeom</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">newGeom</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t301" href="#t301">301</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t302" href="#t302">302</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t303" href="#t303">303</a></span><span class="t">    <span class="key">def</span> <span class="nam">run</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">n</span><span class="op">:</span><span class="nam">int</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t304" href="#t304">304</a></span><span class="t">        <span class="str">"""Run the model for n steps.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t305" href="#t305">305</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t306" href="#t306">306</a></span><span class="t"><span class="str">        Data collection is only run at the end of n steps.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t307" href="#t307">307</a></span><span class="t"><span class="str">        This is useful for batch runs accross different</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t308" href="#t308">308</a></span><span class="t"><span class="str">        parameters.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t309" href="#t309">309</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t310" href="#t310">310</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">debug</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t311" href="#t311">311</a></span><span class="t">            <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">tqdm</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t312" href="#t312">312</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">step_no_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t313" href="#t313">313</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t314" href="#t314">314</a></span><span class="t">            <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t315" href="#t315">315</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">step_no_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t316" href="#t316">316</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">collect</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_299ddae0d2804fc5_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 13:48 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,21 +1,21 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-hhiissttoorriiccaalllleetttteerrss//mmooddeell..ppyy:: 9955%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//mmooddeell..ppyy:: 9966%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 111100 ssttaatteemmeennttss ?  110055 rruunn 55 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 111155 ssttaatteemmeennttss ?  111100 rruunn 55 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 13:48 +0200
+28 12:02 +0200
 _1"""The model class for HistoricalLetters.""" 
 _2import random 
 _3from pathlib import Path 
 _4 
 _5import mesa 
 _6import mesa_geo as mg 
 _7import networkx as nx 
@@ -144,188 +144,197 @@
 _1_2_5 # Output variables 
 _1_2_6 self.letterLedger = [] 
 _1_2_7 self.movements = 0 
 _1_2_8 # Internal variables 
 _1_2_9 self.schedule = mesa.time.RandomActivation(self) 
 _1_3_0 self.scaleSendInput = {} 
 _1_3_1 self.updatedTopicsDict = {} 
-_1_3_2 self.space = Nuts2Eu() 
-_1_3_3 self.debug = debug 
-_1_3_4 
-_1_3_5 ####### 
-_1_3_6 # Initialize region agents 
-_1_3_7 ####### 
-_1_3_8 
-_1_3_9 # Set up the grid with patches for every NUTS region 
-_1_4_0 # Create region agents 
-_1_4_1 ac = mg.AgentCreator(RegionAgent, model=self) 
-_1_4_2 self.regions = ac.from_file( 
-_1_4_3 regionData, 
-_1_4_4 unique_id="NUTS_ID", 
-_1_4_5 ) 
-_1_4_6 # Add regions to Nuts2Eu geospace 
-_1_4_7 self.space.add_regions(self.regions) 
-_1_4_8 
-_1_4_9 ####### 
-_1_5_0 # Initialize sender agents 
-_1_5_1 ####### 
-_1_5_2 
-_1_5_3 # Draw initial geographic positions of agents 
-_1_5_4 initSenderGeoDf = createData( 
-_1_5_5 population, 
-_1_5_6 populationDistribution=populationDistributionData, 
-_1_5_7 ) 
-_1_5_8 
-_1_5_9 # Calculate mean of mean distances for each agent. 
-_1_6_0 # This is used as a measure for the range of exchanges. 
-_1_6_1 meandistances = [] 
-_1_6_2 for idx in initSenderGeoDf.index.to_numpy(): 
-_1_6_3 name = initSenderGeoDf.loc[idx, "unique_id"] 
-_1_6_4 geom = initSenderGeoDf.loc[idx, "geometry"] 
-_1_6_5 otherAgents = initSenderGeoDf.query(f"unique_id != '{name}'").copy() 
-_1_6_6 geometries = otherAgents.geometry.to_numpy() 
-_1_6_7 distances = [geom.distance(othergeom) for othergeom in geometries] 
-_1_6_8 meandistances.append(mean(distances)) 
-_1_6_9 self.meandistance = mean(meandistances) 
-_1_7_0 
-_1_7_1 # Populate factors dictionary 
-_1_7_2 self.factors = { 
-_1_7_3 "similarityThreshold": similarityThreshold, 
-_1_7_4 "moveRange": moveRange, 
-_1_7_5 "letterRange": letterRange, 
-_1_7_6 } 
-_1_7_7 
-_1_7_8 # Set up agent creator for senders 
-_1_7_9 ac_senders = mg.AgentCreator( 
-_1_8_0 SenderAgent, 
-_1_8_1 model=self, 
-_1_8_2 agent_kwargs=self.factors, 
-_1_8_3 ) 
-_1_8_4 
-_1_8_5 # Create agents based on random coordinates generated 
-_1_8_6 # in the createData step above, see util.py file. 
-_1_8_7 senders = ac_senders.from_GeoDataFrame( 
-_1_8_8 initSenderGeoDf, 
-_1_8_9 unique_id="unique_id", 
-_1_9_0 ) 
-_1_9_1 
-_1_9_2 # Create random set of initial topic vectors. 
-_1_9_3 topics = [ 
-_1_9_4 tuple( 
-_1_9_5 [random.random() for x in range(3)], 
-_1_9_6 ) for x in range(self.population) 
-_1_9_7 ] 
-_1_9_8 
-_1_9_9 # Setup senders 
-_2_0_0 for idx, sender in enumerate(senders): 
-_2_0_1 # Add to social network 
-_2_0_2 self.socialNetwork.add_node( 
-_2_0_3 sender.unique_id, 
-_2_0_4 numLettersSend=0, 
-_2_0_5 numLettersReceived=0, 
-_2_0_6 ) 
-_2_0_7 # Give sender topic 
-_2_0_8 sender.topicVec = topics[idx] 
-_2_0_9 # Add current topic to dict 
-_2_1_0 self.updatedTopicsDict.update( 
-_2_1_1 {sender.unique_id: topics[idx]}, 
-_2_1_2 ) 
-_2_1_3 # Set random activation weight 
-_2_1_4 if useActivation is True: 
-_2_1_5 sender.activationWeight = random.random() 
-_2_1_6 # Add sender to its region 
-_2_1_7 regionID = [ 
-_2_1_8 x.unique_id for x in self.regions if contains(x.geometry, sender.geometry) 
-_2_1_9 ] 
-_2_2_0 try: 
-_2_2_1 self.space.add_sender(sender, regionID[0]) 
-_2_2_2 except IndexError as exc: 
-_2_2_3 text = f"Problem finding region for {sender.geometry}." 
-_2_2_4 raise IndexError(text) from exc 
-_2_2_5 # Add sender to schedule 
-_2_2_6 self.schedule.add(sender) 
-_2_2_7 
-_2_2_8 # Create social network 
-_2_2_9 if useSocialNetwork is True: 
-_2_3_0 for agent in self.schedule.agents: 
-_2_3_1 if isinstance(agent, SenderAgent): 
-_2_3_2 self._createSocialEdges(agent, self.socialNetwork) 
-_2_3_3 
-_2_3_4 self.datacollector = mesa.DataCollector( 
-_2_3_5 model_reporters={ 
-_2_3_6 "Ledger": getPrunedLedger, 
-_2_3_7 "Letters": getScaledLetters , 
-_2_3_8 "Movements": getScaledMovements, 
-_2_3_9 "Clusters": getComponents, 
-_2_4_0 }, 
-_2_4_1 ) 
-_2_4_2 
-_2_4_3 def _createSocialEdges(self, agent: SenderAgent, graph: nx.MultiDiGraph) -
+_1_3_2 self.updatedPositionDict = {} 
+_1_3_3 self.space = Nuts2Eu() 
+_1_3_4 self.debug = debug 
+_1_3_5 
+_1_3_6 ####### 
+_1_3_7 # Initialize region agents 
+_1_3_8 ####### 
+_1_3_9 
+_1_4_0 # Set up the grid with patches for every NUTS region 
+_1_4_1 # Create region agents 
+_1_4_2 ac = mg.AgentCreator(RegionAgent, model=self) 
+_1_4_3 self.regions = ac.from_file( 
+_1_4_4 regionData, 
+_1_4_5 unique_id="NUTS_ID", 
+_1_4_6 ) 
+_1_4_7 # Add regions to Nuts2Eu geospace 
+_1_4_8 self.space.add_regions(self.regions) 
+_1_4_9 
+_1_5_0 ####### 
+_1_5_1 # Initialize sender agents 
+_1_5_2 ####### 
+_1_5_3 
+_1_5_4 # Draw initial geographic positions of agents 
+_1_5_5 initSenderGeoDf = createData( 
+_1_5_6 population, 
+_1_5_7 populationDistribution=populationDistributionData, 
+_1_5_8 ) 
+_1_5_9 
+_1_6_0 # Calculate mean of mean distances for each agent. 
+_1_6_1 # This is used as a measure for the range of exchanges. 
+_1_6_2 meandistances = [] 
+_1_6_3 for idx in initSenderGeoDf.index.to_numpy(): 
+_1_6_4 name = initSenderGeoDf.loc[idx, "unique_id"] 
+_1_6_5 geom = initSenderGeoDf.loc[idx, "geometry"] 
+_1_6_6 otherAgents = initSenderGeoDf.query(f"unique_id != '{name}'").copy() 
+_1_6_7 geometries = otherAgents.geometry.to_numpy() 
+_1_6_8 distances = [geom.distance(othergeom) for othergeom in geometries] 
+_1_6_9 meandistances.append(mean(distances)) 
+_1_7_0 self.meandistance = mean(meandistances) 
+_1_7_1 
+_1_7_2 # Populate factors dictionary 
+_1_7_3 self.factors = { 
+_1_7_4 "similarityThreshold": similarityThreshold, 
+_1_7_5 "moveRange": moveRange, 
+_1_7_6 "letterRange": letterRange, 
+_1_7_7 } 
+_1_7_8 
+_1_7_9 # Set up agent creator for senders 
+_1_8_0 ac_senders = mg.AgentCreator( 
+_1_8_1 SenderAgent, 
+_1_8_2 model=self, 
+_1_8_3 agent_kwargs=self.factors, 
+_1_8_4 ) 
+_1_8_5 
+_1_8_6 # Create agents based on random coordinates generated 
+_1_8_7 # in the createData step above, see util.py file. 
+_1_8_8 senders = ac_senders.from_GeoDataFrame( 
+_1_8_9 initSenderGeoDf, 
+_1_9_0 unique_id="unique_id", 
+_1_9_1 ) 
+_1_9_2 
+_1_9_3 # Create random set of initial topic vectors. 
+_1_9_4 topics = [ 
+_1_9_5 tuple( 
+_1_9_6 [random.random() for x in range(3)], 
+_1_9_7 ) for x in range(self.population) 
+_1_9_8 ] 
+_1_9_9 
+_2_0_0 # Setup senders 
+_2_0_1 for idx, sender in enumerate(senders): 
+_2_0_2 # Add to social network 
+_2_0_3 self.socialNetwork.add_node( 
+_2_0_4 sender.unique_id, 
+_2_0_5 numLettersSend=0, 
+_2_0_6 numLettersReceived=0, 
+_2_0_7 ) 
+_2_0_8 # Give sender topic 
+_2_0_9 sender.topicVec = topics[idx] 
+_2_1_0 # Add current topic to dict 
+_2_1_1 self.updatedTopicsDict.update( 
+_2_1_2 {sender.unique_id: topics[idx]}, 
+_2_1_3 ) 
+_2_1_4 # Set random activation weight 
+_2_1_5 if useActivation is True: 
+_2_1_6 sender.activationWeight = random.random() 
+_2_1_7 # Add sender to its region 
+_2_1_8 regionID = [ 
+_2_1_9 x.unique_id for x in self.regions if contains(x.geometry, sender.geometry) 
+_2_2_0 ] 
+_2_2_1 try: 
+_2_2_2 self.space.add_sender(sender, regionID[0]) 
+_2_2_3 except IndexError as exc: 
+_2_2_4 text = f"Problem finding region for {sender.geometry}." 
+_2_2_5 raise IndexError(text) from exc 
+_2_2_6 # Prepopulate positions dict 
+_2_2_7 self.updatedPositionDict.update( 
+_2_2_8 {sender.unique_id: [sender.geometry, regionID[0]]}, 
+_2_2_9 ) 
+_2_3_0 # Add sender to schedule 
+_2_3_1 self.schedule.add(sender) 
+_2_3_2 
+_2_3_3 # Create social network 
+_2_3_4 if useSocialNetwork is True: 
+_2_3_5 for agent in self.schedule.agents: 
+_2_3_6 if isinstance(agent, SenderAgent): 
+_2_3_7 self._createSocialEdges(agent, self.socialNetwork) 
+_2_3_8 
+_2_3_9 self.datacollector = mesa.DataCollector( 
+_2_4_0 model_reporters={ 
+_2_4_1 "Ledger": getPrunedLedger, 
+_2_4_2 "Letters": getScaledLetters , 
+_2_4_3 "Movements": getScaledMovements, 
+_2_4_4 "Clusters": getComponents, 
+_2_4_5 }, 
+_2_4_6 ) 
+_2_4_7 
+_2_4_8 def _createSocialEdges(self, agent: SenderAgent, graph: nx.MultiDiGraph) -
 > None: 
-_2_4_4 """Create social edges with the different wiring factors. 
-_2_4_5 
-_2_4_6 Define a close range by using the moveRange parameter. Among 
-_2_4_7 these neighbors, create a connection with probability set by 
-_2_4_8 the shortRangeNetworkFactor. 
-_2_4_9 
-_2_5_0 For all other agents, that are not in this closeRange group, 
-_2_5_1 create a connection with the probability set by the
+_2_4_9 """Create social edges with the different wiring factors. 
+_2_5_0 
+_2_5_1 Define a close range by using the moveRange parameter. Among 
+_2_5_2 these neighbors, create a connection with probability set by 
+_2_5_3 the shortRangeNetworkFactor. 
+_2_5_4 
+_2_5_5 For all other agents, that are not in this closeRange group, 
+_2_5_6 create a connection with the probability set by the
 longRangeNetworkFactor. 
-_2_5_2 """ 
-_2_5_3 closerange = [x for x in self.space.get_neighbors_within_distance( 
-_2_5_4 agent, 
-_2_5_5 distance=self.moveRange * self.meandistance, 
-_2_5_6 center=False, 
-_2_5_7 ) if isinstance(x, SenderAgent)] 
-_2_5_8 for neighbor in closerange: 
-_2_5_9 if neighbor.unique_id != agent.unique_id: 
-_2_6_0 connect = random.choices( 
-_2_6_1 population=[True, False], 
-_2_6_2 weights=[self.shortRangeNetworkFactor, 1 - self.shortRangeNetworkFactor], 
-_2_6_3 k=1, 
-_2_6_4 ) 
-_2_6_5 if connect[0] is True: 
-_2_6_6 graph.add_edge(agent.unique_id, neighbor.unique_id, step=0) 
-_2_6_7 longrange = [x for x in self.schedule.agents if x not in closerange and
+_2_5_7 """ 
+_2_5_8 closerange = [x for x in self.space.get_neighbors_within_distance( 
+_2_5_9 agent, 
+_2_6_0 distance=self.moveRange * self.meandistance, 
+_2_6_1 center=False, 
+_2_6_2 ) if isinstance(x, SenderAgent)] 
+_2_6_3 for neighbor in closerange: 
+_2_6_4 if neighbor.unique_id != agent.unique_id: 
+_2_6_5 connect = random.choices( 
+_2_6_6 population=[True, False], 
+_2_6_7 weights=[self.shortRangeNetworkFactor, 1 - self.shortRangeNetworkFactor], 
+_2_6_8 k=1, 
+_2_6_9 ) 
+_2_7_0 if connect[0] is True: 
+_2_7_1 graph.add_edge(agent.unique_id, neighbor.unique_id, step=0) 
+_2_7_2 longrange = [x for x in self.schedule.agents if x not in closerange and
 isinstance(x, SenderAgent)] 
-_2_6_8 for neighbor in longrange: 
-_2_6_9 if neighbor.unique_id != agent.unique_id: 
-_2_7_0 connect = random.choices( 
-_2_7_1 population=[True, False], 
-_2_7_2 weights=[self.longRangeNetworkFactor, 1 - self.longRangeNetworkFactor], 
-_2_7_3 k=1, 
-_2_7_4 ) 
-_2_7_5 if connect[0] is True: 
-_2_7_6 graph.add_edge(agent.unique_id, neighbor.unique_id, step=0) 
-_2_7_7 
-_2_7_8 def step(self) -> None: 
-_2_7_9 """One simulation step with data collection.""" 
-_2_8_0 self.step_no_data() 
-_2_8_1 self.datacollector.collect(self) 
+_2_7_3 for neighbor in longrange: 
+_2_7_4 if neighbor.unique_id != agent.unique_id: 
+_2_7_5 connect = random.choices( 
+_2_7_6 population=[True, False], 
+_2_7_7 weights=[self.longRangeNetworkFactor, 1 - self.longRangeNetworkFactor], 
+_2_7_8 k=1, 
+_2_7_9 ) 
+_2_8_0 if connect[0] is True: 
+_2_8_1 graph.add_edge(agent.unique_id, neighbor.unique_id, step=0) 
 _2_8_2 
-_2_8_3 def step_no_data(self) -> None: 
-_2_8_4 """One simulation step without data collection.""" 
-_2_8_5 self.scaleSendInput.update( 
-_2_8_6 **{x.unique_id: x.numLettersReceived for x in self.schedule.agents}, 
-_2_8_7 ) 
-_2_8_8 # Update the currently held topicVec for each agent, based 
-_2_8_9 # on potential previouse communication events. 
-_2_9_0 for agent in self.schedule.agents: 
-_2_9_1 agent.topicVec = self.updatedTopicsDict[agent.unique_id] 
-_2_9_2 self.schedule.step() 
-_2_9_3 
-_2_9_4 def run(self, n:int) -> None: 
-_2_9_5 """Run the model for n steps. 
-_2_9_6 
-_2_9_7 Data collection is only run at the end of n steps. 
-_2_9_8 This is useful for batch runs accross different 
-_2_9_9 parameters. 
-_3_0_0 """ 
-_3_0_1 if self.debug is True: 
-_3_0_2 for _ in tqdm(range(n)): 
-_3_0_3 self.step_no_data() 
-_3_0_4 else: 
-_3_0_5 for _ in range(n): 
-_3_0_6 self.step_no_data() 
-_3_0_7 self.datacollector.collect(self) 
+_2_8_3 def step(self) -> None: 
+_2_8_4 """One simulation step with data collection.""" 
+_2_8_5 self.step_no_data() 
+_2_8_6 self.datacollector.collect(self) 
+_2_8_7 
+_2_8_8 def step_no_data(self) -> None: 
+_2_8_9 """One simulation step without data collection.""" 
+_2_9_0 self.scaleSendInput.update( 
+_2_9_1 **{x.unique_id: x.numLettersReceived for x in self.schedule.agents}, 
+_2_9_2 ) 
+_2_9_3 # Update the currently held topicVec for each agent, based 
+_2_9_4 # on potential previouse communication events and the position 
+_2_9_5 # based on a previous movement. 
+_2_9_6 for agent in self.schedule.agents: 
+_2_9_7 agent.topicVec = self.updatedTopicsDict[agent.unique_id] 
+_2_9_8 newGeom = self.updatedPositionDict[agent.unique_id] 
+_2_9_9 if newGeom[0] != agent.geometry: 
+_3_0_0 self.space.move_sender(agent, newGeom[0], newGeom[1]) 
+_3_0_1 self.schedule.step() 
+_3_0_2 
+_3_0_3 def run(self, n:int) -> None: 
+_3_0_4 """Run the model for n steps. 
+_3_0_5 
+_3_0_6 Data collection is only run at the end of n steps. 
+_3_0_7 This is useful for batch runs accross different 
+_3_0_8 parameters. 
+_3_0_9 """ 
+_3_1_0 if self.debug is True: 
+_3_1_1 for _ in tqdm(range(n)): 
+_3_1_2 self.step_no_data() 
+_3_1_3 else: 
+_3_1_4 for _ in range(n): 
+_3_1_5 self.step_no_data() 
+_3_1_6 self.datacollector.collect(self) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 13:48 +0200
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_277402163e1a7589_server_py.html` & `scicom-0.4.1/tests/reports/html/d_299ddae0d2804fc5_utils_py.html`

 * *Files 8% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/historicalletters/server.py: 100%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/historicalletters/utils.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/server.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/utils.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,134 +50,162 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">22 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">22<span class="text"> run</span></button>
+            <span class="text">39 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">39<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_space_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_space_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_48e31f30a7ef2afb_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 12:29 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""A visualization interface for HistoricalLetters using the older visualization option of mesa."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa_geo</span> <span class="key">as</span> <span class="nam">mg</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">matplotlib</span> <span class="key">import</span> <span class="nam">colors</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">modules</span> <span class="key">import</span> <span class="nam">ChartVisualization</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">RegionAgent</span><span class="op">,</span> <span class="nam">SenderAgent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">HistoricalLetters</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="str">"population"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">        <span class="str">"Number of persons"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">        <span class="num">50</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose how many senders to include in the model."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">    <span class="str">"useSocialNetwork"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Checkbox</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="str">"Create initial social network of agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">    <span class="str">"useActivation"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Checkbox</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="str">"Use heterogenous activations"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="str">"similarityThreshold"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="str">"Similarity threshold"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="num">0.5</span><span class="op">,</span> <span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose how similar two agents topics have to be, to send a letter."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="str">"moveRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="str">"Range for moving position&lt;/br>(% of mean agent distances)"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="num">0.01</span><span class="op">,</span> <span class="num">0.00</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose the visibility range for finding potential locations to move to."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="str">"letterRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="str">"Range for letter sending&lt;/br>(% of mean agent distances)"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="num">0.2</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span> <span class="num">1.0</span><span class="op">,</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="nam">description</span><span class="op">=</span><span class="str">"Choose the visibility range for finding potential recipients."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="key">def</span> <span class="nam">topic_draw</span><span class="op">(</span><span class="nam">agent</span><span class="op">:</span><span class="nam">mg</span><span class="op">.</span><span class="nam">GeoAgent</span><span class="op">)</span> <span class="op">-></span> <span class="nam">dict</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">    <span class="str">"""Define visualization strategies for agents.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t"><span class="str">    Region agents get the main color as a mean of</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t"><span class="str">    all region agents topic vectors.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t"><span class="str">    Sender agetns have the color of their current</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t"><span class="str">    topic vector.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="nam">portrayal</span> <span class="op">=</span> <span class="op">{</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">    <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">RegionAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">color</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">has_main_topic</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">color</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">    <span class="key">elif</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">SenderAgent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"radius"</span><span class="op">]</span> <span class="op">=</span> <span class="num">5</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"shape"</span><span class="op">]</span> <span class="op">=</span> <span class="str">"circle"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="nam">portrayal</span><span class="op">[</span><span class="str">"description"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">str</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="key">return</span> <span class="nam">portrayal</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""Utility functions for HistoricalLetters."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">random</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">geopandas</span> <span class="key">as</span> <span class="nam">gpd</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">import</span> <span class="nam">shapely</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">from</span> <span class="nam">shapely</span> <span class="key">import</span> <span class="nam">LineString</span><span class="op">,</span> <span class="nam">contains</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">def</span> <span class="nam">createData</span><span class="op">(</span><span class="nam">population</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span> <span class="nam">populationDistribution</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span> <span class="op">-></span> <span class="nam">gpd</span><span class="op">.</span><span class="nam">GeoDataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="str">"""Create random coordinates of historically motivated choices.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    The routine samples a population sample based on estimated</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    population density of that coordinate.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="str">    The original CSV dataset is retrieved from</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="str">    https://doi.org/10.1371/journal.pone.0162678.s003</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="nam">initial_population_choices</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">read_csv</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">populationDistribution</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="nam">encoding</span><span class="op">=</span><span class="str">"latin1"</span><span class="op">,</span> <span class="nam">index_col</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="com"># Calculate relative population ratio to estimated settlement area.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="com"># This will correspont to the probabilities to draw an agent from</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">    <span class="com"># these coordinates.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="nam">relPop</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">    <span class="key">for</span> <span class="nam">_</span><span class="op">,</span> <span class="nam">row</span> <span class="key">in</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">relPop</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="nam">row</span><span class="op">[</span><span class="str">"Area"</span><span class="op">]</span> <span class="op">/</span> <span class="nam">row</span><span class="op">[</span><span class="str">"Pop"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"relPop"</span><span class="op">,</span> <span class="nam">relPop</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="com"># Four costal cities can not be considered, since the modern NUTS regions</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">    <span class="com"># give zero overlap to their coordinates, leading to potential errors when</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">    <span class="com"># agents move.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">    <span class="nam">excludeCoastal</span> <span class="op">=</span> <span class="op">[</span><span class="str">"Great Yarmouth"</span><span class="op">,</span> <span class="str">"Kingston-upon-Hull"</span><span class="op">,</span> <span class="str">"Calais"</span><span class="op">,</span> <span class="str">"Toulon"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">    <span class="nam">initial_population_choices</span> <span class="op">=</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">"~Settlement.isin(@excludeCoastal)"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">    <span class="nam">loc_probabilities</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="nam">loc_values</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="key">for</span> <span class="nam">_</span><span class="op">,</span> <span class="nam">row</span> <span class="key">in</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="nam">loc_probabilities</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">row</span><span class="op">[</span><span class="str">"relPop"</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="nam">loc_values</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">            <span class="op">(</span><span class="nam">row</span><span class="op">[</span><span class="str">"longitude"</span><span class="op">]</span><span class="op">,</span> <span class="nam">row</span><span class="op">[</span><span class="str">"latitude"</span><span class="op">]</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">    <span class="nam">coordinates</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">loc_values</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">loc_probabilities</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">k</span><span class="op">=</span><span class="nam">population</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="nam">coordinates</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">"longitude"</span><span class="op">,</span> <span class="str">"latitude"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t"><span class="nam">map_element</span> <span class="op">=</span> <span class="nam">mg</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">MapModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">    <span class="nam">portrayal_method</span><span class="op">=</span><span class="nam">topic_draw</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">    <span class="nam">view</span><span class="op">=</span><span class="op">[</span><span class="num">52</span><span class="op">,</span> <span class="num">12</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="nam">zoom</span><span class="op">=</span><span class="num">4</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">    <span class="nam">map_width</span><span class="op">=</span><span class="num">700</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">    <span class="nam">map_height</span><span class="op">=</span><span class="num">500</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">    <span class="nam">data</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">        <span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">        <span class="str">"unique_id"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">        <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">            <span class="str">"P"</span> <span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">population</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t"><span class="nam">chart</span> <span class="op">=</span> <span class="nam">ChartVisualization</span><span class="op">.</span><span class="nam">ChartModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">    <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Movements"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"red"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Clusters"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"black"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Letters"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"green"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">    <span class="nam">data_collector_name</span><span class="op">=</span><span class="str">"datacollector"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t"><span class="nam">server</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">ModularServer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">    <span class="nam">HistoricalLetters</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">    <span class="op">[</span><span class="nam">map_element</span><span class="op">,</span> <span class="nam">chart</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="str">"Historical Letters"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">    <span class="com"># Read the Geodataframe with EPSG:4326 projection.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">    <span class="nam">geodf</span> <span class="op">=</span> <span class="nam">gpd</span><span class="op">.</span><span class="nam">GeoDataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="nam">data</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="nam">geometry</span><span class="op">=</span><span class="nam">gpd</span><span class="op">.</span><span class="nam">points_from_xy</span><span class="op">(</span><span class="nam">data</span><span class="op">.</span><span class="nam">longitude</span><span class="op">,</span> <span class="nam">data</span><span class="op">.</span><span class="nam">latitude</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="nam">crs</span><span class="op">=</span><span class="str">"EPSG:4326"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">    <span class="com"># Transform to EPSG:3857, since the NUTS shape files are in</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">    <span class="com"># that projection.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">    <span class="key">return</span> <span class="nam">geodf</span><span class="op">.</span><span class="nam">to_crs</span><span class="op">(</span><span class="str">"EPSG:3857"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t"><span class="key">def</span> <span class="nam">getRegion</span><span class="op">(</span><span class="nam">geometry</span><span class="op">:</span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">point</span><span class="op">.</span><span class="nam">Point</span><span class="op">,</span> <span class="nam">model</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="str">"""Get region ID overlaping with input geometry.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t"><span class="str">    Might e.g. fail if line of connection crosses international</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t"><span class="str">    waters, since there is no NUTS region assigned then.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">    <span class="nam">regionID</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">regions</span> <span class="key">if</span> <span class="nam">contains</span><span class="op">(</span><span class="nam">x</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">    <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">    <span class="key">if</span> <span class="nam">regionID</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="key">return</span> <span class="nam">regionID</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">    <span class="nam">text</span> <span class="op">=</span> <span class="str">f"Can not find overlaping region to geometry {geometry}"</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="key">raise</span> <span class="nam">IndexError</span><span class="op">(</span><span class="nam">text</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="key">def</span> <span class="nam">getPositionOnLine</span><span class="op">(</span><span class="nam">start</span><span class="op">:</span><span class="nam">shapely</span><span class="op">.</span><span class="nam">Point</span><span class="op">,</span> <span class="nam">target</span><span class="op">:</span><span class="nam">shapely</span><span class="op">.</span><span class="nam">Point</span><span class="op">)</span> <span class="op">-></span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">Point</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">    <span class="str">"""Interpolate movement along line between two given points.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t"><span class="str">    The amount of moving from start to target is random.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">    <span class="nam">segment</span> <span class="op">=</span> <span class="nam">LineString</span><span class="op">(</span><span class="op">[</span><span class="nam">start</span><span class="op">,</span> <span class="nam">target</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="key">return</span> <span class="nam">segment</span><span class="op">.</span><span class="nam">interpolate</span><span class="op">(</span><span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">)</span><span class="op">,</span> <span class="nam">normalized</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t"><span class="key">def</span> <span class="nam">getNewTopic</span><span class="op">(</span><span class="nam">start</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span> <span class="nam">target</span><span class="op">:</span><span class="nam">tuple</span><span class="op">)</span> <span class="op">-></span> <span class="nam">tuple</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">    <span class="str">"""Interpolate new topic between two topics.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t"><span class="str">    The amount of moving from start to target is random.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">    <span class="nam">p1</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">start</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">    <span class="nam">p2</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">target</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">    <span class="nam">p3</span> <span class="op">=</span> <span class="nam">p1</span> <span class="op">+</span> <span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">p2</span> <span class="op">-</span><span class="nam">p1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">    <span class="key">return</span> <span class="nam">tuple</span><span class="op">(</span><span class="nam">p3</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_space_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_space_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_48e31f30a7ef2afb_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 12:29 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,106 +1,135 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-hhiissttoorriiccaalllleetttteerrss//sseerrvveerr..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//uuttiillss..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 2222 ssttaatteemmeennttss ?  2222 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 3399 ssttaatteemmeennttss ?  3399 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 12:29 +0200
-_1"""A visualization interface for HistoricalLetters using the older
-visualization option of mesa.""" 
-_2import mesa 
-_3import mesa_geo as mg 
-_4from matplotlib import colors 
-_5from mesa.visualization.modules import ChartVisualization 
-_6 
-_7from scicom.historicalletters.agents import RegionAgent, SenderAgent 
-_8from scicom.historicalletters.model import HistoricalLetters 
-_9 
-_1_0model_params = { 
-_1_1 "population": mesa.visualization.Slider( 
-_1_2 "Number of persons", 
-_1_3 50, 10, 100, 10, 
-_1_4 description="Choose how many senders to include in the model.", 
-_1_5 ), 
-_1_6 "useSocialNetwork": mesa.visualization.Checkbox( 
-_1_7 "Create initial social network of agents", 
-_1_8 False, 
-_1_9 ), 
-_2_0 "useActivation": mesa.visualization.Checkbox( 
-_2_1 "Use heterogenous activations", 
-_2_2 False, 
-_2_3 ), 
-_2_4 "similarityThreshold": mesa.visualization.Slider( 
-_2_5 "Similarity threshold", 
-_2_6 0.5, 0.0, 1.0, 0.1, 
-_2_7 description="Choose how similar two agents topics have to be, to send a
-letter.", 
-_2_8 ), 
-_2_9 "moveRange": mesa.visualization.Slider( 
-_3_0 "Range for moving position</br>(% of mean agent distances)", 
-_3_1 0.01, 0.00, 0.5, 0.05, 
-_3_2 description="Choose the visibility range for finding potential locations to
-move to.", 
-_3_3 ), 
-_3_4 "letterRange": mesa.visualization.Slider( 
-_3_5 "Range for letter sending</br>(% of mean agent distances)", 
-_3_6 0.2, 0.1, 1.0, 0.1, 
-_3_7 description="Choose the visibility range for finding potential
-recipients.", 
-_3_8 ), 
-_3_9} 
-_4_0 
-_4_1 
-_4_2def topic_draw(agent:mg.GeoAgent) -> dict: 
-_4_3 """Define visualization strategies for agents. 
-_4_4 
-_4_5 Region agents get the main color as a mean of 
-_4_6 all region agents topic vectors. 
-_4_7 
-_4_8 Sender agetns have the color of their current 
-_4_9 topic vector. 
-_5_0 """ 
-_5_1 portrayal = {} 
-_5_2 if isinstance(agent, RegionAgent): 
-_5_3 color = colors.to_hex(agent.has_main_topic()) 
-_5_4 portrayal["color"] = color 
-_5_5 elif isinstance(agent, SenderAgent): 
-_5_6 colortuple = set(agent.topicVec) 
-_5_7 portrayal["radius"] = 5 
-_5_8 portrayal["shape"] = "circle" 
-_5_9 portrayal["color"] = colors.to_hex(colortuple) 
-_6_0 portrayal["description"] = str(agent.unique_id) 
-_6_1 return portrayal 
+28 12:02 +0200
+_1"""Utility functions for HistoricalLetters.""" 
+_2import random 
+_3 
+_4import geopandas as gpd 
+_5import mesa 
+_6import numpy as np 
+_7import pandas as pd 
+_8import shapely 
+_9from shapely import LineString, contains 
+_1_0 
+_1_1 
+_1_2def createData(population: int, populationDistribution: str) -
+> gpd.GeoDataFrame: 
+_1_3 """Create random coordinates of historically motivated choices. 
+_1_4 
+_1_5 The routine samples a population sample based on estimated 
+_1_6 population density of that coordinate. 
+_1_7 
+_1_8 The original CSV dataset is retrieved from 
+_1_9 https://doi.org/10.1371/journal.pone.0162678.s003 
+_2_0 """ 
+_2_1 initial_population_choices = pd.read_csv( 
+_2_2 populationDistribution, 
+_2_3 encoding="latin1", index_col=0, 
+_2_4 ) 
+_2_5 
+_2_6 # Calculate relative population ratio to estimated settlement area. 
+_2_7 # This will correspont to the probabilities to draw an agent from 
+_2_8 # these coordinates. 
+_2_9 relPop = [] 
+_3_0 
+_3_1 for _, row in initial_population_choices.iterrows(): 
+_3_2 relPop.append( 
+_3_3 row["Area"] / row["Pop"], 
+_3_4 ) 
+_3_5 
+_3_6 initial_population_choices.insert(0, "relPop", relPop) 
+_3_7 
+_3_8 # Four costal cities can not be considered, since the modern NUTS regions 
+_3_9 # give zero overlap to their coordinates, leading to potential errors when 
+_4_0 # agents move. 
+_4_1 excludeCoastal = ["Great Yarmouth", "Kingston-upon-Hull", "Calais",
+"Toulon"] 
+_4_2 initial_population_choices = initial_population_choices.query
+("~Settlement.isin(@excludeCoastal)") 
+_4_3 
+_4_4 loc_probabilities = [] 
+_4_5 loc_values = [] 
+_4_6 for _, row in initial_population_choices.iterrows(): 
+_4_7 loc_probabilities.append(row["relPop"]) 
+_4_8 loc_values.append( 
+_4_9 (row["longitude"], row["latitude"]), 
+_5_0 ) 
+_5_1 
+_5_2 coordinates = random.choices( 
+_5_3 loc_values, 
+_5_4 loc_probabilities, 
+_5_5 k=population, 
+_5_6 ) 
+_5_7 
+_5_8 data = pd.DataFrame( 
+_5_9 coordinates, 
+_6_0 columns=["longitude", "latitude"], 
+_6_1 ) 
 _6_2 
-_6_3map_element = mg.visualization.MapModule( 
-_6_4 portrayal_method=topic_draw, 
-_6_5 view=[52, 12], 
-_6_6 zoom=4, 
-_6_7 map_width=700, 
-_6_8 map_height=500, 
-_6_9) 
+_6_3 data.insert( 
+_6_4 0, 
+_6_5 "unique_id", 
+_6_6 [ 
+_6_7 "P" + str(x) for x in list(range(population)) 
+_6_8 ], 
+_6_9 ) 
 _7_0 
-_7_1chart = ChartVisualization.ChartModule( 
-_7_2 [ 
-_7_3 {"Label": "Movements", "Color": "red"}, 
-_7_4 {"Label": "Clusters", "Color": "black"}, 
-_7_5 {"Label": "Letters", "Color": "green"}, 
-_7_6 ], 
-_7_7 data_collector_name="datacollector", 
-_7_8) 
-_7_9 
-_8_0 
-_8_1server = mesa.visualization.ModularServer( 
-_8_2 HistoricalLetters, 
-_8_3 [map_element, chart], 
-_8_4 "Historical Letters", 
-_8_5 model_params, 
-_8_6) 
+_7_1 # Read the Geodataframe with EPSG:4326 projection. 
+_7_2 geodf = gpd.GeoDataFrame( 
+_7_3 data, 
+_7_4 geometry=gpd.points_from_xy(data.longitude, data.latitude), 
+_7_5 crs="EPSG:4326", 
+_7_6 ) 
+_7_7 
+_7_8 # Transform to EPSG:3857, since the NUTS shape files are in 
+_7_9 # that projection. 
+_8_0 return geodf.to_crs("EPSG:3857") 
+_8_1 
+_8_2 
+_8_3def getRegion(geometry: shapely.geometry.point.Point, model:mesa.Model) -
+> str: 
+_8_4 """Get region ID overlaping with input geometry. 
+_8_5 
+_8_6 Might e.g. fail if line of connection crosses international 
+_8_7 waters, since there is no NUTS region assigned then. 
+_8_8 """ 
+_8_9 regionID = [ 
+_9_0 x.unique_id for x in model.regions if contains(x.geometry, geometry) 
+_9_1 ] 
+_9_2 if regionID: 
+_9_3 return regionID[0] 
+_9_4 text = f"Can not find overlaping region to geometry {geometry}" 
+_9_5 raise IndexError(text) 
+_9_6 
+_9_7 
+_9_8def getPositionOnLine(start:shapely.Point, target:shapely.Point) -
+> shapely.Point: 
+_9_9 """Interpolate movement along line between two given points. 
+_1_0_0 
+_1_0_1 The amount of moving from start to target is random. 
+_1_0_2 """ 
+_1_0_3 segment = LineString([start, target]) 
+_1_0_4 return segment.interpolate(random.uniform(0.0, 1.0), normalized=True) 
+_1_0_5 
+_1_0_6def getNewTopic(start: tuple, target:tuple) -> tuple: 
+_1_0_7 """Interpolate new topic between two topics. 
+_1_0_8 
+_1_0_9 The amount of moving from start to target is random. 
+_1_1_0 """ 
+_1_1_1 p1 = np.array(start) 
+_1_1_2 p2 = np.array(target) 
+_1_1_3 p3 = p1 + random.uniform(0, 1) * (p2 -p1) 
+_1_1_4 return tuple(p3) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 12:29 +0200
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_277402163e1a7589_space_py.html` & `scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_space_py.html`

 * *Files 0% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/historicalletters/space.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/historicalletters/space.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/space.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/historicalletters/space.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">27 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">27<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_utils_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-19 14:30 +0200
+            created at 2024-04-26 17:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -139,18 +139,18 @@
     <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="str">"""Remove sender."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">remove_agent</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">remove_sender_from_region</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_277402163e1a7589_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_utils_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-19 14:30 +0200
+            created at 2024-04-26 17:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,21 +1,21 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
 hhiissttoorriiccaalllleetttteerrss//ssppaaccee..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 2277 ssttaatteemmeennttss ?  2277 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-19 14:30 +0200
+26 17:50 +0200
 _1"""The geographical space for HistoricalLetters.""" 
 _2 
 _3import mesa 
 _4import mesa_geo as mg 
 _5 
 _6from scicom.historicalletters.agents import RegionAgent, SenderAgent 
 _7 
@@ -69,8 +69,8 @@
 _5_4 self.add_sender(agent, regionID) 
 _5_5 
 _5_6 def __remove_sender(self, agent: SenderAgent) -> None: 
 _5_7 """Remove sender.""" 
 _5_8 super().remove_agent(agent) 
 _5_9 self.remove_sender_from_region(agent) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-19 14:30 +0200
+26 17:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_277402163e1a7589_utils_py.html` & `scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_agents_py.html`

 * *Files 27% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/historicalletters/utils.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/agents.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/utils.py</b>:
-            <span class="pc_cov">100%</span>
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/agents.py</b>:
+            <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,162 +50,212 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">39 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">39<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
+            <span class="text">71 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">71<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_space_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_8a655f2681f565c9_interface_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 12:29 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""Utility functions for HistoricalLetters."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">random</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">geopandas</span> <span class="key">as</span> <span class="nam">gpd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">import</span> <span class="nam">shapely</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">from</span> <span class="nam">shapely</span> <span class="key">import</span> <span class="nam">LineString</span><span class="op">,</span> <span class="nam">contains</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">def</span> <span class="nam">createData</span><span class="op">(</span><span class="nam">population</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span> <span class="nam">populationDistribution</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span> <span class="op">-></span> <span class="nam">gpd</span><span class="op">.</span><span class="nam">GeoDataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="str">"""Create random coordinates of historically motivated choices.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    The routine samples a population sample based on estimated</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    population density of that coordinate.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="str">    The original CSV dataset is retrieved from</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="str">    https://doi.org/10.1371/journal.pone.0162678.s003</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="nam">initial_population_choices</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">read_csv</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">populationDistribution</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="nam">encoding</span><span class="op">=</span><span class="str">"latin1"</span><span class="op">,</span> <span class="nam">index_col</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="com"># Calculate relative population ratio to estimated settlement area.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="com"># This will correspont to the probabilities to draw an agent from</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">    <span class="com"># these coordinates.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="nam">relPop</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">    <span class="key">for</span> <span class="nam">_</span><span class="op">,</span> <span class="nam">row</span> <span class="key">in</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">relPop</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="nam">row</span><span class="op">[</span><span class="str">"Area"</span><span class="op">]</span> <span class="op">/</span> <span class="nam">row</span><span class="op">[</span><span class="str">"Pop"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"relPop"</span><span class="op">,</span> <span class="nam">relPop</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">ageFunction</span><span class="op">,</span> <span class="nam">epistemicRange</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">class</span> <span class="nam">ScientistAgent</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="str">"""A scientist with an idea.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="str">    Each scientist has a geographic position, is related to other</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">    agents by a social network, and is intialized with a starttime, that</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    describes the year at which the agent becomes active. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="nam">model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="nam">pos</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># The projected position in 2D epistemic space. For actual movements and neighborhood calculations take into account z coordinate as well.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="nam">topicledger</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span>  <span class="com"># Representing the mental model of the agent: A list of all visited topics represented as triples [(x,y,z), (x,y,z)]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">geopos</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># Representing scientific affiliation, a tuple of latitude/longitude of current affiliation. Could also keep track of previous affiliations</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="nam">birthtime</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span>  <span class="com"># A step number that represents the timestep at which the scientist becomes active</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="nam">productivity</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># Parameters determining the shape of the activation weight function</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">opposition</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>  <span class="com"># Whether or not an agent is always oposing new epistemic positions.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span> <span class="op">=</span> <span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">a</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">b</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">1</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">c</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">2</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span> <span class="op">=</span> <span class="nam">topicledger</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">geopos</span> <span class="op">=</span> <span class="nam">geopos</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span> <span class="op">=</span> <span class="nam">birthtime</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">opposition</span> <span class="op">=</span> <span class="nam">opposition</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="com"># Four costal cities can not be considered, since the modern NUTS regions</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">    <span class="com"># give zero overlap to their coordinates, leading to potential errors when</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">    <span class="com"># agents move.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">    <span class="nam">excludeCoastal</span> <span class="op">=</span> <span class="op">[</span><span class="str">"Great Yarmouth"</span><span class="op">,</span> <span class="str">"Kingston-upon-Hull"</span><span class="op">,</span> <span class="str">"Calais"</span><span class="op">,</span> <span class="str">"Toulon"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">    <span class="nam">initial_population_choices</span> <span class="op">=</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">query</span><span class="op">(</span><span class="str">"~Settlement.isin(@excludeCoastal)"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">    <span class="nam">loc_probabilities</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="nam">loc_values</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="key">for</span> <span class="nam">_</span><span class="op">,</span> <span class="nam">row</span> <span class="key">in</span> <span class="nam">initial_population_choices</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="nam">loc_probabilities</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">row</span><span class="op">[</span><span class="str">"relPop"</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="nam">loc_values</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">            <span class="op">(</span><span class="nam">row</span><span class="op">[</span><span class="str">"longitude"</span><span class="op">]</span><span class="op">,</span> <span class="nam">row</span><span class="op">[</span><span class="str">"latitude"</span><span class="op">]</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">    <span class="nam">coordinates</span> <span class="op">=</span> <span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">loc_values</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">loc_probabilities</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">k</span><span class="op">=</span><span class="nam">population</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="nam">coordinates</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="nam">columns</span><span class="op">=</span><span class="op">[</span><span class="str">"longitude"</span><span class="op">,</span> <span class="str">"latitude"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">    <span class="nam">data</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">        <span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">        <span class="str">"unique_id"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">        <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">            <span class="str">"P"</span> <span class="op">+</span> <span class="nam">str</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">population</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">    <span class="com"># Read the Geodataframe with EPSG:4326 projection.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">    <span class="nam">geodf</span> <span class="op">=</span> <span class="nam">gpd</span><span class="op">.</span><span class="nam">GeoDataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="nam">data</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="nam">geometry</span><span class="op">=</span><span class="nam">gpd</span><span class="op">.</span><span class="nam">points_from_xy</span><span class="op">(</span><span class="nam">data</span><span class="op">.</span><span class="nam">longitude</span><span class="op">,</span> <span class="nam">data</span><span class="op">.</span><span class="nam">latitude</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="nam">crs</span><span class="op">=</span><span class="str">"EPSG:4326"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">    <span class="com"># Transform to EPSG:3857, since the NUTS shape files are in</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">    <span class="com"># that projection.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">    <span class="key">return</span> <span class="nam">geodf</span><span class="op">.</span><span class="nam">to_crs</span><span class="op">(</span><span class="str">"EPSG:3857"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t"><span class="key">def</span> <span class="nam">getRegion</span><span class="op">(</span><span class="nam">geometry</span><span class="op">:</span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">geometry</span><span class="op">.</span><span class="nam">point</span><span class="op">.</span><span class="nam">Point</span><span class="op">,</span> <span class="nam">model</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span> <span class="op">-></span> <span class="nam">str</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="str">"""Get region ID overlaping with input geometry.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t"><span class="str">    Might e.g. fail if line of connection crosses international</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t"><span class="str">    waters, since there is no NUTS region assigned then.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">    <span class="nam">regionID</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">regions</span> <span class="key">if</span> <span class="nam">contains</span><span class="op">(</span><span class="nam">x</span><span class="op">.</span><span class="nam">geometry</span><span class="op">,</span> <span class="nam">geometry</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">    <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">    <span class="key">if</span> <span class="nam">regionID</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="key">return</span> <span class="nam">regionID</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">    <span class="nam">text</span> <span class="op">=</span> <span class="str">f"Can not find overlaping region to geometry {geometry}"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="key">raise</span> <span class="nam">IndexError</span><span class="op">(</span><span class="nam">text</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="key">def</span> <span class="nam">getPositionOnLine</span><span class="op">(</span><span class="nam">start</span><span class="op">:</span><span class="nam">shapely</span><span class="op">.</span><span class="nam">Point</span><span class="op">,</span> <span class="nam">target</span><span class="op">:</span><span class="nam">shapely</span><span class="op">.</span><span class="nam">Point</span><span class="op">)</span> <span class="op">-></span> <span class="nam">shapely</span><span class="op">.</span><span class="nam">Point</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">    <span class="str">"""Interpolate movement along line between two given points.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t"><span class="str">    The amount of moving from start to target is random.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">    <span class="nam">segment</span> <span class="op">=</span> <span class="nam">LineString</span><span class="op">(</span><span class="op">[</span><span class="nam">start</span><span class="op">,</span> <span class="nam">target</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="key">return</span> <span class="nam">segment</span><span class="op">.</span><span class="nam">interpolate</span><span class="op">(</span><span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0.0</span><span class="op">,</span> <span class="num">1.0</span><span class="op">)</span><span class="op">,</span> <span class="nam">normalized</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t"><span class="key">def</span> <span class="nam">getNewTopic</span><span class="op">(</span><span class="nam">start</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span> <span class="nam">target</span><span class="op">:</span><span class="nam">tuple</span><span class="op">)</span> <span class="op">-></span> <span class="nam">tuple</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">    <span class="str">"""Interpolate new topic between two topics.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t"><span class="str">    The amount of moving from start to target is random.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">    <span class="nam">p1</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">start</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">    <span class="nam">p2</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">target</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">    <span class="nam">p3</span> <span class="op">=</span> <span class="nam">p1</span> <span class="op">+</span> <span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">p2</span> <span class="op">-</span><span class="nam">p1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">    <span class="key">return</span> <span class="nam">tuple</span><span class="op">(</span><span class="nam">p3</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="key">def</span> <span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">float</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="str">"""Return an age dependent activation weight.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="str">        A bell-shaped function with a ramp, plateuax and decend.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="str">        Can be drawn from random distribution in model initialization.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="key">return</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">a</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">b</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">c</span><span class="op">,</span> <span class="nam">radius</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="key">def</span> <span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="str">"""Calculate the change in epistemic space.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t"><span class="str">        From all neighbors select one random choice.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t"><span class="str">        To update the agents position, determine the heading </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t"><span class="str">        towards the selected neighbor. If the agent is an</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t"><span class="str">        oposing one, inverte the direction. Then select a </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t"><span class="str">        random amount to move into the selected direction.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t"><span class="str">        The new position is noted down in the topic ledger</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t"><span class="str">        an the the agent is moved.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="com"># Select random elemt from potential neighbors</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="nam">neighborID</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">neighborID</span><span class="op">,</span> <span class="op">(</span><span class="nam">float</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">            <span class="nam">neighbors</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span> <span class="key">if</span> <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">==</span> <span class="nam">neighborID</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">                <span class="nam">neighbor</span> <span class="op">=</span> <span class="nam">neighbors</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">            <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">                <span class="key">return</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">            <span class="nam">neighbor</span> <span class="op">=</span> <span class="nam">neighborID</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="com"># Get heading</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="nam">direction</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_heading</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="com"># Some agents always opose the epistemic position and therefore move in the oposite direction</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">opposition</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">            <span class="nam">direction</span> <span class="op">=</span> <span class="op">(</span><span class="op">-</span> <span class="nam">direction</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="op">-</span> <span class="nam">direction</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="com"># Select new postion with random amount into direction of neighbor</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="nam">amount</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="nam">new_pos</span> <span class="op">=</span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">+</span> <span class="nam">amount</span> <span class="op">*</span> <span class="nam">direction</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">+</span> <span class="nam">amount</span> <span class="op">*</span> <span class="nam">direction</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">        <span class="com"># New mental position</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">        <span class="nam">topic</span> <span class="op">=</span> <span class="op">(</span><span class="nam">new_pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">        <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">            <span class="com"># Move agent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">topic</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">move_agent</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">        <span class="key">except</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">            <span class="com"># Out of bounds of epi space</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">            <span class="com"># TODO: What is a sensible exception of movement in this case.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">            <span class="com"># Current solution: Append topic to ledger but do not move</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">topic</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">    <span class="key">def</span> <span class="nam">updateSocialNetwork</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="str">"""Create new links in agents social network."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">    <span class="key">def</span> <span class="nam">moveGeoSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="key">def</span> <span class="nam">moveSocSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">maxDist</span><span class="op">=</span><span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="str">"""Change epistemic position based on social network."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="nam">neighbors</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">currentTime</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">        <span class="nam">G</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="nam">H</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">Graph</span><span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span><span class="op">)</span> <span class="key">for</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">G</span><span class="op">.</span><span class="nam">edges</span><span class="op">(</span><span class="nam">data</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">e</span><span class="op">[</span><span class="str">"time"</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="nam">currentTime</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="key">for</span> <span class="nam">dist</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="nam">maxDist</span> <span class="op">+</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">            <span class="nam">neighb</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">descendants_at_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">                <span class="nam">H</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">                <span class="nam">dist</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">            <span class="nam">neighbors</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">list</span><span class="op">(</span><span class="nam">neighb</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">            <span class="key">return</span> <span class="key">True</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">            <span class="key">return</span> <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">    <span class="key">def</span> <span class="nam">moveEpiSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">        <span class="str">"""Change epistemic position based on distance in epistemic space."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">neighbors</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">            <span class="nam">radius</span><span class="op">=</span><span class="nam">epistemicRange</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">epiRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">            <span class="com"># Random search for new epistemic position</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">            <span class="nam">direction</span> <span class="op">=</span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="nam">new_pos</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span> <span class="op">*</span> <span class="nam">direction</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">move_agent</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">    <span class="key">def</span> <span class="nam">attendConference</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">        <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">        <span class="str">"""Agents activity starts after having reached the birthtime.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t"><span class="str">        </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t"><span class="str">        After initial start, at each step the agents age is increased by one.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t"><span class="str">        Each agent has a randomly generated age-dependent activation </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t"><span class="str">        probability. Moveing happens first due to social connections. If </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t"><span class="str">        no move due to social connections was possible, a move due to </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t"><span class="str">        epistemic space search is attempted.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t"><span class="str">        Once the possible activation weight drops below a threshold, </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t"><span class="str">        the agent is removed from the schedule.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">            <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="key">elif</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="num">0.00001</span> <span class="key">and</span> <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">></span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">remove</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">            <span class="com"># self.age += 1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">            <span class="nam">currentActivation</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">                <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">                    <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">                <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">                <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">            <span class="key">if</span> <span class="nam">currentActivation</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">                <span class="com"># TODO: Should the choice of movement be another random process?</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">                <span class="nam">res</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">moveSocSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">                <span class="key">if</span> <span class="nam">res</span> <span class="key">is</span> <span class="key">False</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">moveEpiSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_space_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_8a655f2681f565c9_interface_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_interface_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 12:29 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,135 +1,191 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-hhiissttoorriiccaalllleetttteerrss//uuttiillss..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//aaggeennttss..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 3399 ssttaatteemmeennttss ?  3399 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 12:29 +0200
-_1"""Utility functions for HistoricalLetters.""" 
-_2import random 
-_3 
-_4import geopandas as gpd 
-_5import mesa 
-_6import numpy as np 
-_7import pandas as pd 
-_8import shapely 
-_9from shapely import LineString, contains 
-_1_0 
-_1_1 
-_1_2def createData(population: int, populationDistribution: str) -
-> gpd.GeoDataFrame: 
-_1_3 """Create random coordinates of historically motivated choices. 
-_1_4 
-_1_5 The routine samples a population sample based on estimated 
-_1_6 population density of that coordinate. 
-_1_7 
-_1_8 The original CSV dataset is retrieved from 
-_1_9 https://doi.org/10.1371/journal.pone.0162678.s003 
-_2_0 """ 
-_2_1 initial_population_choices = pd.read_csv( 
-_2_2 populationDistribution, 
-_2_3 encoding="latin1", index_col=0, 
-_2_4 ) 
-_2_5 
-_2_6 # Calculate relative population ratio to estimated settlement area. 
-_2_7 # This will correspont to the probabilities to draw an agent from 
-_2_8 # these coordinates. 
-_2_9 relPop = [] 
-_3_0 
-_3_1 for _, row in initial_population_choices.iterrows(): 
-_3_2 relPop.append( 
-_3_3 row["Area"] / row["Pop"], 
-_3_4 ) 
-_3_5 
-_3_6 initial_population_choices.insert(0, "relPop", relPop) 
+********** 7711 ssttaatteemmeennttss ?  00 rruunn 7711 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
+26 17:47 +0200
+_1 
+_2import mesa 
+_3import networkx as nx 
+_4 
+_5from scicom.knowledgespread.utils import ageFunction, epistemicRange 
+_6 
+_7 
+_8class ScientistAgent(mesa.Agent): 
+_9 """A scientist with an idea. 
+_1_0  
+_1_1 Each scientist has a geographic position, is related to other 
+_1_2 agents by a social network, and is intialized with a starttime, that 
+_1_3 describes the year at which the agent becomes active.  
+_1_4 """ 
+_1_5 
+_1_6 def __init__( 
+_1_7 self, 
+_1_8 unique_id, 
+_1_9 model, 
+_2_0 pos: tuple, # The projected position in 2D epistemic space. For actual
+movements and neighborhood calculations take into account z coordinate as
+well. 
+_2_1 topicledger: list, # Representing the mental model of the agent: A list of
+all visited topics represented as triples [(x,y,z), (x,y,z)] 
+_2_2 geopos: tuple, # Representing scientific affiliation, a tuple of latitude/
+longitude of current affiliation. Could also keep track of previous
+affiliations 
+_2_3 birthtime: int, # A step number that represents the timestep at which the
+scientist becomes active 
+_2_4 productivity: tuple, # Parameters determining the shape of the activation
+weight function 
+_2_5 opposition: bool = False, # Whether or not an agent is always oposing new
+epistemic positions. 
+_2_6 ): 
+_2_7 super().__init__(unique_id, model) 
+_2_8 self.pos = pos 
+_2_9 self.a = productivity[0] 
+_3_0 self.b = productivity[1] 
+_3_1 self.c = productivity[2] 
+_3_2 self.topicledger = topicledger 
+_3_3 self.geopos = geopos 
+_3_4 self.birthtime = birthtime 
+_3_5 self.age = 0 
+_3_6 self.opposition = opposition 
 _3_7 
-_3_8 # Four costal cities can not be considered, since the modern NUTS regions 
-_3_9 # give zero overlap to their coordinates, leading to potential errors when 
-_4_0 # agents move. 
-_4_1 excludeCoastal = ["Great Yarmouth", "Kingston-upon-Hull", "Calais",
-"Toulon"] 
-_4_2 initial_population_choices = initial_population_choices.query
-("~Settlement.isin(@excludeCoastal)") 
-_4_3 
-_4_4 loc_probabilities = [] 
-_4_5 loc_values = [] 
-_4_6 for _, row in initial_population_choices.iterrows(): 
-_4_7 loc_probabilities.append(row["relPop"]) 
-_4_8 loc_values.append( 
-_4_9 (row["longitude"], row["latitude"]), 
-_5_0 ) 
-_5_1 
-_5_2 coordinates = random.choices( 
-_5_3 loc_values, 
-_5_4 loc_probabilities, 
-_5_5 k=population, 
-_5_6 ) 
-_5_7 
-_5_8 data = pd.DataFrame( 
-_5_9 coordinates, 
-_6_0 columns=["longitude", "latitude"], 
-_6_1 ) 
-_6_2 
-_6_3 data.insert( 
-_6_4 0, 
-_6_5 "unique_id", 
-_6_6 [ 
-_6_7 "P" + str(x) for x in list(range(population)) 
-_6_8 ], 
-_6_9 ) 
-_7_0 
-_7_1 # Read the Geodataframe with EPSG:4326 projection. 
-_7_2 geodf = gpd.GeoDataFrame( 
-_7_3 data, 
-_7_4 geometry=gpd.points_from_xy(data.longitude, data.latitude), 
-_7_5 crs="EPSG:4326", 
-_7_6 ) 
-_7_7 
-_7_8 # Transform to EPSG:3857, since the NUTS shape files are in 
-_7_9 # that projection. 
-_8_0 return geodf.to_crs("EPSG:3857") 
-_8_1 
-_8_2 
-_8_3def getRegion(geometry: shapely.geometry.point.Point, model:mesa.Model) -
-> str: 
-_8_4 """Get region ID overlaping with input geometry. 
-_8_5 
-_8_6 Might e.g. fail if line of connection crosses international 
-_8_7 waters, since there is no NUTS region assigned then. 
-_8_8 """ 
-_8_9 regionID = [ 
-_9_0 x.unique_id for x in model.regions if contains(x.geometry, geometry) 
-_9_1 ] 
-_9_2 if regionID: 
-_9_3 return regionID[0] 
-_9_4 text = f"Can not find overlaping region to geometry {geometry}" 
-_9_5 raise IndexError(text) 
-_9_6 
-_9_7 
-_9_8def getPositionOnLine(start:shapely.Point, target:shapely.Point) -
-> shapely.Point: 
-_9_9 """Interpolate movement along line between two given points. 
-_1_0_0 
-_1_0_1 The amount of moving from start to target is random. 
-_1_0_2 """ 
-_1_0_3 segment = LineString([start, target]) 
-_1_0_4 return segment.interpolate(random.uniform(0.0, 1.0), normalized=True) 
-_1_0_5 
-_1_0_6def getNewTopic(start: tuple, target:tuple) -> tuple: 
-_1_0_7 """Interpolate new topic between two topics. 
-_1_0_8 
-_1_0_9 The amount of moving from start to target is random. 
-_1_1_0 """ 
-_1_1_1 p1 = np.array(start) 
-_1_1_2 p2 = np.array(target) 
-_1_1_3 p3 = p1 + random.uniform(0, 1) * (p2 -p1) 
-_1_1_4 return tuple(p3) 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 12:29 +0200
+_3_8 def _currentActivationWeight(self) -> float: 
+_3_9 """Return an age dependent activation weight. 
+_4_0 
+_4_1 A bell-shaped function with a ramp, plateuax and decend. 
+_4_2 Can be drawn from random distribution in model initialization. 
+_4_3 """ 
+_4_4 return ageFunction(self, self.a, self.b, self.c, radius=1) 
+_4_5 
+_4_6 def _changeEpistemicPosition(self, neighbors): 
+_4_7 """Calculate the change in epistemic space. 
+_4_8 
+_4_9 From all neighbors select one random choice. 
+_5_0 To update the agents position, determine the heading  
+_5_1 towards the selected neighbor. If the agent is an 
+_5_2 oposing one, inverte the direction. Then select a  
+_5_3 random amount to move into the selected direction. 
+_5_4 The new position is noted down in the topic ledger 
+_5_5 an the the agent is moved. 
+_5_6 """ 
+_5_7 # Select random elemt from potential neighbors 
+_5_8 neighborID = self.random.choice(neighbors) 
+_5_9 if isinstance(neighborID, (float, int)): 
+_6_0 neighbors = [ 
+_6_1 x for x in self.model.schedule.agents if x.unique_id == neighborID 
+_6_2 ] 
+_6_3 if neighbors: 
+_6_4 neighbor = neighbors[0] 
+_6_5 else: 
+_6_6 return 
+_6_7 else: 
+_6_8 neighbor = neighborID 
+_6_9 # Get heading 
+_7_0 direction = self.model.space.get_heading(self.pos, neighbor.pos) 
+_7_1 # Some agents always opose the epistemic position and therefore move in the
+oposite direction 
+_7_2 if self.opposition is True: 
+_7_3 direction = (- direction[0], - direction[1]) 
+_7_4 # Select new postion with random amount into direction of neighbor 
+_7_5 amount = self.model.random.random() 
+_7_6 new_pos = (self.pos[0] + amount * direction[0], self.pos[1] + amount *
+direction[1]) 
+_7_7 # New mental position 
+_7_8 topic = (new_pos[0], new_pos[1], self.model.random.random()) 
+_7_9 try: 
+_8_0 # Move agent 
+_8_1 self.topicledger.append(topic) 
+_8_2 self.model.space.move_agent(self, new_pos) 
+_8_3 except: 
+_8_4 # Out of bounds of epi space 
+_8_5 # TODO: What is a sensible exception of movement in this case. 
+_8_6 # Current solution: Append topic to ledger but do not move 
+_8_7 self.topicledger.append(topic) 
+_8_8 
+_8_9 def updateSocialNetwork(self): 
+_9_0 """Create new links in agents social network.""" 
+_9_1 
+_9_2 def moveGeoSpace(self): 
+_9_3 pass 
+_9_4 
+_9_5 def moveSocSpace(self, maxDist=1): 
+_9_6 """Change epistemic position based on social network.""" 
+_9_7 neighbors = [] 
+_9_8 currentTime = self.model.schedule.time 
+_9_9 G = self.model.socialNetwork 
+_1_0_0 H = nx.Graph(((u, v, e) for u, v, e in G.edges(data=True) if e["time"] <=
+currentTime)) 
+_1_0_1 for dist in range(0, maxDist + 1, 1): 
+_1_0_2 neighb = nx.descendants_at_distance( 
+_1_0_3 H, 
+_1_0_4 self.unique_id, 
+_1_0_5 dist, 
+_1_0_6 ) 
+_1_0_7 neighbors.extend(list(neighb)) 
+_1_0_8 if neighbors: 
+_1_0_9 self._changeEpistemicPosition(neighbors) 
+_1_1_0 return True 
+_1_1_1 else: 
+_1_1_2 return False 
+_1_1_3 
+_1_1_4 def moveEpiSpace(self): 
+_1_1_5 """Change epistemic position based on distance in epistemic space.""" 
+_1_1_6 neighbors = self.model.space.get_neighbors( 
+_1_1_7 self.pos, 
+_1_1_8 radius=epistemicRange( 
+_1_1_9 self.model.epiRange, 
+_1_2_0 self.model.schedule.time - self.birthtime, 
+_1_2_1 ), 
+_1_2_2 ) 
+_1_2_3 if neighbors: 
+_1_2_4 self._changeEpistemicPosition(neighbors) 
+_1_2_5 else: 
+_1_2_6 # Random search for new epistemic position 
+_1_2_7 direction = (self.model.random.random(), self.model.random.random()) 
+_1_2_8 new_pos = self.model.random.random() * direction 
+_1_2_9 self.model.space.move_agent(self, new_pos) 
+_1_3_0 
+_1_3_1 def attendConference(self): 
+_1_3_2 pass 
+_1_3_3 
+_1_3_4 def step(self): 
+_1_3_5 """Agents activity starts after having reached the birthtime. 
+_1_3_6  
+_1_3_7 After initial start, at each step the agents age is increased by one. 
+_1_3_8 Each agent has a randomly generated age-dependent activation  
+_1_3_9 probability. Moveing happens first due to social connections. If  
+_1_4_0 no move due to social connections was possible, a move due to  
+_1_4_1 epistemic space search is attempted. 
+_1_4_2 
+_1_4_3 Once the possible activation weight drops below a threshold,  
+_1_4_4 the agent is removed from the schedule. 
+_1_4_5 """ 
+_1_4_6 if self.model.schedule.time < self.birthtime: 
+_1_4_7 pass 
+_1_4_8 elif self._currentActivationWeight() <= 0.00001 and self.age > 1: 
+_1_4_9 self.model.schedule.remove(self) 
+_1_5_0 # self.age += 1 
+_1_5_1 else: 
+_1_5_2 self.age += 1 
+_1_5_3 currentActivation = self.model.random.choices( 
+_1_5_4 population=[0, 1], 
+_1_5_5 weights=[ 
+_1_5_6 1 - self._currentActivationWeight(), self._currentActivationWeight(), 
+_1_5_7 ], 
+_1_5_8 k=1, 
+_1_5_9 ) 
+_1_6_0 if currentActivation[0] == 1: 
+_1_6_1 # TODO: Should the choice of movement be another random process? 
+_1_6_2 res = self.moveSocSpace() 
+_1_6_3 if res is False: 
+_1_6_4 self.moveEpiSpace() 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
+26 17:47 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_SimpleContinuousModule_py.html` & `scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a_SimpleContinuousModule_py.html`

 * *Files 2% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/SimpleContinuousModule.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/randomletters/SimpleContinuousModule.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/SimpleContinuousModule.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/randomletters/SimpleContinuousModule.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,26 +50,26 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">23 statements &nbsp;</span>
+            <span class="text">24 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">23<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">24<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_8a73bc3a8cf0a89a___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -81,51 +81,52 @@
 </header>
 <main id="source">
     <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">class</span> <span class="nam">SimpleCanvas</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">VisualizationElement</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="str">"""Display agents on a map background. No coordinates."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">local_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"knowledgespread/simple_continuous_canvas.js"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="nam">portrayal_method</span> <span class="op">=</span> <span class="key">None</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="nam">canvas_height</span> <span class="op">=</span> <span class="num">720</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="nam">canvas_width</span> <span class="op">=</span> <span class="num">1280</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">portrayal_method</span><span class="op">,</span> <span class="nam">canvas_height</span><span class="op">=</span><span class="num">720</span><span class="op">,</span> <span class="nam">canvas_width</span><span class="op">=</span><span class="num">1280</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">        <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">        Instantiate a new SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span> <span class="op">=</span> <span class="nam">portrayal_method</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span> <span class="op">=</span> <span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span> <span class="op">=</span> <span class="nam">canvas_width</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">new_element</span> <span class="op">=</span> <span class="str">"new Simple_Continuous_Module({}, {})"</span><span class="op">.</span><span class="nam">format</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">js_code</span> <span class="op">=</span> <span class="str">"elements.push("</span> <span class="op">+</span> <span class="nam">new_element</span> <span class="op">+</span> <span class="str">");"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="key">def</span> <span class="nam">render</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="str">"""Draw agents."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">space_state</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="key">for</span> <span class="nam">obj</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">            <span class="nam">portrayal</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span><span class="op">(</span><span class="nam">obj</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">            <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="op">=</span> <span class="nam">obj</span><span class="op">.</span><span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="nam">x</span> <span class="op">=</span> <span class="op">(</span><span class="nam">x</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="nam">y</span> <span class="op">=</span> <span class="op">(</span><span class="nam">y</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">x</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">y</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="nam">space_state</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">portrayal</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="key">return</span> <span class="nam">space_state</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">local_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"randomletters/simple_continuous_canvas.js"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="nam">local_css_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"randomletters/map.png"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="nam">portrayal_method</span> <span class="op">=</span> <span class="key">None</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="nam">canvas_height</span> <span class="op">=</span> <span class="num">720</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="nam">canvas_width</span> <span class="op">=</span> <span class="num">1280</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">portrayal_method</span><span class="op">,</span> <span class="nam">canvas_height</span><span class="op">=</span><span class="num">720</span><span class="op">,</span> <span class="nam">canvas_width</span><span class="op">=</span><span class="num">1280</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">        <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">        Instantiate a new SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span> <span class="op">=</span> <span class="nam">portrayal_method</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span> <span class="op">=</span> <span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span> <span class="op">=</span> <span class="nam">canvas_width</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="nam">new_element</span> <span class="op">=</span> <span class="str">"new Simple_Continuous_Module({}, {})"</span><span class="op">.</span><span class="nam">format</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">js_code</span> <span class="op">=</span> <span class="str">"elements.push("</span> <span class="op">+</span> <span class="nam">new_element</span> <span class="op">+</span> <span class="str">");"</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="key">def</span> <span class="nam">render</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="str">"""How to render the agents"""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="nam">space_state</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="key">for</span> <span class="nam">obj</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">            <span class="nam">portrayal</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span><span class="op">(</span><span class="nam">obj</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="op">=</span> <span class="nam">obj</span><span class="op">.</span><span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="nam">x</span> <span class="op">=</span> <span class="op">(</span><span class="nam">x</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="nam">y</span> <span class="op">=</span> <span class="op">(</span><span class="nam">y</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">x</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">y</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">            <span class="nam">space_state</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">portrayal</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="key">return</span> <span class="nam">space_state</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_8a73bc3a8cf0a89a___init___py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,50 +1,51 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-kknnoowwlleeddggeesspprreeaadd//SSiimmpplleeCCoonnttiinnuuoouussMMoodduullee..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+rraannddoommlleetttteerrss//SSiimmpplleeCCoonnttiinnuuoouussMMoodduullee..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 2233 ssttaatteemmeennttss ?  00 rruunn 2233 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 2244 ssttaatteemmeennttss ?  00 rruunn 2244 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
+16 09:50 +0200
 _1import mesa 
 _2 
 _3 
 _4class SimpleCanvas(mesa.visualization.VisualizationElement): 
 _5 """Display agents on a map background. No coordinates.""" 
-_6 local_includes = ["knowledgespread/simple_continuous_canvas.js"] 
-_7 portrayal_method = None 
-_8 canvas_height = 720 
-_9 canvas_width = 1280 
-_1_0 
-_1_1 def __init__(self, portrayal_method, canvas_height=720, canvas_width=1280): 
-_1_2 """ 
-_1_3 Instantiate a new SimpleCanvas 
-_1_4 """ 
-_1_5 self.portrayal_method = portrayal_method 
-_1_6 self.canvas_height = canvas_height 
-_1_7 self.canvas_width = canvas_width 
-_1_8 new_element = "new Simple_Continuous_Module({}, {})".format( 
-_1_9 self.canvas_width, self.canvas_height 
-_2_0 ) 
-_2_1 self.js_code = "elements.push(" + new_element + ");" 
-_2_2 
-_2_3 def render(self, model): 
-_2_4 """Draw agents.""" 
-_2_5 space_state = [] 
-_2_6 for obj in model.schedule.agents: 
-_2_7 portrayal = self.portrayal_method(obj) 
-_2_8 x, y = obj.pos 
-_2_9 x = (x - model.space.x_min) / (model.space.x_max - model.space.x_min) 
-_3_0 y = (y - model.space.y_min) / (model.space.y_max - model.space.y_min) 
-_3_1 portrayal["x"] = x 
-_3_2 portrayal["y"] = y 
-_3_3 space_state.append(portrayal) 
-_3_4 return space_state 
+_6 local_includes = ["randomletters/simple_continuous_canvas.js"] 
+_7 local_css_includes = ["randomletters/map.png"] 
+_8 portrayal_method = None 
+_9 canvas_height = 720 
+_1_0 canvas_width = 1280 
+_1_1 
+_1_2 def __init__(self, portrayal_method, canvas_height=720, canvas_width=1280): 
+_1_3 """ 
+_1_4 Instantiate a new SimpleCanvas 
+_1_5 """ 
+_1_6 self.portrayal_method = portrayal_method 
+_1_7 self.canvas_height = canvas_height 
+_1_8 self.canvas_width = canvas_width 
+_1_9 new_element = "new Simple_Continuous_Module({}, {})".format( 
+_2_0 self.canvas_width, self.canvas_height 
+_2_1 ) 
+_2_2 self.js_code = "elements.push(" + new_element + ");" 
+_2_3 
+_2_4 def render(self, model): 
+_2_5 """How to render the agents""" 
+_2_6 space_state = [] 
+_2_7 for obj in model.schedule.agents: 
+_2_8 portrayal = self.portrayal_method(obj) 
+_2_9 x, y = obj.pos 
+_3_0 x = (x - model.space.x_min) / (model.space.x_max - model.space.x_min) 
+_3_1 y = (y - model.space.y_min) / (model.space.y_max - model.space.y_min) 
+_3_2 portrayal["x"] = x 
+_3_3 portrayal["y"] = y 
+_3_4 space_state.append(portrayal) 
+_3_5 return space_state 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_2e9db29e074df228___init___py.html` & `scicom-0.4.1/tests/reports/html/d_8a73bc3a8cf0a89a___init___py.html`

 * *Files 8% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/__init__.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/randomletters/__init__.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/__init__.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/randomletters/__init__.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">0 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_8a73bc3a8cf0a89a_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_8a73bc3a8cf0a89a_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -80,18 +80,18 @@
     </div>
 </header>
 <main id="source">
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_8a73bc3a8cf0a89a_SimpleContinuousModule_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_agents_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_8a73bc3a8cf0a89a_agents_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,16 +1,16 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-kknnoowwlleeddggeesspprreeaadd//____iinniitt____..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+rraannddoommlleetttteerrss//____iinniitt____..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 00 ssttaatteemmeennttss ?  00 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
+16 09:50 +0200
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_agents_py.html` & `scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_model_py.html`

 * *Files 6% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/agents.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/model.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/agents.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/model.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,206 +56,211 @@
         <h2>
             <span class="text">71 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">71<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_interface_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">ageFunction</span><span class="op">,</span> <span class="nam">epistemicRange</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">ScientistAgent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">GenerateInitalPopulation</span><span class="op">,</span> <span class="nam">GenerateSocNet</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">class</span> <span class="nam">ScientistAgent</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="str">"""A scientist with an idea.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="str">    Each scientist has a geographic position, is related to other</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">    agents by a social network, and is intialized with a starttime, that</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    describes the year at which the agent becomes active. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">def</span> <span class="nam">getActiveAgents</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="str">"""Get all agents active at time t."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="nam">active</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">        <span class="key">if</span> <span class="nam">x</span><span class="op">.</span><span class="nam">birthtime</span> <span class="op">&lt;=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">            <span class="nam">active</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="key">return</span> <span class="nam">active</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="nam">model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="nam">pos</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># The projected position in 2D epistemic space. For actual movements and neighborhood calculations take into account z coordinate as well.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="nam">topicledger</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span>  <span class="com"># Representing the mental model of the agent: A list of all visited topics represented as triples [(x,y,z), (x,y,z)]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">geopos</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># Representing scientific affiliation, a tuple of latitude/longitude of current affiliation. Could also keep track of previous affiliations</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="nam">birthtime</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span>  <span class="com"># A step number that represents the timestep at which the scientist becomes active</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="nam">productivity</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>  <span class="com"># Parameters determining the shape of the activation weight function</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">opposition</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>  <span class="com"># Whether or not an agent is always oposing new epistemic positions.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span> <span class="op">=</span> <span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">a</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">b</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">1</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">c</span> <span class="op">=</span> <span class="nam">productivity</span><span class="op">[</span><span class="num">2</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span> <span class="op">=</span> <span class="nam">topicledger</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">geopos</span> <span class="op">=</span> <span class="nam">geopos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span> <span class="op">=</span> <span class="nam">birthtime</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">opposition</span> <span class="op">=</span> <span class="nam">opposition</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="key">def</span> <span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span> <span class="op">-></span> <span class="nam">float</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="str">"""Return an age dependent activation weight.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="str">        A bell-shaped function with a ramp, plateuax and decend.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="str">        Can be drawn from random distribution in model initialization.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="key">return</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">a</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">b</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">c</span><span class="op">,</span> <span class="nam">radius</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="key">def</span> <span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="str">"""Calculate the change in epistemic space.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t"><span class="str">        From all neighbors select one random choice.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t"><span class="str">        To update the agents position, determine the heading </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t"><span class="str">        towards the selected neighbor. If the agent is an</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t"><span class="str">        oposing one, inverte the direction. Then select a </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t"><span class="str">        random amount to move into the selected direction.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t"><span class="str">        The new position is noted down in the topic ledger</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t"><span class="str">        an the the agent is moved.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="com"># Select random elemt from potential neighbors</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="nam">neighborID</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="key">if</span> <span class="nam">isinstance</span><span class="op">(</span><span class="nam">neighborID</span><span class="op">,</span> <span class="op">(</span><span class="nam">float</span><span class="op">,</span> <span class="nam">int</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">            <span class="nam">neighbors</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">                <span class="nam">x</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span> <span class="key">if</span> <span class="nam">x</span><span class="op">.</span><span class="nam">unique_id</span> <span class="op">==</span> <span class="nam">neighborID</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">            <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">                <span class="nam">neighbor</span> <span class="op">=</span> <span class="nam">neighbors</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">            <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">                <span class="key">return</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">            <span class="nam">neighbor</span> <span class="op">=</span> <span class="nam">neighborID</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="com"># Get heading</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="nam">direction</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_heading</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span> <span class="nam">neighbor</span><span class="op">.</span><span class="nam">pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="com"># Some agents always opose the epistemic position and therefore move in the oposite direction</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">opposition</span> <span class="key">is</span> <span class="key">True</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">            <span class="nam">direction</span> <span class="op">=</span> <span class="op">(</span><span class="op">-</span> <span class="nam">direction</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="op">-</span> <span class="nam">direction</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="com"># Select new postion with random amount into direction of neighbor</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">        <span class="nam">amount</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="nam">new_pos</span> <span class="op">=</span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">+</span> <span class="nam">amount</span> <span class="op">*</span> <span class="nam">direction</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">+</span> <span class="nam">amount</span> <span class="op">*</span> <span class="nam">direction</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">        <span class="com"># New mental position</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">        <span class="nam">topic</span> <span class="op">=</span> <span class="op">(</span><span class="nam">new_pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">        <span class="key">try</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">            <span class="com"># Move agent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">topic</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">move_agent</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">        <span class="key">except</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">            <span class="com"># Out of bounds of epi space</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">            <span class="com"># TODO: What is a sensible exception of movement in this case.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">            <span class="com"># Current solution: Append topic to ledger but do not move</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">topic</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="key">def</span> <span class="nam">getNetworkStructure</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">    <span class="key">return</span> <span class="op">[</span><span class="nam">len</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">community</span><span class="op">.</span><span class="nam">louvain_communities</span><span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="key">class</span> <span class="nam">KnowledgeSpread</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="str">"""A model for knowledge spread. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="str">    Agents have an initial topic vector and are positioned in epistemic space. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t"><span class="str">    The number of agents can grow linearly, as a s-curve, or exponentially.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="str">    Agents initial positions on epistemic space can be diverse (checker board-like),</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t"><span class="str">    around a central position or in opossing camps. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t"><span class="str">    Agents activation probability is age-dependent. After reaching a personal productivity end,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t"><span class="str">    agents are removed from the scheduler.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">            <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">            <span class="nam">num_scientists</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">100</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">            <span class="nam">num_timesteps</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">20</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">            <span class="nam">epiDim</span><span class="op">:</span>  <span class="nam">float</span> <span class="op">=</span> <span class="num">1.0001</span><span class="op">,</span>  <span class="com"># This allows the boundary to be equal +/- one, will raise an exception otherwise</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">            <span class="nam">epiRange</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.01</span><span class="op">,</span>  <span class="com"># Range of visibility in epistemic space.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">            <span class="nam">oppositionPercent</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.05</span><span class="op">,</span>  <span class="com"># Weight for random draw of opossing agents </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">            <span class="nam">loadInitialConditions</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">            <span class="nam">epiInit</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="str">"complex"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">            <span class="nam">timeInit</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="str">"saturate"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">            <span class="nam">beta</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">8</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">            <span class="nam">slope</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">            <span class="nam">base</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">2</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">            <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numScientists</span> <span class="op">=</span> <span class="nam">num_scientists</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numTimesteps</span> <span class="op">=</span> <span class="nam">num_timesteps</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">epiRange</span> <span class="op">=</span> <span class="nam">epiRange</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">opposPercent</span> <span class="op">=</span> <span class="nam">oppositionPercent</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">loadInitialConditions</span> <span class="op">=</span> <span class="nam">loadInitialConditions</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">epiInit</span> <span class="op">=</span> <span class="nam">epiInit</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">timeInit</span> <span class="op">=</span> <span class="nam">timeInit</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">beta</span> <span class="op">=</span> <span class="nam">beta</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">slope</span> <span class="op">=</span> <span class="nam">slope</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">base</span> <span class="op">=</span> <span class="nam">base</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="com"># Random Schedule</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">time</span><span class="op">.</span><span class="nam">RandomActivation</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">        <span class="com"># Epistemic layer space       </span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">ContinuousSpace</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">            <span class="nam">epiDim</span><span class="op">,</span> <span class="nam">epiDim</span><span class="op">,</span> <span class="key">False</span><span class="op">,</span> <span class="op">-</span><span class="nam">epiDim</span><span class="op">,</span> <span class="op">-</span><span class="nam">epiDim</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">        <span class="com"># Create initial setup of agents</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="com"># TODO: The topic vector could be a higher dimensional vector derived from text embeddings.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">_setupAgents</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="com"># Create agents from initial conditions. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="nam">agents</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="key">for</span> <span class="nam">ix</span><span class="op">,</span> <span class="nam">cond</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">initpop</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">            <span class="nam">opose</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="op">[</span><span class="key">False</span><span class="op">,</span> <span class="key">True</span><span class="op">]</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">opposPercent</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">opposPercent</span><span class="op">]</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="com"># TODO: The distribution of productivity length could be empirically motivated. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">            <span class="nam">prodlen</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="nam">list</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="num">15</span><span class="op">,</span> <span class="num">55</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">            <span class="nam">agent</span> <span class="op">=</span> <span class="nam">ScientistAgent</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">                <span class="nam">unique_id</span><span class="op">=</span><span class="nam">cond</span><span class="op">[</span><span class="str">"id"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">                <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">                <span class="nam">pos</span><span class="op">=</span><span class="op">(</span><span class="nam">cond</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span><span class="op">,</span> <span class="nam">cond</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">                <span class="nam">topicledger</span><span class="op">=</span><span class="op">[</span><span class="op">(</span><span class="nam">cond</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span><span class="op">,</span> <span class="nam">cond</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span><span class="op">,</span> <span class="nam">cond</span><span class="op">[</span><span class="str">"z"</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">                <span class="nam">geopos</span><span class="op">=</span><span class="op">(</span><span class="num">45</span><span class="op">,</span> <span class="num">45</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">                <span class="nam">birthtime</span><span class="op">=</span><span class="nam">cond</span><span class="op">[</span><span class="str">"t"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">                <span class="nam">opposition</span><span class="op">=</span><span class="nam">opose</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">                <span class="nam">productivity</span><span class="op">=</span><span class="op">(</span><span class="num">7</span><span class="op">,</span> <span class="num">7</span><span class="op">,</span> <span class="nam">prodlen</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">            <span class="nam">agents</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">    <span class="key">def</span> <span class="nam">updateSocialNetwork</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="str">"""Create new links in agents social network."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">    <span class="key">def</span> <span class="nam">moveGeoSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="key">def</span> <span class="nam">moveSocSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">maxDist</span><span class="op">=</span><span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="str">"""Change epistemic position based on social network."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="nam">neighbors</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">currentTime</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">        <span class="nam">G</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="nam">H</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">Graph</span><span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span><span class="op">)</span> <span class="key">for</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">G</span><span class="op">.</span><span class="nam">edges</span><span class="op">(</span><span class="nam">data</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">e</span><span class="op">[</span><span class="str">"time"</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="nam">currentTime</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="key">for</span> <span class="nam">dist</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="nam">maxDist</span> <span class="op">+</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">            <span class="nam">neighb</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">descendants_at_distance</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">                <span class="nam">H</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">                <span class="nam">dist</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">            <span class="nam">neighbors</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">list</span><span class="op">(</span><span class="nam">neighb</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">            <span class="key">return</span> <span class="key">True</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">            <span class="key">return</span> <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">    <span class="key">def</span> <span class="nam">moveEpiSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">        <span class="str">"""Change epistemic position based on distance in epistemic space."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">neighbors</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">            <span class="nam">radius</span><span class="op">=</span><span class="nam">epistemicRange</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">epiRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">_changeEpistemicPosition</span><span class="op">(</span><span class="nam">neighbors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">            <span class="com"># Random search for new epistemic position</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">            <span class="nam">direction</span> <span class="op">=</span> <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="nam">new_pos</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">random</span><span class="op">(</span><span class="op">)</span> <span class="op">*</span> <span class="nam">direction</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">move_agent</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">new_pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">    <span class="key">def</span> <span class="nam">attendConference</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">        <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">        <span class="str">"""Agents activity starts after having reached the birthtime.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t"><span class="str">        </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t"><span class="str">        After initial start, at each step the agents age is increased by one.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t"><span class="str">        Each agent has a randomly generated age-dependent activation </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t"><span class="str">        probability. Moveing happens first due to social connections. If </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t"><span class="str">        no move due to social connections was possible, a move due to </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t"><span class="str">        epistemic space search is attempted.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t"><span class="str">        Once the possible activation weight drops below a threshold, </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t"><span class="str">        the agent is removed from the schedule.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">birthtime</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">            <span class="key">pass</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="key">elif</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="num">0.00001</span> <span class="key">and</span> <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">></span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">remove</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">            <span class="com"># self.age += 1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">age</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">            <span class="nam">currentActivation</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">                <span class="nam">population</span><span class="op">=</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">                <span class="nam">weights</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">                    <span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_currentActivationWeight</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">                <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">                <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">            <span class="key">if</span> <span class="nam">currentActivation</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">                <span class="com"># TODO: Should the choice of movement be another random process?</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">                <span class="nam">res</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">moveSocSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">                <span class="key">if</span> <span class="nam">res</span> <span class="key">is</span> <span class="key">False</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">moveEpiSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">        <span class="com"># Setup social layer connections and space</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="nam">edges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_setupSocialSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">socialNetwork</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">from_pandas_edgelist</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">            <span class="nam">edges</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">            <span class="nam">source</span><span class="op">=</span><span class="str">'from_id'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">            <span class="nam">target</span><span class="op">=</span><span class="str">'to_id'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">            <span class="nam">edge_attr</span><span class="op">=</span><span class="op">[</span><span class="str">"time"</span><span class="op">,</span> <span class="str">"dist"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="com"># TODO: What is the effect of the GRID dimensions on social dynamics?</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">grid</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">MultiGrid</span><span class="op">(</span><span class="num">1000</span><span class="op">,</span> <span class="num">1000</span><span class="op">,</span> <span class="nam">torus</span><span class="op">=</span><span class="key">False</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="com"># Add agents to epistemic space and schedule.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">place_agent</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">                <span class="nam">agent</span><span class="op">,</span> <span class="nam">pos</span><span class="op">=</span><span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">            <span class="nam">x</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">randrange</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">grid</span><span class="op">.</span><span class="nam">width</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">            <span class="nam">y</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">randrange</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">grid</span><span class="op">.</span><span class="nam">height</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">grid</span><span class="op">.</span><span class="nam">place_agent</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">                <span class="nam">agent</span><span class="op">,</span> <span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">add</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="com"># Setup data collection</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">DataCollector</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">            <span class="nam">model_reporters</span><span class="op">=</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">                <span class="str">"Active Agents"</span><span class="op">:</span> <span class="key">lambda</span> <span class="nam">m</span><span class="op">:</span> <span class="nam">getActiveAgents</span><span class="op">(</span><span class="nam">m</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">                <span class="str">"Graph structure"</span><span class="op">:</span> <span class="key">lambda</span> <span class="nam">m</span><span class="op">:</span> <span class="nam">getNetworkStructure</span><span class="op">(</span><span class="nam">m</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">            <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">        <span class="com"># Start in running mode</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">running</span> <span class="op">=</span> <span class="key">True</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">    <span class="key">def</span> <span class="nam">_setupAgents</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">        <span class="str">"""Create initial setup of agents."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">loadInitialConditions</span> <span class="key">is</span> <span class="key">False</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">            <span class="nam">epiInit</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">epiInit</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">            <span class="nam">timeInit</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">timeInit</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="nam">beta</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">beta</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">            <span class="nam">slope</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">slope</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">            <span class="nam">base</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">base</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">            <span class="key">raise</span> <span class="nam">NotImplementedError</span><span class="op">(</span><span class="str">"The reading-in of external initial conditions is not implemented yet. Come back later!"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">        <span class="nam">epiOpt</span> <span class="op">=</span> <span class="op">[</span><span class="str">"complex"</span><span class="op">,</span> <span class="str">"central"</span><span class="op">,</span> <span class="str">"polarized"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">        <span class="nam">timeOpt</span> <span class="op">=</span> <span class="op">[</span><span class="str">"saturate"</span><span class="op">,</span> <span class="str">"linear"</span><span class="op">,</span> <span class="str">"exponential"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">        <span class="key">if</span> <span class="nam">epiInit</span> <span class="key">in</span> <span class="nam">epiOpt</span> <span class="key">and</span> <span class="nam">timeInit</span> <span class="key">in</span> <span class="nam">timeOpt</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">            <span class="nam">generate</span> <span class="op">=</span> <span class="nam">GenerateInitalPopulation</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">numScientists</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">numTimesteps</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">            <span class="nam">initalPop</span> <span class="op">=</span> <span class="nam">generate</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">                <span class="nam">fcE</span><span class="op">=</span><span class="nam">epiInit</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">                <span class="nam">fcT</span><span class="op">=</span><span class="nam">timeInit</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">                <span class="nam">beta</span><span class="op">=</span><span class="nam">beta</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                <span class="nam">slope</span><span class="op">=</span><span class="nam">slope</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">                <span class="nam">base</span><span class="op">=</span><span class="nam">base</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">initpop</span> <span class="op">=</span> <span class="nam">initalPop</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">            <span class="key">raise</span> <span class="nam">KeyError</span><span class="op">(</span><span class="str">f"Choose epiInit from {epiOpt} and timeInit from {timeOpt}."</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">    <span class="key">def</span> <span class="nam">_setupSocialSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">nEdges</span><span class="op">=</span><span class="num">4</span><span class="op">,</span> <span class="nam">density</span><span class="op">=</span><span class="num">0.2</span><span class="op">,</span> <span class="nam">densityGrowth</span><span class="op">=</span><span class="num">0</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">        <span class="str">"""Setup initial social connections."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">        <span class="nam">genSoc</span> <span class="op">=</span> <span class="nam">GenerateSocNet</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">initpop</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="nam">socNet</span> <span class="op">=</span> <span class="nam">genSoc</span><span class="op">.</span><span class="nam">run</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">            <span class="nam">nEdges</span><span class="op">=</span><span class="nam">nEdges</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">            <span class="nam">density</span><span class="op">=</span><span class="nam">density</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">            <span class="nam">densityGrowth</span><span class="op">=</span><span class="nam">densityGrowth</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">        <span class="key">return</span> <span class="nam">socNet</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">        <span class="str">"""Run one simulation step."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">        <span class="key">if</span> <span class="key">not</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">)</span> <span class="op">></span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">running</span> <span class="op">=</span> <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">collect</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">    <span class="key">def</span> <span class="nam">run</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">        <span class="str">"""Run model for n steps."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">        <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_interface_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_interface_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_server_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,191 +1,196 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-kknnoowwlleeddggeesspprreeaadd//aaggeennttss..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//mmooddeell..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 7711 ssttaatteemmeennttss ?  00 rruunn 7711 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
-_1 
+28 12:02 +0200
+_1import networkx as nx 
 _2import mesa 
-_3import networkx as nx 
-_4 
-_5from scicom.knowledgespread.utils import ageFunction, epistemicRange 
+_3from scicom.knowledgespread.agents import ScientistAgent 
+_4from scicom.knowledgespread.utils import GenerateInitalPopulation,
+GenerateSocNet 
+_5 
 _6 
-_7 
-_8class ScientistAgent(mesa.Agent): 
-_9 """A scientist with an idea. 
-_1_0  
-_1_1 Each scientist has a geographic position, is related to other 
-_1_2 agents by a social network, and is intialized with a starttime, that 
-_1_3 describes the year at which the agent becomes active.  
-_1_4 """ 
+_7def getActiveAgents(model): 
+_8 """Get all agents active at time t.""" 
+_9 active = 0 
+_1_0 for x in model.schedule.agents: 
+_1_1 if x.birthtime <= model.schedule.time: 
+_1_2 active += 1 
+_1_3 return active 
+_1_4 
 _1_5 
-_1_6 def __init__( 
-_1_7 self, 
-_1_8 unique_id, 
-_1_9 model, 
-_2_0 pos: tuple, # The projected position in 2D epistemic space. For actual
-movements and neighborhood calculations take into account z coordinate as
-well. 
-_2_1 topicledger: list, # Representing the mental model of the agent: A list of
-all visited topics represented as triples [(x,y,z), (x,y,z)] 
-_2_2 geopos: tuple, # Representing scientific affiliation, a tuple of latitude/
-longitude of current affiliation. Could also keep track of previous
-affiliations 
-_2_3 birthtime: int, # A step number that represents the timestep at which the
-scientist becomes active 
-_2_4 productivity: tuple, # Parameters determining the shape of the activation
-weight function 
-_2_5 opposition: bool = False, # Whether or not an agent is always oposing new
-epistemic positions. 
-_2_6 ): 
-_2_7 super().__init__(unique_id, model) 
-_2_8 self.pos = pos 
-_2_9 self.a = productivity[0] 
-_3_0 self.b = productivity[1] 
-_3_1 self.c = productivity[2] 
-_3_2 self.topicledger = topicledger 
-_3_3 self.geopos = geopos 
-_3_4 self.birthtime = birthtime 
-_3_5 self.age = 0 
-_3_6 self.opposition = opposition 
-_3_7 
-_3_8 def _currentActivationWeight(self) -> float: 
-_3_9 """Return an age dependent activation weight. 
-_4_0 
-_4_1 A bell-shaped function with a ramp, plateuax and decend. 
-_4_2 Can be drawn from random distribution in model initialization. 
-_4_3 """ 
-_4_4 return ageFunction(self, self.a, self.b, self.c, radius=1) 
-_4_5 
-_4_6 def _changeEpistemicPosition(self, neighbors): 
-_4_7 """Calculate the change in epistemic space. 
-_4_8 
-_4_9 From all neighbors select one random choice. 
-_5_0 To update the agents position, determine the heading  
-_5_1 towards the selected neighbor. If the agent is an 
-_5_2 oposing one, inverte the direction. Then select a  
-_5_3 random amount to move into the selected direction. 
-_5_4 The new position is noted down in the topic ledger 
-_5_5 an the the agent is moved. 
-_5_6 """ 
-_5_7 # Select random elemt from potential neighbors 
-_5_8 neighborID = self.random.choice(neighbors) 
-_5_9 if isinstance(neighborID, (float, int)): 
-_6_0 neighbors = [ 
-_6_1 x for x in self.model.schedule.agents if x.unique_id == neighborID 
-_6_2 ] 
-_6_3 if neighbors: 
-_6_4 neighbor = neighbors[0] 
-_6_5 else: 
-_6_6 return 
-_6_7 else: 
-_6_8 neighbor = neighborID 
-_6_9 # Get heading 
-_7_0 direction = self.model.space.get_heading(self.pos, neighbor.pos) 
-_7_1 # Some agents always opose the epistemic position and therefore move in the
-oposite direction 
-_7_2 if self.opposition is True: 
-_7_3 direction = (- direction[0], - direction[1]) 
-_7_4 # Select new postion with random amount into direction of neighbor 
-_7_5 amount = self.model.random.random() 
-_7_6 new_pos = (self.pos[0] + amount * direction[0], self.pos[1] + amount *
-direction[1]) 
-_7_7 # New mental position 
-_7_8 topic = (new_pos[0], new_pos[1], self.model.random.random()) 
-_7_9 try: 
-_8_0 # Move agent 
-_8_1 self.topicledger.append(topic) 
-_8_2 self.model.space.move_agent(self, new_pos) 
-_8_3 except: 
-_8_4 # Out of bounds of epi space 
-_8_5 # TODO: What is a sensible exception of movement in this case. 
-_8_6 # Current solution: Append topic to ledger but do not move 
-_8_7 self.topicledger.append(topic) 
+_1_6def getNetworkStructure(model): 
+_1_7 return [len(x) for x in nx.community.louvain_communities
+(model.socialNetwork)] 
+_1_8 
+_1_9 
+_2_0class KnowledgeSpread(mesa.Model): 
+_2_1 """A model for knowledge spread.  
+_2_2  
+_2_3 Agents have an initial topic vector and are positioned in epistemic space.  
+_2_4 The number of agents can grow linearly, as a s-curve, or exponentially. 
+_2_5 Agents initial positions on epistemic space can be diverse (checker board-
+like), 
+_2_6 around a central position or in opossing camps.  
+_2_7 
+_2_8 Agents activation probability is age-dependent. After reaching a personal
+productivity end, 
+_2_9 agents are removed from the scheduler. 
+_3_0 
+_3_1 """ 
+_3_2 
+_3_3 def __init__( 
+_3_4 self, 
+_3_5 num_scientists: int = 100, 
+_3_6 num_timesteps: int = 20, 
+_3_7 epiDim: float = 1.0001, # This allows the boundary to be equal +/- one, will
+raise an exception otherwise 
+_3_8 epiRange: float = 0.01, # Range of visibility in epistemic space. 
+_3_9 oppositionPercent: float = 0.05, # Weight for random draw of opossing agents
+ 
+_4_0 loadInitialConditions: bool = False, 
+_4_1 epiInit: str = "complex", 
+_4_2 timeInit: str = "saturate", 
+_4_3 beta: int = 8, 
+_4_4 slope: int = 5, 
+_4_5 base: int = 2, 
+_4_6 ): 
+_4_7 
+_4_8 self.numScientists = num_scientists 
+_4_9 self.numTimesteps = num_timesteps 
+_5_0 self.epiRange = epiRange 
+_5_1 self.opposPercent = oppositionPercent 
+_5_2 self.loadInitialConditions = loadInitialConditions 
+_5_3 self.epiInit = epiInit 
+_5_4 self.timeInit = timeInit 
+_5_5 self.beta = beta 
+_5_6 self.slope = slope 
+_5_7 self.base = base 
+_5_8 
+_5_9 # Random Schedule 
+_6_0 self.schedule = mesa.time.RandomActivation(self) 
+_6_1 
+_6_2 # Epistemic layer space  
+_6_3 self.space = mesa.space.ContinuousSpace( 
+_6_4 epiDim, epiDim, False, -epiDim, -epiDim 
+_6_5 ) 
+_6_6 
+_6_7 # Create initial setup of agents 
+_6_8 # TODO: The topic vector could be a higher dimensional vector derived from
+text embeddings. 
+_6_9 self._setupAgents() 
+_7_0 
+_7_1 # Create agents from initial conditions.  
+_7_2 agents = [] 
+_7_3 for ix, cond in self.initpop.iterrows(): 
+_7_4 opose = self.random.choices([False, True], weights=[1 - self.opposPercent,
+self.opposPercent], k=1) 
+_7_5 # TODO: The distribution of productivity length could be empirically
+motivated.  
+_7_6 prodlen = self.random.choices(list(range(15, 55, 1)), k=1) 
+_7_7 agent = ScientistAgent( 
+_7_8 unique_id=cond["id"], 
+_7_9 model=self, 
+_8_0 pos=(cond["x"], cond["y"]), 
+_8_1 topicledger=[(cond["x"], cond["y"], cond["z"])], 
+_8_2 geopos=(45, 45), 
+_8_3 birthtime=cond["t"], 
+_8_4 opposition=opose[0], 
+_8_5 productivity=(7, 7, prodlen[0]) 
+_8_6 ) 
+_8_7 agents.append(agent) 
 _8_8 
-_8_9 def updateSocialNetwork(self): 
-_9_0 """Create new links in agents social network.""" 
-_9_1 
-_9_2 def moveGeoSpace(self): 
-_9_3 pass 
-_9_4 
-_9_5 def moveSocSpace(self, maxDist=1): 
-_9_6 """Change epistemic position based on social network.""" 
-_9_7 neighbors = [] 
-_9_8 currentTime = self.model.schedule.time 
-_9_9 G = self.model.socialNetwork 
-_1_0_0 H = nx.Graph(((u, v, e) for u, v, e in G.edges(data=True) if e["time"] <=
-currentTime)) 
-_1_0_1 for dist in range(0, maxDist + 1, 1): 
-_1_0_2 neighb = nx.descendants_at_distance( 
-_1_0_3 H, 
-_1_0_4 self.unique_id, 
-_1_0_5 dist, 
-_1_0_6 ) 
-_1_0_7 neighbors.extend(list(neighb)) 
-_1_0_8 if neighbors: 
-_1_0_9 self._changeEpistemicPosition(neighbors) 
-_1_1_0 return True 
-_1_1_1 else: 
-_1_1_2 return False 
-_1_1_3 
-_1_1_4 def moveEpiSpace(self): 
-_1_1_5 """Change epistemic position based on distance in epistemic space.""" 
-_1_1_6 neighbors = self.model.space.get_neighbors( 
-_1_1_7 self.pos, 
-_1_1_8 radius=epistemicRange( 
-_1_1_9 self.model.epiRange, 
-_1_2_0 self.model.schedule.time - self.birthtime, 
-_1_2_1 ), 
-_1_2_2 ) 
-_1_2_3 if neighbors: 
-_1_2_4 self._changeEpistemicPosition(neighbors) 
-_1_2_5 else: 
-_1_2_6 # Random search for new epistemic position 
-_1_2_7 direction = (self.model.random.random(), self.model.random.random()) 
-_1_2_8 new_pos = self.model.random.random() * direction 
-_1_2_9 self.model.space.move_agent(self, new_pos) 
-_1_3_0 
-_1_3_1 def attendConference(self): 
-_1_3_2 pass 
-_1_3_3 
-_1_3_4 def step(self): 
-_1_3_5 """Agents activity starts after having reached the birthtime. 
-_1_3_6  
-_1_3_7 After initial start, at each step the agents age is increased by one. 
-_1_3_8 Each agent has a randomly generated age-dependent activation  
-_1_3_9 probability. Moveing happens first due to social connections. If  
-_1_4_0 no move due to social connections was possible, a move due to  
-_1_4_1 epistemic space search is attempted. 
-_1_4_2 
-_1_4_3 Once the possible activation weight drops below a threshold,  
-_1_4_4 the agent is removed from the schedule. 
-_1_4_5 """ 
-_1_4_6 if self.model.schedule.time < self.birthtime: 
-_1_4_7 pass 
-_1_4_8 elif self._currentActivationWeight() <= 0.00001 and self.age > 1: 
-_1_4_9 self.model.schedule.remove(self) 
-_1_5_0 # self.age += 1 
-_1_5_1 else: 
-_1_5_2 self.age += 1 
-_1_5_3 currentActivation = self.model.random.choices( 
-_1_5_4 population=[0, 1], 
-_1_5_5 weights=[ 
-_1_5_6 1 - self._currentActivationWeight(), self._currentActivationWeight(), 
-_1_5_7 ], 
-_1_5_8 k=1, 
-_1_5_9 ) 
-_1_6_0 if currentActivation[0] == 1: 
-_1_6_1 # TODO: Should the choice of movement be another random process? 
-_1_6_2 res = self.moveSocSpace() 
-_1_6_3 if res is False: 
-_1_6_4 self.moveEpiSpace() 
+_8_9 # Setup social layer connections and space 
+_9_0 edges = self._setupSocialSpace() 
+_9_1 self.socialNetwork = nx.from_pandas_edgelist( 
+_9_2 edges, 
+_9_3 source='from_id', 
+_9_4 target='to_id', 
+_9_5 edge_attr=["time", "dist"] 
+_9_6 ) 
+_9_7 # TODO: What is the effect of the GRID dimensions on social dynamics? 
+_9_8 self.grid = mesa.space.MultiGrid(1000, 1000, torus=False) 
+_9_9 
+_1_0_0 # Add agents to epistemic space and schedule. 
+_1_0_1 for agent in agents: 
+_1_0_2 self.space.place_agent( 
+_1_0_3 agent, pos=agent.pos 
+_1_0_4 ) 
+_1_0_5 x = self.random.randrange(self.grid.width) 
+_1_0_6 y = self.random.randrange(self.grid.height) 
+_1_0_7 self.grid.place_agent( 
+_1_0_8 agent, (x, y) 
+_1_0_9 ) 
+_1_1_0 self.schedule.add(agent) 
+_1_1_1 
+_1_1_2 # Setup data collection 
+_1_1_3 self.datacollector = mesa.DataCollector( 
+_1_1_4 model_reporters={ 
+_1_1_5 "Active Agents": lambda m: getActiveAgents(m), 
+_1_1_6 "Graph structure": lambda m: getNetworkStructure(m), 
+_1_1_7 }, 
+_1_1_8 ) 
+_1_1_9 
+_1_2_0 # Start in running mode 
+_1_2_1 self.running = True 
+_1_2_2 
+_1_2_3 def _setupAgents(self): 
+_1_2_4 """Create initial setup of agents.""" 
+_1_2_5 if self.loadInitialConditions is False: 
+_1_2_6 epiInit = self.epiInit 
+_1_2_7 timeInit = self.timeInit 
+_1_2_8 beta = self.beta 
+_1_2_9 slope = self.slope 
+_1_3_0 base = self.base 
+_1_3_1 else: 
+_1_3_2 raise NotImplementedError("The reading-in of external initial conditions is
+not implemented yet. Come back later!") 
+_1_3_3 epiOpt = ["complex", "central", "polarized"] 
+_1_3_4 timeOpt = ["saturate", "linear", "exponential"] 
+_1_3_5 if epiInit in epiOpt and timeInit in timeOpt: 
+_1_3_6 generate = GenerateInitalPopulation(self.numScientists, self.numTimesteps) 
+_1_3_7 initalPop = generate.sample( 
+_1_3_8 fcE=epiInit, 
+_1_3_9 fcT=timeInit, 
+_1_4_0 beta=beta, 
+_1_4_1 slope=slope, 
+_1_4_2 base=base 
+_1_4_3 ) 
+_1_4_4 self.initpop = initalPop 
+_1_4_5 else: 
+_1_4_6 raise KeyError(f"Choose epiInit from {epiOpt} and timeInit from
+{timeOpt}.") 
+_1_4_7 
+_1_4_8 def _setupSocialSpace(self, nEdges=4, density=0.2, densityGrowth=0): 
+_1_4_9 """Setup initial social connections.""" 
+_1_5_0 genSoc = GenerateSocNet(self.initpop) 
+_1_5_1 socNet = genSoc.run( 
+_1_5_2 nEdges=nEdges, 
+_1_5_3 density=density, 
+_1_5_4 densityGrowth=densityGrowth 
+_1_5_5 ) 
+_1_5_6 return socNet 
+_1_5_7 
+_1_5_8 def step(self): 
+_1_5_9 """Run one simulation step.""" 
+_1_6_0 if not len(self.schedule.agents) > 1: 
+_1_6_1 self.running = False 
+_1_6_2 else: 
+_1_6_3 self.schedule.step() 
+_1_6_4 self.datacollector.collect(self) 
+_1_6_5 
+_1_6_6 def run(self, n): 
+_1_6_7 """Run model for n steps.""" 
+_1_6_8 for _ in range(n): 
+_1_6_9 self.step() 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_app_py.html` & `scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_interface_py.html`

 * *Files 4% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/app.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/interface.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/app.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/interface.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,115 +50,110 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">9 statements &nbsp;</span>
+            <span class="text">5 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">9<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">5<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">experimental</span> <span class="key">import</span> <span class="nam">JupyterViz</span><span class="op">,</span> <span class="nam">make_text</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">altair</span> <span class="key">as</span> <span class="nam">alt</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">ScientistAgent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="nam">KnowledgeSpread</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="nam">getActiveAgents</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="nam">getNetworkStructure</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">ageFunction</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="nam">agent_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">    <span class="nam">epiSpace_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="nam">socialNetwork_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">    <span class="nam">chart_draw_altair_agents</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">    <span class="nam">chart_draw_altair_communities</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="str">"num_scientists"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderInt"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">50</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Initial number of scientists"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">200</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">10</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="str">"num_timesteps"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderInt"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"How long is the number of agents growing?"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">100</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">5</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">    <span class="str">"epiInit"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"Select"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="str">"complex"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Choose initial conditions for epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">        <span class="str">"values"</span><span class="op">:</span> <span class="op">[</span><span class="str">'complex'</span><span class="op">,</span> <span class="str">"central"</span><span class="op">,</span> <span class="str">"polarized"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">    <span class="str">"timeInit"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"Select"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="str">"saturate"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Choose initial conditions for population growth."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="str">"values"</span><span class="op">:</span> <span class="op">[</span><span class="str">'saturate'</span><span class="op">,</span> <span class="str">"linear"</span><span class="op">,</span> <span class="str">"exponential"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">    <span class="str">"epiRange"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderFloat"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">0.01</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Basic range of visibility in epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">0.005</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">0.3</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">0.005</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t"><span class="nam">page</span> <span class="op">=</span> <span class="nam">JupyterViz</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="nam">KnowledgeSpread</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">    <span class="nam">measures</span><span class="op">=</span><span class="op">[</span><span class="nam">socialNetwork_draw_altair</span><span class="op">,</span> <span class="nam">chart_draw_altair_agents</span><span class="op">,</span> <span class="nam">chart_draw_altair_communities</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">    <span class="nam">name</span><span class="op">=</span><span class="str">"Knowledge spread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">    <span class="nam">agent_portrayal</span><span class="op">=</span><span class="nam">agent_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="nam">space_drawer</span><span class="op">=</span><span class="nam">epiSpace_draw_altair</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""The interface to control and run the Knowledgespread ABM."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">experimental</span> <span class="key">import</span> <span class="nam">JupyterViz</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="nam">KnowledgeSpread</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="nam">agent_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="nam">chart_draw_altair_agents</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="nam">chart_draw_altair_communities</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">    <span class="nam">epiSpace_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">    <span class="nam">socialNetwork_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">    <span class="str">"num_scientists"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderInt"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">50</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Initial number of scientists"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">200</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="str">"num_timesteps"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderInt"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"How long is the number of agents growing?"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">100</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="str">"epiInit"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"Select"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="str">"complex"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Choose initial conditions for epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="str">"values"</span><span class="op">:</span> <span class="op">[</span><span class="str">"complex"</span><span class="op">,</span> <span class="str">"central"</span><span class="op">,</span> <span class="str">"polarized"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">    <span class="str">"timeInit"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"Select"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="str">"saturate"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Choose initial conditions for population growth."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">        <span class="str">"values"</span><span class="op">:</span> <span class="op">[</span><span class="str">"saturate"</span><span class="op">,</span> <span class="str">"linear"</span><span class="op">,</span> <span class="str">"exponential"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">    <span class="str">"epiRange"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderFloat"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">0.01</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Basic range of visibility in epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">0.005</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">0.3</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">0.005</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t"><span class="nam">page</span> <span class="op">=</span> <span class="nam">JupyterViz</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">    <span class="nam">KnowledgeSpread</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">    <span class="nam">measures</span><span class="op">=</span><span class="op">[</span><span class="nam">socialNetwork_draw_altair</span><span class="op">,</span> <span class="nam">chart_draw_altair_agents</span><span class="op">,</span> <span class="nam">chart_draw_altair_communities</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">    <span class="nam">name</span><span class="op">=</span><span class="str">"Knowledge spread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">    <span class="nam">agent_portrayal</span><span class="op">=</span><span class="nam">agent_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="nam">space_drawer</span><span class="op">=</span><span class="nam">epiSpace_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,84 +1,79 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-kknnoowwlleeddggeesspprreeaadd//aapppp..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//iinntteerrffaaccee..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 99 ssttaatteemmeennttss ?  00 rruunn 99 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
-_1import mesa 
-_2from mesa.experimental import JupyterViz, make_text 
-_3import altair as alt 
-_4 
-_5from scicom.knowledgespread.agents import ScientistAgent 
-_6from scicom.knowledgespread.model import ( 
-_7 KnowledgeSpread, 
-_8 getActiveAgents, 
-_9 getNetworkStructure 
-_1_0) 
-_1_1from scicom.knowledgespread.utils import ageFunction 
-_1_2from scicom.knowledgespread.server import ( 
-_1_3 agent_draw_altair, 
-_1_4 epiSpace_draw_altair, 
-_1_5 socialNetwork_draw_altair, 
-_1_6 chart_draw_altair_agents, 
-_1_7 chart_draw_altair_communities 
-_1_8) 
-_1_9 
-_2_0model_params = { 
-_2_1 "num_scientists": { 
-_2_2 "type": "SliderInt", 
-_2_3 "value": 50, 
-_2_4 "label": "Initial number of scientists", 
-_2_5 "min": 10, 
-_2_6 "max": 200, 
-_2_7 "step": 10 
-_2_8 }, 
-_2_9 "num_timesteps": { 
-_3_0 "type": "SliderInt", 
-_3_1 "value": 10, 
-_3_2 "label": "How long is the number of agents growing?", 
-_3_3 "min": 5, 
-_3_4 "max": 100, 
-_3_5 "step": 5 
-_3_6 }, 
-_3_7 "epiInit": { 
-_3_8 "type": "Select", 
-_3_9 "value": "complex", 
-_4_0 "label": "Choose initial conditions for epistemic space", 
-_4_1 "values": ['complex', "central", "polarized"] 
-_4_2 }, 
-_4_3 "timeInit": { 
-_4_4 "type": "Select", 
-_4_5 "value": "saturate", 
-_4_6 "label": "Choose initial conditions for population growth.", 
-_4_7 "values": ['saturate', "linear", "exponential"] 
-_4_8 }, 
-_4_9 "epiRange": { 
-_5_0 "type": "SliderFloat", 
-_5_1 "value": 0.01, 
-_5_2 "label": "Basic range of visibility in epistemic space", 
-_5_3 "min": 0.005, 
-_5_4 "max": 0.3, 
-_5_5 "step": 0.005 
-_5_6 } 
-_5_7} 
-_5_8 
-_5_9 
-_6_0page = JupyterViz( 
-_6_1 KnowledgeSpread, 
-_6_2 model_params, 
-_6_3 measures=[socialNetwork_draw_altair, chart_draw_altair_agents,
+********** 55 ssttaatteemmeennttss ?  00 rruunn 55 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_1"""The interface to control and run the Knowledgespread ABM.""" 
+_2from mesa.experimental import JupyterViz 
+_3 
+_4from scicom.knowledgespread.model import ( 
+_5 KnowledgeSpread, 
+_6) 
+_7from scicom.knowledgespread.server import ( 
+_8 agent_draw_altair, 
+_9 chart_draw_altair_agents, 
+_1_0 chart_draw_altair_communities, 
+_1_1 epiSpace_draw_altair, 
+_1_2 socialNetwork_draw_altair, 
+_1_3) 
+_1_4 
+_1_5model_params = { 
+_1_6 "num_scientists": { 
+_1_7 "type": "SliderInt", 
+_1_8 "value": 50, 
+_1_9 "label": "Initial number of scientists", 
+_2_0 "min": 10, 
+_2_1 "max": 200, 
+_2_2 "step": 10, 
+_2_3 }, 
+_2_4 "num_timesteps": { 
+_2_5 "type": "SliderInt", 
+_2_6 "value": 10, 
+_2_7 "label": "How long is the number of agents growing?", 
+_2_8 "min": 5, 
+_2_9 "max": 100, 
+_3_0 "step": 5, 
+_3_1 }, 
+_3_2 "epiInit": { 
+_3_3 "type": "Select", 
+_3_4 "value": "complex", 
+_3_5 "label": "Choose initial conditions for epistemic space", 
+_3_6 "values": ["complex", "central", "polarized"], 
+_3_7 }, 
+_3_8 "timeInit": { 
+_3_9 "type": "Select", 
+_4_0 "value": "saturate", 
+_4_1 "label": "Choose initial conditions for population growth.", 
+_4_2 "values": ["saturate", "linear", "exponential"], 
+_4_3 }, 
+_4_4 "epiRange": { 
+_4_5 "type": "SliderFloat", 
+_4_6 "value": 0.01, 
+_4_7 "label": "Basic range of visibility in epistemic space", 
+_4_8 "min": 0.005, 
+_4_9 "max": 0.3, 
+_5_0 "step": 0.005, 
+_5_1 }, 
+_5_2} 
+_5_3 
+_5_4 
+_5_5page = JupyterViz( 
+_5_6 KnowledgeSpread, 
+_5_7 model_params, 
+_5_8 measures=[socialNetwork_draw_altair, chart_draw_altair_agents,
 chart_draw_altair_communities], 
-_6_4 name="Knowledge spread", 
-_6_5 agent_portrayal=agent_draw_altair, 
-_6_6 space_drawer=epiSpace_draw_altair 
-_6_7) 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
+_5_9 name="Knowledge spread", 
+_6_0 agent_portrayal=agent_draw_altair, 
+_6_1 space_drawer=epiSpace_draw_altair, 
+_6_2) 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_interface_py.html` & `scicom-0.4.1/tests/reports/html/d_124ad581c8e87a79_interface_py.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/interface.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/interface.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/interface.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/knowledgespread/interface.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">5 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">5<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -142,18 +142,18 @@
     <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">    <span class="nam">agent_portrayal</span><span class="op">=</span><span class="nam">agent_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="nam">space_drawer</span><span class="op">=</span><span class="nam">epiSpace_draw_altair</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_124ad581c8e87a79_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,21 +1,21 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
 kknnoowwlleeddggeesspprreeaadd//iinntteerrffaaccee..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 55 ssttaatteemmeennttss ?  00 rruunn 55 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
+26 17:47 +0200
 _1"""The interface to control and run the Knowledgespread ABM.""" 
 _2from mesa.experimental import JupyterViz 
 _3 
 _4from scicom.knowledgespread.model import ( 
 _5 KnowledgeSpread, 
 _6) 
 _7from scicom.knowledgespread.server import ( 
@@ -71,9 +71,9 @@
 _5_7 model_params, 
 _5_8 measures=[socialNetwork_draw_altair, chart_draw_altair_agents,
 chart_draw_altair_communities], 
 _5_9 name="Knowledge spread", 
 _6_0 agent_portrayal=agent_draw_altair, 
 _6_1 space_drawer=epiSpace_draw_altair, 
 _6_2) 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
+26 17:47 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_model_py.html` & `scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_server_py.html`

 * *Files 6% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/model.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/server.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/model.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/server.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,217 +50,235 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">71 statements &nbsp;</span>
+            <span class="text">69 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">71<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">69<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_app_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_utils_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">altair</span> <span class="key">as</span> <span class="nam">alt</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="nam">ScientistAgent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">GenerateInitalPopulation</span><span class="op">,</span> <span class="nam">GenerateSocNet</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">def</span> <span class="nam">getActiveAgents</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="str">"""Get all agents active at time t."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="nam">active</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">        <span class="key">if</span> <span class="nam">x</span><span class="op">.</span><span class="nam">birthtime</span> <span class="op">&lt;=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">            <span class="nam">active</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="key">return</span> <span class="nam">active</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="key">def</span> <span class="nam">getNetworkStructure</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">    <span class="key">return</span> <span class="op">[</span><span class="nam">len</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">community</span><span class="op">.</span><span class="nam">louvain_communities</span><span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="key">class</span> <span class="nam">KnowledgeSpread</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="str">"""A model for knowledge spread. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="str">    Agents have an initial topic vector and are positioned in epistemic space. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t"><span class="str">    The number of agents can grow linearly, as a s-curve, or exponentially.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="str">    Agents initial positions on epistemic space can be diverse (checker board-like),</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t"><span class="str">    around a central position or in opossing camps. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t"><span class="str">    Agents activation probability is age-dependent. After reaching a personal productivity end,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t"><span class="str">    agents are removed from the scheduler.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">            <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">            <span class="nam">num_scientists</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">100</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">            <span class="nam">num_timesteps</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">20</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">            <span class="nam">epiDim</span><span class="op">:</span>  <span class="nam">float</span> <span class="op">=</span> <span class="num">1.0001</span><span class="op">,</span>  <span class="com"># This allows the boundary to be equal +/- one, will raise an exception otherwise</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">            <span class="nam">epiRange</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.01</span><span class="op">,</span>  <span class="com"># Range of visibility in epistemic space.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">            <span class="nam">oppositionPercent</span><span class="op">:</span> <span class="nam">float</span> <span class="op">=</span> <span class="num">0.05</span><span class="op">,</span>  <span class="com"># Weight for random draw of opossing agents </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">            <span class="nam">loadInitialConditions</span><span class="op">:</span> <span class="nam">bool</span> <span class="op">=</span> <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">            <span class="nam">epiInit</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="str">"complex"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">            <span class="nam">timeInit</span><span class="op">:</span> <span class="nam">str</span> <span class="op">=</span> <span class="str">"saturate"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">            <span class="nam">beta</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">8</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">            <span class="nam">slope</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">            <span class="nam">base</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">2</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">            <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numScientists</span> <span class="op">=</span> <span class="nam">num_scientists</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numTimesteps</span> <span class="op">=</span> <span class="nam">num_timesteps</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">epiRange</span> <span class="op">=</span> <span class="nam">epiRange</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">opposPercent</span> <span class="op">=</span> <span class="nam">oppositionPercent</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">loadInitialConditions</span> <span class="op">=</span> <span class="nam">loadInitialConditions</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">epiInit</span> <span class="op">=</span> <span class="nam">epiInit</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">timeInit</span> <span class="op">=</span> <span class="nam">timeInit</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">beta</span> <span class="op">=</span> <span class="nam">beta</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">slope</span> <span class="op">=</span> <span class="nam">slope</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">base</span> <span class="op">=</span> <span class="nam">base</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="com"># Random Schedule</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">time</span><span class="op">.</span><span class="nam">RandomActivation</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">        <span class="com"># Epistemic layer space       </span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">space</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">ContinuousSpace</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">            <span class="nam">epiDim</span><span class="op">,</span> <span class="nam">epiDim</span><span class="op">,</span> <span class="key">False</span><span class="op">,</span> <span class="op">-</span><span class="nam">epiDim</span><span class="op">,</span> <span class="op">-</span><span class="nam">epiDim</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">        <span class="com"># Create initial setup of agents</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="com"># TODO: The topic vector could be a higher dimensional vector derived from text embeddings.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">_setupAgents</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="com"># Create agents from initial conditions. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="nam">agents</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="key">for</span> <span class="nam">ix</span><span class="op">,</span> <span class="nam">cond</span> <span class="key">in</span> <span class="nam">self</span><span class="op">.</span><span class="nam">initpop</span><span class="op">.</span><span class="nam">iterrows</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">            <span class="nam">opose</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="op">[</span><span class="key">False</span><span class="op">,</span> <span class="key">True</span><span class="op">]</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="op">[</span><span class="num">1</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">opposPercent</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">opposPercent</span><span class="op">]</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="com"># TODO: The distribution of productivity length could be empirically motivated. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">            <span class="nam">prodlen</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choices</span><span class="op">(</span><span class="nam">list</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="num">15</span><span class="op">,</span> <span class="num">55</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">1</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">            <span class="nam">agent</span> <span class="op">=</span> <span class="nam">ScientistAgent</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">                <span class="nam">unique_id</span><span class="op">=</span><span class="nam">cond</span><span class="op">[</span><span class="str">"id"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">                <span class="nam">model</span><span class="op">=</span><span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">                <span class="nam">pos</span><span class="op">=</span><span class="op">(</span><span class="nam">cond</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span><span class="op">,</span> <span class="nam">cond</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">                <span class="nam">topicledger</span><span class="op">=</span><span class="op">[</span><span class="op">(</span><span class="nam">cond</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span><span class="op">,</span> <span class="nam">cond</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span><span class="op">,</span> <span class="nam">cond</span><span class="op">[</span><span class="str">"z"</span><span class="op">]</span><span class="op">)</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">                <span class="nam">geopos</span><span class="op">=</span><span class="op">(</span><span class="num">45</span><span class="op">,</span> <span class="num">45</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">                <span class="nam">birthtime</span><span class="op">=</span><span class="nam">cond</span><span class="op">[</span><span class="str">"t"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">                <span class="nam">opposition</span><span class="op">=</span><span class="nam">opose</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">                <span class="nam">productivity</span><span class="op">=</span><span class="op">(</span><span class="num">7</span><span class="op">,</span> <span class="num">7</span><span class="op">,</span> <span class="nam">prodlen</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">            <span class="nam">agents</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">        <span class="com"># Setup social layer connections and space</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="nam">edges</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">_setupSocialSpace</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">socialNetwork</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">from_pandas_edgelist</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">            <span class="nam">edges</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">            <span class="nam">source</span><span class="op">=</span><span class="str">'from_id'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">            <span class="nam">target</span><span class="op">=</span><span class="str">'to_id'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">            <span class="nam">edge_attr</span><span class="op">=</span><span class="op">[</span><span class="str">"time"</span><span class="op">,</span> <span class="str">"dist"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="com"># TODO: What is the effect of the GRID dimensions on social dynamics?</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">grid</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">MultiGrid</span><span class="op">(</span><span class="num">1000</span><span class="op">,</span> <span class="num">1000</span><span class="op">,</span> <span class="nam">torus</span><span class="op">=</span><span class="key">False</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="com"># Add agents to epistemic space and schedule.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">place_agent</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">                <span class="nam">agent</span><span class="op">,</span> <span class="nam">pos</span><span class="op">=</span><span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">            <span class="nam">x</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">randrange</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">grid</span><span class="op">.</span><span class="nam">width</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">            <span class="nam">y</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">randrange</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">grid</span><span class="op">.</span><span class="nam">height</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">grid</span><span class="op">.</span><span class="nam">place_agent</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">                <span class="nam">agent</span><span class="op">,</span> <span class="op">(</span><span class="nam">x</span><span class="op">,</span> <span class="nam">y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">add</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="com"># Setup data collection</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">DataCollector</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">            <span class="nam">model_reporters</span><span class="op">=</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">                <span class="str">"Active Agents"</span><span class="op">:</span> <span class="key">lambda</span> <span class="nam">m</span><span class="op">:</span> <span class="nam">getActiveAgents</span><span class="op">(</span><span class="nam">m</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">                <span class="str">"Graph structure"</span><span class="op">:</span> <span class="key">lambda</span> <span class="nam">m</span><span class="op">:</span> <span class="nam">getNetworkStructure</span><span class="op">(</span><span class="nam">m</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">            <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">        <span class="com"># Start in running mode</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">running</span> <span class="op">=</span> <span class="key">True</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">    <span class="key">def</span> <span class="nam">_setupAgents</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">        <span class="str">"""Create initial setup of agents."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="key">if</span> <span class="nam">self</span><span class="op">.</span><span class="nam">loadInitialConditions</span> <span class="key">is</span> <span class="key">False</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">            <span class="nam">epiInit</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">epiInit</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">            <span class="nam">timeInit</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">timeInit</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="nam">beta</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">beta</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">            <span class="nam">slope</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">slope</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">            <span class="nam">base</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">base</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">            <span class="key">raise</span> <span class="nam">NotImplementedError</span><span class="op">(</span><span class="str">"The reading-in of external initial conditions is not implemented yet. Come back later!"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">        <span class="nam">epiOpt</span> <span class="op">=</span> <span class="op">[</span><span class="str">"complex"</span><span class="op">,</span> <span class="str">"central"</span><span class="op">,</span> <span class="str">"polarized"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">        <span class="nam">timeOpt</span> <span class="op">=</span> <span class="op">[</span><span class="str">"saturate"</span><span class="op">,</span> <span class="str">"linear"</span><span class="op">,</span> <span class="str">"exponential"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">        <span class="key">if</span> <span class="nam">epiInit</span> <span class="key">in</span> <span class="nam">epiOpt</span> <span class="key">and</span> <span class="nam">timeInit</span> <span class="key">in</span> <span class="nam">timeOpt</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">            <span class="nam">generate</span> <span class="op">=</span> <span class="nam">GenerateInitalPopulation</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">numScientists</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">numTimesteps</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">            <span class="nam">initalPop</span> <span class="op">=</span> <span class="nam">generate</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">                <span class="nam">fcE</span><span class="op">=</span><span class="nam">epiInit</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">                <span class="nam">fcT</span><span class="op">=</span><span class="nam">timeInit</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">                <span class="nam">beta</span><span class="op">=</span><span class="nam">beta</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                <span class="nam">slope</span><span class="op">=</span><span class="nam">slope</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">                <span class="nam">base</span><span class="op">=</span><span class="nam">base</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">initpop</span> <span class="op">=</span> <span class="nam">initalPop</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">            <span class="key">raise</span> <span class="nam">KeyError</span><span class="op">(</span><span class="str">f"Choose epiInit from {epiOpt} and timeInit from {timeOpt}."</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">    <span class="key">def</span> <span class="nam">_setupSocialSpace</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">nEdges</span><span class="op">=</span><span class="num">4</span><span class="op">,</span> <span class="nam">density</span><span class="op">=</span><span class="num">0.2</span><span class="op">,</span> <span class="nam">densityGrowth</span><span class="op">=</span><span class="num">0</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">        <span class="str">"""Setup initial social connections."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">        <span class="nam">genSoc</span> <span class="op">=</span> <span class="nam">GenerateSocNet</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">initpop</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="nam">socNet</span> <span class="op">=</span> <span class="nam">genSoc</span><span class="op">.</span><span class="nam">run</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">            <span class="nam">nEdges</span><span class="op">=</span><span class="nam">nEdges</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">            <span class="nam">density</span><span class="op">=</span><span class="nam">density</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">            <span class="nam">densityGrowth</span><span class="op">=</span><span class="nam">densityGrowth</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">        <span class="key">return</span> <span class="nam">socNet</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">nx_altair</span> <span class="key">as</span> <span class="nam">nxa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">solara</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">matplotlib</span> <span class="key">import</span> <span class="nam">colors</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">modules</span> <span class="key">import</span> <span class="nam">ChartVisualization</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">KnowledgeSpread</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">SimpleContinuousModule</span> <span class="key">import</span> <span class="nam">SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">ageFunction</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="str">"num_scientists"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">        <span class="str">"Initial number of scientists"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="num">100</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">200</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">    <span class="str">"num_timesteps"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="str">"How long is the number of agents growing?"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="num">20</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="str">"oppositionPercent"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="str">"Percentage of opposing agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="num">0.05</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="str">"epiInit"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Choice</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="str">"Choose initial conditions for epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">value</span><span class="op">=</span><span class="op">(</span><span class="str">"complex"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">choices</span><span class="op">=</span><span class="op">[</span><span class="str">"complex"</span><span class="op">,</span> <span class="str">"central"</span><span class="op">,</span> <span class="str">"polarized"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="str">"timeInit"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Choice</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="str">"Choose initial conditions for population growth."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="nam">value</span><span class="op">=</span><span class="op">(</span><span class="str">"saturate"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">choices</span><span class="op">=</span><span class="op">[</span><span class="str">"saturate"</span><span class="op">,</span> <span class="str">"linear"</span><span class="op">,</span> <span class="str">"exponential"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">    <span class="str">"epiRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="str">"Basic range of visibility in epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="num">0.005</span><span class="op">,</span> <span class="num">0.001</span><span class="op">,</span> <span class="num">0.03</span><span class="op">,</span> <span class="num">0.001</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t"><span class="key">def</span> <span class="nam">agent_draw_altair</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="nam">shapeDict</span> <span class="op">=</span> <span class="op">{</span><span class="key">True</span><span class="op">:</span> <span class="str">"triangle-up"</span><span class="op">,</span> <span class="key">False</span><span class="op">:</span> <span class="str">"circle"</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">    <span class="nam">color</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">    <span class="com">#color = "#" + "".join(format(int(round(val * 255)), "02x") for val in colortuple)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">    <span class="key">if</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">age</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">size</span> <span class="op">=</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">a</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">b</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">c</span><span class="op">,</span> <span class="num">10</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="nam">size</span> <span class="op">=</span> <span class="num">0.001</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">    <span class="nam">probDict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="com">#"Shape": shapeDict[agent.opposition],</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="str">"opposition"</span><span class="op">:</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">opposition</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="com">#"r": ageFunction(agent),</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="str">"size"</span><span class="op">:</span> <span class="nam">size</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="com">#"Filled": "true",</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="str">"Color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="str">"color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">    <span class="key">return</span> <span class="nam">probDict</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t"><span class="key">def</span> <span class="nam">chart_draw_altair_agents</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">get_model_vars_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="op">.</span><span class="nam">mark_bar</span><span class="op">(</span><span class="nam">color</span><span class="op">=</span><span class="str">"orange"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">            <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"index"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"Step"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">            <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">                <span class="str">"Active Agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">                <span class="nam">title</span><span class="op">=</span><span class="str">"Active agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t"><span class="key">def</span> <span class="nam">chart_draw_altair_communities</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">get_model_vars_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">    <span class="nam">data</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"compLen"</span><span class="op">,</span> <span class="nam">data</span><span class="op">[</span><span class="str">"Graph structure"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">len</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">        <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">        <span class="op">.</span><span class="nam">mark_bar</span><span class="op">(</span><span class="nam">color</span><span class="op">=</span><span class="str">"orange"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">        <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">            <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"index"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"Step"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">            <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">                <span class="str">"compLen"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">                <span class="nam">title</span><span class="op">=</span><span class="str">"Communities in social network"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="key">def</span> <span class="nam">epiSpace_draw_altair</span><span class="op">(</span><span class="nam">model</span><span class="op">,</span> <span class="nam">agent_portrayal</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">    <span class="nam">isOpposed</span> <span class="op">=</span> <span class="op">(</span><span class="key">False</span><span class="op">,</span> <span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">    <span class="nam">shape_range</span> <span class="op">=</span> <span class="op">(</span><span class="str">"circle"</span><span class="op">,</span> <span class="str">"triangle-up"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">    <span class="nam">all_agent_data</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">    <span class="key">if</span> <span class="key">not</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">        <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">Markdown</span><span class="op">(</span><span class="str">"## Finished run"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">            <span class="nam">cur_agent</span> <span class="op">=</span> <span class="nam">agent_draw_altair</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">            <span class="nam">cur_agent</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">            <span class="nam">cur_agent</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="nam">all_agent_data</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">cur_agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="nam">df</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span><span class="nam">all_agent_data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="nam">colors</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">set</span><span class="op">(</span><span class="nam">a</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="key">for</span> <span class="nam">a</span> <span class="key">in</span> <span class="nam">all_agent_data</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="nam">chart_color</span> <span class="op">=</span> <span class="nam">alt</span><span class="op">.</span><span class="nam">Color</span><span class="op">(</span><span class="str">"color"</span><span class="op">)</span><span class="op">.</span><span class="nam">legend</span><span class="op">(</span><span class="key">None</span><span class="op">)</span><span class="op">.</span><span class="nam">scale</span><span class="op">(</span><span class="nam">domain</span><span class="op">=</span><span class="nam">colors</span><span class="op">,</span> <span class="nam">range</span><span class="op">=</span><span class="nam">colors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">        <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">            <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">df</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">            <span class="op">.</span><span class="nam">mark_point</span><span class="op">(</span><span class="nam">filled</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">            <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">                <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"x"</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">,</span>  <span class="com"># no x-axis label</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">                <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span><span class="str">"y"</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">,</span>  <span class="com"># no y-axis label</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">                <span class="nam">size</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Size</span><span class="op">(</span><span class="str">"size"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"current activity"</span><span class="op">)</span><span class="op">,</span>  <span class="com"># relabel size for legend</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="nam">color</span><span class="op">=</span><span class="nam">chart_color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">                <span class="nam">shape</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Shape</span><span class="op">(</span>  <span class="com"># use shape to indicate choice</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">                    <span class="str">"opposition"</span><span class="op">,</span> <span class="nam">scale</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Scale</span><span class="op">(</span><span class="nam">domain</span><span class="op">=</span><span class="nam">isOpposed</span><span class="op">,</span> <span class="nam">range</span><span class="op">=</span><span class="nam">shape_range</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">                <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">            <span class="op">.</span><span class="nam">configure_view</span><span class="op">(</span><span class="nam">strokeOpacity</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>  <span class="com"># hide grid/chart lines</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t"><span class="key">def</span> <span class="nam">socialNetwork_draw_altair</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">    <span class="nam">currentTime</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">    <span class="nam">H</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">    <span class="nam">Graph</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">Graph</span><span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span><span class="op">)</span> <span class="key">for</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">H</span><span class="op">.</span><span class="nam">edges</span><span class="op">(</span><span class="nam">data</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">e</span><span class="op">[</span><span class="str">"time"</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="nam">currentTime</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">    <span class="nam">pos</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">kamada_kawai_layout</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">    <span class="nam">between</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">betweenness_centrality</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">    <span class="nam">nx</span><span class="op">.</span><span class="nam">set_node_attributes</span><span class="op">(</span><span class="nam">Graph</span><span class="op">,</span> <span class="nam">between</span><span class="op">,</span> <span class="str">"between"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">    <span class="nam">communities</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">nx</span><span class="op">.</span><span class="nam">community</span><span class="op">.</span><span class="nam">label_propagation_communities</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">    <span class="key">for</span> <span class="nam">f</span> <span class="key">in</span> <span class="nam">Graph</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">c</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">communities</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">            <span class="key">if</span> <span class="nam">f</span> <span class="key">in</span> <span class="nam">c</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                <span class="nam">Graph</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">f</span><span class="op">]</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">                    <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">                        <span class="str">"community"</span><span class="op">:</span> <span class="nam">str</span><span class="op">(</span><span class="nam">i</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">                        <span class="str">"name"</span><span class="op">:</span> <span class="nam">f</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">                    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="nam">nxa</span><span class="op">.</span><span class="nam">draw_networkx</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="nam">G</span><span class="op">=</span><span class="nam">Graph</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">        <span class="nam">pos</span><span class="op">=</span><span class="nam">pos</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">        <span class="nam">node_color</span><span class="op">=</span><span class="str">"between"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="nam">edge_color</span><span class="op">=</span><span class="str">"time"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">        <span class="nam">cmap</span><span class="op">=</span><span class="str">"viridis"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">    <span class="nam">chart</span><span class="op">.</span><span class="nam">configure_view</span><span class="op">(</span><span class="nam">strokeOpacity</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>  <span class="com"># hide grid/chart lines</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">        <span class="str">"""Run one simulation step."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">        <span class="key">if</span> <span class="key">not</span> <span class="nam">len</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">)</span> <span class="op">></span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">running</span> <span class="op">=</span> <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">        <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">collect</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">    <span class="key">def</span> <span class="nam">run</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">        <span class="str">"""Run model for n steps."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">        <span class="key">for</span> <span class="nam">_</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">n</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">step</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t"><span class="key">def</span> <span class="nam">agent_draw</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">    <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">    <span class="nam">color</span> <span class="op">=</span> <span class="str">"#"</span> <span class="op">+</span> <span class="str">""</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">format</span><span class="op">(</span><span class="nam">int</span><span class="op">(</span><span class="nam">round</span><span class="op">(</span><span class="nam">val</span> <span class="op">*</span> <span class="num">255</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="str">"02x"</span><span class="op">)</span> <span class="key">for</span> <span class="nam">val</span> <span class="key">in</span> <span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">    <span class="nam">probDict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">        <span class="str">"Shape"</span><span class="op">:</span> <span class="str">"circle"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">        <span class="str">"r"</span><span class="op">:</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">        <span class="str">"Filled"</span><span class="op">:</span> <span class="str">"true"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">        <span class="str">"Color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">    <span class="key">return</span> <span class="nam">probDict</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t"><span class="nam">chart</span> <span class="op">=</span> <span class="nam">ChartVisualization</span><span class="op">.</span><span class="nam">ChartModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">    <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Active Agents"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"#000000"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Graph components"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"black"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">    <span class="nam">data_collector_name</span><span class="op">=</span><span class="str">"datacollector"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t"><span class="nam">epistemic_canvas</span> <span class="op">=</span> <span class="nam">SimpleCanvas</span><span class="op">(</span><span class="nam">agent_draw</span><span class="op">,</span> <span class="num">720</span><span class="op">,</span> <span class="num">720</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t"><span class="nam">server</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">ModularServer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">    <span class="nam">KnowledgeSpread</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">    <span class="op">[</span><span class="nam">epistemic_canvas</span><span class="op">,</span> <span class="nam">chart</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">    <span class="str">"Knowledge spread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_app_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_server_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_utils_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,196 +1,207 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-kknnoowwlleeddggeesspprreeaadd//mmooddeell..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+kknnoowwlleeddggeesspprreeaadd//sseerrvveerr..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 7711 ssttaatteemmeennttss ?  00 rruunn 7711 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
-_1import networkx as nx 
+********** 6699 ssttaatteemmeennttss ?  00 rruunn 6699 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
+_1import altair as alt 
 _2import mesa 
-_3from scicom.knowledgespread.agents import ScientistAgent 
-_4from scicom.knowledgespread.utils import GenerateInitalPopulation,
-GenerateSocNet 
-_5 
-_6 
-_7def getActiveAgents(model): 
-_8 """Get all agents active at time t.""" 
-_9 active = 0 
-_1_0 for x in model.schedule.agents: 
-_1_1 if x.birthtime <= model.schedule.time: 
-_1_2 active += 1 
-_1_3 return active 
-_1_4 
-_1_5 
-_1_6def getNetworkStructure(model): 
-_1_7 return [len(x) for x in nx.community.louvain_communities
-(model.socialNetwork)] 
-_1_8 
-_1_9 
-_2_0class KnowledgeSpread(mesa.Model): 
-_2_1 """A model for knowledge spread.  
-_2_2  
-_2_3 Agents have an initial topic vector and are positioned in epistemic space.  
-_2_4 The number of agents can grow linearly, as a s-curve, or exponentially. 
-_2_5 Agents initial positions on epistemic space can be diverse (checker board-
-like), 
-_2_6 around a central position or in opossing camps.  
-_2_7 
-_2_8 Agents activation probability is age-dependent. After reaching a personal
-productivity end, 
-_2_9 agents are removed from the scheduler. 
-_3_0 
-_3_1 """ 
-_3_2 
-_3_3 def __init__( 
-_3_4 self, 
-_3_5 num_scientists: int = 100, 
-_3_6 num_timesteps: int = 20, 
-_3_7 epiDim: float = 1.0001, # This allows the boundary to be equal +/- one, will
-raise an exception otherwise 
-_3_8 epiRange: float = 0.01, # Range of visibility in epistemic space. 
-_3_9 oppositionPercent: float = 0.05, # Weight for random draw of opossing agents
- 
-_4_0 loadInitialConditions: bool = False, 
-_4_1 epiInit: str = "complex", 
-_4_2 timeInit: str = "saturate", 
-_4_3 beta: int = 8, 
-_4_4 slope: int = 5, 
-_4_5 base: int = 2, 
-_4_6 ): 
-_4_7 
-_4_8 self.numScientists = num_scientists 
-_4_9 self.numTimesteps = num_timesteps 
-_5_0 self.epiRange = epiRange 
-_5_1 self.opposPercent = oppositionPercent 
-_5_2 self.loadInitialConditions = loadInitialConditions 
-_5_3 self.epiInit = epiInit 
-_5_4 self.timeInit = timeInit 
-_5_5 self.beta = beta 
-_5_6 self.slope = slope 
-_5_7 self.base = base 
-_5_8 
-_5_9 # Random Schedule 
-_6_0 self.schedule = mesa.time.RandomActivation(self) 
-_6_1 
-_6_2 # Epistemic layer space  
-_6_3 self.space = mesa.space.ContinuousSpace( 
-_6_4 epiDim, epiDim, False, -epiDim, -epiDim 
-_6_5 ) 
-_6_6 
-_6_7 # Create initial setup of agents 
-_6_8 # TODO: The topic vector could be a higher dimensional vector derived from
-text embeddings. 
-_6_9 self._setupAgents() 
-_7_0 
-_7_1 # Create agents from initial conditions.  
-_7_2 agents = [] 
-_7_3 for ix, cond in self.initpop.iterrows(): 
-_7_4 opose = self.random.choices([False, True], weights=[1 - self.opposPercent,
-self.opposPercent], k=1) 
-_7_5 # TODO: The distribution of productivity length could be empirically
-motivated.  
-_7_6 prodlen = self.random.choices(list(range(15, 55, 1)), k=1) 
-_7_7 agent = ScientistAgent( 
-_7_8 unique_id=cond["id"], 
-_7_9 model=self, 
-_8_0 pos=(cond["x"], cond["y"]), 
-_8_1 topicledger=[(cond["x"], cond["y"], cond["z"])], 
-_8_2 geopos=(45, 45), 
-_8_3 birthtime=cond["t"], 
-_8_4 opposition=opose[0], 
-_8_5 productivity=(7, 7, prodlen[0]) 
-_8_6 ) 
-_8_7 agents.append(agent) 
-_8_8 
-_8_9 # Setup social layer connections and space 
-_9_0 edges = self._setupSocialSpace() 
-_9_1 self.socialNetwork = nx.from_pandas_edgelist( 
-_9_2 edges, 
-_9_3 source='from_id', 
-_9_4 target='to_id', 
-_9_5 edge_attr=["time", "dist"] 
-_9_6 ) 
-_9_7 # TODO: What is the effect of the GRID dimensions on social dynamics? 
-_9_8 self.grid = mesa.space.MultiGrid(1000, 1000, torus=False) 
-_9_9 
-_1_0_0 # Add agents to epistemic space and schedule. 
-_1_0_1 for agent in agents: 
-_1_0_2 self.space.place_agent( 
-_1_0_3 agent, pos=agent.pos 
-_1_0_4 ) 
-_1_0_5 x = self.random.randrange(self.grid.width) 
-_1_0_6 y = self.random.randrange(self.grid.height) 
-_1_0_7 self.grid.place_agent( 
-_1_0_8 agent, (x, y) 
-_1_0_9 ) 
-_1_1_0 self.schedule.add(agent) 
-_1_1_1 
-_1_1_2 # Setup data collection 
-_1_1_3 self.datacollector = mesa.DataCollector( 
-_1_1_4 model_reporters={ 
-_1_1_5 "Active Agents": lambda m: getActiveAgents(m), 
-_1_1_6 "Graph structure": lambda m: getNetworkStructure(m), 
-_1_1_7 }, 
-_1_1_8 ) 
-_1_1_9 
-_1_2_0 # Start in running mode 
-_1_2_1 self.running = True 
-_1_2_2 
-_1_2_3 def _setupAgents(self): 
-_1_2_4 """Create initial setup of agents.""" 
-_1_2_5 if self.loadInitialConditions is False: 
-_1_2_6 epiInit = self.epiInit 
-_1_2_7 timeInit = self.timeInit 
-_1_2_8 beta = self.beta 
-_1_2_9 slope = self.slope 
-_1_3_0 base = self.base 
-_1_3_1 else: 
-_1_3_2 raise NotImplementedError("The reading-in of external initial conditions is
-not implemented yet. Come back later!") 
-_1_3_3 epiOpt = ["complex", "central", "polarized"] 
-_1_3_4 timeOpt = ["saturate", "linear", "exponential"] 
-_1_3_5 if epiInit in epiOpt and timeInit in timeOpt: 
-_1_3_6 generate = GenerateInitalPopulation(self.numScientists, self.numTimesteps) 
-_1_3_7 initalPop = generate.sample( 
-_1_3_8 fcE=epiInit, 
-_1_3_9 fcT=timeInit, 
-_1_4_0 beta=beta, 
-_1_4_1 slope=slope, 
-_1_4_2 base=base 
-_1_4_3 ) 
-_1_4_4 self.initpop = initalPop 
-_1_4_5 else: 
-_1_4_6 raise KeyError(f"Choose epiInit from {epiOpt} and timeInit from
-{timeOpt}.") 
-_1_4_7 
-_1_4_8 def _setupSocialSpace(self, nEdges=4, density=0.2, densityGrowth=0): 
-_1_4_9 """Setup initial social connections.""" 
-_1_5_0 genSoc = GenerateSocNet(self.initpop) 
-_1_5_1 socNet = genSoc.run( 
-_1_5_2 nEdges=nEdges, 
-_1_5_3 density=density, 
-_1_5_4 densityGrowth=densityGrowth 
-_1_5_5 ) 
-_1_5_6 return socNet 
+_3import networkx as nx 
+_4import nx_altair as nxa 
+_5import pandas as pd 
+_6import solara 
+_7from matplotlib import colors 
+_8from mesa.visualization.modules import ChartVisualization 
+_9 
+_1_0from scicom.knowledgespread.model import KnowledgeSpread 
+_1_1from scicom.knowledgespread.SimpleContinuousModule import SimpleCanvas 
+_1_2from scicom.knowledgespread.utils import ageFunction 
+_1_3 
+_1_4model_params = { 
+_1_5 "num_scientists": mesa.visualization.Slider( 
+_1_6 "Initial number of scientists", 
+_1_7 100, 10, 200, 10, 
+_1_8 ), 
+_1_9 "num_timesteps": mesa.visualization.Slider( 
+_2_0 "How long is the number of agents growing?", 
+_2_1 20, 5, 100, 5, 
+_2_2 ), 
+_2_3 "oppositionPercent": mesa.visualization.Slider( 
+_2_4 "Percentage of opposing agents", 
+_2_5 0.05, 0, 0.5, 0.05, 
+_2_6 ), 
+_2_7 "epiInit": mesa.visualization.Choice( 
+_2_8 "Choose initial conditions for epistemic space", 
+_2_9 value=("complex"), 
+_3_0 choices=["complex", "central", "polarized"], 
+_3_1 ), 
+_3_2 "timeInit": mesa.visualization.Choice( 
+_3_3 "Choose initial conditions for population growth.", 
+_3_4 value=("saturate"), 
+_3_5 choices=["saturate", "linear", "exponential"], 
+_3_6 ), 
+_3_7 "epiRange": mesa.visualization.Slider( 
+_3_8 "Basic range of visibility in epistemic space", 
+_3_9 0.005, 0.001, 0.03, 0.001, 
+_4_0 ), 
+_4_1} 
+_4_2 
+_4_3 
+_4_4def agent_draw_altair(agent): 
+_4_5 shapeDict = {True: "triangle-up", False: "circle"} 
+_4_6 colortuple = set(agent.topicledger[-1]) 
+_4_7 color = colors.to_hex(colortuple) 
+_4_8 #color = "#" + "".join(format(int(round(val * 255)), "02x") for val in
+colortuple) 
+_4_9 if agent.age > 0: 
+_5_0 size = ageFunction(agent, agent.a, agent.b, agent.c, 10) 
+_5_1 else: 
+_5_2 size = 0.001 
+_5_3 probDict = { 
+_5_4 #"Shape": shapeDict[agent.opposition], 
+_5_5 "opposition": agent.opposition, 
+_5_6 #"r": ageFunction(agent), 
+_5_7 "size": size, 
+_5_8 #"Filled": "true", 
+_5_9 "Color": color, 
+_6_0 "color": color, 
+_6_1 } 
+_6_2 return probDict 
+_6_3 
+_6_4 
+_6_5def chart_draw_altair_agents(model): 
+_6_6 data = model.datacollector.get_model_vars_dataframe().reset_index() 
+_6_7 chart = ( 
+_6_8 alt.Chart(data) 
+_6_9 .mark_bar(color="orange") 
+_7_0 .encode( 
+_7_1 x=alt.X("index", title="Step"), 
+_7_2 y=alt.Y( 
+_7_3 "Active Agents", 
+_7_4 title="Active agents", 
+_7_5 ), 
+_7_6 ) 
+_7_7 ) 
+_7_8 return solara.FigureAltair(chart) 
+_7_9 
+_8_0 
+_8_1def chart_draw_altair_communities(model): 
+_8_2 data = model.datacollector.get_model_vars_dataframe().reset_index() 
+_8_3 data.insert(0, "compLen", data["Graph structure"].apply(lambda x: len(x))) 
+_8_4 chart = ( 
+_8_5 alt.Chart(data) 
+_8_6 .mark_bar(color="orange") 
+_8_7 .encode( 
+_8_8 x=alt.X("index", title="Step"), 
+_8_9 y=alt.Y( 
+_9_0 "compLen", 
+_9_1 title="Communities in social network", 
+_9_2 ), 
+_9_3 ) 
+_9_4 ) 
+_9_5 return solara.FigureAltair(chart) 
+_9_6 
+_9_7 
+_9_8def epiSpace_draw_altair(model, agent_portrayal): 
+_9_9 isOpposed = (False, True) 
+_1_0_0 shape_range = ("circle", "triangle-up") 
+_1_0_1 all_agent_data = [] 
+_1_0_2 if not model.schedule.agents: 
+_1_0_3 return solara.Markdown("## Finished run") 
+_1_0_4 else: 
+_1_0_5 for agent in model.schedule.agents: 
+_1_0_6 cur_agent = agent_draw_altair(agent) 
+_1_0_7 cur_agent["x"] = agent.pos[0] 
+_1_0_8 cur_agent["y"] = agent.pos[1] 
+_1_0_9 all_agent_data.append(cur_agent) 
+_1_1_0 df = pd.DataFrame(all_agent_data) 
+_1_1_1 colors = list(set(a["color"] for a in all_agent_data)) 
+_1_1_2 chart_color = alt.Color("color").legend(None).scale(domain=colors,
+range=colors) 
+_1_1_3 chart = ( 
+_1_1_4 alt.Chart(df) 
+_1_1_5 .mark_point(filled=True) 
+_1_1_6 .encode( 
+_1_1_7 x=alt.X("x", axis=None), # no x-axis label 
+_1_1_8 y=alt.Y("y", axis=None), # no y-axis label 
+_1_1_9 size=alt.Size("size", title="current activity"), # relabel size for legend 
+_1_2_0 color=chart_color, 
+_1_2_1 shape=alt.Shape( # use shape to indicate choice 
+_1_2_2 "opposition", scale=alt.Scale(domain=isOpposed, range=shape_range), 
+_1_2_3 ), 
+_1_2_4 ) 
+_1_2_5 .configure_view(strokeOpacity=0) # hide grid/chart lines 
+_1_2_6 ) 
+_1_2_7 return solara.FigureAltair(chart) 
+_1_2_8 
+_1_2_9 
+_1_3_0def socialNetwork_draw_altair(model): 
+_1_3_1 currentTime = model.schedule.time 
+_1_3_2 H = model.socialNetwork 
+_1_3_3 Graph = nx.Graph(((u, v, e) for u, v, e in H.edges(data=True) if e["time"]
+<= currentTime)) 
+_1_3_4 pos = nx.kamada_kawai_layout(Graph) 
+_1_3_5 between = nx.betweenness_centrality(Graph) 
+_1_3_6 nx.set_node_attributes(Graph, between, "between") 
+_1_3_7 communities = list(nx.community.label_propagation_communities(Graph)) 
+_1_3_8 for f in Graph.nodes(): 
+_1_3_9 for i, c in enumerate(communities): 
+_1_4_0 if f in c: 
+_1_4_1 Graph.nodes()[f].update( 
+_1_4_2 { 
+_1_4_3 "community": str(i), 
+_1_4_4 "name": f, 
+_1_4_5 }, 
+_1_4_6 ) 
+_1_4_7 chart = nxa.draw_networkx( 
+_1_4_8 G=Graph, 
+_1_4_9 pos=pos, 
+_1_5_0 node_color="between", 
+_1_5_1 edge_color="time", 
+_1_5_2 cmap="viridis", 
+_1_5_3 ) 
+_1_5_4 chart.configure_view(strokeOpacity=0) # hide grid/chart lines 
+_1_5_5 return solara.FigureAltair(chart) 
+_1_5_6 
 _1_5_7 
-_1_5_8 def step(self): 
-_1_5_9 """Run one simulation step.""" 
-_1_6_0 if not len(self.schedule.agents) > 1: 
-_1_6_1 self.running = False 
-_1_6_2 else: 
-_1_6_3 self.schedule.step() 
-_1_6_4 self.datacollector.collect(self) 
-_1_6_5 
-_1_6_6 def run(self, n): 
-_1_6_7 """Run model for n steps.""" 
-_1_6_8 for _ in range(n): 
-_1_6_9 self.step() 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
+_1_5_8def agent_draw(agent): 
+_1_5_9 colortuple = set(agent.topicledger[-1]) 
+_1_6_0 color = "#" + "".join(format(int(round(val * 255)), "02x") for val in
+colortuple) 
+_1_6_1 probDict = { 
+_1_6_2 "Shape": "circle", 
+_1_6_3 "r": ageFunction(agent), 
+_1_6_4 "Filled": "true", 
+_1_6_5 "Color": color, 
+_1_6_6 } 
+_1_6_7 return probDict 
+_1_6_8 
+_1_6_9 
+_1_7_0chart = ChartVisualization.ChartModule( 
+_1_7_1 [ 
+_1_7_2 {"Label": "Active Agents", "Color": "#000000"}, 
+_1_7_3 {"Label": "Graph components", "Color": "black"}, 
+_1_7_4 ], 
+_1_7_5 data_collector_name="datacollector", 
+_1_7_6) 
+_1_7_7 
+_1_7_8 
+_1_7_9epistemic_canvas = SimpleCanvas(agent_draw, 720, 720) 
+_1_8_0 
+_1_8_1 
+_1_8_2server = mesa.visualization.ModularServer( 
+_1_8_3 KnowledgeSpread, 
+_1_8_4 [epistemic_canvas, chart], 
+_1_8_5 "Knowledge spread", 
+_1_8_6 model_params, 
+_1_8_7) 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_server_py.html` & `scicom-0.4.1/tests/reports/html/d_22d2582a602e487e_prune_py.html`

 * *Files 8% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/server.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/utilities/prune.py: 19%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/server.py</b>:
-            <span class="pc_cov">0%</span>
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/utilities/prune.py</b>:
+            <span class="pc_cov">19%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,235 +50,197 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">69 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">69<span class="text"> missing</span></button>
+            <span class="text">57 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">11<span class="text"> run</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">46<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_22d2582a602e487e___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_22d2582a602e487e_statistics_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">altair</span> <span class="key">as</span> <span class="nam">alt</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">networkx</span> <span class="key">as</span> <span class="nam">nx</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">nx_altair</span> <span class="key">as</span> <span class="nam">nxa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">import</span> <span class="nam">solara</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">matplotlib</span> <span class="key">import</span> <span class="nam">colors</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">modules</span> <span class="key">import</span> <span class="nam">ChartVisualization</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">KnowledgeSpread</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">SimpleContinuousModule</span> <span class="key">import</span> <span class="nam">SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">utils</span> <span class="key">import</span> <span class="nam">ageFunction</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="str">"num_scientists"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">        <span class="str">"Initial number of scientists"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="num">100</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span> <span class="num">200</span><span class="op">,</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">    <span class="str">"num_timesteps"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">        <span class="str">"How long is the number of agents growing?"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="num">20</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span> <span class="num">100</span><span class="op">,</span> <span class="num">5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">    <span class="str">"oppositionPercent"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="str">"Percentage of opposing agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="num">0.05</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">    <span class="str">"epiInit"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Choice</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="str">"Choose initial conditions for epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">value</span><span class="op">=</span><span class="op">(</span><span class="str">"complex"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">choices</span><span class="op">=</span><span class="op">[</span><span class="str">"complex"</span><span class="op">,</span> <span class="str">"central"</span><span class="op">,</span> <span class="str">"polarized"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="str">"timeInit"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Choice</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="str">"Choose initial conditions for population growth."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="nam">value</span><span class="op">=</span><span class="op">(</span><span class="str">"saturate"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">choices</span><span class="op">=</span><span class="op">[</span><span class="str">"saturate"</span><span class="op">,</span> <span class="str">"linear"</span><span class="op">,</span> <span class="str">"exponential"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">    <span class="str">"epiRange"</span><span class="op">:</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">Slider</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="str">"Basic range of visibility in epistemic space"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="num">0.005</span><span class="op">,</span> <span class="num">0.001</span><span class="op">,</span> <span class="num">0.03</span><span class="op">,</span> <span class="num">0.001</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t"><span class="key">def</span> <span class="nam">agent_draw_altair</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="nam">shapeDict</span> <span class="op">=</span> <span class="op">{</span><span class="key">True</span><span class="op">:</span> <span class="str">"triangle-up"</span><span class="op">,</span> <span class="key">False</span><span class="op">:</span> <span class="str">"circle"</span><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">    <span class="nam">color</span> <span class="op">=</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">    <span class="com">#color = "#" + "".join(format(int(round(val * 255)), "02x") for val in colortuple)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">    <span class="key">if</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">age</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">size</span> <span class="op">=</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">a</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">b</span><span class="op">,</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">c</span><span class="op">,</span> <span class="num">10</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="nam">size</span> <span class="op">=</span> <span class="num">0.001</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">    <span class="nam">probDict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="com">#"Shape": shapeDict[agent.opposition],</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="str">"opposition"</span><span class="op">:</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">opposition</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="com">#"r": ageFunction(agent),</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="str">"size"</span><span class="op">:</span> <span class="nam">size</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="com">#"Filled": "true",</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="str">"Color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="str">"color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">    <span class="key">return</span> <span class="nam">probDict</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t"><span class="key">def</span> <span class="nam">chart_draw_altair_agents</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">get_model_vars_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="op">.</span><span class="nam">mark_bar</span><span class="op">(</span><span class="nam">color</span><span class="op">=</span><span class="str">"orange"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">            <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"index"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"Step"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">            <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">                <span class="str">"Active Agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">                <span class="nam">title</span><span class="op">=</span><span class="str">"Active agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t"><span class="key">def</span> <span class="nam">chart_draw_altair_communities</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">datacollector</span><span class="op">.</span><span class="nam">get_model_vars_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">    <span class="nam">data</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"compLen"</span><span class="op">,</span> <span class="nam">data</span><span class="op">[</span><span class="str">"Graph structure"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">len</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">        <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">        <span class="op">.</span><span class="nam">mark_bar</span><span class="op">(</span><span class="nam">color</span><span class="op">=</span><span class="str">"orange"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">        <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">            <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"index"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"Step"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">            <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">                <span class="str">"compLen"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">                <span class="nam">title</span><span class="op">=</span><span class="str">"Communities in social network"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">            <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t"><span class="key">def</span> <span class="nam">epiSpace_draw_altair</span><span class="op">(</span><span class="nam">model</span><span class="op">,</span> <span class="nam">agent_portrayal</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">    <span class="nam">isOpposed</span> <span class="op">=</span> <span class="op">(</span><span class="key">False</span><span class="op">,</span> <span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">    <span class="nam">shape_range</span> <span class="op">=</span> <span class="op">(</span><span class="str">"circle"</span><span class="op">,</span> <span class="str">"triangle-up"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">    <span class="nam">all_agent_data</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">    <span class="key">if</span> <span class="key">not</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">        <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">Markdown</span><span class="op">(</span><span class="str">"## Finished run"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="key">for</span> <span class="nam">agent</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">            <span class="nam">cur_agent</span> <span class="op">=</span> <span class="nam">agent_draw_altair</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">            <span class="nam">cur_agent</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">            <span class="nam">cur_agent</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">agent</span><span class="op">.</span><span class="nam">pos</span><span class="op">[</span><span class="num">1</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="nam">all_agent_data</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">cur_agent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="nam">df</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span><span class="nam">all_agent_data</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="nam">colors</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">set</span><span class="op">(</span><span class="nam">a</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="key">for</span> <span class="nam">a</span> <span class="key">in</span> <span class="nam">all_agent_data</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="nam">chart_color</span> <span class="op">=</span> <span class="nam">alt</span><span class="op">.</span><span class="nam">Color</span><span class="op">(</span><span class="str">"color"</span><span class="op">)</span><span class="op">.</span><span class="nam">legend</span><span class="op">(</span><span class="key">None</span><span class="op">)</span><span class="op">.</span><span class="nam">scale</span><span class="op">(</span><span class="nam">domain</span><span class="op">=</span><span class="nam">colors</span><span class="op">,</span> <span class="nam">range</span><span class="op">=</span><span class="nam">colors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">        <span class="nam">chart</span> <span class="op">=</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">            <span class="nam">alt</span><span class="op">.</span><span class="nam">Chart</span><span class="op">(</span><span class="nam">df</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">            <span class="op">.</span><span class="nam">mark_point</span><span class="op">(</span><span class="nam">filled</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">            <span class="op">.</span><span class="nam">encode</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">                <span class="nam">x</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">X</span><span class="op">(</span><span class="str">"x"</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">,</span>  <span class="com"># no x-axis label</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">                <span class="nam">y</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Y</span><span class="op">(</span><span class="str">"y"</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="key">None</span><span class="op">)</span><span class="op">,</span>  <span class="com"># no y-axis label</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">                <span class="nam">size</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Size</span><span class="op">(</span><span class="str">"size"</span><span class="op">,</span> <span class="nam">title</span><span class="op">=</span><span class="str">"current activity"</span><span class="op">)</span><span class="op">,</span>  <span class="com"># relabel size for legend</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="nam">color</span><span class="op">=</span><span class="nam">chart_color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">                <span class="nam">shape</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Shape</span><span class="op">(</span>  <span class="com"># use shape to indicate choice</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">                    <span class="str">"opposition"</span><span class="op">,</span> <span class="nam">scale</span><span class="op">=</span><span class="nam">alt</span><span class="op">.</span><span class="nam">Scale</span><span class="op">(</span><span class="nam">domain</span><span class="op">=</span><span class="nam">isOpposed</span><span class="op">,</span> <span class="nam">range</span><span class="op">=</span><span class="nam">shape_range</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">                <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">            <span class="op">.</span><span class="nam">configure_view</span><span class="op">(</span><span class="nam">strokeOpacity</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>  <span class="com"># hide grid/chart lines</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t"><span class="key">def</span> <span class="nam">socialNetwork_draw_altair</span><span class="op">(</span><span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">    <span class="nam">currentTime</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">time</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">    <span class="nam">H</span> <span class="op">=</span> <span class="nam">model</span><span class="op">.</span><span class="nam">socialNetwork</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">    <span class="nam">Graph</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">Graph</span><span class="op">(</span><span class="op">(</span><span class="op">(</span><span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span><span class="op">)</span> <span class="key">for</span> <span class="nam">u</span><span class="op">,</span> <span class="nam">v</span><span class="op">,</span> <span class="nam">e</span> <span class="key">in</span> <span class="nam">H</span><span class="op">.</span><span class="nam">edges</span><span class="op">(</span><span class="nam">data</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">e</span><span class="op">[</span><span class="str">"time"</span><span class="op">]</span> <span class="op">&lt;=</span> <span class="nam">currentTime</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">    <span class="nam">pos</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">kamada_kawai_layout</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">    <span class="nam">between</span> <span class="op">=</span> <span class="nam">nx</span><span class="op">.</span><span class="nam">betweenness_centrality</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">    <span class="nam">nx</span><span class="op">.</span><span class="nam">set_node_attributes</span><span class="op">(</span><span class="nam">Graph</span><span class="op">,</span> <span class="nam">between</span><span class="op">,</span> <span class="str">"between"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">    <span class="nam">communities</span> <span class="op">=</span> <span class="nam">list</span><span class="op">(</span><span class="nam">nx</span><span class="op">.</span><span class="nam">community</span><span class="op">.</span><span class="nam">label_propagation_communities</span><span class="op">(</span><span class="nam">Graph</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">    <span class="key">for</span> <span class="nam">f</span> <span class="key">in</span> <span class="nam">Graph</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">        <span class="key">for</span> <span class="nam">i</span><span class="op">,</span> <span class="nam">c</span> <span class="key">in</span> <span class="nam">enumerate</span><span class="op">(</span><span class="nam">communities</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">            <span class="key">if</span> <span class="nam">f</span> <span class="key">in</span> <span class="nam">c</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                <span class="nam">Graph</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">f</span><span class="op">]</span><span class="op">.</span><span class="nam">update</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">                    <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">                        <span class="str">"community"</span><span class="op">:</span> <span class="nam">str</span><span class="op">(</span><span class="nam">i</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">                        <span class="str">"name"</span><span class="op">:</span> <span class="nam">f</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">                    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">    <span class="nam">chart</span> <span class="op">=</span> <span class="nam">nxa</span><span class="op">.</span><span class="nam">draw_networkx</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="nam">G</span><span class="op">=</span><span class="nam">Graph</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">        <span class="nam">pos</span><span class="op">=</span><span class="nam">pos</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">        <span class="nam">node_color</span><span class="op">=</span><span class="str">"between"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">        <span class="nam">edge_color</span><span class="op">=</span><span class="str">"time"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t">        <span class="nam">cmap</span><span class="op">=</span><span class="str">"viridis"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">    <span class="nam">chart</span><span class="op">.</span><span class="nam">configure_view</span><span class="op">(</span><span class="nam">strokeOpacity</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>  <span class="com"># hide grid/chart lines</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">    <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureAltair</span><span class="op">(</span><span class="nam">chart</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t"><span class="key">def</span> <span class="nam">agent_draw</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">    <span class="nam">colortuple</span> <span class="op">=</span> <span class="nam">set</span><span class="op">(</span><span class="nam">agent</span><span class="op">.</span><span class="nam">topicledger</span><span class="op">[</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">    <span class="nam">color</span> <span class="op">=</span> <span class="str">"#"</span> <span class="op">+</span> <span class="str">""</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">format</span><span class="op">(</span><span class="nam">int</span><span class="op">(</span><span class="nam">round</span><span class="op">(</span><span class="nam">val</span> <span class="op">*</span> <span class="num">255</span><span class="op">)</span><span class="op">)</span><span class="op">,</span> <span class="str">"02x"</span><span class="op">)</span> <span class="key">for</span> <span class="nam">val</span> <span class="key">in</span> <span class="nam">colortuple</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">    <span class="nam">probDict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">        <span class="str">"Shape"</span><span class="op">:</span> <span class="str">"circle"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">        <span class="str">"r"</span><span class="op">:</span> <span class="nam">ageFunction</span><span class="op">(</span><span class="nam">agent</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">        <span class="str">"Filled"</span><span class="op">:</span> <span class="str">"true"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">        <span class="str">"Color"</span><span class="op">:</span> <span class="nam">color</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">    <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">    <span class="key">return</span> <span class="nam">probDict</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t"><span class="nam">chart</span> <span class="op">=</span> <span class="nam">ChartVisualization</span><span class="op">.</span><span class="nam">ChartModule</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">    <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Active Agents"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"#000000"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">        <span class="op">{</span><span class="str">"Label"</span><span class="op">:</span> <span class="str">"Graph components"</span><span class="op">,</span> <span class="str">"Color"</span><span class="op">:</span> <span class="str">"black"</span><span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">    <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">    <span class="nam">data_collector_name</span><span class="op">=</span><span class="str">"datacollector"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t"><span class="nam">epistemic_canvas</span> <span class="op">=</span> <span class="nam">SimpleCanvas</span><span class="op">(</span><span class="nam">agent_draw</span><span class="op">,</span> <span class="num">720</span><span class="op">,</span> <span class="num">720</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t"><span class="nam">server</span> <span class="op">=</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">ModularServer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">    <span class="nam">KnowledgeSpread</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">    <span class="op">[</span><span class="nam">epistemic_canvas</span><span class="op">,</span> <span class="nam">chart</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">    <span class="str">"Knowledge spread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">os</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">igraph</span> <span class="key">as</span> <span class="nam">ig</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">tqdm</span> <span class="key">import</span> <span class="nam">tqdm</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">class</span> <span class="nam">PruneNetwork</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="str">"""Create statistics for communication networks by deletion.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="str">    For a given dataset with sender and receiver information, </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">    create a weighted network with igraph. For a given number </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    of iterations, deletion amounts, and deletion types, the </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    algorithm then generates network statistics for randomly</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    sampled subnetworks. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">dataframe</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span> <span class="op">=</span> <span class="nam">dataframe</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="key">def</span> <span class="nam">makeNet</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">dataframe</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="str">"""Create network from dataframe.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t"><span class="str">        Assumes the existence of sender, receiver and step</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="str">        column names. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">df</span> <span class="op">=</span> <span class="nam">dataframe</span><span class="op">[</span><span class="op">[</span><span class="str">'sender'</span><span class="op">,</span> <span class="str">'receiver'</span><span class="op">,</span> <span class="str">'step'</span><span class="op">]</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">df</span> <span class="op">=</span> <span class="nam">df</span><span class="op">.</span><span class="nam">groupby</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="op">[</span><span class="str">'sender'</span><span class="op">,</span> <span class="str">'receiver'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="op">)</span><span class="op">.</span><span class="nam">size</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="str">'Count'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">net</span> <span class="op">=</span> <span class="nam">ig</span><span class="op">.</span><span class="nam">Graph</span><span class="op">.</span><span class="nam">TupleList</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="nam">df</span><span class="op">.</span><span class="nam">itertuples</span><span class="op">(</span><span class="nam">index</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">,</span> <span class="nam">directed</span><span class="op">=</span><span class="key">True</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="key">True</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="key">return</span> <span class="nam">net</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="key">def</span> <span class="nam">netStats</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">G</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="str">"""Generate network statistics.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t"><span class="str">        </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t"><span class="str">        Any statistic calculated on the full</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t"><span class="str">        network can be added in principle.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="str">        Currently implemented are: </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="str">        average relative degree,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t"><span class="str">        density</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t"><span class="str">        transitivtiy</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t"><span class="str">        cohesion</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t"><span class="str">        average path length</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t"><span class="str">        modularity</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="nam">numVs</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">avg_rel_deg</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">mean</span><span class="op">(</span><span class="op">[</span><span class="nam">x</span><span class="op">/</span><span class="nam">numVs</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">G</span><span class="op">.</span><span class="nam">degree</span><span class="op">(</span><span class="nam">mode</span><span class="op">=</span><span class="str">"all"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="nam">density</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">density</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="nam">transitivity</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">transitivity_undirected</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">cohesion</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">cohesion</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">avg_path_len</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">average_path_length</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">modularity</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">modularity</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">components</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="nam">statDF</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">            <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">                <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">                    <span class="str">'avg_relative_degree'</span><span class="op">:</span> <span class="nam">avg_rel_deg</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">                    <span class="str">'avg_path_length'</span><span class="op">:</span> <span class="nam">avg_path_len</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">                    <span class="str">'density'</span><span class="op">:</span> <span class="nam">density</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">                    <span class="str">'transitivity'</span><span class="op">:</span> <span class="nam">transitivity</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">                    <span class="str">'cohesion'</span><span class="op">:</span> <span class="nam">cohesion</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">                    <span class="str">'modularity'</span><span class="op">:</span> <span class="nam">modularity</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">                <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="key">return</span> <span class="nam">statDF</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">    <span class="key">def</span> <span class="nam">generatePruningParameters</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">G</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="str">"""Generate a random set of pruning weights."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="nam">nodes</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_vertex_dataframe</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="nam">id2name</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_vertex_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">to_dict</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="str">'name'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="nam">del_parameter</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">                <span class="str">'ids'</span><span class="op">:</span> <span class="nam">nodes</span><span class="op">.</span><span class="nam">index</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">                <span class="str">'degree'</span><span class="op">:</span> <span class="nam">G</span><span class="op">.</span><span class="nam">degree</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">                <span class="str">'unif'</span><span class="op">:</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">                <span class="str">'log_normal'</span><span class="op">:</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">lognormal</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">                <span class="str">'exp'</span><span class="op">:</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">exponential</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">                <span class="str">'beta'</span><span class="op">:</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">beta</span><span class="op">(</span><span class="nam">a</span><span class="op">=</span><span class="num">2</span><span class="op">,</span> <span class="nam">b</span><span class="op">=</span><span class="num">3</span><span class="op">,</span> <span class="nam">size</span><span class="op">=</span><span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">            <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">        <span class="nam">del_parameter</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_edge_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="op">[</span><span class="str">"source"</span><span class="op">,</span> <span class="str">"target"</span><span class="op">]</span><span class="op">]</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">,</span> <span class="nam">left_on</span><span class="op">=</span><span class="str">'source'</span><span class="op">,</span> <span class="nam">right_on</span><span class="op">=</span><span class="str">'ids'</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">        <span class="op">)</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">,</span> <span class="nam">left_on</span><span class="op">=</span><span class="str">'target'</span><span class="op">,</span> <span class="nam">right_on</span><span class="op">=</span><span class="str">'ids'</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'degree'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'unif'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'log_normal'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'exp'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'beta'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">        <span class="nam">sender</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"source"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">id2name</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="nam">receiver</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"target"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">id2name</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"sender"</span><span class="op">,</span> <span class="nam">sender</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"receiver"</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">        <span class="nam">outDF</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">            <span class="op">[</span><span class="str">'sender'</span><span class="op">,</span> <span class="str">'receiver'</span><span class="op">,</span> <span class="str">'degree'</span><span class="op">,</span> <span class="str">'unif'</span><span class="op">,</span> <span class="str">'log_normal'</span><span class="op">,</span> <span class="str">'exp'</span><span class="op">,</span> <span class="str">'beta'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">        <span class="key">return</span> <span class="nam">outDF</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="key">def</span> <span class="nam">deleteFromNetwork</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">        <span class="nam">iterations</span><span class="op">=</span><span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="nam">delAmounts</span><span class="op">=</span><span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.25</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="nam">delTypes</span><span class="op">=</span><span class="op">(</span><span class="str">"degree"</span><span class="op">,</span> <span class="str">"unif"</span><span class="op">,</span> <span class="str">"log_normal"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="str">"""Run the deletion by sampling."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="nam">results</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="nam">fullNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">fullNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">fullStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">            <span class="op">**</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">                <span class="str">"delVal"</span><span class="op">:</span> <span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">                <span class="str">"delType"</span><span class="op">:</span> <span class="str">'NA'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="str">"delIteration"</span><span class="op">:</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">            <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">        <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">fullStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">iterations</span> <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">            <span class="nam">prunVals</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">generatePruningParameters</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">                <span class="nam">fullNet</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="nam">tempDF</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">                <span class="nam">prunVals</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">            <span class="key">for</span> <span class="nam">val</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delAmounts</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">                <span class="key">for</span> <span class="nam">deltype</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delTypes</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">                    <span class="nam">delDF</span> <span class="op">=</span> <span class="nam">tempDF</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">                        <span class="nam">round</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">tempDF</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="num">1</span> <span class="op">-</span> <span class="nam">val</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">                        <span class="nam">weights</span><span class="op">=</span><span class="nam">deltype</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">                    <span class="nam">delNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span><span class="nam">delDF</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">                    <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">delNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">                    <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">delStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">                        <span class="op">**</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                            <span class="str">"delVal"</span><span class="op">:</span> <span class="nam">val</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">                            <span class="str">"delType"</span><span class="op">:</span> <span class="nam">deltype</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">                            <span class="str">"delIteration"</span><span class="op">:</span> <span class="nam">idx</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">                        <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">                    <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">delStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">        <span class="nam">resDF</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="nam">results</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="key">return</span> <span class="nam">resDF</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_model_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_22d2582a602e487e___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_utils_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_22d2582a602e487e_statistics_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-04-16 09:50 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,207 +1,171 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-kknnoowwlleeddggeesspprreeaadd//sseerrvveerr..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//uuttiilliittiieess//
+pprruunnee..ppyy:: 1199%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 6699 ssttaatteemmeennttss ?  00 rruunn 6699 mmiissssiinngg 00 eexxcclluuddeedd **********
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
-_1import altair as alt 
-_2import mesa 
-_3import networkx as nx 
-_4import nx_altair as nxa 
-_5import pandas as pd 
-_6import solara 
-_7from matplotlib import colors 
-_8from mesa.visualization.modules import ChartVisualization 
-_9 
-_1_0from scicom.knowledgespread.model import KnowledgeSpread 
-_1_1from scicom.knowledgespread.SimpleContinuousModule import SimpleCanvas 
-_1_2from scicom.knowledgespread.utils import ageFunction 
-_1_3 
-_1_4model_params = { 
-_1_5 "num_scientists": mesa.visualization.Slider( 
-_1_6 "Initial number of scientists", 
-_1_7 100, 10, 200, 10, 
-_1_8 ), 
-_1_9 "num_timesteps": mesa.visualization.Slider( 
-_2_0 "How long is the number of agents growing?", 
-_2_1 20, 5, 100, 5, 
-_2_2 ), 
-_2_3 "oppositionPercent": mesa.visualization.Slider( 
-_2_4 "Percentage of opposing agents", 
-_2_5 0.05, 0, 0.5, 0.05, 
-_2_6 ), 
-_2_7 "epiInit": mesa.visualization.Choice( 
-_2_8 "Choose initial conditions for epistemic space", 
-_2_9 value=("complex"), 
-_3_0 choices=["complex", "central", "polarized"], 
-_3_1 ), 
-_3_2 "timeInit": mesa.visualization.Choice( 
-_3_3 "Choose initial conditions for population growth.", 
-_3_4 value=("saturate"), 
-_3_5 choices=["saturate", "linear", "exponential"], 
-_3_6 ), 
-_3_7 "epiRange": mesa.visualization.Slider( 
-_3_8 "Basic range of visibility in epistemic space", 
-_3_9 0.005, 0.001, 0.03, 0.001, 
-_4_0 ), 
-_4_1} 
-_4_2 
-_4_3 
-_4_4def agent_draw_altair(agent): 
-_4_5 shapeDict = {True: "triangle-up", False: "circle"} 
-_4_6 colortuple = set(agent.topicledger[-1]) 
-_4_7 color = colors.to_hex(colortuple) 
-_4_8 #color = "#" + "".join(format(int(round(val * 255)), "02x") for val in
-colortuple) 
-_4_9 if agent.age > 0: 
-_5_0 size = ageFunction(agent, agent.a, agent.b, agent.c, 10) 
-_5_1 else: 
-_5_2 size = 0.001 
-_5_3 probDict = { 
-_5_4 #"Shape": shapeDict[agent.opposition], 
-_5_5 "opposition": agent.opposition, 
-_5_6 #"r": ageFunction(agent), 
-_5_7 "size": size, 
-_5_8 #"Filled": "true", 
-_5_9 "Color": color, 
-_6_0 "color": color, 
-_6_1 } 
-_6_2 return probDict 
-_6_3 
-_6_4 
-_6_5def chart_draw_altair_agents(model): 
-_6_6 data = model.datacollector.get_model_vars_dataframe().reset_index() 
-_6_7 chart = ( 
-_6_8 alt.Chart(data) 
-_6_9 .mark_bar(color="orange") 
-_7_0 .encode( 
-_7_1 x=alt.X("index", title="Step"), 
-_7_2 y=alt.Y( 
-_7_3 "Active Agents", 
-_7_4 title="Active agents", 
-_7_5 ), 
-_7_6 ) 
-_7_7 ) 
-_7_8 return solara.FigureAltair(chart) 
-_7_9 
-_8_0 
-_8_1def chart_draw_altair_communities(model): 
-_8_2 data = model.datacollector.get_model_vars_dataframe().reset_index() 
-_8_3 data.insert(0, "compLen", data["Graph structure"].apply(lambda x: len(x))) 
-_8_4 chart = ( 
-_8_5 alt.Chart(data) 
-_8_6 .mark_bar(color="orange") 
-_8_7 .encode( 
-_8_8 x=alt.X("index", title="Step"), 
-_8_9 y=alt.Y( 
-_9_0 "compLen", 
-_9_1 title="Communities in social network", 
-_9_2 ), 
-_9_3 ) 
-_9_4 ) 
-_9_5 return solara.FigureAltair(chart) 
-_9_6 
-_9_7 
-_9_8def epiSpace_draw_altair(model, agent_portrayal): 
-_9_9 isOpposed = (False, True) 
-_1_0_0 shape_range = ("circle", "triangle-up") 
-_1_0_1 all_agent_data = [] 
-_1_0_2 if not model.schedule.agents: 
-_1_0_3 return solara.Markdown("## Finished run") 
-_1_0_4 else: 
-_1_0_5 for agent in model.schedule.agents: 
-_1_0_6 cur_agent = agent_draw_altair(agent) 
-_1_0_7 cur_agent["x"] = agent.pos[0] 
-_1_0_8 cur_agent["y"] = agent.pos[1] 
-_1_0_9 all_agent_data.append(cur_agent) 
-_1_1_0 df = pd.DataFrame(all_agent_data) 
-_1_1_1 colors = list(set(a["color"] for a in all_agent_data)) 
-_1_1_2 chart_color = alt.Color("color").legend(None).scale(domain=colors,
-range=colors) 
-_1_1_3 chart = ( 
-_1_1_4 alt.Chart(df) 
-_1_1_5 .mark_point(filled=True) 
-_1_1_6 .encode( 
-_1_1_7 x=alt.X("x", axis=None), # no x-axis label 
-_1_1_8 y=alt.Y("y", axis=None), # no y-axis label 
-_1_1_9 size=alt.Size("size", title="current activity"), # relabel size for legend 
-_1_2_0 color=chart_color, 
-_1_2_1 shape=alt.Shape( # use shape to indicate choice 
-_1_2_2 "opposition", scale=alt.Scale(domain=isOpposed, range=shape_range), 
-_1_2_3 ), 
-_1_2_4 ) 
-_1_2_5 .configure_view(strokeOpacity=0) # hide grid/chart lines 
-_1_2_6 ) 
-_1_2_7 return solara.FigureAltair(chart) 
-_1_2_8 
-_1_2_9 
-_1_3_0def socialNetwork_draw_altair(model): 
-_1_3_1 currentTime = model.schedule.time 
-_1_3_2 H = model.socialNetwork 
-_1_3_3 Graph = nx.Graph(((u, v, e) for u, v, e in H.edges(data=True) if e["time"]
-<= currentTime)) 
-_1_3_4 pos = nx.kamada_kawai_layout(Graph) 
-_1_3_5 between = nx.betweenness_centrality(Graph) 
-_1_3_6 nx.set_node_attributes(Graph, between, "between") 
-_1_3_7 communities = list(nx.community.label_propagation_communities(Graph)) 
-_1_3_8 for f in Graph.nodes(): 
-_1_3_9 for i, c in enumerate(communities): 
-_1_4_0 if f in c: 
-_1_4_1 Graph.nodes()[f].update( 
-_1_4_2 { 
-_1_4_3 "community": str(i), 
-_1_4_4 "name": f, 
-_1_4_5 }, 
-_1_4_6 ) 
-_1_4_7 chart = nxa.draw_networkx( 
-_1_4_8 G=Graph, 
-_1_4_9 pos=pos, 
-_1_5_0 node_color="between", 
-_1_5_1 edge_color="time", 
-_1_5_2 cmap="viridis", 
-_1_5_3 ) 
-_1_5_4 chart.configure_view(strokeOpacity=0) # hide grid/chart lines 
-_1_5_5 return solara.FigureAltair(chart) 
-_1_5_6 
-_1_5_7 
-_1_5_8def agent_draw(agent): 
-_1_5_9 colortuple = set(agent.topicledger[-1]) 
-_1_6_0 color = "#" + "".join(format(int(round(val * 255)), "02x") for val in
-colortuple) 
-_1_6_1 probDict = { 
-_1_6_2 "Shape": "circle", 
-_1_6_3 "r": ageFunction(agent), 
-_1_6_4 "Filled": "true", 
-_1_6_5 "Color": color, 
-_1_6_6 } 
-_1_6_7 return probDict 
-_1_6_8 
-_1_6_9 
-_1_7_0chart = ChartVisualization.ChartModule( 
-_1_7_1 [ 
-_1_7_2 {"Label": "Active Agents", "Color": "#000000"}, 
-_1_7_3 {"Label": "Graph components", "Color": "black"}, 
-_1_7_4 ], 
-_1_7_5 data_collector_name="datacollector", 
-_1_7_6) 
-_1_7_7 
-_1_7_8 
-_1_7_9epistemic_canvas = SimpleCanvas(agent_draw, 720, 720) 
-_1_8_0 
-_1_8_1 
-_1_8_2server = mesa.visualization.ModularServer( 
-_1_8_3 KnowledgeSpread, 
-_1_8_4 [epistemic_canvas, chart], 
-_1_8_5 "Knowledge spread", 
-_1_8_6 model_params, 
-_1_8_7) 
-_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+********** 5577 ssttaatteemmeennttss ?  1111 rruunn 4466 mmiissssiinngg 00 eexxcclluuddeedd **********
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
+16 09:50 +0200
+_1import os 
+_2import numpy as np 
+_3import pandas as pd 
+_4import igraph as ig 
+_5from tqdm import tqdm 
+_6 
+_7 
+_8class PruneNetwork(): 
+_9 """Create statistics for communication networks by deletion. 
+_1_0 
+_1_1 For a given dataset with sender and receiver information,  
+_1_2 create a weighted network with igraph. For a given number  
+_1_3 of iterations, deletion amounts, and deletion types, the  
+_1_4 algorithm then generates network statistics for randomly 
+_1_5 sampled subnetworks.  
+_1_6 """ 
+_1_7 
+_1_8 def __init__(self, dataframe): 
+_1_9 self.inputDF = dataframe 
+_2_0 
+_2_1 def makeNet(self, dataframe): 
+_2_2 """Create network from dataframe. 
+_2_3  
+_2_4 Assumes the existence of sender, receiver and step 
+_2_5 column names.  
+_2_6 """ 
+_2_7 df = dataframe[['sender', 'receiver', 'step']] 
+_2_8 df = df.groupby( 
+_2_9 ['sender', 'receiver'] 
+_3_0 ).size().reset_index(name='Count') 
+_3_1 net = ig.Graph.TupleList( 
+_3_2 df.itertuples(index=False), directed=True, weights=True 
+_3_3 ) 
+_3_4 return net 
+_3_5 
+_3_6 def netStats(self, G): 
+_3_7 """Generate network statistics. 
+_3_8  
+_3_9 Any statistic calculated on the full 
+_4_0 network can be added in principle. 
+_4_1 Currently implemented are:  
+_4_2 average relative degree, 
+_4_3 density 
+_4_4 transitivtiy 
+_4_5 cohesion 
+_4_6 average path length 
+_4_7 modularity 
+_4_8 """ 
+_4_9 numVs = len(G.vs) 
+_5_0 avg_rel_deg = np.mean([x/numVs for x in G.degree(mode="all")]) 
+_5_1 density = G.density() 
+_5_2 transitivity = G.transitivity_undirected() 
+_5_3 cohesion = G.cohesion() 
+_5_4 avg_path_len = G.average_path_length() 
+_5_5 modularity = G.modularity(G.components()) 
+_5_6 statDF = pd.DataFrame( 
+_5_7 [ 
+_5_8 { 
+_5_9 'avg_relative_degree': avg_rel_deg, 
+_6_0 'avg_path_length': avg_path_len, 
+_6_1 'density': density, 
+_6_2 'transitivity': transitivity, 
+_6_3 'cohesion': cohesion, 
+_6_4 'modularity': modularity 
+_6_5 } 
+_6_6 ] 
+_6_7 ) 
+_6_8 return statDF 
+_6_9 
+_7_0 def generatePruningParameters(self, G): 
+_7_1 """Generate a random set of pruning weights.""" 
+_7_2 nodes = G.get_vertex_dataframe() 
+_7_3 id2name = G.get_vertex_dataframe().to_dict()['name'] 
+_7_4 del_parameter = pd.DataFrame( 
+_7_5 { 
+_7_6 'ids': nodes.index, 
+_7_7 'degree': G.degree(), 
+_7_8 'unif': np.random.uniform(0, 1, len(G.vs)), 
+_7_9 'log_normal': np.random.lognormal(0, 1, len(G.vs)), 
+_8_0 'exp': np.random.exponential(1, len(G.vs)), 
+_8_1 'beta': np.random.beta(a=2, b=3, size=len(G.vs)) 
+_8_2 } 
+_8_3 ) 
+_8_4 
+_8_5 del_parameter = G.get_edge_dataframe()[["source", "target"]].merge( 
+_8_6 del_parameter, left_on='source', right_on='ids' 
+_8_7 ).merge( 
+_8_8 del_parameter, left_on='target', right_on='ids' 
+_8_9 ) 
+_9_0 del_parameter['degree'] = del_parameter.degree_x * del_parameter.degree_y /
+np.dot(del_parameter.degree_x, del_parameter.degree_y) 
+_9_1 del_parameter['unif'] = del_parameter.unif_x * del_parameter.unif_y / np.dot
+(del_parameter.unif_x, del_parameter.unif_y) 
+_9_2 del_parameter['log_normal'] = del_parameter.log_normal_x *
+del_parameter.log_normal_y / np.dot(del_parameter.log_normal_x,
+del_parameter.log_normal_y) 
+_9_3 del_parameter['exp'] = del_parameter.exp_x * del_parameter.exp_y / np.dot
+(del_parameter.exp_x, del_parameter.exp_y) 
+_9_4 del_parameter['beta'] = del_parameter.beta_x * del_parameter.beta_y / np.dot
+(del_parameter.beta_x, del_parameter.beta_y) 
+_9_5 sender = del_parameter["source"].apply(lambda x: id2name[x]) 
+_9_6 receiver = del_parameter["target"].apply(lambda x: id2name[x]) 
+_9_7 del_parameter.insert(0, "sender", sender) 
+_9_8 del_parameter.insert(0, "receiver", receiver) 
+_9_9 outDF = del_parameter[ 
+_1_0_0 ['sender', 'receiver', 'degree', 'unif', 'log_normal', 'exp', 'beta'] 
+_1_0_1 ] 
+_1_0_2 return outDF 
+_1_0_3 
+_1_0_4 def deleteFromNetwork( 
+_1_0_5 self, 
+_1_0_6 iterations=10, 
+_1_0_7 delAmounts=(0.1, 0.25, 0.5, 0.75, 0.9), 
+_1_0_8 delTypes=("degree", "unif", "log_normal", "exp", "beta") 
+_1_0_9 ): 
+_1_1_0 """Run the deletion by sampling.""" 
+_1_1_1 results = [] 
+_1_1_2 fullNet = self.makeNet( 
+_1_1_3 self.inputDF 
+_1_1_4 ) 
+_1_1_5 fullStats = self.netStats(fullNet) 
+_1_1_6 fullStats = fullStats.assign( 
+_1_1_7 **{ 
+_1_1_8 "delVal": 0, 
+_1_1_9 "delType": 'NA', 
+_1_2_0 "delIteration": 0 
+_1_2_1 } 
+_1_2_2 ) 
+_1_2_3 results.append(fullStats) 
+_1_2_4 for idx in range(1, iterations + 1): 
+_1_2_5 prunVals = self.generatePruningParameters( 
+_1_2_6 fullNet 
+_1_2_7 ) 
+_1_2_8 tempDF = self.inputDF.merge( 
+_1_2_9 prunVals 
+_1_3_0 ) 
+_1_3_1 for val in list(delAmounts): 
+_1_3_2 for deltype in list(delTypes): 
+_1_3_3 delDF = tempDF.sample( 
+_1_3_4 round(len(tempDF) * (1 - val)), 
+_1_3_5 weights=deltype 
+_1_3_6 ) 
+_1_3_7 delNet = self.makeNet(delDF) 
+_1_3_8 delStats = self.netStats(delNet) 
+_1_3_9 delStats = delStats.assign( 
+_1_4_0 **{ 
+_1_4_1 "delVal": val, 
+_1_4_2 "delType": deltype, 
+_1_4_3 "delIteration": idx 
+_1_4_4 } 
+_1_4_5 ) 
+_1_4_6 results.append(delStats) 
+_1_4_7 resDF = pd.concat(results) 
+_1_4_8 return resDF 
+_1_4_9 
+_«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
+16 09:50 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_2e9db29e074df228_utils_py.html` & `scicom-0.4.1/tests/reports/html/d_ad23a1665840e904_utils_py.html`

 * *Files 0% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/utils.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/utils.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/utils.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/utils.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">127 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">127<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_8a655f2681f565c9_run_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_48e31f30a7ef2afb_run_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -325,18 +325,18 @@
     <p class="mis show_mis"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span><span class="op">,</span> <span class="nam">newPrefEdges</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="mis show_mis"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">        <span class="key">return</span> <span class="nam">self</span><span class="op">.</span><span class="nam">socialNet</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_ad23a1665840e904_server_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_8a655f2681f565c9_run_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_48e31f30a7ef2afb_run_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,21 +1,21 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
 kknnoowwlleeddggeesspprreeaadd//uuttiillss..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 112277 ssttaatteemmeennttss ?  00 rruunn 112277 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+28 12:02 +0200
 _1"""Utility functions for initial condition generation.""" 
 _2from itertools import combinations 
 _3 
 _4import networkx as nx 
 _5import numpy as np 
 _6import pandas as pd 
 _7 
@@ -258,8 +258,8 @@
 _2_4_0 newNodeEdges = self.growNodes(time, nEdges) 
 _2_4_1 self.socialNet = pd.concat([self.socialNet, newNodeEdges]) 
 _2_4_2 newPrefEdges = self.growEdges(time, density, densityGrowth) 
 _2_4_3 self.socialNet = pd.concat([self.socialNet, newPrefEdges]) 
 _2_4_4 return self.socialNet 
 _2_4_5 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_3142edd200b00bad_prune_py.html` & `scicom-0.4.1/tests/reports/html/d_22d2582a602e487e_statistics_py.html`

 * *Files 9% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/utilities/prune.py: 100%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/utilities/statistics.py: 100%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/utilities/prune.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/utilities/statistics.py</b>:
             <span class="pc_cov">100%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,191 +56,209 @@
         <h2>
             <span class="text">57 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">57<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">0<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_3142edd200b00bad___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_22d2582a602e487e___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_3142edd200b00bad_statistics_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="index.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-19 14:00 +0200
+            created at 2024-04-26 18:34 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="run"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">os</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">igraph</span> <span class="key">as</span> <span class="nam">ig</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">from</span> <span class="nam">tqdm</span> <span class="key">import</span> <span class="nam">tqdm</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""Prune a network."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">igraph</span> <span class="key">as</span> <span class="nam">ig</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">pandas</span> <span class="key">as</span> <span class="nam">pd</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">class</span> <span class="nam">PruneNetwork</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="str">"""Create statistics for communication networks by deletion.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="str">    For a given dataset with sender and receiver information, </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">    create a weighted network with igraph. For a given number </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    of iterations, deletion amounts, and deletion types, the </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    algorithm then generates network statistics for randomly</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    sampled subnetworks. </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">dataframe</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">class</span> <span class="nam">PruneNetwork</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="str">"""Create statistics for communication networks by deletion.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="str">    For a given dataset with sender and receiver information,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="str">    create a weighted network with igraph. For a given number</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">    of iterations, deletion amounts, and deletion types, the</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    algorithm then generates network statistics for randomly</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    sampled subnetworks.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">dataframe</span><span class="op">:</span><span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="str">"""Initialize pruning."""</span>&nbsp;</span><span class="r"></span></p>
     <p class="run"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span> <span class="op">=</span> <span class="nam">dataframe</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="key">def</span> <span class="nam">makeNet</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">dataframe</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="key">def</span> <span class="nam">makeNet</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">dataframe</span><span class="op">:</span><span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">)</span> <span class="op">-></span> <span class="nam">ig</span><span class="op">.</span><span class="nam">Graph</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="str">"""Create network from dataframe.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="str">    </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t"><span class="str">        Assumes the existence of sender, receiver and step</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="str">        column names. </span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="str">        column names.</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">df</span> <span class="op">=</span> <span class="nam">dataframe</span><span class="op">[</span><span class="op">[</span><span class="str">'sender'</span><span class="op">,</span> <span class="str">'receiver'</span><span class="op">,</span> <span class="str">'step'</span><span class="op">]</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">df</span> <span class="op">=</span> <span class="nam">df</span><span class="op">.</span><span class="nam">groupby</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="op">[</span><span class="str">'sender'</span><span class="op">,</span> <span class="str">'receiver'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="op">)</span><span class="op">.</span><span class="nam">size</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="str">'Count'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">net</span> <span class="op">=</span> <span class="nam">ig</span><span class="op">.</span><span class="nam">Graph</span><span class="op">.</span><span class="nam">TupleList</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="nam">df</span><span class="op">.</span><span class="nam">itertuples</span><span class="op">(</span><span class="nam">index</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">,</span> <span class="nam">directed</span><span class="op">=</span><span class="key">True</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="key">True</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">networkdata</span> <span class="op">=</span> <span class="nam">dataframe</span><span class="op">[</span><span class="op">[</span><span class="str">"sender"</span><span class="op">,</span> <span class="str">"receiver"</span><span class="op">,</span> <span class="str">"step"</span><span class="op">]</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">networkdata</span> <span class="op">=</span> <span class="nam">networkdata</span><span class="op">.</span><span class="nam">groupby</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="op">[</span><span class="str">"sender"</span><span class="op">,</span> <span class="str">"receiver"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="op">)</span><span class="op">.</span><span class="nam">size</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">reset_index</span><span class="op">(</span><span class="nam">name</span><span class="op">=</span><span class="str">"Count"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="key">return</span> <span class="nam">ig</span><span class="op">.</span><span class="nam">Graph</span><span class="op">.</span><span class="nam">TupleList</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="nam">networkdata</span><span class="op">.</span><span class="nam">itertuples</span><span class="op">(</span><span class="nam">index</span><span class="op">=</span><span class="key">False</span><span class="op">)</span><span class="op">,</span> <span class="nam">directed</span><span class="op">=</span><span class="key">True</span><span class="op">,</span> <span class="nam">weights</span><span class="op">=</span><span class="key">True</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="key">return</span> <span class="nam">net</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="key">def</span> <span class="nam">netStats</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">G</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="str">"""Generate network statistics.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t"><span class="str">        </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t"><span class="str">        Any statistic calculated on the full</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t"><span class="str">        network can be added in principle.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="str">        Currently implemented are: </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="str">        average relative degree,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t"><span class="str">        density</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t"><span class="str">        transitivtiy</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t"><span class="str">        cohesion</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t"><span class="str">        average path length</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t"><span class="str">        modularity</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="nam">numVs</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">avg_rel_deg</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">mean</span><span class="op">(</span><span class="op">[</span><span class="nam">x</span><span class="op">/</span><span class="nam">numVs</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">G</span><span class="op">.</span><span class="nam">degree</span><span class="op">(</span><span class="nam">mode</span><span class="op">=</span><span class="str">"all"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="nam">density</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">density</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="nam">transitivity</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">transitivity_undirected</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">cohesion</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">cohesion</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">avg_path_len</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">average_path_length</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="nam">modularity</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">modularity</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">components</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="nam">statDF</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">            <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">                <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">                    <span class="str">'avg_relative_degree'</span><span class="op">:</span> <span class="nam">avg_rel_deg</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">                    <span class="str">'avg_path_length'</span><span class="op">:</span> <span class="nam">avg_path_len</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">                    <span class="str">'density'</span><span class="op">:</span> <span class="nam">density</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">                    <span class="str">'transitivity'</span><span class="op">:</span> <span class="nam">transitivity</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">                    <span class="str">'cohesion'</span><span class="op">:</span> <span class="nam">cohesion</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">                    <span class="str">'modularity'</span><span class="op">:</span> <span class="nam">modularity</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">                <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">            <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="key">return</span> <span class="nam">statDF</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">    <span class="key">def</span> <span class="nam">generatePruningParameters</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">G</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="str">"""Generate a random set of pruning weights."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="nam">nodes</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_vertex_dataframe</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="nam">id2name</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_vertex_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">to_dict</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="str">'name'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="nam">del_parameter</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">                <span class="str">'ids'</span><span class="op">:</span> <span class="nam">nodes</span><span class="op">.</span><span class="nam">index</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">                <span class="str">'degree'</span><span class="op">:</span> <span class="nam">G</span><span class="op">.</span><span class="nam">degree</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">                <span class="str">'unif'</span><span class="op">:</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">                <span class="str">'log_normal'</span><span class="op">:</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">lognormal</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">                <span class="str">'exp'</span><span class="op">:</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">exponential</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">                <span class="str">'beta'</span><span class="op">:</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">beta</span><span class="op">(</span><span class="nam">a</span><span class="op">=</span><span class="num">2</span><span class="op">,</span> <span class="nam">b</span><span class="op">=</span><span class="num">3</span><span class="op">,</span> <span class="nam">size</span><span class="op">=</span><span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">            <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">        <span class="nam">del_parameter</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_edge_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="op">[</span><span class="str">"source"</span><span class="op">,</span> <span class="str">"target"</span><span class="op">]</span><span class="op">]</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">,</span> <span class="nam">left_on</span><span class="op">=</span><span class="str">'source'</span><span class="op">,</span> <span class="nam">right_on</span><span class="op">=</span><span class="str">'ids'</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">        <span class="op">)</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">,</span> <span class="nam">left_on</span><span class="op">=</span><span class="str">'target'</span><span class="op">,</span> <span class="nam">right_on</span><span class="op">=</span><span class="str">'ids'</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'degree'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'unif'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'log_normal'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'exp'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">'beta'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span><span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_y</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">        <span class="nam">sender</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"source"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">id2name</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">        <span class="nam">receiver</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"target"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">id2name</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"sender"</span><span class="op">,</span> <span class="nam">sender</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"receiver"</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">        <span class="nam">outDF</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">            <span class="op">[</span><span class="str">'sender'</span><span class="op">,</span> <span class="str">'receiver'</span><span class="op">,</span> <span class="str">'degree'</span><span class="op">,</span> <span class="str">'unif'</span><span class="op">,</span> <span class="str">'log_normal'</span><span class="op">,</span> <span class="str">'exp'</span><span class="op">,</span> <span class="str">'beta'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">        <span class="key">return</span> <span class="nam">outDF</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">    <span class="key">def</span> <span class="nam">deleteFromNetwork</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">        <span class="nam">iterations</span><span class="op">=</span><span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="nam">delAmounts</span><span class="op">=</span><span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.25</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="nam">delTypes</span><span class="op">=</span><span class="op">(</span><span class="str">"degree"</span><span class="op">,</span> <span class="str">"unif"</span><span class="op">,</span> <span class="str">"log_normal"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="str">"""Run the deletion by sampling."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">        <span class="nam">results</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">        <span class="nam">fullNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">fullNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">fullStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">            <span class="op">**</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">                <span class="str">"delVal"</span><span class="op">:</span> <span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">                <span class="str">"delType"</span><span class="op">:</span> <span class="str">'NA'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">                <span class="str">"delIteration"</span><span class="op">:</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">            <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">        <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">fullStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">iterations</span> <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">            <span class="nam">prunVals</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">generatePruningParameters</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">                <span class="nam">fullNet</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">            <span class="nam">tempDF</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">                <span class="nam">prunVals</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">            <span class="key">for</span> <span class="nam">val</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delAmounts</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">                <span class="key">for</span> <span class="nam">deltype</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delTypes</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">                    <span class="nam">delDF</span> <span class="op">=</span> <span class="nam">tempDF</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">                        <span class="nam">round</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">tempDF</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="num">1</span> <span class="op">-</span> <span class="nam">val</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">                        <span class="nam">weights</span><span class="op">=</span><span class="nam">deltype</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">                    <span class="nam">delNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span><span class="nam">delDF</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">                    <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">delNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">                    <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">delStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">                        <span class="op">**</span><span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                            <span class="str">"delVal"</span><span class="op">:</span> <span class="nam">val</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">                            <span class="str">"delType"</span><span class="op">:</span> <span class="nam">deltype</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">                            <span class="str">"delIteration"</span><span class="op">:</span> <span class="nam">idx</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">                        <span class="op">}</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">                    <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">delStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">        <span class="nam">resDF</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="nam">results</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="key">return</span> <span class="nam">resDF</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">    <span class="key">def</span> <span class="nam">netStats</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">G</span><span class="op">:</span><span class="nam">ig</span><span class="op">.</span><span class="nam">Graph</span><span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="str">"""Generate network statistics.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t"><span class="str">        Any statistic calculated on the full</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t"><span class="str">        network can be added in principle.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t"><span class="str">        Currently implemented are:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t"><span class="str">        average relative degree,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t"><span class="str">        density</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t"><span class="str">        transitivtiy</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t"><span class="str">        cohesion</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t"><span class="str">        average path length</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t"><span class="str">        modularity</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="nam">numVs</span> <span class="op">=</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="nam">avg_rel_deg</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">mean</span><span class="op">(</span><span class="op">[</span><span class="nam">x</span><span class="op">/</span><span class="nam">numVs</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">G</span><span class="op">.</span><span class="nam">degree</span><span class="op">(</span><span class="nam">mode</span><span class="op">=</span><span class="str">"all"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="nam">density</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">density</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="nam">transitivity</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">transitivity_undirected</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="nam">cohesion</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">cohesion</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">        <span class="nam">avg_path_len</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">average_path_length</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">        <span class="nam">modularity</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">modularity</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">components</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="key">return</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">            <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">                <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">                    <span class="str">"avg_relative_degree"</span><span class="op">:</span> <span class="nam">avg_rel_deg</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">                    <span class="str">"avg_path_length"</span><span class="op">:</span> <span class="nam">avg_path_len</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">                    <span class="str">"density"</span><span class="op">:</span> <span class="nam">density</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">                    <span class="str">"transitivity"</span><span class="op">:</span> <span class="nam">transitivity</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">                    <span class="str">"cohesion"</span><span class="op">:</span> <span class="nam">cohesion</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">                    <span class="str">"modularity"</span><span class="op">:</span> <span class="nam">modularity</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">                <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">            <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">    <span class="key">def</span> <span class="nam">generatePruningParameters</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">G</span><span class="op">:</span><span class="nam">ig</span><span class="op">.</span><span class="nam">Graph</span><span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">        <span class="str">"""Generate a random set of pruning weights."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">        <span class="nam">nodes</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_vertex_dataframe</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">        <span class="nam">id2name</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_vertex_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">to_dict</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="str">"name"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">        <span class="nam">rng</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">default_rng</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="nam">del_parameter</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">            <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">                <span class="str">"ids"</span><span class="op">:</span> <span class="nam">nodes</span><span class="op">.</span><span class="nam">index</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">                <span class="str">"degree"</span><span class="op">:</span> <span class="nam">G</span><span class="op">.</span><span class="nam">degree</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">                <span class="str">"unif"</span><span class="op">:</span> <span class="nam">rng</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">                <span class="str">"log_normal"</span><span class="op">:</span> <span class="nam">rng</span><span class="op">.</span><span class="nam">lognormal</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">                <span class="str">"exp"</span><span class="op">:</span> <span class="nam">rng</span><span class="op">.</span><span class="nam">exponential</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">                <span class="str">"beta"</span><span class="op">:</span> <span class="nam">rng</span><span class="op">.</span><span class="nam">beta</span><span class="op">(</span><span class="nam">a</span><span class="op">=</span><span class="num">2</span><span class="op">,</span> <span class="nam">b</span><span class="op">=</span><span class="num">3</span><span class="op">,</span> <span class="nam">size</span><span class="op">=</span><span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">            <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">        <span class="nam">del_parameter</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_edge_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="op">[</span><span class="str">"source"</span><span class="op">,</span> <span class="str">"target"</span><span class="op">]</span><span class="op">]</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">,</span> <span class="nam">left_on</span><span class="op">=</span><span class="str">"source"</span><span class="op">,</span> <span class="nam">right_on</span><span class="op">=</span><span class="str">"ids"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">        <span class="op">)</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">,</span> <span class="nam">left_on</span><span class="op">=</span><span class="str">"target"</span><span class="op">,</span> <span class="nam">right_on</span><span class="op">=</span><span class="str">"ids"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"degree"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"unif"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"log_normal"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"exp"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"beta"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">        <span class="nam">sender</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"source"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">id2name</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="nam">receiver</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"target"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">id2name</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"sender"</span><span class="op">,</span> <span class="nam">sender</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"receiver"</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="key">return</span> <span class="nam">del_parameter</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">            <span class="op">[</span><span class="str">"sender"</span><span class="op">,</span> <span class="str">"receiver"</span><span class="op">,</span> <span class="str">"degree"</span><span class="op">,</span> <span class="str">"unif"</span><span class="op">,</span> <span class="str">"log_normal"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">    <span class="key">def</span> <span class="nam">deleteFromNetwork</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">        <span class="nam">iterations</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">        <span class="nam">delAmounts</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.25</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">        <span class="nam">delTypes</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"degree"</span><span class="op">,</span> <span class="str">"unif"</span><span class="op">,</span> <span class="str">"log_normal"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">        <span class="str">"""Run the deletion by sampling."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">        <span class="nam">results</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">        <span class="nam">fullNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">fullNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">fullStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">            <span class="nam">delVal</span><span class="op">=</span><span class="num">0</span><span class="op">,</span> <span class="nam">delType</span><span class="op">=</span><span class="str">"NA"</span><span class="op">,</span> <span class="nam">delIteration</span><span class="op">=</span><span class="num">0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">        <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">fullStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">iterations</span> <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t">            <span class="nam">prunVals</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">generatePruningParameters</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t">                <span class="nam">fullNet</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t">            <span class="nam">tempDF</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">                <span class="nam">prunVals</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">            <span class="key">for</span> <span class="nam">val</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delAmounts</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">                <span class="key">for</span> <span class="nam">deltype</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delTypes</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">                    <span class="nam">delDF</span> <span class="op">=</span> <span class="nam">tempDF</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">                        <span class="nam">round</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">tempDF</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="num">1</span> <span class="op">-</span> <span class="nam">val</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t">                        <span class="nam">weights</span><span class="op">=</span><span class="nam">deltype</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">                    <span class="nam">delNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span><span class="nam">delDF</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t">                    <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">delNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">                    <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">delStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t">                        <span class="nam">delVal</span><span class="op">=</span><span class="nam">val</span><span class="op">,</span> <span class="nam">delType</span><span class="op">=</span><span class="nam">deltype</span><span class="op">,</span> <span class="nam">delIteration</span><span class="op">=</span><span class="nam">idx</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t">                    <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">delStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t">        <span class="key">return</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="nam">results</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t"><span class="key">def</span> <span class="nam">prune</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">    <span class="nam">modelparameters</span><span class="op">:</span> <span class="nam">dict</span><span class="op">,</span> <span class="nam">network</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span> <span class="nam">columns</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">    <span class="nam">iterations</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">10</span><span class="op">,</span> <span class="nam">delAmounts</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.25</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">    <span class="nam">delTypes</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"degree"</span><span class="op">,</span> <span class="str">"unif"</span><span class="op">)</span><span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">    <span class="str">"""Generate pruned networks from input.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t"><span class="str">    Assumes existence of columns "sender", "receiver", and "step".</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">    <span class="nam">runDf</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span><span class="nam">network</span><span class="op">,</span> <span class="nam">columns</span> <span class="op">=</span> <span class="nam">columns</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">    <span class="nam">pruning</span> <span class="op">=</span> <span class="nam">PruneNetwork</span><span class="op">(</span><span class="nam">runDf</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">    <span class="nam">result</span> <span class="op">=</span> <span class="nam">pruning</span><span class="op">.</span><span class="nam">deleteFromNetwork</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">        <span class="nam">iterations</span><span class="op">=</span><span class="nam">iterations</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">        <span class="nam">delAmounts</span><span class="op">=</span><span class="nam">delAmounts</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">        <span class="nam">delTypes</span><span class="op">=</span><span class="nam">delTypes</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">    <span class="key">return</span> <span class="nam">result</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span><span class="op">**</span><span class="nam">modelparameters</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_3142edd200b00bad___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_22d2582a602e487e___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_3142edd200b00bad_statistics_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="index.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-19 14:00 +0200
+            created at 2024-04-26 18:34 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,171 +1,187 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//uuttiilliittiieess//
-pprruunnee..ppyy:: 110000%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//uuttiilliittiieess//
+ssttaattiissttiiccss..ppyy:: 110000%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 5577 ssttaatteemmeennttss ?  5577 rruunn 00 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-19 14:00 +0200
-_1import os 
-_2import numpy as np 
-_3import pandas as pd 
-_4import igraph as ig 
-_5from tqdm import tqdm 
+26 18:34 +0200
+_1"""Prune a network.""" 
+_2import igraph as ig 
+_3import numpy as np 
+_4import pandas as pd 
+_5 
 _6 
-_7 
-_8class PruneNetwork(): 
-_9 """Create statistics for communication networks by deletion. 
-_1_0 
-_1_1 For a given dataset with sender and receiver information,  
-_1_2 create a weighted network with igraph. For a given number  
-_1_3 of iterations, deletion amounts, and deletion types, the  
-_1_4 algorithm then generates network statistics for randomly 
-_1_5 sampled subnetworks.  
-_1_6 """ 
-_1_7 
-_1_8 def __init__(self, dataframe): 
+_7class PruneNetwork: 
+_8 """Create statistics for communication networks by deletion. 
+_9 
+_1_0 For a given dataset with sender and receiver information, 
+_1_1 create a weighted network with igraph. For a given number 
+_1_2 of iterations, deletion amounts, and deletion types, the 
+_1_3 algorithm then generates network statistics for randomly 
+_1_4 sampled subnetworks. 
+_1_5 """ 
+_1_6 
+_1_7 def __init__(self, dataframe:pd.DataFrame) -> None: 
+_1_8 """Initialize pruning.""" 
 _1_9 self.inputDF = dataframe 
 _2_0 
-_2_1 def makeNet(self, dataframe): 
+_2_1 def makeNet(self, dataframe:pd.DataFrame) -> ig.Graph: 
 _2_2 """Create network from dataframe. 
-_2_3  
+_2_3 
 _2_4 Assumes the existence of sender, receiver and step 
-_2_5 column names.  
+_2_5 column names. 
 _2_6 """ 
-_2_7 df = dataframe[['sender', 'receiver', 'step']] 
-_2_8 df = df.groupby( 
-_2_9 ['sender', 'receiver'] 
-_3_0 ).size().reset_index(name='Count') 
-_3_1 net = ig.Graph.TupleList( 
-_3_2 df.itertuples(index=False), directed=True, weights=True 
+_2_7 networkdata = dataframe[["sender", "receiver", "step"]] 
+_2_8 networkdata = networkdata.groupby( 
+_2_9 ["sender", "receiver"], 
+_3_0 ).size().reset_index(name="Count") 
+_3_1 return ig.Graph.TupleList( 
+_3_2 networkdata.itertuples(index=False), directed=True, weights=True, 
 _3_3 ) 
-_3_4 return net 
-_3_5 
-_3_6 def netStats(self, G): 
-_3_7 """Generate network statistics. 
-_3_8  
-_3_9 Any statistic calculated on the full 
-_4_0 network can be added in principle. 
-_4_1 Currently implemented are:  
-_4_2 average relative degree, 
-_4_3 density 
-_4_4 transitivtiy 
-_4_5 cohesion 
-_4_6 average path length 
-_4_7 modularity 
-_4_8 """ 
-_4_9 numVs = len(G.vs) 
-_5_0 avg_rel_deg = np.mean([x/numVs for x in G.degree(mode="all")]) 
-_5_1 density = G.density() 
-_5_2 transitivity = G.transitivity_undirected() 
-_5_3 cohesion = G.cohesion() 
-_5_4 avg_path_len = G.average_path_length() 
-_5_5 modularity = G.modularity(G.components()) 
-_5_6 statDF = pd.DataFrame( 
-_5_7 [ 
-_5_8 { 
-_5_9 'avg_relative_degree': avg_rel_deg, 
-_6_0 'avg_path_length': avg_path_len, 
-_6_1 'density': density, 
-_6_2 'transitivity': transitivity, 
-_6_3 'cohesion': cohesion, 
-_6_4 'modularity': modularity 
-_6_5 } 
-_6_6 ] 
-_6_7 ) 
-_6_8 return statDF 
-_6_9 
-_7_0 def generatePruningParameters(self, G): 
-_7_1 """Generate a random set of pruning weights.""" 
-_7_2 nodes = G.get_vertex_dataframe() 
-_7_3 id2name = G.get_vertex_dataframe().to_dict()['name'] 
-_7_4 del_parameter = pd.DataFrame( 
-_7_5 { 
-_7_6 'ids': nodes.index, 
-_7_7 'degree': G.degree(), 
-_7_8 'unif': np.random.uniform(0, 1, len(G.vs)), 
-_7_9 'log_normal': np.random.lognormal(0, 1, len(G.vs)), 
-_8_0 'exp': np.random.exponential(1, len(G.vs)), 
-_8_1 'beta': np.random.beta(a=2, b=3, size=len(G.vs)) 
-_8_2 } 
-_8_3 ) 
-_8_4 
-_8_5 del_parameter = G.get_edge_dataframe()[["source", "target"]].merge( 
-_8_6 del_parameter, left_on='source', right_on='ids' 
-_8_7 ).merge( 
-_8_8 del_parameter, left_on='target', right_on='ids' 
-_8_9 ) 
-_9_0 del_parameter['degree'] = del_parameter.degree_x * del_parameter.degree_y /
-np.dot(del_parameter.degree_x, del_parameter.degree_y) 
-_9_1 del_parameter['unif'] = del_parameter.unif_x * del_parameter.unif_y / np.dot
-(del_parameter.unif_x, del_parameter.unif_y) 
-_9_2 del_parameter['log_normal'] = del_parameter.log_normal_x *
-del_parameter.log_normal_y / np.dot(del_parameter.log_normal_x,
-del_parameter.log_normal_y) 
-_9_3 del_parameter['exp'] = del_parameter.exp_x * del_parameter.exp_y / np.dot
-(del_parameter.exp_x, del_parameter.exp_y) 
-_9_4 del_parameter['beta'] = del_parameter.beta_x * del_parameter.beta_y / np.dot
-(del_parameter.beta_x, del_parameter.beta_y) 
-_9_5 sender = del_parameter["source"].apply(lambda x: id2name[x]) 
-_9_6 receiver = del_parameter["target"].apply(lambda x: id2name[x]) 
-_9_7 del_parameter.insert(0, "sender", sender) 
-_9_8 del_parameter.insert(0, "receiver", receiver) 
-_9_9 outDF = del_parameter[ 
-_1_0_0 ['sender', 'receiver', 'degree', 'unif', 'log_normal', 'exp', 'beta'] 
-_1_0_1 ] 
-_1_0_2 return outDF 
-_1_0_3 
-_1_0_4 def deleteFromNetwork( 
-_1_0_5 self, 
-_1_0_6 iterations=10, 
-_1_0_7 delAmounts=(0.1, 0.25, 0.5, 0.75, 0.9), 
-_1_0_8 delTypes=("degree", "unif", "log_normal", "exp", "beta") 
-_1_0_9 ): 
-_1_1_0 """Run the deletion by sampling.""" 
-_1_1_1 results = [] 
-_1_1_2 fullNet = self.makeNet( 
-_1_1_3 self.inputDF 
-_1_1_4 ) 
-_1_1_5 fullStats = self.netStats(fullNet) 
-_1_1_6 fullStats = fullStats.assign( 
-_1_1_7 **{ 
-_1_1_8 "delVal": 0, 
-_1_1_9 "delType": 'NA', 
-_1_2_0 "delIteration": 0 
-_1_2_1 } 
-_1_2_2 ) 
-_1_2_3 results.append(fullStats) 
-_1_2_4 for idx in range(1, iterations + 1): 
-_1_2_5 prunVals = self.generatePruningParameters( 
-_1_2_6 fullNet 
+_3_4 
+_3_5 def netStats(self, G:ig.Graph) -> pd.DataFrame: 
+_3_6 """Generate network statistics. 
+_3_7 
+_3_8 Any statistic calculated on the full 
+_3_9 network can be added in principle. 
+_4_0 Currently implemented are: 
+_4_1 average relative degree, 
+_4_2 density 
+_4_3 transitivtiy 
+_4_4 cohesion 
+_4_5 average path length 
+_4_6 modularity 
+_4_7 """ 
+_4_8 numVs = len(G.vs) 
+_4_9 avg_rel_deg = np.mean([x/numVs for x in G.degree(mode="all")]) 
+_5_0 density = G.density() 
+_5_1 transitivity = G.transitivity_undirected() 
+_5_2 cohesion = G.cohesion() 
+_5_3 avg_path_len = G.average_path_length() 
+_5_4 modularity = G.modularity(G.components()) 
+_5_5 return pd.DataFrame( 
+_5_6 [ 
+_5_7 { 
+_5_8 "avg_relative_degree": avg_rel_deg, 
+_5_9 "avg_path_length": avg_path_len, 
+_6_0 "density": density, 
+_6_1 "transitivity": transitivity, 
+_6_2 "cohesion": cohesion, 
+_6_3 "modularity": modularity, 
+_6_4 }, 
+_6_5 ], 
+_6_6 ) 
+_6_7 
+_6_8 def generatePruningParameters(self, G:ig.Graph) -> pd.DataFrame: 
+_6_9 """Generate a random set of pruning weights.""" 
+_7_0 nodes = G.get_vertex_dataframe() 
+_7_1 id2name = G.get_vertex_dataframe().to_dict()["name"] 
+_7_2 rng = np.random.default_rng() 
+_7_3 del_parameter = pd.DataFrame( 
+_7_4 { 
+_7_5 "ids": nodes.index, 
+_7_6 "degree": G.degree(), 
+_7_7 "unif": rng.uniform(0, 1, len(G.vs)), 
+_7_8 "log_normal": rng.lognormal(0, 1, len(G.vs)), 
+_7_9 "exp": rng.exponential(1, len(G.vs)), 
+_8_0 "beta": rng.beta(a=2, b=3, size=len(G.vs)), 
+_8_1 }, 
+_8_2 ) 
+_8_3 
+_8_4 del_parameter = G.get_edge_dataframe()[["source", "target"]].merge( 
+_8_5 del_parameter, left_on="source", right_on="ids", 
+_8_6 ).merge( 
+_8_7 del_parameter, left_on="target", right_on="ids", 
+_8_8 ) 
+_8_9 del_parameter["degree"] = del_parameter.degree_x * del_parameter.degree_y /
+np.dot( 
+_9_0 del_parameter.degree_x, del_parameter.degree_y, 
+_9_1 ) 
+_9_2 del_parameter["unif"] = del_parameter.unif_x * del_parameter.unif_y / np.dot
+( 
+_9_3 del_parameter.unif_x, del_parameter.unif_y, 
+_9_4 ) 
+_9_5 del_parameter["log_normal"] = del_parameter.log_normal_x *
+del_parameter.log_normal_y / np.dot( 
+_9_6 del_parameter.log_normal_x, del_parameter.log_normal_y, 
+_9_7 ) 
+_9_8 del_parameter["exp"] = del_parameter.exp_x * del_parameter.exp_y / np.dot( 
+_9_9 del_parameter.exp_x, del_parameter.exp_y, 
+_1_0_0 ) 
+_1_0_1 del_parameter["beta"] = del_parameter.beta_x * del_parameter.beta_y /
+np.dot( 
+_1_0_2 del_parameter.beta_x, del_parameter.beta_y, 
+_1_0_3 ) 
+_1_0_4 sender = del_parameter["source"].apply(lambda x: id2name[x]) 
+_1_0_5 receiver = del_parameter["target"].apply(lambda x: id2name[x]) 
+_1_0_6 del_parameter.insert(0, "sender", sender) 
+_1_0_7 del_parameter.insert(0, "receiver", receiver) 
+_1_0_8 return del_parameter[ 
+_1_0_9 ["sender", "receiver", "degree", "unif", "log_normal", "exp", "beta"] 
+_1_1_0 ] 
+_1_1_1 
+_1_1_2 
+_1_1_3 def deleteFromNetwork( 
+_1_1_4 self, 
+_1_1_5 iterations: int = 10, 
+_1_1_6 delAmounts: tuple = (0.1, 0.25, 0.5, 0.75, 0.9), 
+_1_1_7 delTypes: tuple = ("degree", "unif", "log_normal", "exp", "beta"), 
+_1_1_8 ) -> pd.DataFrame: 
+_1_1_9 """Run the deletion by sampling.""" 
+_1_2_0 results = [] 
+_1_2_1 fullNet = self.makeNet( 
+_1_2_2 self.inputDF, 
+_1_2_3 ) 
+_1_2_4 fullStats = self.netStats(fullNet) 
+_1_2_5 fullStats = fullStats.assign( 
+_1_2_6 delVal=0, delType="NA", delIteration=0, 
 _1_2_7 ) 
-_1_2_8 tempDF = self.inputDF.merge( 
-_1_2_9 prunVals 
-_1_3_0 ) 
-_1_3_1 for val in list(delAmounts): 
-_1_3_2 for deltype in list(delTypes): 
-_1_3_3 delDF = tempDF.sample( 
-_1_3_4 round(len(tempDF) * (1 - val)), 
-_1_3_5 weights=deltype 
-_1_3_6 ) 
-_1_3_7 delNet = self.makeNet(delDF) 
-_1_3_8 delStats = self.netStats(delNet) 
-_1_3_9 delStats = delStats.assign( 
-_1_4_0 **{ 
-_1_4_1 "delVal": val, 
-_1_4_2 "delType": deltype, 
-_1_4_3 "delIteration": idx 
-_1_4_4 } 
-_1_4_5 ) 
-_1_4_6 results.append(delStats) 
-_1_4_7 resDF = pd.concat(results) 
-_1_4_8 return resDF 
+_1_2_8 results.append(fullStats) 
+_1_2_9 for idx in range(1, iterations + 1): 
+_1_3_0 prunVals = self.generatePruningParameters( 
+_1_3_1 fullNet, 
+_1_3_2 ) 
+_1_3_3 tempDF = self.inputDF.merge( 
+_1_3_4 prunVals, 
+_1_3_5 ) 
+_1_3_6 for val in list(delAmounts): 
+_1_3_7 for deltype in list(delTypes): 
+_1_3_8 delDF = tempDF.sample( 
+_1_3_9 round(len(tempDF) * (1 - val)), 
+_1_4_0 weights=deltype, 
+_1_4_1 ) 
+_1_4_2 delNet = self.makeNet(delDF) 
+_1_4_3 delStats = self.netStats(delNet) 
+_1_4_4 delStats = delStats.assign( 
+_1_4_5 delVal=val, delType=deltype, delIteration=idx, 
+_1_4_6 ) 
+_1_4_7 results.append(delStats) 
+_1_4_8 return pd.concat(results) 
 _1_4_9 
+_1_5_0 
+_1_5_1 
+_1_5_2def prune( 
+_1_5_3 modelparameters: dict, network: tuple, columns: list, 
+_1_5_4 iterations: int = 10, delAmounts: tuple = (0.1, 0.25, 0.5, 0.75, 0.9), 
+_1_5_5 delTypes: tuple = ("degree", "unif")) -> pd.DataFrame: 
+_1_5_6 """Generate pruned networks from input. 
+_1_5_7 
+_1_5_8 Assumes existence of columns "sender", "receiver", and "step". 
+_1_5_9 """ 
+_1_6_0 runDf = pd.DataFrame(network, columns = columns) 
+_1_6_1 pruning = PruneNetwork(runDf) 
+_1_6_2 result = pruning.deleteFromNetwork( 
+_1_6_3 iterations=iterations, 
+_1_6_4 delAmounts=delAmounts, 
+_1_6_5 delTypes=delTypes, 
+_1_6_6 ) 
+_1_6_7 return result.assign(**modelparameters) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-19 14:00 +0200
+26 18:34 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_3142edd200b00bad_statistics_py.html` & `scicom-0.4.1/tests/reports/html/d_b133a5f21d483f41_statistics_py.html`

 * *Files 7% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/utilities/statistics.py: 80%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/utilities/statistics.py: 92%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/utilities/statistics.py</b>:
-            <span class="pc_cov">80%</span>
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/utilities/statistics.py</b>:
+            <span class="pc_cov">92%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -50,26 +50,26 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">122 statements &nbsp;</span>
-            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">98<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">24<span class="text"> missing</span></button>
+            <span class="text">106 statements &nbsp;</span>
+            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">97<span class="text"> run</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">9<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_3142edd200b00bad___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_b133a5f21d483f41___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
             <a id="nextFileLink" class="nav" href="index.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 15:09 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -247,137 +247,92 @@
     <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">            <span class="str">"cohesion"</span><span class="op">:</span><span class="nam">cohesion</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t">            <span class="str">"assortativity"</span><span class="op">:</span><span class="nam">assortativity</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">            <span class="str">"avg_degree"</span><span class="op">:</span><span class="nam">avg_rel_degree</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">            <span class="str">"centralization"</span><span class="op">:</span><span class="nam">centralization</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t">            <span class="str">"hill"</span><span class="op">:</span><span class="nam">hill</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t">        <span class="op">}</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">    <span class="key">def</span> <span class="nam">generatePruningParameters</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">G</span><span class="op">:</span><span class="nam">ig</span><span class="op">.</span><span class="nam">Graph</span><span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">        <span class="str">"""Generate a random set of pruning weights."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">        <span class="nam">nodes</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_vertex_dataframe</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">        <span class="nam">id2name</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_vertex_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">to_dict</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="str">"name"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">        <span class="nam">rng</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">default_rng</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">        <span class="nam">del_parameter</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">            <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">                <span class="str">"ids"</span><span class="op">:</span> <span class="nam">nodes</span><span class="op">.</span><span class="nam">index</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">                <span class="str">"degree"</span><span class="op">:</span> <span class="nam">G</span><span class="op">.</span><span class="nam">degree</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">                <span class="str">"unif"</span><span class="op">:</span> <span class="nam">rng</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">                <span class="str">"log_normal"</span><span class="op">:</span> <span class="nam">rng</span><span class="op">.</span><span class="nam">lognormal</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">                <span class="str">"exp"</span><span class="op">:</span> <span class="nam">rng</span><span class="op">.</span><span class="nam">exponential</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">                <span class="str">"beta"</span><span class="op">:</span> <span class="nam">rng</span><span class="op">.</span><span class="nam">beta</span><span class="op">(</span><span class="nam">a</span><span class="op">=</span><span class="num">2</span><span class="op">,</span> <span class="nam">b</span><span class="op">=</span><span class="num">3</span><span class="op">,</span> <span class="nam">size</span><span class="op">=</span><span class="nam">len</span><span class="op">(</span><span class="nam">G</span><span class="op">.</span><span class="nam">vs</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">            <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">        <span class="nam">del_parameter</span> <span class="op">=</span> <span class="nam">G</span><span class="op">.</span><span class="nam">get_edge_dataframe</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="op">[</span><span class="str">"source"</span><span class="op">,</span> <span class="str">"target"</span><span class="op">]</span><span class="op">]</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">,</span> <span class="nam">left_on</span><span class="op">=</span><span class="str">"source"</span><span class="op">,</span> <span class="nam">right_on</span><span class="op">=</span><span class="str">"ids"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">        <span class="op">)</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">,</span> <span class="nam">left_on</span><span class="op">=</span><span class="str">"target"</span><span class="op">,</span> <span class="nam">right_on</span><span class="op">=</span><span class="str">"ids"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"degree"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">degree_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"unif"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">unif_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"log_normal"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">log_normal_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"exp"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">exp_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"beta"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_x</span> <span class="op">*</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_y</span> <span class="op">/</span> <span class="nam">np</span><span class="op">.</span><span class="nam">dot</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">            <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_x</span><span class="op">,</span> <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">beta_y</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">        <span class="nam">sender</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"source"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">id2name</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">        <span class="nam">receiver</span> <span class="op">=</span> <span class="nam">del_parameter</span><span class="op">[</span><span class="str">"target"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span><span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">id2name</span><span class="op">[</span><span class="nam">x</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"sender"</span><span class="op">,</span> <span class="nam">sender</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">        <span class="nam">del_parameter</span><span class="op">.</span><span class="nam">insert</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="str">"receiver"</span><span class="op">,</span> <span class="nam">receiver</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">        <span class="key">return</span> <span class="nam">del_parameter</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">            <span class="op">[</span><span class="str">"sender"</span><span class="op">,</span> <span class="str">"receiver"</span><span class="op">,</span> <span class="str">"degree"</span><span class="op">,</span> <span class="str">"unif"</span><span class="op">,</span> <span class="str">"log_normal"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">        <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">    <span class="key">def</span> <span class="nam">deleteFromNetwork</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t">        <span class="nam">iterations</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t">        <span class="nam">delAmounts</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.25</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t">        <span class="nam">delTypes</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"unif"</span><span class="op">,</span> <span class="str">"log_normal1"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">,</span> <span class="str">"log_normal2"</span><span class="op">,</span> <span class="str">"log_normal3"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t">        <span class="nam">delMethod</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"agents"</span><span class="op">,</span> <span class="str">"regions"</span><span class="op">,</span> <span class="str">"time"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t">        <span class="nam">rankedVals</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t">        <span class="str">"""Run the deletion by sampling."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t">        <span class="nam">results</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">        <span class="nam">fullNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">fullNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">fullStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">            <span class="nam">delVal</span><span class="op">=</span><span class="num">0</span><span class="op">,</span> <span class="nam">delType</span><span class="op">=</span><span class="str">"NA"</span><span class="op">,</span> <span class="nam">delIteration</span><span class="op">=</span><span class="num">0</span><span class="op">,</span> <span class="nam">delMethod</span><span class="op">=</span><span class="str">"NA"</span><span class="op">,</span> <span class="nam">rankedVal</span><span class="op">=</span><span class="str">"NA"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">        <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">fullStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">iterations</span> <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">            <span class="key">for</span> <span class="nam">method</span> <span class="key">in</span> <span class="nam">delMethod</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">                <span class="key">for</span> <span class="nam">ranked</span> <span class="key">in</span> <span class="nam">rankedVals</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t">                    <span class="nam">probVals</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">setSurvivalProb</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">                        <span class="nam">fullNet</span><span class="op">,</span> <span class="nam">method</span><span class="op">=</span><span class="nam">method</span><span class="op">,</span> <span class="nam">ranked</span><span class="op">=</span><span class="nam">ranked</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t">                    <span class="nam">prunVals</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSurvivalProb</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t">                        <span class="nam">probVals</span><span class="op">,</span> <span class="nam">method</span><span class="op">=</span><span class="nam">method</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">                    <span class="nam">tempDF</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t">                        <span class="nam">prunVals</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t">                    <span class="key">for</span> <span class="nam">val</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delAmounts</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t">                        <span class="key">for</span> <span class="nam">deltype</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delTypes</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t">                            <span class="nam">delDF</span> <span class="op">=</span> <span class="nam">tempDF</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t">                                <span class="nam">frac</span> <span class="op">=</span> <span class="op">(</span><span class="num">1</span> <span class="op">-</span> <span class="nam">val</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">                                <span class="nam">weights</span><span class="op">=</span><span class="nam">deltype</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">                            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">                            <span class="nam">delNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span><span class="nam">delDF</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">                            <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">delNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">                            <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">delStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">                                <span class="nam">delVal</span><span class="op">=</span><span class="nam">val</span><span class="op">,</span> <span class="nam">delType</span><span class="op">=</span><span class="nam">deltype</span><span class="op">,</span> <span class="nam">delIteration</span><span class="op">=</span><span class="nam">idx</span><span class="op">,</span> <span class="nam">delMethod</span><span class="op">=</span><span class="nam">method</span><span class="op">,</span> <span class="nam">rankedVal</span><span class="op">=</span><span class="nam">ranked</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">                            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">                            <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">delStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">        <span class="key">return</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="nam">results</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">    <span class="key">def</span> <span class="nam">deleteFromNetwork</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">        <span class="nam">iterations</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">        <span class="nam">delAmounts</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.25</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">        <span class="nam">delTypes</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"unif"</span><span class="op">,</span> <span class="str">"log_normal1"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">,</span> <span class="str">"log_normal2"</span><span class="op">,</span> <span class="str">"log_normal3"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">        <span class="nam">delMethod</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"agents"</span><span class="op">,</span> <span class="str">"regions"</span><span class="op">,</span> <span class="str">"time"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">        <span class="nam">rankedVals</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t">    <span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t">        <span class="str">"""Run the deletion by sampling."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t">        <span class="nam">results</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">        <span class="nam">fullNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">fullNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t">        <span class="nam">fullStats</span> <span class="op">=</span> <span class="nam">fullStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t">            <span class="nam">delVal</span><span class="op">=</span><span class="num">0</span><span class="op">,</span> <span class="nam">delType</span><span class="op">=</span><span class="str">"NA"</span><span class="op">,</span> <span class="nam">delIteration</span><span class="op">=</span><span class="num">0</span><span class="op">,</span> <span class="nam">delMethod</span><span class="op">=</span><span class="str">"NA"</span><span class="op">,</span> <span class="nam">rankedVal</span><span class="op">=</span><span class="str">"NA"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">        <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">fullStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">        <span class="key">for</span> <span class="nam">idx</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="nam">iterations</span> <span class="op">+</span> <span class="num">1</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">            <span class="key">for</span> <span class="nam">method</span> <span class="key">in</span> <span class="nam">delMethod</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">                <span class="key">for</span> <span class="nam">ranked</span> <span class="key">in</span> <span class="nam">rankedVals</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">                    <span class="nam">probVals</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">setSurvivalProb</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">                        <span class="nam">fullNet</span><span class="op">,</span> <span class="nam">method</span><span class="op">=</span><span class="nam">method</span><span class="op">,</span> <span class="nam">ranked</span><span class="op">=</span><span class="nam">ranked</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">                    <span class="nam">prunVals</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">scaleSurvivalProb</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">                        <span class="nam">probVals</span><span class="op">,</span> <span class="nam">method</span><span class="op">=</span><span class="nam">method</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">                    <span class="nam">tempDF</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">inputDF</span><span class="op">.</span><span class="nam">merge</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">                        <span class="nam">prunVals</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t">                    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t">                    <span class="key">for</span> <span class="nam">val</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delAmounts</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t">                        <span class="key">for</span> <span class="nam">deltype</span> <span class="key">in</span> <span class="nam">list</span><span class="op">(</span><span class="nam">delTypes</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t">                            <span class="nam">delDF</span> <span class="op">=</span> <span class="nam">tempDF</span><span class="op">.</span><span class="nam">sample</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t">                                <span class="nam">frac</span> <span class="op">=</span> <span class="op">(</span><span class="num">1</span> <span class="op">-</span> <span class="nam">val</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t">                                <span class="nam">weights</span><span class="op">=</span><span class="nam">deltype</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t">                            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t253" href="#t253">253</a></span><span class="t">                            <span class="nam">delNet</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">makeNet</span><span class="op">(</span><span class="nam">delDF</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t254" href="#t254">254</a></span><span class="t">                            <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">netStats</span><span class="op">(</span><span class="nam">delNet</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t255" href="#t255">255</a></span><span class="t">                            <span class="nam">delStats</span> <span class="op">=</span> <span class="nam">delStats</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t256" href="#t256">256</a></span><span class="t">                                <span class="nam">delVal</span><span class="op">=</span><span class="nam">val</span><span class="op">,</span> <span class="nam">delType</span><span class="op">=</span><span class="nam">deltype</span><span class="op">,</span> <span class="nam">delIteration</span><span class="op">=</span><span class="nam">idx</span><span class="op">,</span> <span class="nam">delMethod</span><span class="op">=</span><span class="nam">method</span><span class="op">,</span> <span class="nam">rankedVal</span><span class="op">=</span><span class="nam">ranked</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t257" href="#t257">257</a></span><span class="t">                            <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t258" href="#t258">258</a></span><span class="t">                            <span class="nam">results</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">delStats</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t259" href="#t259">259</a></span><span class="t">        <span class="key">return</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">concat</span><span class="op">(</span><span class="nam">results</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t260" href="#t260">260</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t261" href="#t261">261</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t262" href="#t262">262</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t263" href="#t263">263</a></span><span class="t"><span class="key">def</span> <span class="nam">prune</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t264" href="#t264">264</a></span><span class="t">    <span class="nam">modelparameters</span><span class="op">:</span> <span class="nam">dict</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t265" href="#t265">265</a></span><span class="t">    <span class="nam">network</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t266" href="#t266">266</a></span><span class="t">    <span class="nam">columns</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t267" href="#t267">267</a></span><span class="t">    <span class="nam">iterations</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t268" href="#t268">268</a></span><span class="t">    <span class="nam">delAmounts</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.25</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t269" href="#t269">269</a></span><span class="t">    <span class="nam">delTypes</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"unif"</span><span class="op">,</span> <span class="str">"log_normal1"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">,</span> <span class="str">"log_normal2"</span><span class="op">,</span> <span class="str">"log_normal3"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t270" href="#t270">270</a></span><span class="t">    <span class="nam">delMethod</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"agents"</span><span class="op">,</span> <span class="str">"regions"</span><span class="op">,</span> <span class="str">"time"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t271" href="#t271">271</a></span><span class="t">    <span class="nam">rankedVals</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">)</span><span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t272" href="#t272">272</a></span><span class="t">    <span class="str">"""Generate pruned networks from input.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t273" href="#t273">273</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t274" href="#t274">274</a></span><span class="t"><span class="str">    Assumes existence of columns "sender", "receiver",</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t275" href="#t275">275</a></span><span class="t"><span class="str">    "sender_location", "receiver_location" and "step".</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t276" href="#t276">276</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t277" href="#t277">277</a></span><span class="t">    <span class="nam">runDf</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span><span class="nam">network</span><span class="op">,</span> <span class="nam">columns</span> <span class="op">=</span> <span class="nam">columns</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t278" href="#t278">278</a></span><span class="t">    <span class="nam">pruning</span> <span class="op">=</span> <span class="nam">PruneNetwork</span><span class="op">(</span><span class="nam">runDf</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t279" href="#t279">279</a></span><span class="t">    <span class="nam">result</span> <span class="op">=</span> <span class="nam">pruning</span><span class="op">.</span><span class="nam">deleteFromNetwork</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t280" href="#t280">280</a></span><span class="t">        <span class="nam">iterations</span><span class="op">=</span><span class="nam">iterations</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t281" href="#t281">281</a></span><span class="t">        <span class="nam">delAmounts</span><span class="op">=</span><span class="nam">delAmounts</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t282" href="#t282">282</a></span><span class="t">        <span class="nam">delTypes</span><span class="op">=</span><span class="nam">delTypes</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t283" href="#t283">283</a></span><span class="t">        <span class="nam">delMethod</span><span class="op">=</span><span class="nam">delMethod</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t284" href="#t284">284</a></span><span class="t">        <span class="nam">rankedVals</span><span class="op">=</span><span class="nam">rankedVals</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t285" href="#t285">285</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="run"><span class="n"><a id="t286" href="#t286">286</a></span><span class="t">    <span class="key">return</span> <span class="nam">result</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span><span class="op">**</span><span class="nam">modelparameters</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t"><span class="key">def</span> <span class="nam">prune</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">    <span class="nam">modelparameters</span><span class="op">:</span> <span class="nam">dict</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">    <span class="nam">network</span><span class="op">:</span> <span class="nam">tuple</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">    <span class="nam">columns</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t">    <span class="nam">iterations</span><span class="op">:</span> <span class="nam">int</span> <span class="op">=</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">    <span class="nam">delAmounts</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="num">0.1</span><span class="op">,</span> <span class="num">0.25</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.75</span><span class="op">,</span> <span class="num">0.9</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t">    <span class="nam">delTypes</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"unif"</span><span class="op">,</span> <span class="str">"log_normal1"</span><span class="op">,</span> <span class="str">"exp"</span><span class="op">,</span> <span class="str">"beta"</span><span class="op">,</span> <span class="str">"log_normal2"</span><span class="op">,</span> <span class="str">"log_normal3"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t">    <span class="nam">delMethod</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="str">"agents"</span><span class="op">,</span> <span class="str">"regions"</span><span class="op">,</span> <span class="str">"time"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t">    <span class="nam">rankedVals</span><span class="op">:</span> <span class="nam">tuple</span> <span class="op">=</span> <span class="op">(</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">)</span><span class="op">)</span> <span class="op">-></span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t">    <span class="str">"""Generate pruned networks from input.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t"><span class="str">    Assumes existence of columns "sender", "receiver",</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t"><span class="str">    "sender_location", "receiver_location" and "step".</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t">    <span class="nam">runDf</span> <span class="op">=</span> <span class="nam">pd</span><span class="op">.</span><span class="nam">DataFrame</span><span class="op">(</span><span class="nam">network</span><span class="op">,</span> <span class="nam">columns</span> <span class="op">=</span> <span class="nam">columns</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t">    <span class="nam">pruning</span> <span class="op">=</span> <span class="nam">PruneNetwork</span><span class="op">(</span><span class="nam">runDf</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">    <span class="nam">result</span> <span class="op">=</span> <span class="nam">pruning</span><span class="op">.</span><span class="nam">deleteFromNetwork</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">        <span class="nam">iterations</span><span class="op">=</span><span class="nam">iterations</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">        <span class="nam">delAmounts</span><span class="op">=</span><span class="nam">delAmounts</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">        <span class="nam">delTypes</span><span class="op">=</span><span class="nam">delTypes</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">        <span class="nam">delMethod</span><span class="op">=</span><span class="nam">delMethod</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">        <span class="nam">rankedVals</span><span class="op">=</span><span class="nam">rankedVals</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="run"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">    <span class="key">return</span> <span class="nam">result</span><span class="op">.</span><span class="nam">assign</span><span class="op">(</span><span class="op">**</span><span class="nam">modelparameters</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_3142edd200b00bad___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_b133a5f21d483f41___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
             <a id="nextFileLink" class="nav" href="index.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 15:09 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,21 +1,21 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//uuttiilliittiieess//
-ssttaattiissttiiccss..ppyy:: 8800%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//uuttiilliittiieess//
+ssttaattiissttiiccss..ppyy:: 9922%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 112222 ssttaatteemmeennttss ?  9988 rruunn 2244 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 110066 ssttaatteemmeennttss ?  9977 rruunn 99 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 15:09 +0200
+28 12:02 +0200
 _1"""Prune a network.""" 
 _2import igraph as ig 
 _3import numpy as np 
 _4import pandas as pd 
 _5 
 _6 
 _7class PruneNetwork: 
@@ -194,131 +194,82 @@
 _1_6_5 "cohesion":cohesion, 
 _1_6_6 "assortativity":assortativity, 
 _1_6_7 "avg_degree":avg_rel_degree, 
 _1_6_8 "centralization":centralization, 
 _1_6_9 "hill":hill, 
 _1_7_0 }]) 
 _1_7_1 
-_1_7_2 def generatePruningParameters(self, G:ig.Graph) -> pd.DataFrame: 
-_1_7_3 """Generate a random set of pruning weights.""" 
-_1_7_4 nodes = G.get_vertex_dataframe() 
-_1_7_5 id2name = G.get_vertex_dataframe().to_dict()["name"] 
-_1_7_6 rng = np.random.default_rng() 
-_1_7_7 del_parameter = pd.DataFrame( 
-_1_7_8 { 
-_1_7_9 "ids": nodes.index, 
-_1_8_0 "degree": G.degree(), 
-_1_8_1 "unif": rng.uniform(0, 1, len(G.vs)), 
-_1_8_2 "log_normal": rng.lognormal(0, 1, len(G.vs)), 
-_1_8_3 "exp": rng.exponential(1, len(G.vs)), 
-_1_8_4 "beta": rng.beta(a=2, b=3, size=len(G.vs)), 
-_1_8_5 }, 
-_1_8_6 ) 
-_1_8_7 
-_1_8_8 del_parameter = G.get_edge_dataframe()[["source", "target"]].merge( 
-_1_8_9 del_parameter, left_on="source", right_on="ids", 
-_1_9_0 ).merge( 
-_1_9_1 del_parameter, left_on="target", right_on="ids", 
-_1_9_2 ) 
-_1_9_3 del_parameter["degree"] = del_parameter.degree_x * del_parameter.degree_y /
-np.dot( 
-_1_9_4 del_parameter.degree_x, del_parameter.degree_y, 
+_1_7_2 def deleteFromNetwork( 
+_1_7_3 self, 
+_1_7_4 iterations: int = 10, 
+_1_7_5 delAmounts: tuple = (0.1, 0.25, 0.5, 0.75, 0.9), 
+_1_7_6 delTypes: tuple = ("unif", "log_normal1", "exp", "beta", "log_normal2",
+"log_normal3"), 
+_1_7_7 delMethod: tuple = ("agents", "regions", "time"), 
+_1_7_8 rankedVals: tuple = (True, False), 
+_1_7_9 ) -> pd.DataFrame: 
+_1_8_0 """Run the deletion by sampling.""" 
+_1_8_1 results = [] 
+_1_8_2 fullNet = self.makeNet( 
+_1_8_3 self.inputDF, 
+_1_8_4 ) 
+_1_8_5 fullStats = self.netStats(fullNet) 
+_1_8_6 fullStats = fullStats.assign( 
+_1_8_7 delVal=0, delType="NA", delIteration=0, delMethod="NA", rankedVal="NA", 
+_1_8_8 ) 
+_1_8_9 results.append(fullStats) 
+_1_9_0 for idx in range(1, iterations + 1): 
+_1_9_1 for method in delMethod: 
+_1_9_2 for ranked in rankedVals: 
+_1_9_3 probVals = self.setSurvivalProb( 
+_1_9_4 fullNet, method=method, ranked=ranked, 
 _1_9_5 ) 
-_1_9_6 del_parameter["unif"] = del_parameter.unif_x * del_parameter.unif_y /
-np.dot( 
-_1_9_7 del_parameter.unif_x, del_parameter.unif_y, 
+_1_9_6 prunVals = self.scaleSurvivalProb( 
+_1_9_7 probVals, method=method, 
 _1_9_8 ) 
-_1_9_9 del_parameter["log_normal"] = del_parameter.log_normal_x *
-del_parameter.log_normal_y / np.dot( 
-_2_0_0 del_parameter.log_normal_x, del_parameter.log_normal_y, 
+_1_9_9 tempDF = self.inputDF.merge( 
+_2_0_0 prunVals, 
 _2_0_1 ) 
-_2_0_2 del_parameter["exp"] = del_parameter.exp_x * del_parameter.exp_y / np.dot( 
-_2_0_3 del_parameter.exp_x, del_parameter.exp_y, 
-_2_0_4 ) 
-_2_0_5 del_parameter["beta"] = del_parameter.beta_x * del_parameter.beta_y /
-np.dot( 
-_2_0_6 del_parameter.beta_x, del_parameter.beta_y, 
+_2_0_2 for val in list(delAmounts): 
+_2_0_3 for deltype in list(delTypes): 
+_2_0_4 delDF = tempDF.sample( 
+_2_0_5 frac = (1 - val), 
+_2_0_6 weights=deltype, 
 _2_0_7 ) 
-_2_0_8 sender = del_parameter["source"].apply(lambda x: id2name[x]) 
-_2_0_9 receiver = del_parameter["target"].apply(lambda x: id2name[x]) 
-_2_1_0 del_parameter.insert(0, "sender", sender) 
-_2_1_1 del_parameter.insert(0, "receiver", receiver) 
-_2_1_2 return del_parameter[ 
-_2_1_3 ["sender", "receiver", "degree", "unif", "log_normal", "exp", "beta"] 
-_2_1_4 ] 
+_2_0_8 delNet = self.makeNet(delDF) 
+_2_0_9 delStats = self.netStats(delNet) 
+_2_1_0 delStats = delStats.assign( 
+_2_1_1 delVal=val, delType=deltype, delIteration=idx, delMethod=method,
+rankedVal=ranked, 
+_2_1_2 ) 
+_2_1_3 results.append(delStats) 
+_2_1_4 return pd.concat(results) 
 _2_1_5 
 _2_1_6 
-_2_1_7 def deleteFromNetwork( 
-_2_1_8 self, 
-_2_1_9 iterations: int = 10, 
-_2_2_0 delAmounts: tuple = (0.1, 0.25, 0.5, 0.75, 0.9), 
-_2_2_1 delTypes: tuple = ("unif", "log_normal1", "exp", "beta", "log_normal2",
+_2_1_7 
+_2_1_8def prune( 
+_2_1_9 modelparameters: dict, 
+_2_2_0 network: tuple, 
+_2_2_1 columns: list, 
+_2_2_2 iterations: int = 10, 
+_2_2_3 delAmounts: tuple = (0.1, 0.25, 0.5, 0.75, 0.9), 
+_2_2_4 delTypes: tuple = ("unif", "log_normal1", "exp", "beta", "log_normal2",
 "log_normal3"), 
-_2_2_2 delMethod: tuple = ("agents", "regions", "time"), 
-_2_2_3 rankedVals: tuple = (True, False), 
-_2_2_4 ) -> pd.DataFrame: 
-_2_2_5 """Run the deletion by sampling.""" 
-_2_2_6 results = [] 
-_2_2_7 fullNet = self.makeNet( 
-_2_2_8 self.inputDF, 
-_2_2_9 ) 
-_2_3_0 fullStats = self.netStats(fullNet) 
-_2_3_1 fullStats = fullStats.assign( 
-_2_3_2 delVal=0, delType="NA", delIteration=0, delMethod="NA", rankedVal="NA", 
-_2_3_3 ) 
-_2_3_4 results.append(fullStats) 
-_2_3_5 for idx in range(1, iterations + 1): 
-_2_3_6 for method in delMethod: 
-_2_3_7 for ranked in rankedVals: 
-_2_3_8 probVals = self.setSurvivalProb( 
-_2_3_9 fullNet, method=method, ranked=ranked, 
+_2_2_5 delMethod: tuple = ("agents", "regions", "time"), 
+_2_2_6 rankedVals: tuple = (True, False)) -> pd.DataFrame: 
+_2_2_7 """Generate pruned networks from input. 
+_2_2_8 
+_2_2_9 Assumes existence of columns "sender", "receiver", 
+_2_3_0 "sender_location", "receiver_location" and "step". 
+_2_3_1 """ 
+_2_3_2 runDf = pd.DataFrame(network, columns = columns) 
+_2_3_3 pruning = PruneNetwork(runDf) 
+_2_3_4 result = pruning.deleteFromNetwork( 
+_2_3_5 iterations=iterations, 
+_2_3_6 delAmounts=delAmounts, 
+_2_3_7 delTypes=delTypes, 
+_2_3_8 delMethod=delMethod, 
+_2_3_9 rankedVals=rankedVals, 
 _2_4_0 ) 
-_2_4_1 prunVals = self.scaleSurvivalProb( 
-_2_4_2 probVals, method=method, 
-_2_4_3 ) 
-_2_4_4 tempDF = self.inputDF.merge( 
-_2_4_5 prunVals, 
-_2_4_6 ) 
-_2_4_7 for val in list(delAmounts): 
-_2_4_8 for deltype in list(delTypes): 
-_2_4_9 delDF = tempDF.sample( 
-_2_5_0 frac = (1 - val), 
-_2_5_1 weights=deltype, 
-_2_5_2 ) 
-_2_5_3 delNet = self.makeNet(delDF) 
-_2_5_4 delStats = self.netStats(delNet) 
-_2_5_5 delStats = delStats.assign( 
-_2_5_6 delVal=val, delType=deltype, delIteration=idx, delMethod=method,
-rankedVal=ranked, 
-_2_5_7 ) 
-_2_5_8 results.append(delStats) 
-_2_5_9 return pd.concat(results) 
-_2_6_0 
-_2_6_1 
-_2_6_2 
-_2_6_3def prune( 
-_2_6_4 modelparameters: dict, 
-_2_6_5 network: tuple, 
-_2_6_6 columns: list, 
-_2_6_7 iterations: int = 10, 
-_2_6_8 delAmounts: tuple = (0.1, 0.25, 0.5, 0.75, 0.9), 
-_2_6_9 delTypes: tuple = ("unif", "log_normal1", "exp", "beta", "log_normal2",
-"log_normal3"), 
-_2_7_0 delMethod: tuple = ("agents", "regions", "time"), 
-_2_7_1 rankedVals: tuple = (True, False)) -> pd.DataFrame: 
-_2_7_2 """Generate pruned networks from input. 
-_2_7_3 
-_2_7_4 Assumes existence of columns "sender", "receiver", 
-_2_7_5 "sender_location", "receiver_location" and "step". 
-_2_7_6 """ 
-_2_7_7 runDf = pd.DataFrame(network, columns = columns) 
-_2_7_8 pruning = PruneNetwork(runDf) 
-_2_7_9 result = pruning.deleteFromNetwork( 
-_2_8_0 iterations=iterations, 
-_2_8_1 delAmounts=delAmounts, 
-_2_8_2 delTypes=delTypes, 
-_2_8_3 delMethod=delMethod, 
-_2_8_4 rankedVals=rankedVals, 
-_2_8_5 ) 
-_2_8_6 return result.assign(**modelparameters) 
+_2_4_1 return result.assign(**modelparameters) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-15 15:09 +0200
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_8a655f2681f565c9_interface_py.html` & `scicom-0.4.1/tests/reports/html/d_48e31f30a7ef2afb_interface_py.html`

 * *Files 1% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/interface.py: 0%</title>
+    <title>Coverage for .tox/p312/lib/python3.10/site-packages/scicom/interface.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/interface.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p312/lib/python3.10/site-packages/scicom/interface.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -56,20 +56,20 @@
         <h2>
             <span class="text">15 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
             <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">15<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_SimpleContinuousModule_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_SimpleContinuousModule_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
@@ -117,18 +117,18 @@
     <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">label</span><span class="op">=</span><span class="str">"Knowledge Spread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t"><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_277402163e1a7589_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_299ddae0d2804fc5_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_2e9db29e074df228_SimpleContinuousModule_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_ad23a1665840e904_SimpleContinuousModule_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-14 11:31 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,21 +1,21 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//iinntteerrffaaccee..ppyy::
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331122//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//iinntteerrffaaccee..ppyy::
 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
 ********** 1155 ssttaatteemmeennttss ?  00 rruunn 1155 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+28 12:02 +0200
 _1"""Solara interface for all simulations.""" 
 _2from pathlib import Path 
 _3 
 _4import solara 
 _5 
 _6from scicom.historicalletters.interface import page as
 historical_letters_page 
@@ -49,8 +49,8 @@
 _3_2 solara.Route( 
 _3_3 path="knowledgespread", 
 _3_4 component=knowledgespread, 
 _3_5 label="Knowledge Spread", 
 _3_6 ), 
 _3_7] 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-
-14 11:31 +0200
+28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_d0052f7b3fb6bc9f_SimpleContinuousModule_py.html` & `scicom-0.4.1/tests/reports/html/d_e85bc3a05b58e6d3_interface_py.html`

 * *Files 10% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/randomletters/SimpleContinuousModule.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/interface.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/randomletters/SimpleContinuousModule.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/interface.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,83 +50,85 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">24 statements &nbsp;</span>
+            <span class="text">15 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">24<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">15<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_d0052f7b3fb6bc9f___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_SimpleContinuousModule_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""Solara interface for all simulations."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">from</span> <span class="nam">pathlib</span> <span class="key">import</span> <span class="nam">Path</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">class</span> <span class="nam">SimpleCanvas</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">visualization</span><span class="op">.</span><span class="nam">VisualizationElement</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">    <span class="str">"""Display agents on a map background. No coordinates."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="nam">local_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"randomletters/simple_continuous_canvas.js"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="nam">local_css_includes</span> <span class="op">=</span> <span class="op">[</span><span class="str">"randomletters/map.png"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">    <span class="nam">portrayal_method</span> <span class="op">=</span> <span class="key">None</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">    <span class="nam">canvas_height</span> <span class="op">=</span> <span class="num">720</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t">    <span class="nam">canvas_width</span> <span class="op">=</span> <span class="num">1280</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">portrayal_method</span><span class="op">,</span> <span class="nam">canvas_height</span><span class="op">=</span><span class="num">720</span><span class="op">,</span> <span class="nam">canvas_width</span><span class="op">=</span><span class="num">1280</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">        <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">        Instantiate a new SimpleCanvas</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">        """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span> <span class="op">=</span> <span class="nam">portrayal_method</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span> <span class="op">=</span> <span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span> <span class="op">=</span> <span class="nam">canvas_width</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">        <span class="nam">new_element</span> <span class="op">=</span> <span class="str">"new Simple_Continuous_Module({}, {})"</span><span class="op">.</span><span class="nam">format</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">            <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_width</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">canvas_height</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">js_code</span> <span class="op">=</span> <span class="str">"elements.push("</span> <span class="op">+</span> <span class="nam">new_element</span> <span class="op">+</span> <span class="str">");"</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="key">def</span> <span class="nam">render</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="str">"""How to render the agents"""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="nam">space_state</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="key">for</span> <span class="nam">obj</span> <span class="key">in</span> <span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">            <span class="nam">portrayal</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">portrayal_method</span><span class="op">(</span><span class="nam">obj</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">            <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="op">=</span> <span class="nam">obj</span><span class="op">.</span><span class="nam">pos</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">            <span class="nam">x</span> <span class="op">=</span> <span class="op">(</span><span class="nam">x</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">x_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">            <span class="nam">y</span> <span class="op">=</span> <span class="op">(</span><span class="nam">y</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_max</span> <span class="op">-</span> <span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">y_min</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"x"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">x</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">            <span class="nam">portrayal</span><span class="op">[</span><span class="str">"y"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">y</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">            <span class="nam">space_state</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">portrayal</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="key">return</span> <span class="nam">space_state</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">import</span> <span class="nam">solara</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">interface</span> <span class="key">import</span> <span class="nam">page</span> <span class="key">as</span> <span class="nam">historical_letters_page</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">knowledgespread</span><span class="op">.</span><span class="nam">interface</span> <span class="key">import</span> <span class="nam">page</span> <span class="key">as</span> <span class="nam">knowledgespread_page</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="op">@</span><span class="nam">solara</span><span class="op">.</span><span class="nam">component</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">def</span> <span class="nam">Home</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">    <span class="com"># load about markdown file in the same directory</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">    <span class="key">with</span> <span class="nam">Path</span><span class="op">.</span><span class="nam">open</span><span class="op">(</span><span class="nam">Path</span><span class="op">(</span><span class="nam">Path</span><span class="op">(</span><span class="nam">__file__</span><span class="op">)</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">parent</span><span class="op">.</span><span class="nam">resolve</span><span class="op">(</span><span class="op">)</span><span class="op">,</span> <span class="str">"README.md"</span><span class="op">)</span><span class="op">)</span> <span class="key">as</span> <span class="nam">readmefile</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t">        <span class="key">return</span> <span class="nam">solara</span><span class="op">.</span><span class="nam">Markdown</span><span class="op">(</span><span class="str">"\n"</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">readmefile</span><span class="op">.</span><span class="nam">readlines</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="op">@</span><span class="nam">solara</span><span class="op">.</span><span class="nam">component</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="key">def</span> <span class="nam">historicalletters</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t">    <span class="key">return</span> <span class="nam">historical_letters_page</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="op">@</span><span class="nam">solara</span><span class="op">.</span><span class="nam">component</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="key">def</span> <span class="nam">knowledgespread</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">    <span class="key">return</span> <span class="nam">knowledgespread_page</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t"><span class="nam">routes</span> <span class="op">=</span> <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">    <span class="nam">solara</span><span class="op">.</span><span class="nam">Route</span><span class="op">(</span><span class="nam">path</span><span class="op">=</span><span class="str">"/"</span><span class="op">,</span> <span class="nam">component</span><span class="op">=</span><span class="nam">Home</span><span class="op">,</span> <span class="nam">label</span><span class="op">=</span><span class="str">"Simulation methods"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">    <span class="nam">solara</span><span class="op">.</span><span class="nam">Route</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">path</span><span class="op">=</span><span class="str">"historicalletters"</span><span class="op">,</span> <span class="nam">component</span><span class="op">=</span><span class="nam">historicalletters</span><span class="op">,</span> <span class="nam">label</span><span class="op">=</span><span class="str">"Historical Letters"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="nam">solara</span><span class="op">.</span><span class="nam">Route</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="nam">path</span><span class="op">=</span><span class="str">"knowledgespread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="nam">component</span><span class="op">=</span><span class="nam">knowledgespread</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">label</span><span class="op">=</span><span class="str">"Knowledge Spread"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">    <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t"><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_2e9db29e074df228_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_utils_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_d0052f7b3fb6bc9f___init___py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_124ad581c8e87a79_SimpleContinuousModule_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,51 +1,56 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-rraannddoommlleetttteerrss//SSiimmpplleeCCoonnttiinnuuoouussMMoodduullee..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//iinntteerrffaaccee..ppyy::
+00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 2244 ssttaatteemmeennttss ?  00 rruunn 2244 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 1155 ssttaatteemmeennttss ?  00 rruunn 1155 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
-_1import mesa 
-_2 
+26 17:47 +0200
+_1"""Solara interface for all simulations.""" 
+_2from pathlib import Path 
 _3 
-_4class SimpleCanvas(mesa.visualization.VisualizationElement): 
-_5 """Display agents on a map background. No coordinates.""" 
-_6 local_includes = ["randomletters/simple_continuous_canvas.js"] 
-_7 local_css_includes = ["randomletters/map.png"] 
-_8 portrayal_method = None 
-_9 canvas_height = 720 
-_1_0 canvas_width = 1280 
-_1_1 
-_1_2 def __init__(self, portrayal_method, canvas_height=720, canvas_width=1280): 
-_1_3 """ 
-_1_4 Instantiate a new SimpleCanvas 
-_1_5 """ 
-_1_6 self.portrayal_method = portrayal_method 
-_1_7 self.canvas_height = canvas_height 
-_1_8 self.canvas_width = canvas_width 
-_1_9 new_element = "new Simple_Continuous_Module({}, {})".format( 
-_2_0 self.canvas_width, self.canvas_height 
-_2_1 ) 
-_2_2 self.js_code = "elements.push(" + new_element + ");" 
-_2_3 
-_2_4 def render(self, model): 
-_2_5 """How to render the agents""" 
-_2_6 space_state = [] 
-_2_7 for obj in model.schedule.agents: 
-_2_8 portrayal = self.portrayal_method(obj) 
-_2_9 x, y = obj.pos 
-_3_0 x = (x - model.space.x_min) / (model.space.x_max - model.space.x_min) 
-_3_1 y = (y - model.space.y_min) / (model.space.y_max - model.space.y_min) 
-_3_2 portrayal["x"] = x 
-_3_3 portrayal["y"] = y 
-_3_4 space_state.append(portrayal) 
-_3_5 return space_state 
+_4import solara 
+_5 
+_6from scicom.historicalletters.interface import page as
+historical_letters_page 
+_7from scicom.knowledgespread.interface import page as knowledgespread_page 
+_8 
+_9 
+_1_0@solara.component 
+_1_1def Home(): 
+_1_2 # load about markdown file in the same directory 
+_1_3 with Path.open(Path(Path(__file__).parent.parent.parent.resolve(),
+"README.md")) as readmefile: 
+_1_4 return solara.Markdown("\n".join(readmefile.readlines())) 
+_1_5 
+_1_6 
+_1_7@solara.component 
+_1_8def historicalletters(): 
+_1_9 return historical_letters_page 
+_2_0 
+_2_1 
+_2_2@solara.component 
+_2_3def knowledgespread(): 
+_2_4 return knowledgespread_page 
+_2_5 
+_2_6 
+_2_7routes = [ 
+_2_8 solara.Route(path="/", component=Home, label="Simulation methods"), 
+_2_9 solara.Route( 
+_3_0 path="historicalletters", component=historicalletters, label="Historical
+Letters", 
+_3_1 ), 
+_3_2 solara.Route( 
+_3_3 path="knowledgespread", 
+_3_4 component=knowledgespread, 
+_3_5 label="Knowledge Spread", 
+_3_6 ), 
+_3_7] 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
+26 17:47 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/d_d0052f7b3fb6bc9f_agents_py.html` & `scicom-0.4.1/tests/reports/html/d_a9eaaac38d807e21_interface_py.html`

 * *Files 13% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 <!DOCTYPE html>
 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
-    <title>Coverage for .tox/p311/lib/python3.11/site-packages/scicom/randomletters/agents.py: 0%</title>
+    <title>Coverage for .tox/p311/lib/python3.10/site-packages/scicom/historicalletters/interface.py: 0%</title>
     <link rel="icon" sizes="32x32" href="favicon_32.png">
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="pyfile">
 <header>
     <div class="content">
         <h1>
-            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.11/site-packages/scicom/randomletters/agents.py</b>:
+            <span class="text">Coverage for </span><b>.tox/p311/lib/python3.10/site-packages/scicom/historicalletters/interface.py</b>:
             <span class="pc_cov">0%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
@@ -50,177 +50,172 @@
                     <p>
                         <kbd>?</kbd> &nbsp; show/hide this help
                     </p>
                 </div>
             </div>
         </aside>
         <h2>
-            <span class="text">74 statements &nbsp;</span>
+            <span class="text">39 statements &nbsp;</span>
             <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">0<span class="text"> run</span></button>
-            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">74<span class="text"> missing</span></button>
+            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">39<span class="text"> missing</span></button>
             <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
         </h2>
         <p class="text">
-            <a id="prevFileLink" class="nav" href="d_d0052f7b3fb6bc9f___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_d0052f7b3fb6bc9f_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
         <aside class="hidden">
             <button type="button" class="button_next_chunk" data-shortcut="j"/>
             <button type="button" class="button_prev_chunk" data-shortcut="k"/>
             <button type="button" class="button_top_of_page" data-shortcut="0"/>
             <button type="button" class="button_first_chunk" data-shortcut="1"/>
             <button type="button" class="button_prev_file" data-shortcut="["/>
             <button type="button" class="button_next_file" data-shortcut="]"/>
             <button type="button" class="button_to_index" data-shortcut="u"/>
             <button type="button" class="button_show_hide_help" data-shortcut="?"/>
         </aside>
     </div>
 </header>
 <main id="source">
-    <p class="mis show_mis"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="str">"""Define the solara interface to run and control the HistoricalLetters model."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="key">from</span> <span class="nam">__future__</span> <span class="key">import</span> <span class="nam">annotations</span>&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">class</span> <span class="nam">LetterAgent</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">    <span class="str">"""An agent with fixed initial start position.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="str">  </span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="str">    Each agent has a personal topic vector representing</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="str">    the shares the agent has of topics 1 to 10 with values</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="str">    between 0 and 1.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="str">    Each agent has two different ranges, moveRange for deciding</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="str">    to move to another agents position, and letterRange to find</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="str">    potential correspondence partners. In addition a threshold</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="str">    value determines the necessary similarity between topic vectors</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t"><span class="str">    to send a letter or not.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="str">    Received and send letters are kept track of with two additional</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="str">    internal variables.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">        <span class="nam">model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t">        <span class="nam">pos</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">        <span class="nam">topicVec</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="nam">updateTopic</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="nam">moveRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="nam">letterRange</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="nam">minSep</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="nam">threshold</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">        <span class="str">"""Create letter with position, topic vector and parameters."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">array</span><span class="op">(</span><span class="nam">pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">updateTopic</span> <span class="op">=</span> <span class="nam">updateTopic</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">threshold</span> <span class="op">=</span> <span class="nam">threshold</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span> <span class="op">=</span> <span class="nam">moveRange</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span> <span class="op">=</span> <span class="nam">letterRange</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">lettersReceived</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">lettersSend</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersSend</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">    <span class="key">def</span> <span class="nam">move</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="str">"""The agent can randomly move to neighboring positions."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">            <span class="nam">weights</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">            <span class="nam">possible_steps</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">            <span class="key">for</span> <span class="nam">n</span> <span class="key">in</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">                <span class="nam">possible_steps</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">n</span><span class="op">.</span><span class="nam">pos</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">                <span class="nam">weights</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">n</span><span class="op">.</span><span class="nam">lettersReceived</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">            <span class="nam">move</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="op">[</span><span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">            <span class="key">if</span> <span class="nam">move</span> <span class="op">==</span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">                <span class="nam">new_position</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">possible_steps</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">move_agent</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">new_position</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">    <span class="key">def</span> <span class="nam">sendLetter</span><span class="op">(</span><span class="nam">self</span><span class="op">,</span> <span class="nam">neighbors</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">        <span class="str">"""Sending a letter based on an urn model."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">        <span class="nam">possibleRec</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">        <span class="nam">senders</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">lettersReceived</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">        <span class="nam">receivers</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">lettersSend</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">        <span class="nam">possibleRec</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">senders</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">        <span class="nam">possibleRec</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">receivers</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">        <span class="key">if</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">            <span class="nam">neighborRec</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">            <span class="key">for</span> <span class="nam">n</span> <span class="key">in</span> <span class="nam">neighbors</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">                <span class="key">if</span> <span class="nam">n</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">                    <span class="nam">nMult</span> <span class="op">=</span> <span class="op">[</span><span class="nam">n</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span> <span class="op">*</span> <span class="nam">n</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">                    <span class="nam">neighborRec</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">nMult</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">                <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">                    <span class="nam">neighborRec</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">n</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="nam">possibleRec</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">neighborRec</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="key">if</span> <span class="nam">possibleRec</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">            <span class="nam">recipientNr</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">possibleRec</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">            <span class="nam">recipient</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">agents</span><span class="op">[</span><span class="nam">recipientNr</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">            <span class="nam">topicChoices</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">            <span class="nam">topicChoices</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">recipient</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">copy</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">            <span class="key">if</span> <span class="nam">topicChoices</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">                <span class="nam">randix</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">choice</span><span class="op">(</span><span class="nam">list</span><span class="op">(</span><span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">topicChoices</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">                <span class="nam">initTopic</span> <span class="op">=</span> <span class="nam">topicChoices</span><span class="op">[</span><span class="nam">randix</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">            <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">                <span class="nam">initTopic</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">            <span class="nam">distance</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">linalg</span><span class="op">.</span><span class="nam">norm</span><span class="op">(</span><span class="nam">recipient</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">-</span> <span class="nam">initTopic</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">            <span class="key">if</span> <span class="nam">distance</span> <span class="op">&lt;</span> <span class="nam">self</span><span class="op">.</span><span class="nam">threshold</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">                <span class="nam">recipient</span><span class="op">.</span><span class="nam">numLettersReceived</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">                <span class="nam">recipient</span><span class="op">.</span><span class="nam">lettersReceived</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersSend</span> <span class="op">+=</span> <span class="num">1</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">lettersSend</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">recipient</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">                <span class="com"># Update model social network</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">G</span><span class="op">.</span><span class="nam">add_edge</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">recipient</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">G</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span><span class="op">[</span><span class="str">'numLettersSend'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">numLettersSend</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">G</span><span class="op">.</span><span class="nam">nodes</span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="nam">recipient</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">]</span><span class="op">[</span><span class="str">'numLettersReceived'</span><span class="op">]</span> <span class="op">=</span> <span class="nam">recipient</span><span class="op">.</span><span class="nam">numLettersReceived</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">                <span class="com"># Update agents topic vector</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">                <span class="nam">updateTopicVec</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">+</span> <span class="nam">self</span><span class="op">.</span><span class="nam">updateTopic</span> <span class="op">*</span> <span class="nam">np</span><span class="op">.</span><span class="nam">random</span><span class="op">.</span><span class="nam">uniform</span><span class="op">(</span><span class="num">0</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="nam">recipient</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">-</span> <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">letterLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">                    <span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">recipient</span><span class="op">.</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span> <span class="nam">recipient</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span> <span class="nam">updateTopicVec</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">schedule</span><span class="op">.</span><span class="nam">steps</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">topicLedger</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">                    <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">                <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">                <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">updateTopicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">    <span class="key">def</span> <span class="nam">step</span><span class="op">(</span><span class="nam">self</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="nam">neighborsMove</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">moveRange</span><span class="op">,</span> <span class="key">False</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">        <span class="nam">neighborsSend</span> <span class="op">=</span> <span class="nam">self</span><span class="op">.</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">.</span><span class="nam">get_neighbors</span><span class="op">(</span><span class="nam">self</span><span class="op">.</span><span class="nam">pos</span><span class="op">,</span> <span class="nam">self</span><span class="op">.</span><span class="nam">letterRange</span><span class="op">,</span> <span class="key">False</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">sendLetter</span><span class="op">(</span><span class="nam">neighborsSend</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">move</span><span class="op">(</span><span class="nam">neighborsMove</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t"><span class="key">class</span> <span class="nam">LetterNode</span><span class="op">(</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Agent</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">    <span class="str">"""An agent representing the network node.</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">typing</span> <span class="key">import</span> <span class="nam">TYPE_CHECKING</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t"><span class="key">if</span> <span class="nam">TYPE_CHECKING</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t">    <span class="key">import</span> <span class="nam">mesa</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">import</span> <span class="nam">contextily</span> <span class="key">as</span> <span class="nam">cx</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="key">import</span> <span class="nam">matplotlib</span><span class="op">.</span><span class="nam">pyplot</span> <span class="key">as</span> <span class="nam">plt</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">import</span> <span class="nam">numpy</span> <span class="key">as</span> <span class="nam">np</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t"><span class="key">import</span> <span class="nam">solara</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t"><span class="key">from</span> <span class="nam">matplotlib</span> <span class="key">import</span> <span class="nam">colors</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="key">from</span> <span class="nam">mesa</span><span class="op">.</span><span class="nam">experimental</span><span class="op">.</span><span class="nam">jupyter_viz</span> <span class="key">import</span> <span class="nam">JupyterViz</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">agents</span> <span class="key">import</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t">        <span class="nam">RegionAgent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t">        <span class="nam">SenderAgent</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">model</span> <span class="key">import</span> <span class="nam">HistoricalLetters</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t"><span class="key">from</span> <span class="nam">scicom</span><span class="op">.</span><span class="nam">historicalletters</span><span class="op">.</span><span class="nam">server</span> <span class="key">import</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t">        <span class="nam">topic_draw</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="nam">model_params</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t">    <span class="str">"population"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderInt"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">50</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Number of agents"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">200</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">10</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="str">"useSocialNetwork"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"Select"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Choose if an initial social network exists."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">        <span class="str">"values"</span><span class="op">:</span> <span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">    <span class="str">"useActivation"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"Select"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="key">False</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Choose if agents have heterogeneous acitvations."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">        <span class="str">"values"</span><span class="op">:</span> <span class="op">[</span><span class="key">True</span><span class="op">,</span> <span class="key">False</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">    <span class="str">"similarityThreshold"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderFloat"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">0.5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Threshold for similarity of topics."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">0.0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">1.0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">    <span class="str">"moveRange"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderFloat"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">0.05</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Range defining targets for movements."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">0.0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">0.5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">    <span class="str">"letterRange"</span><span class="op">:</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">        <span class="str">"type"</span><span class="op">:</span> <span class="str">"SliderFloat"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">        <span class="str">"value"</span><span class="op">:</span> <span class="num">0.2</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">        <span class="str">"label"</span><span class="op">:</span> <span class="str">"Range for sending letters."</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">        <span class="str">"min"</span><span class="op">:</span> <span class="num">0.0</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">        <span class="str">"max"</span><span class="op">:</span> <span class="num">0.5</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">        <span class="str">"step"</span><span class="op">:</span> <span class="num">0.1</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">    <span class="op">}</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t"><span class="key">def</span> <span class="nam">has_main_topic</span><span class="op">(</span><span class="nam">data</span><span class="op">:</span><span class="nam">dict</span><span class="op">)</span> <span class="op">-></span> <span class="nam">tuple</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">        <span class="str">"""Return weighted average topics of agents in region."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">        <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">data</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">            <span class="nam">topics</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">0</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">data</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">            <span class="nam">total</span> <span class="op">=</span> <span class="op">[</span><span class="nam">y</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="key">for</span> <span class="nam">x</span><span class="op">,</span> <span class="nam">y</span> <span class="key">in</span> <span class="nam">data</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">            <span class="nam">weight</span> <span class="op">=</span> <span class="op">[</span><span class="nam">x</span> <span class="op">/</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="key">for</span> <span class="nam">x</span> <span class="key">in</span> <span class="nam">total</span><span class="op">]</span> <span class="key">if</span> <span class="nam">sum</span><span class="op">(</span><span class="nam">total</span><span class="op">)</span> <span class="op">></span> <span class="num">0</span> <span class="key">else</span> <span class="op">[</span><span class="num">1</span> <span class="op">/</span> <span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">]</span> <span class="op">*</span> <span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">            <span class="nam">mixed_colors</span> <span class="op">=</span> <span class="nam">np</span><span class="op">.</span><span class="nam">sum</span><span class="op">(</span><span class="op">[</span><span class="nam">np</span><span class="op">.</span><span class="nam">multiply</span><span class="op">(</span><span class="nam">weight</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">,</span> <span class="nam">topics</span><span class="op">[</span><span class="nam">i</span><span class="op">]</span><span class="op">)</span> <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">range</span><span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">topics</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">,</span> <span class="nam">axis</span><span class="op">=</span><span class="num">0</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">            <span class="key">return</span> <span class="nam">np</span><span class="op">.</span><span class="nam">subtract</span><span class="op">(</span><span class="op">(</span><span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">,</span> <span class="num">1</span><span class="op">)</span><span class="op">,</span> <span class="nam">mixed_colors</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">        <span class="key">return</span> <span class="op">(</span><span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">,</span> <span class="num">0.5</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t"><span class="key">def</span> <span class="nam">make_geospace</span><span class="op">(</span><span class="nam">model</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Model</span><span class="op">,</span> <span class="nam">agent_portrayal</span><span class="op">:</span><span class="nam">dict</span> <span class="op">|</span> <span class="key">None</span> <span class="op">=</span> <span class="key">None</span><span class="op">)</span> <span class="op">-></span> <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureMatplotlib</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t">    <span class="str">"""Create the geo figure."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t">    <span class="nam">space_fig</span><span class="op">,</span> <span class="nam">space_ax</span> <span class="op">=</span> <span class="nam">plt</span><span class="op">.</span><span class="nam">subplots</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t">    <span class="com"># _draw_layers(model.space, space_ax)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">    <span class="nam">_draw_agents</span><span class="op">(</span><span class="nam">model</span><span class="op">.</span><span class="nam">space</span><span class="op">,</span> <span class="nam">space_ax</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t">    <span class="nam">space_ax</span><span class="op">.</span><span class="nam">set_axis_off</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t">    <span class="nam">solara</span><span class="op">.</span><span class="nam">FigureMatplotlib</span><span class="op">(</span><span class="nam">space_fig</span><span class="op">,</span> <span class="nam">format</span><span class="op">=</span><span class="str">"png"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t"><span class="key">def</span> <span class="nam">_draw_layers</span><span class="op">(</span><span class="nam">space</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Space</span><span class="op">,</span> <span class="nam">space_ax</span><span class="op">:</span><span class="nam">plt</span><span class="op">.</span><span class="nam">Axes</span><span class="op">)</span> <span class="op">-></span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">    <span class="str">"""Draw layers."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t"><span class="key">def</span> <span class="nam">_draw_agents</span><span class="op">(</span><span class="nam">space</span><span class="op">:</span><span class="nam">mesa</span><span class="op">.</span><span class="nam">Space</span><span class="op">,</span> <span class="nam">space_ax</span><span class="op">:</span><span class="nam">plt</span><span class="op">.</span><span class="nam">Axes</span><span class="op">)</span> <span class="op">-></span> <span class="nam">plt</span><span class="op">.</span><span class="nam">Axes</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">    <span class="str">"""Draw the Region and SenderAgents."""</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">    <span class="nam">region_agents</span> <span class="op">=</span> <span class="nam">space</span><span class="op">.</span><span class="nam">get_agents_as_GeoDataFrame</span><span class="op">(</span><span class="nam">agent_cls</span><span class="op">=</span><span class="nam">RegionAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">    <span class="nam">region_agents</span><span class="op">[</span><span class="str">"averageTopic"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">region_agents</span><span class="op">[</span><span class="str">"senders_in_region"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">        <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">has_main_topic</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">    <span class="nam">region_agents</span><span class="op">.</span><span class="nam">plot</span><span class="op">(</span><span class="nam">column</span><span class="op">=</span><span class="str">"averageTopic"</span><span class="op">,</span> <span class="nam">alpha</span><span class="op">=</span><span class="num">0.5</span><span class="op">,</span> <span class="nam">ax</span><span class="op">=</span><span class="nam">space_ax</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">    <span class="nam">person_agents</span> <span class="op">=</span> <span class="nam">space</span><span class="op">.</span><span class="nam">get_agents_as_GeoDataFrame</span><span class="op">(</span><span class="nam">agent_cls</span><span class="op">=</span><span class="nam">SenderAgent</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">    <span class="nam">person_agents</span><span class="op">[</span><span class="str">"color"</span><span class="op">]</span> <span class="op">=</span> <span class="nam">person_agents</span><span class="op">[</span><span class="str">"topicVec"</span><span class="op">]</span><span class="op">.</span><span class="nam">apply</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">        <span class="key">lambda</span> <span class="nam">x</span><span class="op">:</span> <span class="nam">colors</span><span class="op">.</span><span class="nam">to_hex</span><span class="op">(</span><span class="nam">x</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">    <span class="nam">person_agents</span><span class="op">.</span><span class="nam">plot</span><span class="op">(</span><span class="nam">column</span><span class="op">=</span><span class="str">"color"</span><span class="op">,</span> <span class="nam">markersize</span><span class="op">=</span><span class="num">1</span><span class="op">,</span> <span class="nam">ax</span><span class="op">=</span><span class="nam">space_ax</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">    <span class="nam">space_ax</span><span class="op">.</span><span class="nam">set_xlim</span><span class="op">(</span><span class="op">[</span><span class="op">-</span><span class="num">1e6</span><span class="op">,</span> <span class="num">4e6</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">    <span class="nam">space_ax</span><span class="op">.</span><span class="nam">set_ylim</span><span class="op">(</span><span class="op">[</span><span class="num">4.3e6</span><span class="op">,</span> <span class="num">9.3e6</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">    <span class="nam">cx</span><span class="op">.</span><span class="nam">add_basemap</span><span class="op">(</span><span class="nam">space_ax</span><span class="op">,</span> <span class="nam">source</span><span class="op">=</span><span class="nam">cx</span><span class="op">.</span><span class="nam">providers</span><span class="op">.</span><span class="nam">CartoDB</span><span class="op">.</span><span class="nam">Positron</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
     <p class="pln"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t"><span class="str">    Only necessary for visualization purposes.</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">    <span class="key">def</span> <span class="nam">__init__</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">        <span class="nam">self</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">        <span class="nam">unique_id</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">        <span class="nam">model</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">        <span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">    <span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
-    <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t">        <span class="str">"""Create letter with position, topic vector and parameters."""</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t">        <span class="nam">super</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">__init__</span><span class="op">(</span><span class="nam">unique_id</span><span class="op">,</span> <span class="nam">model</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">topicVec</span> <span class="op">=</span> <span class="nam">topicVec</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">lettersReceived</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
-    <p class="mis show_mis"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t">        <span class="nam">self</span><span class="op">.</span><span class="nam">lettersSend</span> <span class="op">=</span> <span class="num">0</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
+    <p class="mis show_mis"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t"><span class="nam">page</span> <span class="op">=</span> <span class="nam">JupyterViz</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">    <span class="nam">HistoricalLetters</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">    <span class="nam">model_params</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">    <span class="nam">measures</span><span class="op">=</span><span class="op">[</span><span class="str">"Movements"</span><span class="op">,</span> <span class="str">"Clusters"</span><span class="op">,</span> <span class="str">"Letters"</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">    <span class="nam">name</span><span class="op">=</span><span class="str">"Historical Letters ABM"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">    <span class="nam">agent_portrayal</span><span class="op">=</span><span class="nam">topic_draw</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t">    <span class="nam">space_drawer</span><span class="op">=</span><span class="nam">make_geospace</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
+    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
 </main>
 <footer>
     <div class="content">
         <p>
-            <a id="prevFileLink" class="nav" href="d_d0052f7b3fb6bc9f___init___py.html">&#xab; prev</a> &nbsp; &nbsp;
+            <a id="prevFileLink" class="nav" href="d_a9eaaac38d807e21_agents_py.html">&#xab; prev</a> &nbsp; &nbsp;
             <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
-            <a id="nextFileLink" class="nav" href="d_d0052f7b3fb6bc9f_model_py.html">&#xbb; next</a>
+            <a id="nextFileLink" class="nav" href="d_a9eaaac38d807e21_model_py.html">&#xbb; next</a>
             &nbsp; &nbsp; &nbsp;
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-04-17 13:30 +0200
+            created at 2024-04-26 17:47 +0200
         </p>
     </div>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,151 +1,144 @@
-************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1111//ssiittee--ppaacckkaaggeess//sscciiccoomm//
-rraannddoommlleetttteerrss//aaggeennttss..ppyy:: 00%% ************
+************ CCoovveerraaggee ffoorr ..ttooxx//pp331111//lliibb//ppyytthhoonn33..1100//ssiittee--ppaacckkaaggeess//sscciiccoomm//
+hhiissttoorriiccaalllleetttteerrss//iinntteerrffaaccee..ppyy:: 00%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 r m x   toggle line displays
 j k   next/prev highlighted chunk
 0   (zero) top of page
 1   (one) first highlighted chunk
 [ ]   prev/next file
 u   up to the index
 ?   show/hide this help
-********** 7744 ssttaatteemmeennttss ?  00 rruunn 7744 mmiissssiinngg 00 eexxcclluuddeedd **********
+********** 3399 ssttaatteemmeennttss ?  00 rruunn 3399 mmiissssiinngg 00 eexxcclluuddeedd **********
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
-_1import mesa 
-_2import numpy as np 
+26 17:47 +0200
+_1"""Define the solara interface to run and control the HistoricalLetters
+model.""" 
+_2from __future__ import annotations 
 _3 
-_4 
-_5class LetterAgent(mesa.Agent): 
-_6 """An agent with fixed initial start position. 
-_7  
-_8 Each agent has a personal topic vector representing 
-_9 the shares the agent has of topics 1 to 10 with values 
-_1_0 between 0 and 1. 
-_1_1 Each agent has two different ranges, moveRange for deciding 
-_1_2 to move to another agents position, and letterRange to find 
-_1_3 potential correspondence partners. In addition a threshold 
-_1_4 value determines the necessary similarity between topic vectors 
-_1_5 to send a letter or not. 
-_1_6 
-_1_7 Received and send letters are kept track of with two additional 
-_1_8 internal variables. 
-_1_9 """ 
-_2_0 
-_2_1 def __init__( 
-_2_2 self, 
-_2_3 unique_id, 
-_2_4 model, 
-_2_5 pos, 
-_2_6 topicVec, 
-_2_7 updateTopic, 
-_2_8 moveRange, 
-_2_9 letterRange, 
-_3_0 minSep, 
-_3_1 threshold 
-_3_2 ): 
-_3_3 """Create letter with position, topic vector and parameters.""" 
-_3_4 super().__init__(unique_id, model) 
-_3_5 self.pos = np.array(pos) 
-_3_6 self.topicVec = topicVec 
-_3_7 self.updateTopic = updateTopic 
-_3_8 self.threshold = threshold 
-_3_9 self.moveRange = moveRange 
-_4_0 self.letterRange = letterRange 
-_4_1 self.topicLedger = [] 
-_4_2 self.lettersReceived = [] 
-_4_3 self.numLettersReceived = 0 
-_4_4 self.lettersSend = [] 
-_4_5 self.numLettersSend = 0 
-_4_6 
-_4_7 def move(self, neighbors): 
-_4_8 """The agent can randomly move to neighboring positions.""" 
-_4_9 if neighbors: 
-_5_0 weights = [] 
-_5_1 possible_steps = [] 
-_5_2 for n in neighbors: 
-_5_3 possible_steps.append(n.pos) 
-_5_4 weights.append(n.lettersReceived) 
-_5_5 move = np.random.choice([0, 0, 0, 0, 0, 0, 0, 1]) 
-_5_6 if move == 1: 
-_5_7 new_position = self.random.choice(possible_steps) 
-_5_8 self.model.space.move_agent(self, new_position) 
-_5_9 
-_6_0 def sendLetter(self, neighbors): 
-_6_1 """Sending a letter based on an urn model.""" 
-_6_2 possibleRec = [] 
-_6_3 senders = self.lettersReceived 
-_6_4 receivers = self.lettersSend 
-_6_5 possibleRec.extend(senders) 
-_6_6 possibleRec.extend(receivers) 
-_6_7 if neighbors: 
-_6_8 neighborRec = [] 
-_6_9 for n in neighbors: 
-_7_0 if n.numLettersReceived > 0: 
-_7_1 nMult = [n.unique_id] * n.numLettersReceived 
-_7_2 neighborRec.extend(nMult) 
-_7_3 else: 
-_7_4 neighborRec.append(n.unique_id) 
-_7_5 possibleRec.extend(neighborRec) 
-_7_6 if possibleRec: 
-_7_7 recipientNr = np.random.choice(possibleRec) 
-_7_8 recipient = self.model.schedule.agents[recipientNr] 
-_7_9 topicChoices = self.topicLedger.copy() 
-_8_0 topicChoices.extend(recipient.topicLedger.copy()) 
-_8_1 if topicChoices: 
-_8_2 randix = np.random.choice(list(range(len(topicChoices)))) 
-_8_3 initTopic = topicChoices[randix] 
-_8_4 else: 
-_8_5 initTopic = self.topicVec 
-_8_6 distance = np.linalg.norm(recipient.topicVec - initTopic) 
-_8_7 if distance < self.threshold: 
-_8_8 recipient.numLettersReceived += 1 
-_8_9 recipient.lettersReceived.append(self.unique_id) 
-_9_0 self.numLettersSend += 1 
-_9_1 self.lettersSend.append(recipient.unique_id) 
-_9_2 # Update model social network 
-_9_3 self.model.G.add_edge(self.unique_id, recipient.unique_id) 
-_9_4 self.model.G.nodes()[self.unique_id]['numLettersSend'] =
-self.numLettersSend 
-_9_5 self.model.G.nodes()[recipient.unique_id]['numLettersReceived'] =
-recipient.numLettersReceived 
-_9_6 # Update agents topic vector 
-_9_7 updateTopicVec = self.topicVec + self.updateTopic * np.random.uniform(0, 1)
-* (recipient.topicVec - self.topicVec) 
-_9_8 self.model.letterLedger.append( 
-_9_9 (self.unique_id, recipient.unique_id, self.pos, recipient.pos,
-updateTopicVec, self.model.schedule.steps) 
-_1_0_0 ) 
-_1_0_1 self.topicLedger.append( 
-_1_0_2 self.topicVec 
-_1_0_3 ) 
-_1_0_4 self.topicVec = updateTopicVec 
-_1_0_5 
-_1_0_6 def step(self): 
-_1_0_7 neighborsMove = self.model.space.get_neighbors(self.pos, self.moveRange,
-False) 
-_1_0_8 neighborsSend = self.model.space.get_neighbors(self.pos, self.letterRange,
-False) 
-_1_0_9 self.sendLetter(neighborsSend) 
-_1_1_0 self.move(neighborsMove) 
-_1_1_1 
-_1_1_2 
-_1_1_3class LetterNode(mesa.Agent): 
-_1_1_4 """An agent representing the network node. 
+_4from typing import TYPE_CHECKING 
+_5 
+_6if TYPE_CHECKING: 
+_7 import mesa 
+_8 
+_9import contextily as cx 
+_1_0import matplotlib.pyplot as plt 
+_1_1import numpy as np 
+_1_2import solara 
+_1_3from matplotlib import colors 
+_1_4from mesa.experimental.jupyter_viz import JupyterViz 
+_1_5 
+_1_6from scicom.historicalletters.agents import ( 
+_1_7 RegionAgent, 
+_1_8 SenderAgent, 
+_1_9) 
+_2_0from scicom.historicalletters.model import HistoricalLetters 
+_2_1from scicom.historicalletters.server import ( 
+_2_2 topic_draw, 
+_2_3) 
+_2_4 
+_2_5model_params = { 
+_2_6 "population": { 
+_2_7 "type": "SliderInt", 
+_2_8 "value": 50, 
+_2_9 "label": "Number of agents", 
+_3_0 "min": 10, 
+_3_1 "max": 200, 
+_3_2 "step": 10, 
+_3_3 }, 
+_3_4 "useSocialNetwork": { 
+_3_5 "type": "Select", 
+_3_6 "value": False, 
+_3_7 "label": "Choose if an initial social network exists.", 
+_3_8 "values": [True, False], 
+_3_9 }, 
+_4_0 "useActivation": { 
+_4_1 "type": "Select", 
+_4_2 "value": False, 
+_4_3 "label": "Choose if agents have heterogeneous acitvations.", 
+_4_4 "values": [True, False], 
+_4_5 }, 
+_4_6 "similarityThreshold": { 
+_4_7 "type": "SliderFloat", 
+_4_8 "value": 0.5, 
+_4_9 "label": "Threshold for similarity of topics.", 
+_5_0 "min": 0.0, 
+_5_1 "max": 1.0, 
+_5_2 "step": 0.1, 
+_5_3 }, 
+_5_4 "moveRange": { 
+_5_5 "type": "SliderFloat", 
+_5_6 "value": 0.05, 
+_5_7 "label": "Range defining targets for movements.", 
+_5_8 "min": 0.0, 
+_5_9 "max": 0.5, 
+_6_0 "step": 0.1, 
+_6_1 }, 
+_6_2 "letterRange": { 
+_6_3 "type": "SliderFloat", 
+_6_4 "value": 0.2, 
+_6_5 "label": "Range for sending letters.", 
+_6_6 "min": 0.0, 
+_6_7 "max": 0.5, 
+_6_8 "step": 0.1, 
+_6_9 }, 
+_7_0} 
+_7_1 
+_7_2def has_main_topic(data:dict) -> tuple: 
+_7_3 """Return weighted average topics of agents in region.""" 
+_7_4 if len(data) > 0: 
+_7_5 topics = [y[0] for x, y in data.items()] 
+_7_6 total = [y[1] for x, y in data.items()] 
+_7_7 weight = [x / sum(total) for x in total] if sum(total) > 0 else [1 / len
+(topics)] * len(topics) 
+_7_8 mixed_colors = np.sum([np.multiply(weight[i], topics[i]) for i in range(len
+(topics))], axis=0) 
+_7_9 return np.subtract((1, 1, 1), mixed_colors) 
+_8_0 return (0.5, 0.5, 0.5) 
+_8_1 
+_8_2 
+_8_3def make_geospace(model:mesa.Model, agent_portrayal:dict | None = None) -
+> solara.FigureMatplotlib: 
+_8_4 """Create the geo figure.""" 
+_8_5 space_fig, space_ax = plt.subplots() 
+_8_6 # _draw_layers(model.space, space_ax) 
+_8_7 _draw_agents(model.space, space_ax) 
+_8_8 space_ax.set_axis_off() 
+_8_9 solara.FigureMatplotlib(space_fig, format="png") 
+_9_0 
+_9_1 
+_9_2def _draw_layers(space:mesa.Space, space_ax:plt.Axes) -> None: 
+_9_3 """Draw layers.""" 
+_9_4 
+_9_5 
+_9_6def _draw_agents(space:mesa.Space, space_ax:plt.Axes) -> plt.Axes: 
+_9_7 """Draw the Region and SenderAgents.""" 
+_9_8 region_agents = space.get_agents_as_GeoDataFrame(agent_cls=RegionAgent) 
+_9_9 region_agents["averageTopic"] = region_agents["senders_in_region"].apply( 
+_1_0_0 lambda x: colors.to_hex(has_main_topic(x)), 
+_1_0_1 ) 
+_1_0_2 
+_1_0_3 region_agents.plot(column="averageTopic", alpha=0.5, ax=space_ax) 
+_1_0_4 
+_1_0_5 person_agents = space.get_agents_as_GeoDataFrame(agent_cls=SenderAgent) 
+_1_0_6 person_agents["color"] = person_agents["topicVec"].apply( 
+_1_0_7 lambda x: colors.to_hex(x), 
+_1_0_8 ) 
+_1_0_9 person_agents.plot(column="color", markersize=1, ax=space_ax) 
+_1_1_0 
+_1_1_1 space_ax.set_xlim([-1e6, 4e6]) 
+_1_1_2 space_ax.set_ylim([4.3e6, 9.3e6]) 
+_1_1_3 cx.add_basemap(space_ax, source=cx.providers.CartoDB.Positron) 
+_1_1_4 
 _1_1_5 
-_1_1_6 Only necessary for visualization purposes. 
-_1_1_7 """ 
-_1_1_8 
-_1_1_9 def __init__( 
-_1_2_0 self, 
-_1_2_1 unique_id, 
-_1_2_2 model, 
-_1_2_3 topicVec 
-_1_2_4 ): 
-_1_2_5 """Create letter with position, topic vector and parameters.""" 
-_1_2_6 super().__init__(unique_id, model) 
-_1_2_7 self.topicVec = topicVec 
-_1_2_8 self.lettersReceived = 0 
-_1_2_9 self.lettersSend = 0 
+_1_1_6 
+_1_1_7page = JupyterViz( 
+_1_1_8 HistoricalLetters, 
+_1_1_9 model_params, 
+_1_2_0 measures=["Movements", "Clusters", "Letters"], 
+_1_2_1 name="Historical Letters ABM", 
+_1_2_2 agent_portrayal=topic_draw, 
+_1_2_3 space_drawer=make_geospace, 
+_1_2_4) 
 _«_ _p_r_e_v     _&_H_a_t_;_ _i_n_d_e_x     _»_ _n_e_x_t       _c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-04-
-17 13:30 +0200
+26 17:47 +0200
```

### Comparing `scicom-0.4.0/tests/reports/html/index.html` & `scicom-0.4.1/tests/reports/html/index.html`

 * *Files 8% similar despite different names*

```diff
@@ -7,15 +7,15 @@
     <link rel="stylesheet" href="style.css" type="text/css">
     <script type="text/javascript" src="coverage_html.js" defer></script>
 </head>
 <body class="indexfile">
 <header>
     <div class="content">
         <h1>Coverage report:
-            <span class="pc_cov">46%</span>
+            <span class="pc_cov">47%</span>
         </h1>
         <aside id="help_panel_wrapper">
             <input id="help_panel_state" type="checkbox">
             <label for="help_panel_state">
                 <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
             </label>
             <div id="help_panel">
@@ -41,15 +41,15 @@
             </div>
         </aside>
         <form id="filter_container">
             <input id="filter" type="text" value="" placeholder="filter..." />
         </form>
         <p class="text">
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 15:09 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
 </header>
 <main id="index">
     <table class="index" data-sortable>
         <thead>
             <tr class="tablehead" title="Click to sort">
@@ -58,171 +58,171 @@
                 <th aria-sort="none" data-default-sort-order="descending" data-shortcut="m">missing</th>
                 <th aria-sort="none" data-default-sort-order="descending" data-shortcut="x">excluded</th>
                 <th class="right" aria-sort="none" data-shortcut="c">coverage</th>
             </tr>
         </thead>
         <tbody>
             <tr class="file">
-                <td class="name left"><a href="d_8a655f2681f565c9___init___py.html">.tox/p311/lib/python3.11/site-packages/scicom/__init__.py</a></td>
+                <td class="name left"><a href="d_48e31f30a7ef2afb___init___py.html">.tox/p312/lib/python3.10/site-packages/scicom/__init__.py</a></td>
                 <td>0</td>
                 <td>0</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 0">100%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_277402163e1a7589___init___py.html">.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/__init__.py</a></td>
+                <td class="name left"><a href="d_299ddae0d2804fc5___init___py.html">.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/__init__.py</a></td>
                 <td>0</td>
                 <td>0</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 0">100%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_277402163e1a7589_agents_py.html">.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/agents.py</a></td>
-                <td>115</td>
-                <td>8</td>
+                <td class="name left"><a href="d_299ddae0d2804fc5_agents_py.html">.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/agents.py</a></td>
+                <td>114</td>
+                <td>9</td>
                 <td>0</td>
-                <td class="right" data-ratio="107 115">93%</td>
+                <td class="right" data-ratio="105 114">92%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_277402163e1a7589_interface_py.html">.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/interface.py</a></td>
+                <td class="name left"><a href="d_299ddae0d2804fc5_interface_py.html">.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/interface.py</a></td>
                 <td>39</td>
                 <td>39</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 39">0%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_277402163e1a7589_model_py.html">.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/model.py</a></td>
-                <td>110</td>
+                <td class="name left"><a href="d_299ddae0d2804fc5_model_py.html">.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/model.py</a></td>
+                <td>115</td>
                 <td>5</td>
                 <td>0</td>
-                <td class="right" data-ratio="105 110">95%</td>
+                <td class="right" data-ratio="110 115">96%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_277402163e1a7589_server_py.html">.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/server.py</a></td>
+                <td class="name left"><a href="d_299ddae0d2804fc5_server_py.html">.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/server.py</a></td>
                 <td>22</td>
                 <td>0</td>
                 <td>0</td>
                 <td class="right" data-ratio="22 22">100%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_277402163e1a7589_space_py.html">.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/space.py</a></td>
+                <td class="name left"><a href="d_299ddae0d2804fc5_space_py.html">.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/space.py</a></td>
                 <td>27</td>
                 <td>0</td>
                 <td>0</td>
                 <td class="right" data-ratio="27 27">100%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_277402163e1a7589_utils_py.html">.tox/p311/lib/python3.11/site-packages/scicom/historicalletters/utils.py</a></td>
+                <td class="name left"><a href="d_299ddae0d2804fc5_utils_py.html">.tox/p312/lib/python3.10/site-packages/scicom/historicalletters/utils.py</a></td>
                 <td>39</td>
                 <td>0</td>
                 <td>0</td>
                 <td class="right" data-ratio="39 39">100%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_8a655f2681f565c9_interface_py.html">.tox/p311/lib/python3.11/site-packages/scicom/interface.py</a></td>
+                <td class="name left"><a href="d_48e31f30a7ef2afb_interface_py.html">.tox/p312/lib/python3.10/site-packages/scicom/interface.py</a></td>
                 <td>15</td>
                 <td>15</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 15">0%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_2e9db29e074df228_SimpleContinuousModule_py.html">.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/SimpleContinuousModule.py</a></td>
+                <td class="name left"><a href="d_ad23a1665840e904_SimpleContinuousModule_py.html">.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/SimpleContinuousModule.py</a></td>
                 <td>23</td>
                 <td>23</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 23">0%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_2e9db29e074df228___init___py.html">.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/__init__.py</a></td>
+                <td class="name left"><a href="d_ad23a1665840e904___init___py.html">.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/__init__.py</a></td>
                 <td>0</td>
                 <td>0</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 0">100%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_2e9db29e074df228_agents_py.html">.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/agents.py</a></td>
+                <td class="name left"><a href="d_ad23a1665840e904_agents_py.html">.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/agents.py</a></td>
                 <td>71</td>
                 <td>71</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 71">0%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_2e9db29e074df228_interface_py.html">.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/interface.py</a></td>
+                <td class="name left"><a href="d_ad23a1665840e904_interface_py.html">.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/interface.py</a></td>
                 <td>5</td>
                 <td>5</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 5">0%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_2e9db29e074df228_model_py.html">.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/model.py</a></td>
+                <td class="name left"><a href="d_ad23a1665840e904_model_py.html">.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/model.py</a></td>
                 <td>71</td>
                 <td>71</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 71">0%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_2e9db29e074df228_server_py.html">.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/server.py</a></td>
+                <td class="name left"><a href="d_ad23a1665840e904_server_py.html">.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/server.py</a></td>
                 <td>69</td>
                 <td>69</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 69">0%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_2e9db29e074df228_utils_py.html">.tox/p311/lib/python3.11/site-packages/scicom/knowledgespread/utils.py</a></td>
+                <td class="name left"><a href="d_ad23a1665840e904_utils_py.html">.tox/p312/lib/python3.10/site-packages/scicom/knowledgespread/utils.py</a></td>
                 <td>127</td>
                 <td>127</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 127">0%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_8a655f2681f565c9_run_py.html">.tox/p311/lib/python3.11/site-packages/scicom/run.py</a></td>
+                <td class="name left"><a href="d_48e31f30a7ef2afb_run_py.html">.tox/p312/lib/python3.10/site-packages/scicom/run.py</a></td>
                 <td>10</td>
                 <td>10</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 10">0%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_3142edd200b00bad___init___py.html">.tox/p311/lib/python3.11/site-packages/scicom/utilities/__init__.py</a></td>
+                <td class="name left"><a href="d_b133a5f21d483f41___init___py.html">.tox/p312/lib/python3.10/site-packages/scicom/utilities/__init__.py</a></td>
                 <td>0</td>
                 <td>0</td>
                 <td>0</td>
                 <td class="right" data-ratio="0 0">100%</td>
             </tr>
             <tr class="file">
-                <td class="name left"><a href="d_3142edd200b00bad_statistics_py.html">.tox/p311/lib/python3.11/site-packages/scicom/utilities/statistics.py</a></td>
-                <td>122</td>
-                <td>24</td>
+                <td class="name left"><a href="d_b133a5f21d483f41_statistics_py.html">.tox/p312/lib/python3.10/site-packages/scicom/utilities/statistics.py</a></td>
+                <td>106</td>
+                <td>9</td>
                 <td>0</td>
-                <td class="right" data-ratio="98 122">80%</td>
+                <td class="right" data-ratio="97 106">92%</td>
             </tr>
         </tbody>
         <tfoot>
             <tr class="total">
                 <td class="name left">Total</td>
-                <td>865</td>
-                <td>467</td>
+                <td>853</td>
+                <td>453</td>
                 <td>0</td>
-                <td class="right" data-ratio="398 865">46%</td>
+                <td class="right" data-ratio="400 853">47%</td>
             </tr>
         </tfoot>
     </table>
     <p id="no_rows">
         No items found using the specified filter.
     </p>
 </main>
 <footer>
     <div class="content">
         <p>
             <a class="nav" href="https://coverage.readthedocs.io/en/7.4.4">coverage.py v7.4.4</a>,
-            created at 2024-05-15 15:09 +0200
+            created at 2024-05-28 12:02 +0200
         </p>
     </div>
     <aside class="hidden">
-        <a id="prevFileLink" class="nav" href="d_3142edd200b00bad_statistics_py.html"/>
-        <a id="nextFileLink" class="nav" href="d_8a655f2681f565c9___init___py.html"/>
+        <a id="prevFileLink" class="nav" href="d_b133a5f21d483f41_statistics_py.html"/>
+        <a id="nextFileLink" class="nav" href="d_48e31f30a7ef2afb___init___py.html"/>
         <button type="button" class="button_prev_file" data-shortcut="["/>
         <button type="button" class="button_next_file" data-shortcut="]"/>
         <button type="button" class="button_show_hide_help" data-shortcut="?"/>
     </aside>
 </footer>
 </body>
 </html>
```

#### html2text {}

```diff
@@ -1,51 +1,51 @@
-************ CCoovveerraaggee rreeppoorrtt:: 4466%% ************
+************ CCoovveerraaggee rreeppoorrtt:: 4477%% ************
 ??[Show/hide keyboard shortcuts]
 Shortcuts on this page
 n s m x c   change column sorting
 [ ]   prev/next file
 ?   show/hide this help
 [                    ]
-_c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-15 15:09 +0200
+_c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-28 12:02 +0200
 MMoodduullee                                  ssttaatteemmeennttss mmiissssiinngg eexxcclluuddeedd ccoovveerraaggee
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 0          0       0        100%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 0          0       0        100%
 _s_c_i_c_o_m_/_____i_n_i_t_____._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 0          0       0        100%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 0          0       0        100%
 _s_c_i_c_o_m_/_h_i_s_t_o_r_i_c_a_l_l_e_t_t_e_r_s_/_____i_n_i_t_____._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 115        8       0        93%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 114        9       0        92%
 _s_c_i_c_o_m_/_h_i_s_t_o_r_i_c_a_l_l_e_t_t_e_r_s_/_a_g_e_n_t_s_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 39         39      0        0%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 39         39      0        0%
 _s_c_i_c_o_m_/_h_i_s_t_o_r_i_c_a_l_l_e_t_t_e_r_s_/_i_n_t_e_r_f_a_c_e_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 110        5       0        95%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 115        5       0        96%
 _s_c_i_c_o_m_/_h_i_s_t_o_r_i_c_a_l_l_e_t_t_e_r_s_/_m_o_d_e_l_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 22         0       0        100%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 22         0       0        100%
 _s_c_i_c_o_m_/_h_i_s_t_o_r_i_c_a_l_l_e_t_t_e_r_s_/_s_e_r_v_e_r_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 27         0       0        100%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 27         0       0        100%
 _s_c_i_c_o_m_/_h_i_s_t_o_r_i_c_a_l_l_e_t_t_e_r_s_/_s_p_a_c_e_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 39         0       0        100%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 39         0       0        100%
 _s_c_i_c_o_m_/_h_i_s_t_o_r_i_c_a_l_l_e_t_t_e_r_s_/_u_t_i_l_s_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 15         15      0        0%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 15         15      0        0%
 _s_c_i_c_o_m_/_i_n_t_e_r_f_a_c_e_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/
 _s_c_i_c_o_m_/_k_n_o_w_l_e_d_g_e_s_p_r_e_a_d_/                 23         23      0        0%
 _S_i_m_p_l_e_C_o_n_t_i_n_u_o_u_s_M_o_d_u_l_e_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 0          0       0        100%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 0          0       0        100%
 _s_c_i_c_o_m_/_k_n_o_w_l_e_d_g_e_s_p_r_e_a_d_/_____i_n_i_t_____._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 71         71      0        0%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 71         71      0        0%
 _s_c_i_c_o_m_/_k_n_o_w_l_e_d_g_e_s_p_r_e_a_d_/_a_g_e_n_t_s_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 5          5       0        0%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 5          5       0        0%
 _s_c_i_c_o_m_/_k_n_o_w_l_e_d_g_e_s_p_r_e_a_d_/_i_n_t_e_r_f_a_c_e_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 71         71      0        0%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 71         71      0        0%
 _s_c_i_c_o_m_/_k_n_o_w_l_e_d_g_e_s_p_r_e_a_d_/_m_o_d_e_l_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 69         69      0        0%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 69         69      0        0%
 _s_c_i_c_o_m_/_k_n_o_w_l_e_d_g_e_s_p_r_e_a_d_/_s_e_r_v_e_r_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 127        127     0        0%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 127        127     0        0%
 _s_c_i_c_o_m_/_k_n_o_w_l_e_d_g_e_s_p_r_e_a_d_/_u_t_i_l_s_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 10         10      0        0%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 10         10      0        0%
 _s_c_i_c_o_m_/_r_u_n_._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 0          0       0        100%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 0          0       0        100%
 _s_c_i_c_o_m_/_u_t_i_l_i_t_i_e_s_/_____i_n_i_t_____._p_y
-_._t_o_x_/_p_3_1_1_/_l_i_b_/_p_y_t_h_o_n_3_._1_1_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 122        24      0        80%
+_._t_o_x_/_p_3_1_2_/_l_i_b_/_p_y_t_h_o_n_3_._1_0_/_s_i_t_e_-_p_a_c_k_a_g_e_s_/ 106        9       0        92%
 _s_c_i_c_o_m_/_u_t_i_l_i_t_i_e_s_/_s_t_a_t_i_s_t_i_c_s_._p_y
-Total                                   865        467     0        46%
+Total                                   853        453     0        47%
 No items found using the specified filter.
-_c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-15 15:09 +0200
+_c_o_v_e_r_a_g_e_._p_y_ _v_7_._4_._4, created at 2024-05-28 12:02 +0200
```

### Comparing `scicom-0.4.0/tests/scicom/historicalletters/test_model.py` & `scicom-0.4.1/tests/scicom/historicalletters/test_model.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/scicom/historicalletters/test_server.py` & `scicom-0.4.1/tests/scicom/historicalletters/test_server.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/scicom/historicalletters/test_space.py` & `scicom-0.4.1/tests/scicom/historicalletters/test_space.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/scicom/historicalletters/test_statistics.py` & `scicom-0.4.1/tests/scicom/historicalletters/test_statistics.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/tests/scicom/historicalletters/test_utils.py` & `scicom-0.4.1/tests/scicom/historicalletters/test_utils.py`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/LICENSE.md` & `scicom-0.4.1/LICENSE.md`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/README.md` & `scicom-0.4.1/README.md`

 * *Files identical despite different names*

### Comparing `scicom-0.4.0/pyproject.toml` & `scicom-0.4.1/pyproject.toml`

 * *Files 2% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 [build-system]
 requires = ["hatchling"]
 build-backend = "hatchling.build"
 
 [project]
 name = "SciCom"
-version = "0.4.0"
+version = "0.4.1"
 authors = [
   { name="Bernardo S. Buarque", email="bernardo.buarque@motu.org.nz"},
   { name="Malte Vogl", email="vogl@gea.mpg.de"}
 ]
 description = "Simulating various aspects of scientific communication via Agent-based models."
 readme = "README.md"
 license = {file = "LICENSE.md"}
-requires-python = ">=3.8"
+requires-python = ">3.8"
 classifiers = [
     "Programming Language :: Python :: 3",
     "License :: OSI Approved :: MIT License",
     "Operating System :: OS Independent",
 ]
 
 dependencies = [
```

### Comparing `scicom-0.4.0/PKG-INFO` & `scicom-0.4.1/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.3
 Name: SciCom
-Version: 0.4.0
+Version: 0.4.1
 Summary: Simulating various aspects of scientific communication via Agent-based models.
 Project-URL: Project Homepage, https://modelsen.mpiwg-berlin.mpg.de
 Project-URL: Homepage, https://gitlab.gwdg.de/modelsen/sciencecommunicationmodels
 Project-URL: Issues, https://gitlab.gwdg.de/modelsen/sciencecommunicationmodels/-/issues
 Author-email: "Bernardo S. Buarque" <bernardo.buarque@motu.org.nz>, Malte Vogl <vogl@gea.mpg.de>
 License: MIT License
         
@@ -28,15 +28,15 @@
         OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
         SOFTWARE.
 License-File: AUTHORS.rst
 License-File: LICENSE.md
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python :: 3
-Requires-Python: >=3.8
+Requires-Python: >3.8
 Requires-Dist: altair
 Requires-Dist: geopandas
 Requires-Dist: igraph
 Requires-Dist: mesa-geo
 Requires-Dist: mesa>=2
 Requires-Dist: networkx
 Requires-Dist: numpy
```

